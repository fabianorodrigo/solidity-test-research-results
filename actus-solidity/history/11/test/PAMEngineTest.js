const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 8,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [237,62,6,212,212,157,22,7,172,125,189,71,168,81,86,254,204,101,238,61,205,58,40,110,117,51,195,2,235,6,96,204],"legalEntityIdCounterparty": [59,221,86,100,241,175,85,33,28,103,125,84,238,250,135,200,46,153,79,185,112,222,235,51,78,222,46,1,30,12,135,209],"dayCountConvention": 0,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 71,"statusDate": 15,"initialExchangeDate": 1336,"maturityDate": 41,"terminationDate": 101,"purchaseDate": 2446,"capitalizationEndDate": 1532892062,"cycleAnchorDateOfInterestPayment": 86401,"cycleAnchorDateOfRateReset": 120,"cycleAnchorDateOfScalingIndex": 3999,"cycleAnchorDateOfFee": 86399,"notionalPrincipal": 1,"nominalInterestRate": 60,"feeAccrued": 3999,"accruedInterest": 109,"rateMultiplier": 31,"rateSpread": 1532892064,"feeRate": 49,"nextResetRate": 3,"penaltyRate": 96,"premiumDiscountAtIED": 1461000,"priceAtPurchaseDate": 130,"cycleOfInterestPayment": {"i": 19,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 63,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 24,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 28,"p": 3,"s": 0,"isSet": false},"lifeCap": 2440589,"lifeFloor": 131,"periodCap": 6,"periodFloor": 24},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 14,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [119,141,185,55,163,158,183,250,14,124,101,196,180,71,229,167,203,179,8,242,253,74,250,165,187,17,102,176,56,251,63,148],"legalEntityIdCounterparty": [88,188,206,55,244,223,135,253,174,17,72,173,246,11,149,253,214,19,218,1,126,130,217,193,147,239,26,150,66,75,60,122],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 360,"statusDate": 80,"initialExchangeDate": 361,"maturityDate": 139,"terminationDate": 81,"purchaseDate": 364,"capitalizationEndDate": 11,"cycleAnchorDateOfInterestPayment": 146096,"cycleAnchorDateOfRateReset": 129,"cycleAnchorDateOfScalingIndex": 100,"cycleAnchorDateOfFee": 110,"notionalPrincipal": -1,"nominalInterestRate": 10,"feeAccrued": 32076,"accruedInterest": 364,"rateMultiplier": 119,"rateSpread": 15,"feeRate": 41,"nextResetRate": 8,"penaltyRate": 131,"premiumDiscountAtIED": 61,"priceAtPurchaseDate": 2446,"cycleOfInterestPayment": {"i": 101,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 1532892063,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 9999,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 361,"p": 5,"s": 1,"isSet": true},"lifeCap": 1461002,"lifeFloor": 9,"periodCap": 949,"periodFloor": 1969}, {"lastEventTime": 401,"contractStatus": 3,"timeFromLastEvent": 1461001,"nominalValue": 4801,"nominalAccrued": 399,"feeAccrued": 1970,"nominalRate": 2014223716,"interestScalingMultiplier": 27,"nominalScalingMultiplier": 4899,"contractRoleSign": 3}, 11,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 5,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [87,72,63,205,16,235,53,195,12,62,183,69,118,236,141,251,151,87,56,236,81,69,190,139,119,11,87,133,230,99,18,153],"legalEntityIdCounterparty": [50,77,4,179,198,219,1,233,20,217,183,178,91,4,68,197,53,234,187,162,55,203,158,39,142,49,92,151,67,130,237,150],"dayCountConvention": 4,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 32,"statusDate": 159,"initialExchangeDate": 101,"maturityDate": 361,"terminationDate": 160,"purchaseDate": 1338,"capitalizationEndDate": 1461000,"cycleAnchorDateOfInterestPayment": 60,"cycleAnchorDateOfRateReset": 61,"cycleAnchorDateOfScalingIndex": 25,"cycleAnchorDateOfFee": 254,"notionalPrincipal": 7,"nominalInterestRate": 359,"feeAccrued": 0,"accruedInterest": 4800,"rateMultiplier": 4,"rateSpread": 1970,"feeRate": 89,"nextResetRate": 359,"penaltyRate": 69,"premiumDiscountAtIED": 1532892063,"priceAtPurchaseDate": 366,"cycleOfInterestPayment": {"i": 65,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 11,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 89,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 4801,"p": 0,"s": 0,"isSet": true},"lifeCap": -1,"lifeFloor": 151,"periodCap": 149,"periodFloor": 146098}, {"lastEventTime": 86400,"contractStatus": 0,"timeFromLastEvent": 359,"nominalValue": 9,"nominalAccrued": 2446,"feeAccrued": 159,"nominalRate": 2447,"interestScalingMultiplier": 139,"nominalScalingMultiplier": 119,"contractRoleSign": 0}, {"eventTime": 60,"eventTimeWithEpochOffset": 1461001,"scheduleTime": 2014223714,"eventType": 1,"currency": accounts[4],"pofType": 2,"stfType": 13}, 2447,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [246,79,123,133,9,136,195,138,128,114,120,70,54,152,109,182,98,225,27,130,100,189,230,5,76,207,178,58,5,37,82,96],"legalEntityIdCounterparty": [84,195,19,200,222,144,24,242,181,101,213,119,97,116,93,144,160,60,41,139,209,149,245,140,157,201,221,226,85,25,62,107],"dayCountConvention": 6,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 1532892063,"statusDate": 1969,"initialExchangeDate": 70,"maturityDate": 399,"terminationDate": 361,"purchaseDate": 28,"capitalizationEndDate": 96,"cycleAnchorDateOfInterestPayment": 901,"cycleAnchorDateOfRateReset": 400,"cycleAnchorDateOfScalingIndex": 101,"cycleAnchorDateOfFee": 1461000,"notionalPrincipal": 95,"nominalInterestRate": 81,"feeAccrued": 41,"accruedInterest": 4000,"rateMultiplier": 1970,"rateSpread": 32076,"feeRate": 1460,"nextResetRate": 64,"penaltyRate": 1461,"premiumDiscountAtIED": 1971,"priceAtPurchaseDate": 1462,"cycleOfInterestPayment": {"i": 401,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 79,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 160,"p": 5,"s": 1,"isSet": false},"lifeCap": 96,"lifeFloor": 1532892064,"periodCap": 71,"periodFloor": 1969}, 41, 3999,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [59,194,196,155,50,6,254,103,161,135,46,41,100,159,57,209,232,70,155,231,22,135,157,65,153,217,196,135,62,59,185,70],"legalEntityIdCounterparty": [148,147,216,92,203,74,29,60,253,38,41,229,74,48,126,223,181,107,60,228,249,116,142,72,109,240,178,4,129,126,94,111],"dayCountConvention": 5,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 86401,"statusDate": 4799,"initialExchangeDate": 4900,"maturityDate": 367,"terminationDate": 68570,"purchaseDate": 1970,"capitalizationEndDate": 95,"cycleAnchorDateOfInterestPayment": 18,"cycleAnchorDateOfRateReset": 2446,"cycleAnchorDateOfScalingIndex": 130,"cycleAnchorDateOfFee": 110,"notionalPrincipal": 4799,"nominalInterestRate": 28,"feeAccrued": 2440589,"accruedInterest": 4,"rateMultiplier": 360,"rateSpread": 139,"feeRate": 27,"nextResetRate": 10001,"penaltyRate": 2014223715,"premiumDiscountAtIED": 51,"priceAtPurchaseDate": 1970,"cycleOfInterestPayment": {"i": 140,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 70,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 129,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 2446,"p": 3,"s": 1,"isSet": true},"lifeCap": 15,"lifeFloor": 9999,"periodCap": 4799,"periodFloor": 19}, 109, 2447,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [100,253,174,196,56,110,75,221,174,6,243,71,40,162,89,106,182,125,29,186,103,3,181,92,5,68,92,213,70,94,24,219],"legalEntityIdCounterparty": [88,106,181,126,69,196,41,159,111,122,37,46,247,38,114,190,80,138,68,171,0,37,148,1,52,186,75,29,52,241,24,67],"dayCountConvention": 5,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 90,"statusDate": 68570,"initialExchangeDate": 367,"maturityDate": 951,"terminationDate": 14,"purchaseDate": 4799,"capitalizationEndDate": 59,"cycleAnchorDateOfInterestPayment": 81,"cycleAnchorDateOfRateReset": 79,"cycleAnchorDateOfScalingIndex": 24,"cycleAnchorDateOfFee": 901,"notionalPrincipal": 39,"nominalInterestRate": 364,"feeAccrued": 1461000,"accruedInterest": 86401,"rateMultiplier": 6,"rateSpread": 3,"feeRate": 86401,"nextResetRate": 1,"penaltyRate": 1460,"premiumDiscountAtIED": 401,"priceAtPurchaseDate": 96,"cycleOfInterestPayment": {"i": 30,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 401,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 27,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 139,"p": 1,"s": 1,"isSet": true},"lifeCap": 3,"lifeFloor": 1337,"periodCap": 2014223714,"periodFloor": 2440589}, 254, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [44,142,228,55,134,210,34,199,165,90,242,77,60,151,196,115,108,108,119,236,111,108,201,225,2,27,206,88,185,130,80,73],"legalEntityIdCounterparty": [180,138,129,160,120,54,163,170,68,155,56,146,125,92,80,151,62,254,192,220,2,221,140,44,0,102,151,191,125,11,105,151],"dayCountConvention": 5,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 60,"statusDate": 2440587,"initialExchangeDate": 4,"maturityDate": 32075,"terminationDate": 21,"purchaseDate": 4901,"capitalizationEndDate": 100,"cycleAnchorDateOfInterestPayment": 146097,"cycleAnchorDateOfRateReset": 68570,"cycleAnchorDateOfScalingIndex": 51,"cycleAnchorDateOfFee": 1336,"notionalPrincipal": 1461001,"nominalInterestRate": 1336,"feeAccrued": 1462,"accruedInterest": 95,"rateMultiplier": 63,"rateSpread": 4799,"feeRate": 97,"nextResetRate": 50,"penaltyRate": 39,"premiumDiscountAtIED": 401,"priceAtPurchaseDate": 4801,"cycleOfInterestPayment": {"i": 86401,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 3999,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 950,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 146096,"p": 5,"s": 0,"isSet": true},"lifeCap": 130,"lifeFloor": 360,"periodCap": 150,"periodFloor": 254}, 109, 28,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [117,198,180,114,209,85,33,246,250,255,201,16,212,54,172,99,115,72,162,95,83,98,6,106,14,226,12,168,144,185,34,206],"legalEntityIdCounterparty": [168,75,118,24,74,62,13,207,10,158,118,64,209,147,69,103,33,136,44,133,120,30,174,66,42,170,178,99,230,135,195,87],"dayCountConvention": 2,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 7,"statusDate": 256,"initialExchangeDate": 49,"maturityDate": 111,"terminationDate": 31,"purchaseDate": 0,"capitalizationEndDate": 14,"cycleAnchorDateOfInterestPayment": 151,"cycleAnchorDateOfRateReset": 71,"cycleAnchorDateOfScalingIndex": 119,"cycleAnchorDateOfFee": 8,"notionalPrincipal": 901,"nominalInterestRate": 140,"feeAccrued": 900,"accruedInterest": 49,"rateMultiplier": 86400,"rateSpread": 1460,"feeRate": 101,"nextResetRate": 99,"penaltyRate": 256,"premiumDiscountAtIED": 146096,"priceAtPurchaseDate": 26,"cycleOfInterestPayment": {"i": 1461001,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 256,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 900,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 256,"p": 0,"s": 1,"isSet": true},"lifeCap": 146097,"lifeFloor": 31,"periodCap": 16,"periodFloor": 7}, 51, 99,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [63,168,94,217,153,129,83,93,0,4,92,96,6,133,209,104,5,207,207,127,221,124,99,180,133,187,177,55,47,19,200,65],"legalEntityIdCounterparty": [114,146,239,235,172,168,70,134,218,131,15,24,11,56,59,104,12,23,199,43,130,207,241,41,13,108,229,90,50,103,184,71],"dayCountConvention": 1,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 2447,"statusDate": 13,"initialExchangeDate": 2014223716,"maturityDate": 900,"terminationDate": 364,"purchaseDate": 129,"capitalizationEndDate": 64,"cycleAnchorDateOfInterestPayment": 900,"cycleAnchorDateOfRateReset": 109,"cycleAnchorDateOfScalingIndex": 4,"cycleAnchorDateOfFee": 1461001,"notionalPrincipal": 9,"nominalInterestRate": 120,"feeAccrued": 17,"accruedInterest": 3,"rateMultiplier": 19,"rateSpread": 32076,"feeRate": 29,"nextResetRate": 68570,"penaltyRate": 66,"premiumDiscountAtIED": 18,"priceAtPurchaseDate": 1532892062,"cycleOfInterestPayment": {"i": 129,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 40,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 14,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 91,"p": 5,"s": 1,"isSet": true},"lifeCap": 86399,"lifeFloor": 4800,"periodCap": 89,"periodFloor": 2}, 63, 2440588,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [120,206,58,22,114,74,184,210,62,239,223,230,141,139,142,219,21,166,39,74,110,1,19,103,36,153,1,60,197,111,174,83],"legalEntityIdCounterparty": [21,40,29,126,173,60,213,69,249,70,14,104,90,88,104,177,44,134,160,167,229,89,153,51,189,64,41,155,33,230,99,170],"dayCountConvention": 5,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 60,"statusDate": 63,"initialExchangeDate": 367,"maturityDate": 39,"terminationDate": 4900,"purchaseDate": 31,"capitalizationEndDate": 10000,"cycleAnchorDateOfInterestPayment": 15,"cycleAnchorDateOfRateReset": 1532892063,"cycleAnchorDateOfScalingIndex": 129,"cycleAnchorDateOfFee": 161,"notionalPrincipal": 121,"nominalInterestRate": 32076,"feeAccrued": 26,"accruedInterest": 1532892063,"rateMultiplier": 4899,"rateSpread": 366,"feeRate": 161,"nextResetRate": 257,"penaltyRate": 16,"premiumDiscountAtIED": 2440589,"priceAtPurchaseDate": 159,"cycleOfInterestPayment": {"i": 4900,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2014223715,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 364,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 1336,"p": 2,"s": 1,"isSet": false},"lifeCap": 11,"lifeFloor": 1461,"periodCap": 110,"periodFloor": 68569}, 39, 160,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [182,248,246,124,178,162,9,223,30,113,36,168,52,246,99,196,157,171,160,218,104,197,136,136,191,15,94,5,150,57,45,249],"legalEntityIdCounterparty": [250,32,66,212,165,167,37,223,39,197,128,147,226,199,68,99,235,2,0,67,30,22,120,98,240,42,179,192,197,84,217,242],"dayCountConvention": 3,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 89,"statusDate": 141,"initialExchangeDate": 129,"maturityDate": 24,"terminationDate": 6,"purchaseDate": 2014223714,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 60,"cycleAnchorDateOfRateReset": 100,"cycleAnchorDateOfScalingIndex": 2440588,"cycleAnchorDateOfFee": 1971,"notionalPrincipal": 151,"nominalInterestRate": 89,"feeAccrued": 86400,"accruedInterest": 146097,"rateMultiplier": 129,"rateSpread": 70,"feeRate": 49,"nextResetRate": 80,"penaltyRate": 141,"premiumDiscountAtIED": 146096,"priceAtPurchaseDate": 8,"cycleOfInterestPayment": {"i": 4799,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 10001,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 400,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 401,"p": 5,"s": 1,"isSet": false},"lifeCap": 86401,"lifeFloor": 28,"periodCap": 68569,"periodFloor": 60}, 1971, 401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [139,114,230,98,209,213,192,239,7,235,93,69,205,174,253,26,37,34,77,249,194,230,221,13,130,136,114,252,156,215,217,4],"legalEntityIdCounterparty": [156,34,217,227,227,183,184,51,241,180,163,63,198,127,167,201,16,218,200,142,68,57,242,117,0,180,152,190,225,255,216,193],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 1532892062,"statusDate": 12,"initialExchangeDate": 28,"maturityDate": 1460,"terminationDate": 255,"purchaseDate": 28,"capitalizationEndDate": 13,"cycleAnchorDateOfInterestPayment": 9999,"cycleAnchorDateOfRateReset": 68570,"cycleAnchorDateOfScalingIndex": 95,"cycleAnchorDateOfFee": 1461,"notionalPrincipal": 68569,"nominalInterestRate": 3999,"feeAccrued": 59,"accruedInterest": 79,"rateMultiplier": 899,"rateSpread": 14,"feeRate": 39,"nextResetRate": 151,"penaltyRate": 257,"premiumDiscountAtIED": 361,"priceAtPurchaseDate": 151,"cycleOfInterestPayment": {"i": 1337,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 21,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 50,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 70,"p": 3,"s": 1,"isSet": false},"lifeCap": 95,"lifeFloor": 151,"periodCap": 129,"periodFloor": 159}, 26, 1461000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [205,9,205,139,76,135,71,98,5,10,166,80,102,75,116,23,131,46,25,108,116,77,80,99,22,220,41,24,13,89,77,70],"legalEntityIdCounterparty": [216,225,107,103,48,222,238,247,67,125,50,219,171,6,158,208,156,158,58,17,12,8,238,169,81,254,230,155,77,34,131,78],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 39,"statusDate": 21,"initialExchangeDate": 120,"maturityDate": 161,"terminationDate": 161,"purchaseDate": 254,"capitalizationEndDate": 1337,"cycleAnchorDateOfInterestPayment": 120,"cycleAnchorDateOfRateReset": 4901,"cycleAnchorDateOfScalingIndex": 255,"cycleAnchorDateOfFee": 951,"notionalPrincipal": 30,"nominalInterestRate": 364,"feeAccrued": 1461002,"accruedInterest": 140,"rateMultiplier": 10,"rateSpread": 63,"feeRate": 360,"nextResetRate": 257,"penaltyRate": 5,"premiumDiscountAtIED": 364,"priceAtPurchaseDate": 28,"cycleOfInterestPayment": {"i": 119,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 68570,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 361,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 367,"p": 4,"s": 0,"isSet": false},"lifeCap": 15,"lifeFloor": 119,"periodCap": 18,"periodFloor": 89}, 159, 149,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [174,45,218,156,196,216,169,34,76,118,156,214,138,154,206,52,254,55,28,250,37,142,148,2,58,217,23,238,24,148,59,7],"legalEntityIdCounterparty": [206,97,189,112,243,1,51,188,50,36,39,178,139,36,250,0,134,148,65,150,75,106,117,34,97,52,248,196,47,23,11,216],"dayCountConvention": 3,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 0,"statusDate": 60,"initialExchangeDate": 1460,"maturityDate": 2440588,"terminationDate": 3999,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 68570,"cycleAnchorDateOfRateReset": 32,"cycleAnchorDateOfScalingIndex": 2014223716,"cycleAnchorDateOfFee": 1460,"notionalPrincipal": 20,"nominalInterestRate": 0,"feeAccrued": 65,"accruedInterest": 12,"rateMultiplier": 151,"rateSpread": 64,"feeRate": 7,"nextResetRate": 359,"penaltyRate": 91,"premiumDiscountAtIED": 146096,"priceAtPurchaseDate": 101,"cycleOfInterestPayment": {"i": 1970,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 32075,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 130,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 367,"p": 4,"s": 1,"isSet": true},"lifeCap": 25,"lifeFloor": 1969,"periodCap": 32076,"periodFloor": 949}, 1532892063, 5,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [19,141,222,12,108,132,174,95,214,94,90,149,182,58,50,79,116,240,163,80,151,166,112,183,65,98,210,87,153,59,92,226],"legalEntityIdCounterparty": [239,96,40,117,228,64,121,148,36,86,40,49,51,215,115,23,26,249,176,23,242,12,99,245,77,248,42,247,4,117,5,224],"dayCountConvention": 4,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 15,"statusDate": 10,"initialExchangeDate": 119,"maturityDate": 4,"terminationDate": 159,"purchaseDate": 160,"capitalizationEndDate": 4,"cycleAnchorDateOfInterestPayment": 359,"cycleAnchorDateOfRateReset": 2014223714,"cycleAnchorDateOfScalingIndex": 1532892062,"cycleAnchorDateOfFee": 359,"notionalPrincipal": 66,"nominalInterestRate": 2446,"feeAccrued": 23,"accruedInterest": 949,"rateMultiplier": 40,"rateSpread": 70,"feeRate": 364,"nextResetRate": 31,"penaltyRate": 68568,"premiumDiscountAtIED": 32074,"priceAtPurchaseDate": 2440588,"cycleOfInterestPayment": {"i": 361,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 32,"p": 1,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 95,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 2,"p": 5,"s": 0,"isSet": false},"lifeCap": 110,"lifeFloor": 367,"periodCap": 949,"periodFloor": 1532892064}, 9, 40,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [20,45,26,73,192,197,59,92,199,186,84,98,63,18,101,72,80,152,128,3,21,7,32,9,64,224,213,184,38,209,91,175],"legalEntityIdCounterparty": [145,189,195,116,95,5,185,180,182,223,118,216,39,187,22,59,70,112,191,231,117,204,18,230,67,67,108,191,178,199,214,227],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 63,"statusDate": 359,"initialExchangeDate": 63,"maturityDate": 27,"terminationDate": 140,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 367,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 5,"cycleAnchorDateOfFee": 1971,"notionalPrincipal": 0,"nominalInterestRate": 0,"feeAccrued": 63,"accruedInterest": 1532892063,"rateMultiplier": 2440587,"rateSpread": 2014223714,"feeRate": 71,"nextResetRate": 161,"penaltyRate": 121,"premiumDiscountAtIED": 51,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 30,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 63,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 96,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 2440588,"p": 4,"s": 0,"isSet": true},"lifeCap": 1971,"lifeFloor": 140,"periodCap": 2014223714,"periodFloor": 3}, 28, 4899,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [192,163,10,155,189,212,190,6,211,55,47,115,84,189,248,98,119,38,25,246,133,41,111,8,131,83,97,114,248,246,12,31],"legalEntityIdCounterparty": [213,221,47,128,237,170,215,190,161,208,126,47,33,165,8,212,252,109,220,211,216,122,245,41,129,233,147,229,99,57,209,86],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 150,"statusDate": 129,"initialExchangeDate": 111,"maturityDate": 32,"terminationDate": 10001,"purchaseDate": 1338,"capitalizationEndDate": 1971,"cycleAnchorDateOfInterestPayment": 70,"cycleAnchorDateOfRateReset": 110,"cycleAnchorDateOfScalingIndex": 49,"cycleAnchorDateOfFee": 23,"notionalPrincipal": 1461002,"nominalInterestRate": 70,"feeAccrued": 4899,"accruedInterest": 32074,"rateMultiplier": 99,"rateSpread": 1461001,"feeRate": 21,"nextResetRate": 26,"penaltyRate": 97,"premiumDiscountAtIED": 901,"priceAtPurchaseDate": 39,"cycleOfInterestPayment": {"i": 28,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2440589,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 60,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 40,"p": 5,"s": 0,"isSet": true},"lifeCap": 4001,"lifeFloor": 131,"periodCap": 63,"periodFloor": 257}, 4, 146098,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [60,157,119,42,39,198,163,140,175,110,123,178,90,42,33,232,205,95,171,191,205,123,219,110,180,135,107,153,166,174,36,12],"legalEntityIdCounterparty": [190,210,200,35,111,27,10,145,110,89,25,158,100,31,68,254,11,31,186,60,11,198,169,50,178,10,123,110,218,91,23,239],"dayCountConvention": 0,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 61,"statusDate": 13,"initialExchangeDate": 69,"maturityDate": 121,"terminationDate": 4901,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 257,"cycleAnchorDateOfRateReset": 69,"cycleAnchorDateOfScalingIndex": 2446,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 99,"nominalInterestRate": 0,"feeAccrued": 1969,"accruedInterest": 51,"rateMultiplier": 2446,"rateSpread": 32,"feeRate": 86401,"nextResetRate": 97,"penaltyRate": 63,"premiumDiscountAtIED": 70,"priceAtPurchaseDate": 2447,"cycleOfInterestPayment": {"i": 1461002,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 66,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 109,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 2,"p": 2,"s": 0,"isSet": true},"lifeCap": 31,"lifeFloor": 111,"periodCap": 1337,"periodFloor": 95}, 89, 79,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [51,94,149,135,187,157,151,217,241,104,222,237,121,127,191,124,7,99,135,47,160,253,236,216,99,219,9,218,146,232,215,106],"legalEntityIdCounterparty": [253,168,155,200,22,68,10,213,26,142,178,172,10,53,92,29,136,255,88,110,214,50,11,114,43,33,93,185,217,106,222,122],"dayCountConvention": 4,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 31,"statusDate": 359,"initialExchangeDate": 89,"maturityDate": 66,"terminationDate": 30,"purchaseDate": 30,"capitalizationEndDate": 146096,"cycleAnchorDateOfInterestPayment": 65,"cycleAnchorDateOfRateReset": 19,"cycleAnchorDateOfScalingIndex": 99,"cycleAnchorDateOfFee": 2014223715,"notionalPrincipal": 17,"nominalInterestRate": 146097,"feeAccrued": 360,"accruedInterest": 1532892064,"rateMultiplier": 399,"rateSpread": 364,"feeRate": 256,"nextResetRate": 64,"penaltyRate": 1338,"premiumDiscountAtIED": 18,"priceAtPurchaseDate": 120,"cycleOfInterestPayment": {"i": 120,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 24,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 68569,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 68568,"p": 4,"s": 0,"isSet": true},"lifeCap": 257,"lifeFloor": 366,"periodCap": 86399,"periodFloor": 4001}, 16, 1337,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [152,131,58,60,221,194,26,135,128,44,11,163,236,247,5,192,98,81,252,96,62,219,76,184,157,142,112,214,231,173,119,85],"legalEntityIdCounterparty": [252,180,30,226,27,3,12,145,0,61,72,60,183,219,233,101,132,205,210,74,190,16,103,243,37,131,208,197,129,148,243,124],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 256,"statusDate": 80,"initialExchangeDate": 4,"maturityDate": 121,"terminationDate": 2446,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 91,"cycleAnchorDateOfRateReset": 1461,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 65,"notionalPrincipal": 23,"nominalInterestRate": 0,"feeAccrued": 48,"accruedInterest": 146096,"rateMultiplier": 360,"rateSpread": 8,"feeRate": 63,"nextResetRate": 4899,"penaltyRate": 19,"premiumDiscountAtIED": 64,"priceAtPurchaseDate": 48,"cycleOfInterestPayment": {"i": 30,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 39,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1532892063,"p": 4,"s": 0,"isSet": false},"cycleOfFee": {"i": 68569,"p": 5,"s": 1,"isSet": true},"lifeCap": 2014223715,"lifeFloor": 48,"periodCap": 25,"periodFloor": 950}, 151, 361,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [189,144,186,255,76,222,235,122,247,41,154,2,163,40,77,215,116,85,191,185,219,21,68,120,94,49,143,43,248,170,176,173],"legalEntityIdCounterparty": [18,74,152,182,118,123,117,126,10,56,140,169,105,49,174,182,163,88,202,244,139,164,18,90,52,85,228,93,222,140,95,209],"dayCountConvention": 1,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 4900,"statusDate": 119,"initialExchangeDate": 96,"maturityDate": 6,"terminationDate": 130,"purchaseDate": 10,"capitalizationEndDate": 359,"cycleAnchorDateOfInterestPayment": 90,"cycleAnchorDateOfRateReset": 18,"cycleAnchorDateOfScalingIndex": 4900,"cycleAnchorDateOfFee": 359,"notionalPrincipal": 1338,"nominalInterestRate": 1460,"feeAccrued": 23,"accruedInterest": 26,"rateMultiplier": 161,"rateSpread": 7,"feeRate": 1462,"nextResetRate": 949,"penaltyRate": 79,"premiumDiscountAtIED": 96,"priceAtPurchaseDate": 60,"cycleOfInterestPayment": {"i": 51,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 2440588,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 4899,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 364,"p": 3,"s": 0,"isSet": false},"lifeCap": 31,"lifeFloor": 26,"periodCap": 4900,"periodFloor": 27}, 399, 1461000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [245,68,165,27,175,49,130,6,53,163,40,19,155,122,91,119,238,31,238,239,251,112,94,238,35,212,173,35,29,226,120,199],"legalEntityIdCounterparty": [155,76,98,157,133,68,123,47,94,101,47,226,215,10,4,87,53,123,19,183,185,239,150,5,24,25,18,188,170,243,34,169],"dayCountConvention": 1,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 2440587,"statusDate": 146097,"initialExchangeDate": 2446,"maturityDate": 1461000,"terminationDate": 68569,"purchaseDate": 4901,"capitalizationEndDate": 97,"cycleAnchorDateOfInterestPayment": 68568,"cycleAnchorDateOfRateReset": 1337,"cycleAnchorDateOfScalingIndex": 359,"cycleAnchorDateOfFee": 60,"notionalPrincipal": 110,"nominalInterestRate": 51,"feeAccrued": 361,"accruedInterest": 366,"rateMultiplier": 32074,"rateSpread": 9,"feeRate": 899,"nextResetRate": 400,"penaltyRate": 32,"premiumDiscountAtIED": 2440587,"priceAtPurchaseDate": 71,"cycleOfInterestPayment": {"i": 130,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 51,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 86399,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 139,"p": 5,"s": 0,"isSet": false},"lifeCap": 361,"lifeFloor": 161,"periodCap": 141,"periodFloor": 101}, 13, 2448,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [64,133,250,67,65,141,134,224,186,207,181,196,156,53,96,246,103,31,170,16,85,187,169,251,86,199,53,253,189,50,29,112],"legalEntityIdCounterparty": [210,153,20,234,244,30,47,122,153,94,160,43,187,212,114,122,23,25,105,56,30,141,207,111,66,252,32,220,160,74,131,124],"dayCountConvention": 1,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 1532892062,"statusDate": 900,"initialExchangeDate": 86399,"maturityDate": 28,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 119,"cycleAnchorDateOfRateReset": 8,"cycleAnchorDateOfScalingIndex": 15,"cycleAnchorDateOfFee": 4900,"notionalPrincipal": 146098,"nominalInterestRate": 0,"feeAccrued": 39,"accruedInterest": 39,"rateMultiplier": 48,"rateSpread": 1532892063,"feeRate": 79,"nextResetRate": 71,"penaltyRate": 159,"premiumDiscountAtIED": 48,"priceAtPurchaseDate": 23,"cycleOfInterestPayment": {"i": 17,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 97,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 90,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 69,"p": 2,"s": 0,"isSet": false},"lifeCap": 89,"lifeFloor": 86400,"periodCap": 15,"periodFloor": 32075}, 16, 361,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [3,121,43,239,228,151,54,136,160,184,177,223,100,196,168,186,24,75,58,105,189,106,245,125,134,155,172,199,121,15,119,118],"legalEntityIdCounterparty": [86,112,172,64,187,149,4,132,147,72,205,223,16,198,244,144,87,171,34,172,98,226,200,171,188,248,197,131,197,70,114,14],"dayCountConvention": 2,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 899,"statusDate": 95,"initialExchangeDate": 99,"maturityDate": 1532892063,"terminationDate": 160,"purchaseDate": 63,"capitalizationEndDate": 86399,"cycleAnchorDateOfInterestPayment": 3999,"cycleAnchorDateOfRateReset": 13,"cycleAnchorDateOfScalingIndex": 2440589,"cycleAnchorDateOfFee": 365,"notionalPrincipal": 27,"nominalInterestRate": 86399,"feeAccrued": 50,"accruedInterest": 31,"rateMultiplier": 10001,"rateSpread": 899,"feeRate": 400,"nextResetRate": 5,"penaltyRate": 2,"premiumDiscountAtIED": 86399,"priceAtPurchaseDate": 68568,"cycleOfInterestPayment": {"i": 2014223714,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 151,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 81,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 151,"p": 1,"s": 0,"isSet": true},"lifeCap": 899,"lifeFloor": 4,"periodCap": 254,"periodFloor": 161}, 68570, 2014223715,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [181,7,190,212,246,60,51,47,72,3,60,154,100,158,117,110,99,81,150,186,6,190,251,90,228,243,149,60,241,195,192,156],"legalEntityIdCounterparty": [132,98,234,5,43,35,72,54,114,147,7,208,68,100,165,87,187,173,168,161,176,253,0,253,170,35,199,135,241,7,138,14],"dayCountConvention": 2,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 2014223716,"statusDate": 146098,"initialExchangeDate": 61,"maturityDate": 899,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 2446,"cycleAnchorDateOfScalingIndex": 79,"cycleAnchorDateOfFee": 365,"notionalPrincipal": 32076,"nominalInterestRate": 0,"feeAccrued": 60,"accruedInterest": 2446,"rateMultiplier": 99,"rateSpread": 81,"feeRate": 1970,"nextResetRate": 1532892063,"penaltyRate": 1338,"premiumDiscountAtIED": 2014223715,"priceAtPurchaseDate": 1460,"cycleOfInterestPayment": {"i": 149,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 150,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 10,"p": 4,"s": 1,"isSet": true},"cycleOfFee": {"i": 140,"p": 0,"s": 0,"isSet": false},"lifeCap": 1532892064,"lifeFloor": 50,"periodCap": 24,"periodFloor": 149}, 31, 99,{from: accounts[0]});
  });
});
