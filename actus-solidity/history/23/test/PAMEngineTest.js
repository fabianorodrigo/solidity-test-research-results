const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 9,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [191,69,214,65,80,99,29,165,38,105,106,194,74,155,38,233,204,210,125,36,236,5,156,24,246,46,196,73,251,148,139,40],"legalEntityIdCounterparty": [185,118,182,19,114,15,25,73,214,232,92,198,217,236,201,153,250,124,189,55,59,184,40,245,129,223,222,45,245,20,252,48],"dayCountConvention": 2,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 119,"statusDate": 32074,"initialExchangeDate": 366,"maturityDate": 1532892064,"terminationDate": 120,"purchaseDate": 364,"capitalizationEndDate": 3999,"cycleAnchorDateOfInterestPayment": 2014223714,"cycleAnchorDateOfRateReset": 97,"cycleAnchorDateOfScalingIndex": 2440587,"cycleAnchorDateOfFee": 4901,"notionalPrincipal": -1,"nominalInterestRate": 899,"feeAccrued": 18,"accruedInterest": 68568,"rateMultiplier": 901,"rateSpread": 1971,"feeRate": 401,"nextResetRate": 401,"penaltyRate": 2014223716,"premiumDiscountAtIED": 50,"priceAtPurchaseDate": 32074,"cycleOfInterestPayment": {"i": 59,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1969,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 48,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 0,"p": 5,"s": 1,"isSet": true},"lifeCap": 86400,"lifeFloor": 367,"periodCap": 40,"periodFloor": 129},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 13,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [214,196,42,208,1,100,87,164,131,77,46,163,123,95,5,20,83,10,171,148,153,146,1,157,128,184,192,200,239,18,85,20],"legalEntityIdCounterparty": [192,89,251,221,144,203,229,162,251,13,253,15,245,7,38,252,79,90,46,128,132,71,32,247,204,57,249,112,62,230,76,254],"dayCountConvention": 0,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 364,"statusDate": 2014223716,"initialExchangeDate": 2440588,"maturityDate": 1461002,"terminationDate": 1462,"purchaseDate": 101,"capitalizationEndDate": 86399,"cycleAnchorDateOfInterestPayment": 130,"cycleAnchorDateOfRateReset": 23,"cycleAnchorDateOfScalingIndex": 141,"cycleAnchorDateOfFee": 140,"notionalPrincipal": 26,"nominalInterestRate": 146096,"feeAccrued": 401,"accruedInterest": 256,"rateMultiplier": 951,"rateSpread": 161,"feeRate": 13,"nextResetRate": 4801,"penaltyRate": 19,"premiumDiscountAtIED": 65,"priceAtPurchaseDate": 70,"cycleOfInterestPayment": {"i": 50,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 949,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 141,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 1338,"p": 4,"s": 1,"isSet": true},"lifeCap": 399,"lifeFloor": 146097,"periodCap": 254,"periodFloor": 59}, {"lastEventTime": 14,"contractStatus": 3,"timeFromLastEvent": 8,"nominalValue": 40,"nominalAccrued": 70,"feeAccrued": 4000,"nominalRate": 19,"interestScalingMultiplier": 399,"nominalScalingMultiplier": 1,"contractRoleSign": 7}, 31,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 0,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [232,249,209,51,10,235,70,213,157,24,139,76,214,203,28,7,54,45,214,3,89,131,46,30,189,52,52,107,169,221,218,91],"legalEntityIdCounterparty": [214,111,238,142,20,103,197,83,96,55,89,6,112,115,58,16,209,74,72,97,242,232,245,78,250,241,84,133,219,80,171,211],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 13,"statusDate": 6,"initialExchangeDate": 13,"maturityDate": 81,"terminationDate": 32,"purchaseDate": 1461002,"capitalizationEndDate": 96,"cycleAnchorDateOfInterestPayment": 1336,"cycleAnchorDateOfRateReset": 950,"cycleAnchorDateOfScalingIndex": 96,"cycleAnchorDateOfFee": 130,"notionalPrincipal": 951,"nominalInterestRate": 49,"feeAccrued": 86399,"accruedInterest": 949,"rateMultiplier": 29,"rateSpread": 8,"feeRate": 21,"nextResetRate": 81,"penaltyRate": 4899,"premiumDiscountAtIED": 4,"priceAtPurchaseDate": 4801,"cycleOfInterestPayment": {"i": 30,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 23,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 61,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 10,"p": 4,"s": 1,"isSet": true},"lifeCap": 1,"lifeFloor": 13,"periodCap": 8,"periodFloor": 367}, {"lastEventTime": 71,"contractStatus": 2,"timeFromLastEvent": 1461001,"nominalValue": 1337,"nominalAccrued": 26,"feeAccrued": 12,"nominalRate": 1,"interestScalingMultiplier": 1337,"nominalScalingMultiplier": 1461001,"contractRoleSign": 4}, {"eventTime": 151,"eventTimeWithEpochOffset": 146098,"scheduleTime": 69,"eventType": 16,"currency": accounts[0],"pofType": 10,"stfType": 0}, 2440589,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [66,54,229,121,107,22,237,252,85,186,250,80,198,238,8,93,177,65,229,245,247,199,2,185,52,162,88,28,239,123,35,11],"legalEntityIdCounterparty": [102,218,23,100,46,239,6,5,180,77,232,216,109,240,53,13,172,175,94,106,219,201,252,21,80,52,214,97,95,87,209,222],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 950,"statusDate": 256,"initialExchangeDate": 365,"maturityDate": 21,"terminationDate": 30,"purchaseDate": 12,"capitalizationEndDate": 59,"cycleAnchorDateOfInterestPayment": 12,"cycleAnchorDateOfRateReset": 20,"cycleAnchorDateOfScalingIndex": 4001,"cycleAnchorDateOfFee": 2440588,"notionalPrincipal": 99,"nominalInterestRate": 101,"feeAccrued": 68569,"accruedInterest": 14,"rateMultiplier": 121,"rateSpread": 13,"feeRate": 68569,"nextResetRate": 10000,"penaltyRate": 41,"premiumDiscountAtIED": 901,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 2440588,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 19,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 120,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 15,"p": 3,"s": 0,"isSet": false},"lifeCap": 99,"lifeFloor": 79,"periodCap": 20,"periodFloor": 1336}, 1338, 361,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [34,6,251,190,213,43,7,200,35,44,46,109,233,241,95,247,59,168,48,135,147,182,51,48,123,131,77,191,189,73,16,38],"legalEntityIdCounterparty": [97,126,93,65,64,72,211,41,254,253,105,100,224,54,115,51,220,193,126,255,81,228,164,210,94,154,117,177,193,249,115,84],"dayCountConvention": 4,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 101,"statusDate": 360,"initialExchangeDate": 899,"maturityDate": 27,"terminationDate": 255,"purchaseDate": 100,"capitalizationEndDate": 60,"cycleAnchorDateOfInterestPayment": 68569,"cycleAnchorDateOfRateReset": 4801,"cycleAnchorDateOfScalingIndex": 79,"cycleAnchorDateOfFee": 131,"notionalPrincipal": 41,"nominalInterestRate": 86399,"feeAccrued": 29,"accruedInterest": 1970,"rateMultiplier": 24,"rateSpread": 86399,"feeRate": 1532892064,"nextResetRate": 89,"penaltyRate": 70,"premiumDiscountAtIED": 4800,"priceAtPurchaseDate": 951,"cycleOfInterestPayment": {"i": 64,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 50,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 2014223716,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 4899,"p": 1,"s": 0,"isSet": true},"lifeCap": 4800,"lifeFloor": 1461002,"periodCap": 149,"periodFloor": 1532892063}, 951, 90,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [36,159,254,212,249,224,154,129,25,163,222,230,204,120,4,36,241,50,41,125,91,174,183,52,213,195,91,189,6,116,24,188],"legalEntityIdCounterparty": [217,107,118,150,89,132,162,153,77,90,60,99,56,41,49,145,80,203,60,135,75,30,31,107,26,90,151,194,80,57,11,29],"dayCountConvention": 3,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 1338,"statusDate": 17,"initialExchangeDate": 109,"maturityDate": 1532892063,"terminationDate": 129,"purchaseDate": 1462,"capitalizationEndDate": 86401,"cycleAnchorDateOfInterestPayment": 949,"cycleAnchorDateOfRateReset": 28,"cycleAnchorDateOfScalingIndex": 25,"cycleAnchorDateOfFee": 32,"notionalPrincipal": 30,"nominalInterestRate": 21,"feeAccrued": 68568,"accruedInterest": 68570,"rateMultiplier": 146096,"rateSpread": 41,"feeRate": 31,"nextResetRate": 129,"penaltyRate": 3,"premiumDiscountAtIED": 255,"priceAtPurchaseDate": 4901,"cycleOfInterestPayment": {"i": 364,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 3,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1969,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 1461000,"p": 4,"s": 0,"isSet": false},"lifeCap": 90,"lifeFloor": 4799,"periodCap": 1532892064,"periodFloor": 4900}, 97, 141,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [40,127,215,153,76,247,224,142,184,171,73,6,100,210,179,72,80,218,193,64,208,237,173,19,64,109,37,76,159,55,66,83],"legalEntityIdCounterparty": [233,66,176,102,121,205,178,93,213,88,190,223,73,126,170,209,136,103,203,157,96,203,188,68,188,1,15,14,41,223,116,22],"dayCountConvention": 3,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 86400,"statusDate": 51,"initialExchangeDate": 2014223715,"maturityDate": 361,"terminationDate": 255,"purchaseDate": 119,"capitalizationEndDate": 7,"cycleAnchorDateOfInterestPayment": 64,"cycleAnchorDateOfRateReset": 257,"cycleAnchorDateOfScalingIndex": 150,"cycleAnchorDateOfFee": 63,"notionalPrincipal": 130,"nominalInterestRate": 400,"feeAccrued": 10000,"accruedInterest": 64,"rateMultiplier": 50,"rateSpread": 120,"feeRate": 86399,"nextResetRate": 2014223714,"penaltyRate": 99,"premiumDiscountAtIED": 17,"priceAtPurchaseDate": 130,"cycleOfInterestPayment": {"i": 90,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 900,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 31,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 1338,"p": 0,"s": 0,"isSet": false},"lifeCap": 9,"lifeFloor": 139,"periodCap": 141,"periodFloor": 19}, 2, 146096,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [11,74,199,178,130,138,228,203,88,105,198,115,71,186,227,166,90,191,188,252,228,169,204,65,134,46,195,19,242,168,186,92],"legalEntityIdCounterparty": [207,156,160,190,104,116,166,65,10,43,17,192,51,178,135,118,187,134,93,158,139,67,81,143,115,237,207,171,198,87,10,97],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 1461002,"statusDate": 2,"initialExchangeDate": 146098,"maturityDate": 2014223715,"terminationDate": 129,"purchaseDate": 0,"capitalizationEndDate": 32,"cycleAnchorDateOfInterestPayment": 97,"cycleAnchorDateOfRateReset": 359,"cycleAnchorDateOfScalingIndex": 4000,"cycleAnchorDateOfFee": 7,"notionalPrincipal": 9999,"nominalInterestRate": 121,"feeAccrued": 10001,"accruedInterest": 20,"rateMultiplier": 4000,"rateSpread": 121,"feeRate": 109,"nextResetRate": -1,"penaltyRate": 50,"premiumDiscountAtIED": 89,"priceAtPurchaseDate": 12,"cycleOfInterestPayment": {"i": 146097,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 949,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 140,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 15,"p": 4,"s": 1,"isSet": false},"lifeCap": 129,"lifeFloor": 63,"periodCap": 161,"periodFloor": 32074}, 4901, 81,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [54,106,36,169,48,124,227,214,163,201,193,66,19,5,171,133,5,130,252,137,198,139,51,223,114,92,4,222,144,133,230,251],"legalEntityIdCounterparty": [5,11,104,137,224,181,245,255,229,218,123,36,180,104,196,47,156,56,57,87,75,63,35,216,223,149,24,95,5,240,170,206],"dayCountConvention": 0,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 21,"statusDate": 4000,"initialExchangeDate": 66,"maturityDate": 366,"terminationDate": 256,"purchaseDate": 899,"capitalizationEndDate": 4799,"cycleAnchorDateOfInterestPayment": 120,"cycleAnchorDateOfRateReset": 4901,"cycleAnchorDateOfScalingIndex": 8,"cycleAnchorDateOfFee": 255,"notionalPrincipal": 66,"nominalInterestRate": 11,"feeAccrued": 100,"accruedInterest": 899,"rateMultiplier": 146096,"rateSpread": 27,"feeRate": 4001,"nextResetRate": 401,"penaltyRate": 59,"premiumDiscountAtIED": 1461001,"priceAtPurchaseDate": 4800,"cycleOfInterestPayment": {"i": 4000,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 949,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1532892064,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 1461000,"p": 4,"s": 0,"isSet": false},"lifeCap": 79,"lifeFloor": 13,"periodCap": 9999,"periodFloor": 2440587}, 5, 140,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [176,77,126,255,9,244,96,69,163,238,195,129,174,17,132,175,102,175,85,155,125,158,155,207,61,228,42,83,148,76,158,118],"legalEntityIdCounterparty": [112,97,240,191,129,15,235,231,168,147,247,14,77,36,150,92,4,142,68,61,164,63,255,62,11,1,213,25,178,200,115,68],"dayCountConvention": 0,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 66,"statusDate": 65,"initialExchangeDate": 119,"maturityDate": 1338,"terminationDate": 60,"purchaseDate": 68568,"capitalizationEndDate": 101,"cycleAnchorDateOfInterestPayment": 71,"cycleAnchorDateOfRateReset": 4000,"cycleAnchorDateOfScalingIndex": 1970,"cycleAnchorDateOfFee": 2440588,"notionalPrincipal": 131,"nominalInterestRate": 4901,"feeAccrued": 161,"accruedInterest": 1461000,"rateMultiplier": 121,"rateSpread": 1461002,"feeRate": 901,"nextResetRate": 146097,"penaltyRate": 40,"premiumDiscountAtIED": 1338,"priceAtPurchaseDate": 1969,"cycleOfInterestPayment": {"i": 399,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 255,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 90,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 360,"p": 4,"s": 0,"isSet": false},"lifeCap": 111,"lifeFloor": 10,"periodCap": 40,"periodFloor": 1336}, 0, 97,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [93,153,245,19,135,249,213,156,86,234,99,196,200,17,42,84,248,9,204,141,117,86,31,5,184,107,48,217,26,11,254,218],"legalEntityIdCounterparty": [140,14,155,244,50,13,57,83,112,140,91,34,61,195,150,205,218,71,208,212,20,129,60,240,23,215,82,151,136,39,80,132],"dayCountConvention": 4,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 161,"statusDate": 28,"initialExchangeDate": 7,"maturityDate": 51,"terminationDate": 1532892064,"purchaseDate": 71,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 1336,"cycleAnchorDateOfScalingIndex": 32074,"cycleAnchorDateOfFee": 28,"notionalPrincipal": 255,"nominalInterestRate": 13,"feeAccrued": 4799,"accruedInterest": 146096,"rateMultiplier": 2447,"rateSpread": 365,"feeRate": 2446,"nextResetRate": 120,"penaltyRate": 159,"premiumDiscountAtIED": 121,"priceAtPurchaseDate": 9,"cycleOfInterestPayment": {"i": 4801,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 110,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 80,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 1532892064,"p": 5,"s": 1,"isSet": false},"lifeCap": 361,"lifeFloor": 146097,"periodCap": 90,"periodFloor": 32074}, 161, 101,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [118,48,212,184,154,107,225,195,235,43,253,85,216,96,180,165,95,115,188,193,15,46,192,91,254,83,39,173,220,115,67,79],"legalEntityIdCounterparty": [80,211,77,81,251,94,36,243,50,241,227,181,150,223,201,154,4,180,43,67,41,113,88,191,114,67,246,170,97,199,22,99],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 121,"statusDate": 16,"initialExchangeDate": 18,"maturityDate": 2440589,"terminationDate": 91,"purchaseDate": 899,"capitalizationEndDate": 68569,"cycleAnchorDateOfInterestPayment": 131,"cycleAnchorDateOfRateReset": 10001,"cycleAnchorDateOfScalingIndex": 1,"cycleAnchorDateOfFee": 1,"notionalPrincipal": 1461,"nominalInterestRate": 110,"feeAccrued": -1,"accruedInterest": 96,"rateMultiplier": 4799,"rateSpread": 16,"feeRate": 40,"nextResetRate": 4901,"penaltyRate": 64,"premiumDiscountAtIED": 401,"priceAtPurchaseDate": 2448,"cycleOfInterestPayment": {"i": 50,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 19,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 4901,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 368,"p": 5,"s": 1,"isSet": true},"lifeCap": 151,"lifeFloor": 1461001,"periodCap": 20,"periodFloor": 86399}, 120, 10001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [231,207,139,95,172,160,51,11,31,184,82,42,145,243,212,189,23,87,202,112,95,172,118,209,22,208,163,181,12,107,194,209],"legalEntityIdCounterparty": [93,148,31,169,173,250,105,182,165,189,74,228,6,192,198,28,213,164,22,201,240,237,151,15,25,243,240,177,77,65,238,152],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 364,"statusDate": 140,"initialExchangeDate": 79,"maturityDate": 2440587,"terminationDate": 39,"purchaseDate": 401,"capitalizationEndDate": 2440589,"cycleAnchorDateOfInterestPayment": 399,"cycleAnchorDateOfRateReset": 4799,"cycleAnchorDateOfScalingIndex": 65,"cycleAnchorDateOfFee": 1,"notionalPrincipal": 18,"nominalInterestRate": 255,"feeAccrued": 26,"accruedInterest": 12,"rateMultiplier": 101,"rateSpread": 111,"feeRate": 9999,"nextResetRate": 4799,"penaltyRate": 1461002,"premiumDiscountAtIED": 151,"priceAtPurchaseDate": 2448,"cycleOfInterestPayment": {"i": 29,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 32074,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 71,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 99,"p": 2,"s": 1,"isSet": true},"lifeCap": 949,"lifeFloor": 146097,"periodCap": 399,"periodFloor": 1532892063}, 4899, 90,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [33,167,248,204,84,220,145,23,22,225,115,252,148,187,107,92,212,71,240,67,17,118,144,160,22,232,223,28,102,207,17,162],"legalEntityIdCounterparty": [43,220,252,78,143,127,66,164,157,87,107,212,67,209,199,238,103,210,68,158,87,111,236,4,92,194,98,214,90,48,14,180],"dayCountConvention": 3,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 9999,"statusDate": 146097,"initialExchangeDate": 359,"maturityDate": 4000,"terminationDate": 68569,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 2448,"cycleAnchorDateOfScalingIndex": 151,"cycleAnchorDateOfFee": 71,"notionalPrincipal": 96,"nominalInterestRate": 0,"feeAccrued": 40,"accruedInterest": 257,"rateMultiplier": 4901,"rateSpread": 1336,"feeRate": 119,"nextResetRate": 10000,"penaltyRate": 1,"premiumDiscountAtIED": 120,"priceAtPurchaseDate": 32076,"cycleOfInterestPayment": {"i": 11,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 79,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 28,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 10001,"p": 2,"s": 0,"isSet": false},"lifeCap": 71,"lifeFloor": 10000,"periodCap": 151,"periodFloor": 86401}, 2446, 3,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [113,152,28,223,217,184,79,245,31,28,110,37,137,169,179,183,106,149,226,5,33,199,61,172,197,203,168,206,216,174,206,208],"legalEntityIdCounterparty": [232,144,117,203,45,163,242,16,246,217,128,0,189,219,80,42,244,3,20,194,64,52,204,142,1,5,111,150,239,72,71,113],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 24,"statusDate": 4801,"initialExchangeDate": 131,"maturityDate": 69,"terminationDate": 1461002,"purchaseDate": 4899,"capitalizationEndDate": 2447,"cycleAnchorDateOfInterestPayment": 40,"cycleAnchorDateOfRateReset": 146097,"cycleAnchorDateOfScalingIndex": 12,"cycleAnchorDateOfFee": 68569,"notionalPrincipal": 121,"nominalInterestRate": 4900,"feeAccrued": 97,"accruedInterest": 23,"rateMultiplier": 3999,"rateSpread": 256,"feeRate": 10000,"nextResetRate": 48,"penaltyRate": 146098,"premiumDiscountAtIED": 401,"priceAtPurchaseDate": 60,"cycleOfInterestPayment": {"i": 18,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1532892062,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 71,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 86400,"p": 5,"s": 1,"isSet": true},"lifeCap": 48,"lifeFloor": 111,"periodCap": 51,"periodFloor": 4899}, 32, 109,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [29,77,93,123,4,101,145,220,251,33,81,209,116,200,55,210,59,1,154,54,154,97,32,190,155,198,180,117,164,169,44,17],"legalEntityIdCounterparty": [103,71,96,22,118,234,147,32,198,1,140,247,172,176,102,143,134,175,246,71,94,192,46,200,43,233,133,5,5,219,41,119],"dayCountConvention": 3,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 4,"statusDate": 4801,"initialExchangeDate": 1460,"maturityDate": 159,"terminationDate": 18,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 27,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 399,"cycleAnchorDateOfFee": 1532892064,"notionalPrincipal": 25,"nominalInterestRate": 0,"feeAccrued": 32,"accruedInterest": 4901,"rateMultiplier": 17,"rateSpread": 4899,"feeRate": 129,"nextResetRate": 120,"penaltyRate": 2440589,"premiumDiscountAtIED": 367,"priceAtPurchaseDate": 101,"cycleOfInterestPayment": {"i": 99,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 32,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 48,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 31,"p": 1,"s": 0,"isSet": true},"lifeCap": 23,"lifeFloor": 146098,"periodCap": 14,"periodFloor": 60}, 121, 1461002,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [35,126,32,164,93,65,129,181,13,204,212,145,80,214,158,132,6,222,125,203,28,43,246,147,163,214,204,109,201,235,192,72],"legalEntityIdCounterparty": [91,117,213,199,180,182,139,229,177,42,115,87,65,227,35,157,173,77,118,37,2,103,78,170,88,16,213,161,179,178,32,191],"dayCountConvention": 2,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 1461001,"statusDate": 4800,"initialExchangeDate": 96,"maturityDate": 0,"terminationDate": 2014223715,"purchaseDate": 80,"capitalizationEndDate": 1,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 146096,"cycleAnchorDateOfScalingIndex": 4901,"cycleAnchorDateOfFee": 399,"notionalPrincipal": -1,"nominalInterestRate": 110,"feeAccrued": 86399,"accruedInterest": 2014223714,"rateMultiplier": 2,"rateSpread": 32076,"feeRate": 86399,"nextResetRate": 109,"penaltyRate": 1336,"premiumDiscountAtIED": 4899,"priceAtPurchaseDate": 1338,"cycleOfInterestPayment": {"i": 39,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 4901,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 361,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 69,"p": 1,"s": 0,"isSet": false},"lifeCap": 60,"lifeFloor": 13,"periodCap": 951,"periodFloor": 41}, 399, 364,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [137,219,219,69,76,205,190,139,28,92,230,145,14,110,171,79,250,183,225,169,86,124,40,97,138,129,100,76,48,16,139,164],"legalEntityIdCounterparty": [54,63,103,245,232,105,42,173,49,155,217,80,224,236,47,86,39,110,118,21,174,253,86,196,215,127,105,42,57,14,87,74],"dayCountConvention": 3,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 28,"statusDate": 1336,"initialExchangeDate": 1969,"maturityDate": 64,"terminationDate": 16,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 951,"cycleAnchorDateOfRateReset": 32076,"cycleAnchorDateOfScalingIndex": 10,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 4001,"nominalInterestRate": 0,"feeAccrued": 17,"accruedInterest": 3,"rateMultiplier": 10001,"rateSpread": 48,"feeRate": 366,"nextResetRate": 14,"penaltyRate": 256,"premiumDiscountAtIED": 146097,"priceAtPurchaseDate": 4001,"cycleOfInterestPayment": {"i": 81,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 4001,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 130,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 9,"p": 4,"s": 1,"isSet": false},"lifeCap": 1532892064,"lifeFloor": 131,"periodCap": 65,"periodFloor": 2440588}, 2440589, 130,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [9,30,76,214,28,101,14,169,60,56,71,121,94,110,240,144,110,50,211,244,228,130,40,187,194,180,120,200,101,200,255,254],"legalEntityIdCounterparty": [159,135,63,100,89,83,125,226,40,35,203,70,92,23,72,156,132,50,21,239,100,231,27,17,125,15,90,236,188,120,27,42],"dayCountConvention": 2,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 15,"statusDate": 23,"initialExchangeDate": 254,"maturityDate": 364,"terminationDate": 29,"purchaseDate": 16,"capitalizationEndDate": 401,"cycleAnchorDateOfInterestPayment": 899,"cycleAnchorDateOfRateReset": 13,"cycleAnchorDateOfScalingIndex": 364,"cycleAnchorDateOfFee": 32,"notionalPrincipal": 365,"nominalInterestRate": 1337,"feeAccrued": 368,"accruedInterest": 2014223714,"rateMultiplier": 4799,"rateSpread": 24,"feeRate": 1461,"nextResetRate": 17,"penaltyRate": 5,"premiumDiscountAtIED": 141,"priceAtPurchaseDate": 141,"cycleOfInterestPayment": {"i": 4800,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1461,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1336,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 254,"p": 3,"s": 1,"isSet": false},"lifeCap": 39,"lifeFloor": 15,"periodCap": 49,"periodFloor": 16}, 359, 89,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [111,213,191,178,51,76,13,175,97,191,135,130,143,16,33,84,232,89,6,186,100,133,245,99,3,178,44,171,141,133,43,132],"legalEntityIdCounterparty": [53,207,147,255,218,36,153,41,129,19,62,233,64,5,179,157,130,75,185,117,133,146,122,228,1,234,83,111,249,222,103,23],"dayCountConvention": 0,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 2014223714,"statusDate": 90,"initialExchangeDate": 79,"maturityDate": 29,"terminationDate": 4900,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 899,"cycleAnchorDateOfRateReset": 1969,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 2448,"notionalPrincipal": 66,"nominalInterestRate": 0,"feeAccrued": 99,"accruedInterest": 146096,"rateMultiplier": 160,"rateSpread": 32074,"feeRate": 1338,"nextResetRate": 160,"penaltyRate": 146098,"premiumDiscountAtIED": 2,"priceAtPurchaseDate": 256,"cycleOfInterestPayment": {"i": 151,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 110,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 81,"p": 2,"s": 1,"isSet": true},"lifeCap": 71,"lifeFloor": 4901,"periodCap": -1,"periodFloor": 64}, 2440587, 3999,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [86,233,44,212,77,119,132,60,238,75,200,220,241,159,215,44,202,253,95,183,235,136,124,243,171,75,146,91,170,191,153,101],"legalEntityIdCounterparty": [36,73,21,61,32,177,155,137,44,64,11,180,88,138,174,146,33,86,12,63,122,109,250,70,144,96,243,236,10,50,59,101],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 20,"statusDate": 120,"initialExchangeDate": 69,"maturityDate": 160,"terminationDate": 97,"purchaseDate": 14,"capitalizationEndDate": 63,"cycleAnchorDateOfInterestPayment": 146098,"cycleAnchorDateOfRateReset": 4000,"cycleAnchorDateOfScalingIndex": 2440588,"cycleAnchorDateOfFee": 49,"notionalPrincipal": 361,"nominalInterestRate": 140,"feeAccrued": 1532892063,"accruedInterest": 48,"rateMultiplier": 8,"rateSpread": 17,"feeRate": 59,"nextResetRate": 91,"penaltyRate": 71,"premiumDiscountAtIED": 364,"priceAtPurchaseDate": 21,"cycleOfInterestPayment": {"i": 86400,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 3999,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 68568,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 2446,"p": 5,"s": 0,"isSet": true},"lifeCap": 65,"lifeFloor": 32076,"periodCap": 17,"periodFloor": 359}, 160, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [133,33,41,20,180,23,174,11,203,26,246,118,30,81,250,5,247,107,174,128,234,180,150,82,183,10,215,167,235,74,15,71],"legalEntityIdCounterparty": [158,36,97,154,249,103,16,142,212,153,177,19,53,17,112,135,210,239,75,199,49,236,252,184,12,12,49,129,0,115,164,203],"dayCountConvention": 4,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 255,"statusDate": 141,"initialExchangeDate": 79,"maturityDate": 89,"terminationDate": 161,"purchaseDate": 2,"capitalizationEndDate": 4900,"cycleAnchorDateOfInterestPayment": 14,"cycleAnchorDateOfRateReset": 101,"cycleAnchorDateOfScalingIndex": 32,"cycleAnchorDateOfFee": 96,"notionalPrincipal": 4899,"nominalInterestRate": 1,"feeAccrued": 99,"accruedInterest": 159,"rateMultiplier": 91,"rateSpread": 1461002,"feeRate": 49,"nextResetRate": 129,"penaltyRate": 1338,"premiumDiscountAtIED": 129,"priceAtPurchaseDate": 26,"cycleOfInterestPayment": {"i": 90,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 48,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 68570,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 141,"p": 1,"s": 1,"isSet": false},"lifeCap": 4000,"lifeFloor": 949,"periodCap": 4799,"periodFloor": 111}, 89, 4800,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [76,102,164,248,149,135,66,70,107,165,39,94,125,14,15,216,170,246,123,215,247,168,20,240,124,47,78,106,231,25,64,158],"legalEntityIdCounterparty": [213,135,234,94,187,185,11,194,239,230,213,67,226,94,135,171,151,26,82,176,73,174,206,52,214,241,156,164,7,176,177,43],"dayCountConvention": 5,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 120,"statusDate": 68568,"initialExchangeDate": 91,"maturityDate": 0,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 68570,"cycleAnchorDateOfRateReset": 19,"cycleAnchorDateOfScalingIndex": 4001,"cycleAnchorDateOfFee": 101,"notionalPrincipal": 3,"nominalInterestRate": 0,"feeAccrued": 48,"accruedInterest": 2446,"rateMultiplier": 4901,"rateSpread": 140,"feeRate": 68568,"nextResetRate": 949,"penaltyRate": 130,"premiumDiscountAtIED": 90,"priceAtPurchaseDate": 10001,"cycleOfInterestPayment": {"i": 4901,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 3,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 48,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 65,"p": 4,"s": 1,"isSet": true},"lifeCap": 49,"lifeFloor": 121,"periodCap": 8,"periodFloor": 90}, 121, 1461001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [73,154,11,60,62,184,162,248,144,56,218,222,15,37,211,247,136,69,94,114,52,198,92,150,179,186,177,241,184,139,232,2],"legalEntityIdCounterparty": [42,74,8,226,145,80,126,71,169,238,252,98,90,54,207,16,161,5,59,131,128,170,149,12,190,217,41,242,147,68,182,83],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 13,"statusDate": 9,"initialExchangeDate": 255,"maturityDate": 4,"terminationDate": 1461000,"purchaseDate": 2014223716,"capitalizationEndDate": 4799,"cycleAnchorDateOfInterestPayment": 951,"cycleAnchorDateOfRateReset": 2440589,"cycleAnchorDateOfScalingIndex": 70,"cycleAnchorDateOfFee": 20,"notionalPrincipal": 86400,"nominalInterestRate": 11,"feeAccrued": 1,"accruedInterest": 68569,"rateMultiplier": 364,"rateSpread": 68569,"feeRate": 161,"nextResetRate": 161,"penaltyRate": 399,"premiumDiscountAtIED": 7,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 401,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 25,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 86400,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 89,"p": 3,"s": 0,"isSet": false},"lifeCap": 1532892062,"lifeFloor": 49,"periodCap": 49,"periodFloor": 2446}, 71, 1532892064,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [159,73,145,49,191,125,17,82,254,168,119,83,218,115,251,195,131,28,233,176,24,103,250,219,247,116,45,197,49,150,51,49],"legalEntityIdCounterparty": [219,42,253,13,94,66,70,85,205,53,167,114,244,170,89,189,12,78,183,147,158,149,227,224,174,186,153,204,80,146,169,107],"dayCountConvention": 4,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 4899,"statusDate": 11,"initialExchangeDate": 10001,"maturityDate": 130,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 16,"cycleAnchorDateOfRateReset": 901,"cycleAnchorDateOfScalingIndex": 16,"cycleAnchorDateOfFee": 139,"notionalPrincipal": 24,"nominalInterestRate": 0,"feeAccrued": 1532892063,"accruedInterest": 15,"rateMultiplier": 366,"rateSpread": 1,"feeRate": 131,"nextResetRate": 39,"penaltyRate": 10001,"premiumDiscountAtIED": 26,"priceAtPurchaseDate": 4799,"cycleOfInterestPayment": {"i": 1,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 13,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 1461001,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 366,"p": 5,"s": 0,"isSet": false},"lifeCap": 64,"lifeFloor": 68570,"periodCap": 399,"periodFloor": 10001}, 400, 91,{from: accounts[0]});
  });
});
