const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 14,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [115,101,214,154,59,250,223,84,3,123,162,7,144,135,223,126,97,150,170,231,24,141,65,125,91,152,225,248,35,30,24,211],"legalEntityIdCounterparty": [218,28,64,199,186,183,97,147,189,114,89,91,190,159,162,214,200,27,127,38,20,104,235,87,232,160,91,164,67,187,22,174],"dayCountConvention": 0,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 368,"statusDate": 4001,"initialExchangeDate": 255,"maturityDate": 4900,"terminationDate": 4900,"purchaseDate": 26,"capitalizationEndDate": 110,"cycleAnchorDateOfInterestPayment": 99,"cycleAnchorDateOfRateReset": 63,"cycleAnchorDateOfScalingIndex": 1336,"cycleAnchorDateOfFee": 1970,"notionalPrincipal": 0,"nominalInterestRate": 359,"feeAccrued": 31,"accruedInterest": 257,"rateMultiplier": 41,"rateSpread": 360,"feeRate": 146098,"nextResetRate": 2014223715,"penaltyRate": 0,"premiumDiscountAtIED": 10001,"priceAtPurchaseDate": 150,"cycleOfInterestPayment": {"i": 119,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 89,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 4799,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 119,"p": 0,"s": 1,"isSet": false},"lifeCap": 1460,"lifeFloor": 366,"periodCap": 31,"periodFloor": 91},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 13,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [103,57,33,63,134,91,142,194,59,70,113,148,167,174,142,174,108,196,111,126,87,243,154,86,61,18,124,32,26,110,137,158],"legalEntityIdCounterparty": [169,103,165,97,240,210,238,205,149,99,109,78,164,185,140,170,214,248,48,204,43,17,44,159,248,221,152,210,107,141,211,0],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 9999,"statusDate": 97,"initialExchangeDate": 65,"maturityDate": 1969,"terminationDate": 146097,"purchaseDate": 120,"capitalizationEndDate": 2,"cycleAnchorDateOfInterestPayment": 48,"cycleAnchorDateOfRateReset": 81,"cycleAnchorDateOfScalingIndex": 26,"cycleAnchorDateOfFee": 71,"notionalPrincipal": 131,"nominalInterestRate": 24,"feeAccrued": 97,"accruedInterest": 14,"rateMultiplier": 32076,"rateSpread": 901,"feeRate": 70,"nextResetRate": 81,"penaltyRate": 129,"premiumDiscountAtIED": 96,"priceAtPurchaseDate": 59,"cycleOfInterestPayment": {"i": 29,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2446,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 17,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 2446,"p": 1,"s": 0,"isSet": true},"lifeCap": 24,"lifeFloor": 10,"periodCap": 2014223716,"periodFloor": 2014223716}, {"lastEventTime": 66,"contractStatus": 3,"timeFromLastEvent": 2446,"nominalValue": 159,"nominalAccrued": 901,"feeAccrued": 119,"nominalRate": 6,"interestScalingMultiplier": 160,"nominalScalingMultiplier": 139,"contractRoleSign": 6}, 97,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 6,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [76,51,22,128,188,221,109,90,20,31,54,116,223,178,251,208,149,70,134,233,212,94,240,180,131,123,101,237,9,233,159,85],"legalEntityIdCounterparty": [169,187,92,144,5,254,169,98,157,171,214,164,139,233,91,225,72,254,11,70,35,172,143,135,12,159,99,109,173,151,181,238],"dayCountConvention": 0,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 400,"statusDate": 4000,"initialExchangeDate": 2440588,"maturityDate": 256,"terminationDate": 32074,"purchaseDate": 10001,"capitalizationEndDate": 4001,"cycleAnchorDateOfInterestPayment": 950,"cycleAnchorDateOfRateReset": 4800,"cycleAnchorDateOfScalingIndex": 68568,"cycleAnchorDateOfFee": 32,"notionalPrincipal": 64,"nominalInterestRate": 99,"feeAccrued": 361,"accruedInterest": 360,"rateMultiplier": 63,"rateSpread": -1,"feeRate": 23,"nextResetRate": 26,"penaltyRate": 254,"premiumDiscountAtIED": 149,"priceAtPurchaseDate": 40,"cycleOfInterestPayment": {"i": 4799,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 97,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 21,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 10001,"p": 5,"s": 1,"isSet": false},"lifeCap": 1338,"lifeFloor": 1461002,"periodCap": 2440587,"periodFloor": 2014223715}, {"lastEventTime": 254,"contractStatus": 3,"timeFromLastEvent": 17,"nominalValue": 256,"nominalAccrued": 86399,"feeAccrued": 1460,"nominalRate": 255,"interestScalingMultiplier": 13,"nominalScalingMultiplier": 2440588,"contractRoleSign": 9}, {"eventTime": 2014223715,"eventTimeWithEpochOffset": 51,"scheduleTime": 1532892062,"eventType": 0,"currency": accounts[0],"pofType": 15,"stfType": 2}, 161,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [56,10,156,232,66,193,18,159,68,240,15,43,237,185,138,215,210,181,176,199,209,219,16,103,112,155,46,88,81,227,35,26],"legalEntityIdCounterparty": [175,104,223,250,167,212,122,141,158,33,22,189,191,64,58,118,139,116,21,147,78,21,135,51,247,87,16,147,168,117,228,71],"dayCountConvention": 3,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 9999,"statusDate": 1969,"initialExchangeDate": 4899,"maturityDate": 4000,"terminationDate": 17,"purchaseDate": 110,"capitalizationEndDate": 129,"cycleAnchorDateOfInterestPayment": 256,"cycleAnchorDateOfRateReset": 4001,"cycleAnchorDateOfScalingIndex": 949,"cycleAnchorDateOfFee": 111,"notionalPrincipal": 39,"nominalInterestRate": 149,"feeAccrued": 4001,"accruedInterest": 9,"rateMultiplier": 109,"rateSpread": 21,"feeRate": 2,"nextResetRate": 110,"penaltyRate": 110,"premiumDiscountAtIED": 31,"priceAtPurchaseDate": 900,"cycleOfInterestPayment": {"i": 368,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 257,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 151,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 2440589,"p": 1,"s": 0,"isSet": false},"lifeCap": 4899,"lifeFloor": 1337,"periodCap": 40,"periodFloor": 10000}, 2014223714, 1,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [65,143,88,234,80,68,237,207,90,20,201,151,244,227,130,129,229,32,89,247,207,147,141,120,255,27,24,59,140,141,171,52],"legalEntityIdCounterparty": [214,183,139,141,138,18,194,227,176,197,239,143,21,140,10,132,240,246,139,171,121,116,41,98,79,250,236,140,19,196,220,204],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 5,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 70,"statusDate": 1461,"initialExchangeDate": 4000,"maturityDate": 1462,"terminationDate": 49,"purchaseDate": 15,"capitalizationEndDate": 146098,"cycleAnchorDateOfInterestPayment": 39,"cycleAnchorDateOfRateReset": 68568,"cycleAnchorDateOfScalingIndex": 21,"cycleAnchorDateOfFee": 68568,"notionalPrincipal": 2440589,"nominalInterestRate": 900,"feeAccrued": 1969,"accruedInterest": 2446,"rateMultiplier": 97,"rateSpread": 97,"feeRate": 68568,"nextResetRate": 6,"penaltyRate": 1969,"premiumDiscountAtIED": 140,"priceAtPurchaseDate": 1338,"cycleOfInterestPayment": {"i": 4000,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 50,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 949,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 69,"p": 0,"s": 1,"isSet": true},"lifeCap": 97,"lifeFloor": 360,"periodCap": 4801,"periodFloor": 5}, 4900, 121,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [107,34,246,75,3,141,114,157,113,102,168,30,108,189,142,92,52,12,135,24,253,242,180,61,63,236,106,1,77,151,158,142],"legalEntityIdCounterparty": [180,146,195,163,52,164,32,163,174,17,225,162,19,13,181,201,178,74,213,50,190,136,232,17,165,53,33,0,234,38,119,147],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 2,"statusDate": 0,"initialExchangeDate": 26,"maturityDate": 31,"terminationDate": 2447,"purchaseDate": 32,"capitalizationEndDate": 86401,"cycleAnchorDateOfInterestPayment": 16,"cycleAnchorDateOfRateReset": 20,"cycleAnchorDateOfScalingIndex": 4899,"cycleAnchorDateOfFee": 2447,"notionalPrincipal": 401,"nominalInterestRate": 2014223715,"feeAccrued": 41,"accruedInterest": 95,"rateMultiplier": 146098,"rateSpread": 71,"feeRate": 15,"nextResetRate": 59,"penaltyRate": 900,"premiumDiscountAtIED": 146097,"priceAtPurchaseDate": 12,"cycleOfInterestPayment": {"i": 361,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 19,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 1,"p": 1,"s": 0,"isSet": false},"lifeCap": 30,"lifeFloor": 49,"periodCap": 1532892063,"periodFloor": 1532892064}, 91, 32076,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [194,94,159,227,214,39,244,159,199,148,249,200,203,77,102,216,49,130,253,214,212,223,209,204,215,183,170,83,103,170,118,210],"legalEntityIdCounterparty": [220,58,45,225,192,191,43,188,73,29,9,75,247,201,237,136,238,92,189,120,132,147,254,125,228,162,156,77,0,240,191,112],"dayCountConvention": 4,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 1969,"statusDate": 29,"initialExchangeDate": 1461,"maturityDate": 80,"terminationDate": 31,"purchaseDate": 901,"capitalizationEndDate": 1461002,"cycleAnchorDateOfInterestPayment": 21,"cycleAnchorDateOfRateReset": 129,"cycleAnchorDateOfScalingIndex": 28,"cycleAnchorDateOfFee": 18,"notionalPrincipal": 1461000,"nominalInterestRate": 20,"feeAccrued": 97,"accruedInterest": 160,"rateMultiplier": 146096,"rateSpread": 12,"feeRate": 365,"nextResetRate": 20,"penaltyRate": 131,"premiumDiscountAtIED": 4801,"priceAtPurchaseDate": 131,"cycleOfInterestPayment": {"i": 29,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 40,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 7,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 90,"p": 4,"s": 1,"isSet": false},"lifeCap": 90,"lifeFloor": 60,"periodCap": 150,"periodFloor": 39}, 367, 25,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [177,97,146,118,80,212,120,247,225,238,19,182,4,156,202,215,172,202,80,15,243,13,44,27,160,84,53,70,185,158,67,141],"legalEntityIdCounterparty": [61,3,94,132,105,187,3,141,23,113,102,121,214,21,77,82,18,178,42,151,131,3,148,5,79,12,242,79,16,166,64,165],"dayCountConvention": 5,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 2014223716,"statusDate": 51,"initialExchangeDate": 368,"maturityDate": 24,"terminationDate": 119,"purchaseDate": 0,"capitalizationEndDate": 151,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 69,"cycleAnchorDateOfScalingIndex": 949,"cycleAnchorDateOfFee": 1461000,"notionalPrincipal": 2440589,"nominalInterestRate": 16,"feeAccrued": 10,"accruedInterest": 109,"rateMultiplier": 129,"rateSpread": 901,"feeRate": 4001,"nextResetRate": 4900,"penaltyRate": 99,"premiumDiscountAtIED": 100,"priceAtPurchaseDate": 1460,"cycleOfInterestPayment": {"i": 2440589,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 32074,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 257,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 101,"p": 2,"s": 1,"isSet": true},"lifeCap": 24,"lifeFloor": 901,"periodCap": 2446,"periodFloor": 2440589}, 90, 2440588,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [46,94,74,197,189,22,150,24,134,184,253,216,236,255,228,182,121,99,208,50,228,75,71,136,46,102,153,181,181,125,19,205],"legalEntityIdCounterparty": [126,89,232,132,194,202,2,203,237,71,122,34,189,181,195,208,144,148,222,239,75,231,195,181,71,196,104,67,210,161,220,53],"dayCountConvention": 1,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 63,"statusDate": 1462,"initialExchangeDate": 4801,"maturityDate": 71,"terminationDate": 4,"purchaseDate": 366,"capitalizationEndDate": 89,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 68569,"cycleAnchorDateOfScalingIndex": 9,"cycleAnchorDateOfFee": 146097,"notionalPrincipal": 120,"nominalInterestRate": 4,"feeAccrued": 2446,"accruedInterest": 2014223716,"rateMultiplier": 10,"rateSpread": 255,"feeRate": 2440587,"nextResetRate": 900,"penaltyRate": 360,"premiumDiscountAtIED": 366,"priceAtPurchaseDate": 32,"cycleOfInterestPayment": {"i": 8,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 32,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 159,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 159,"p": 3,"s": 0,"isSet": false},"lifeCap": 39,"lifeFloor": 64,"periodCap": 71,"periodFloor": 6}, 1971, 11,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [190,90,157,121,202,211,183,218,113,251,106,56,218,55,119,20,56,161,201,58,14,167,249,34,249,245,254,87,177,156,87,84],"legalEntityIdCounterparty": [107,47,157,63,81,235,108,63,248,57,31,13,159,80,243,151,80,172,163,240,13,101,221,166,145,33,29,188,49,158,211,76],"dayCountConvention": 6,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 24,"statusDate": 68568,"initialExchangeDate": 364,"maturityDate": 3,"terminationDate": 1532892063,"purchaseDate": 40,"capitalizationEndDate": 1,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 146098,"cycleAnchorDateOfScalingIndex": 20,"cycleAnchorDateOfFee": 41,"notionalPrincipal": 2014223714,"nominalInterestRate": 149,"feeAccrued": 86400,"accruedInterest": 950,"rateMultiplier": 131,"rateSpread": 1461,"feeRate": 40,"nextResetRate": 120,"penaltyRate": 141,"premiumDiscountAtIED": 146096,"priceAtPurchaseDate": 32074,"cycleOfInterestPayment": {"i": 1336,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 86401,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 27,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 28,"p": 0,"s": 1,"isSet": false},"lifeCap": 4,"lifeFloor": 4901,"periodCap": 2,"periodFloor": 10000}, 14, 49,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [222,225,186,37,154,238,222,17,160,35,221,232,178,85,79,247,131,20,142,179,196,250,87,71,41,24,136,146,249,146,233,253],"legalEntityIdCounterparty": [173,171,201,24,169,54,215,237,105,195,57,31,239,127,163,72,240,129,34,225,143,239,164,35,64,162,87,119,26,164,26,244],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 3,"statusDate": 139,"initialExchangeDate": 146098,"maturityDate": 160,"terminationDate": 51,"purchaseDate": 31,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 109,"cycleAnchorDateOfRateReset": 96,"cycleAnchorDateOfScalingIndex": 17,"cycleAnchorDateOfFee": 120,"notionalPrincipal": 86399,"nominalInterestRate": 23,"feeAccrued": 2440588,"accruedInterest": 1462,"rateMultiplier": 2014223716,"rateSpread": 30,"feeRate": 949,"nextResetRate": -1,"penaltyRate": 129,"premiumDiscountAtIED": 119,"priceAtPurchaseDate": 100,"cycleOfInterestPayment": {"i": 367,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2446,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 3999,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 1532892062,"p": 4,"s": 1,"isSet": true},"lifeCap": 4900,"lifeFloor": 63,"periodCap": 6,"periodFloor": 130}, 901, 110,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [26,106,230,72,207,105,227,86,243,162,96,201,97,97,193,167,222,22,182,12,24,186,38,189,134,204,173,141,65,53,193,102],"legalEntityIdCounterparty": [104,46,20,22,85,188,38,154,158,26,239,89,250,98,34,229,227,216,250,71,104,182,202,96,147,248,36,133,118,206,196,108],"dayCountConvention": 6,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 2447,"statusDate": 8,"initialExchangeDate": 121,"maturityDate": 0,"terminationDate": 9,"purchaseDate": 41,"capitalizationEndDate": 24,"cycleAnchorDateOfInterestPayment": 9,"cycleAnchorDateOfRateReset": 139,"cycleAnchorDateOfScalingIndex": 91,"cycleAnchorDateOfFee": 1462,"notionalPrincipal": 2440589,"nominalInterestRate": 20,"feeAccrued": 20,"accruedInterest": 1461001,"rateMultiplier": 949,"rateSpread": 31,"feeRate": 4900,"nextResetRate": 31,"penaltyRate": 17,"premiumDiscountAtIED": 20,"priceAtPurchaseDate": 1461002,"cycleOfInterestPayment": {"i": 4800,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 400,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 254,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 2440589,"p": 1,"s": 1,"isSet": true},"lifeCap": 2440587,"lifeFloor": 41,"periodCap": 401,"periodFloor": 26}, 68570, 68569,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [176,227,215,14,173,59,191,182,211,201,225,118,112,161,56,12,174,29,244,27,181,76,169,198,76,104,11,75,151,172,178,37],"legalEntityIdCounterparty": [248,108,215,251,171,235,163,10,21,90,220,240,227,46,247,139,5,60,36,20,148,198,75,103,28,79,198,217,87,99,192,56],"dayCountConvention": 3,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 5,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 1,"statusDate": 50,"initialExchangeDate": 86401,"maturityDate": 111,"terminationDate": 399,"purchaseDate": 141,"capitalizationEndDate": 4800,"cycleAnchorDateOfInterestPayment": 1532892064,"cycleAnchorDateOfRateReset": 360,"cycleAnchorDateOfScalingIndex": 61,"cycleAnchorDateOfFee": 26,"notionalPrincipal": 2448,"nominalInterestRate": 151,"feeAccrued": 59,"accruedInterest": 1336,"rateMultiplier": 17,"rateSpread": 131,"feeRate": 951,"nextResetRate": 9,"penaltyRate": 2448,"premiumDiscountAtIED": 110,"priceAtPurchaseDate": 901,"cycleOfInterestPayment": {"i": 951,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1337,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 149,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 146098,"p": 4,"s": 0,"isSet": false},"lifeCap": 17,"lifeFloor": 71,"periodCap": 367,"periodFloor": 10}, 1461002, 367,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [137,130,60,85,82,93,10,126,7,19,38,96,178,11,168,243,80,184,165,202,72,155,33,36,194,148,244,187,214,20,7,122],"legalEntityIdCounterparty": [97,183,124,68,41,252,236,104,79,200,1,194,31,170,44,120,232,111,113,173,149,77,241,93,186,116,163,192,65,90,220,111],"dayCountConvention": 3,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 51,"statusDate": 359,"initialExchangeDate": 360,"maturityDate": 131,"terminationDate": 2440588,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1337,"cycleAnchorDateOfRateReset": 951,"cycleAnchorDateOfScalingIndex": 69,"cycleAnchorDateOfFee": 1460,"notionalPrincipal": 3999,"nominalInterestRate": 0,"feeAccrued": 19,"accruedInterest": 2,"rateMultiplier": 90,"rateSpread": 949,"feeRate": 131,"nextResetRate": 63,"penaltyRate": 49,"premiumDiscountAtIED": 399,"priceAtPurchaseDate": 65,"cycleOfInterestPayment": {"i": 360,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 364,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 256,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 10001,"p": 1,"s": 0,"isSet": true},"lifeCap": 27,"lifeFloor": 97,"periodCap": 17,"periodFloor": 149}, 70, 9999,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [65,213,199,239,205,194,205,12,79,23,10,170,162,10,116,44,212,130,120,245,89,82,238,126,189,232,160,32,219,26,93,196],"legalEntityIdCounterparty": [175,192,85,119,16,87,141,228,32,120,139,28,61,95,12,215,224,216,4,6,154,1,190,100,111,45,145,210,71,6,116,78],"dayCountConvention": 2,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 2014223716,"statusDate": 11,"initialExchangeDate": 41,"maturityDate": 1461000,"terminationDate": 18,"purchaseDate": 10000,"capitalizationEndDate": 367,"cycleAnchorDateOfInterestPayment": 139,"cycleAnchorDateOfRateReset": 2440589,"cycleAnchorDateOfScalingIndex": 365,"cycleAnchorDateOfFee": 161,"notionalPrincipal": 1970,"nominalInterestRate": 7,"feeAccrued": 3999,"accruedInterest": 400,"rateMultiplier": 32074,"rateSpread": 3,"feeRate": 1532892064,"nextResetRate": 90,"penaltyRate": 81,"premiumDiscountAtIED": 1461001,"priceAtPurchaseDate": 29,"cycleOfInterestPayment": {"i": 256,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 149,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 150,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 41,"p": 1,"s": 1,"isSet": true},"lifeCap": 61,"lifeFloor": 69,"periodCap": 100,"periodFloor": 255}, 361, 32074,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [167,45,113,9,32,203,209,81,139,221,58,236,100,130,231,4,28,245,239,79,33,229,3,13,135,164,90,250,11,59,1,118],"legalEntityIdCounterparty": [30,157,100,120,93,248,74,192,255,54,168,82,187,5,187,54,67,50,141,114,34,147,49,23,10,248,204,224,122,25,231,115],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 2,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 951,"statusDate": 63,"initialExchangeDate": 109,"maturityDate": 360,"terminationDate": 79,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 23,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 2014223716,"cycleAnchorDateOfFee": 60,"notionalPrincipal": 120,"nominalInterestRate": 0,"feeAccrued": 1532892062,"accruedInterest": 31,"rateMultiplier": 32075,"rateSpread": 899,"feeRate": 65,"nextResetRate": 2014223716,"penaltyRate": 121,"premiumDiscountAtIED": 3,"priceAtPurchaseDate": 4800,"cycleOfInterestPayment": {"i": 159,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 10000,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 4801,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 100,"p": 2,"s": 1,"isSet": false},"lifeCap": 110,"lifeFloor": 1971,"periodCap": 2014223716,"periodFloor": 139}, 1461000, 10001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [17,6,41,148,214,212,195,130,127,181,74,171,14,202,87,196,214,200,242,25,158,220,10,213,66,117,9,26,247,165,133,101],"legalEntityIdCounterparty": [196,25,41,145,156,245,196,175,116,170,214,54,169,45,54,218,59,147,15,8,194,36,233,112,41,161,117,221,246,42,66,160],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 17,"statusDate": 1461001,"initialExchangeDate": 27,"maturityDate": 49,"terminationDate": 64,"purchaseDate": 2014223714,"capitalizationEndDate": 2440587,"cycleAnchorDateOfInterestPayment": 110,"cycleAnchorDateOfRateReset": 151,"cycleAnchorDateOfScalingIndex": 4901,"cycleAnchorDateOfFee": 366,"notionalPrincipal": 14,"nominalInterestRate": 110,"feeAccrued": 255,"accruedInterest": 121,"rateMultiplier": 13,"rateSpread": 1532892062,"feeRate": 400,"nextResetRate": 110,"penaltyRate": 2014223716,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 1460,"cycleOfInterestPayment": {"i": 9,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 9,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 257,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 1970,"p": 0,"s": 0,"isSet": false},"lifeCap": 4900,"lifeFloor": 368,"periodCap": 949,"periodFloor": 68569}, 1460, 2014223716,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [244,33,129,188,29,123,158,62,117,40,147,140,72,28,178,175,104,146,127,82,234,32,239,228,237,64,204,64,227,211,4,164],"legalEntityIdCounterparty": [92,63,118,155,79,92,243,55,95,168,248,44,5,254,149,53,27,113,73,200,66,60,43,41,8,90,34,131,32,126,148,146],"dayCountConvention": 4,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 3,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 21,"statusDate": 86399,"initialExchangeDate": 2440589,"maturityDate": 1532892064,"terminationDate": 60,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 255,"cycleAnchorDateOfRateReset": 71,"cycleAnchorDateOfScalingIndex": 14,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 61,"nominalInterestRate": 0,"feeAccrued": 2440589,"accruedInterest": 2446,"rateMultiplier": 4899,"rateSpread": 95,"feeRate": 4900,"nextResetRate": 4801,"penaltyRate": 2448,"premiumDiscountAtIED": 2447,"priceAtPurchaseDate": 160,"cycleOfInterestPayment": {"i": 361,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 3,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 2448,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 2440589,"p": 3,"s": 1,"isSet": true},"lifeCap": 2440588,"lifeFloor": 59,"periodCap": 100,"periodFloor": 91}, 1461, 91,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [207,28,223,4,204,192,123,63,117,71,153,227,191,156,233,190,12,12,161,198,67,24,128,168,45,111,111,106,247,246,49,59],"legalEntityIdCounterparty": [91,209,204,205,193,18,26,109,94,167,161,37,150,37,23,248,140,176,121,107,40,116,51,210,22,190,151,78,134,97,151,43],"dayCountConvention": 6,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 139,"statusDate": 79,"initialExchangeDate": 4000,"maturityDate": 95,"terminationDate": 146096,"purchaseDate": 949,"capitalizationEndDate": 60,"cycleAnchorDateOfInterestPayment": 68569,"cycleAnchorDateOfRateReset": 32074,"cycleAnchorDateOfScalingIndex": 32,"cycleAnchorDateOfFee": 24,"notionalPrincipal": 7,"nominalInterestRate": 899,"feeAccrued": 4001,"accruedInterest": 86401,"rateMultiplier": 255,"rateSpread": 27,"feeRate": 71,"nextResetRate": 360,"penaltyRate": 31,"premiumDiscountAtIED": 3,"priceAtPurchaseDate": 49,"cycleOfInterestPayment": {"i": 1532892062,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 86400,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 86399,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 63,"p": 0,"s": 1,"isSet": false},"lifeCap": 1337,"lifeFloor": 10000,"periodCap": 100,"periodFloor": 257}, 99, 1532892064,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [5,123,63,200,126,36,16,247,150,80,173,162,105,105,137,236,228,199,90,140,189,249,66,156,246,184,230,129,88,27,50,117],"legalEntityIdCounterparty": [243,162,73,26,140,240,14,132,159,96,161,118,240,73,168,214,84,110,171,182,185,26,51,6,243,86,82,210,170,47,4,89],"dayCountConvention": 1,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 6,"statusDate": 70,"initialExchangeDate": 80,"maturityDate": 1461,"terminationDate": 361,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 10,"cycleAnchorDateOfRateReset": 367,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 7,"notionalPrincipal": 2014223715,"nominalInterestRate": 0,"feeAccrued": 2014223716,"accruedInterest": 32074,"rateMultiplier": 255,"rateSpread": 151,"feeRate": 69,"nextResetRate": 11,"penaltyRate": 2440589,"premiumDiscountAtIED": 2440587,"priceAtPurchaseDate": 2014223716,"cycleOfInterestPayment": {"i": 4900,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 4899,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 18,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 159,"p": 3,"s": 1,"isSet": false},"lifeCap": 1971,"lifeFloor": 4000,"periodCap": 17,"periodFloor": 13}, 161, 19,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [130,37,183,194,46,88,215,171,249,104,167,194,192,224,143,175,60,112,217,254,10,178,183,53,166,236,234,62,145,45,114,209],"legalEntityIdCounterparty": [177,206,119,68,195,228,249,138,193,83,127,92,10,243,83,172,70,206,191,130,179,94,234,92,178,143,100,127,61,89,53,112],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 89,"statusDate": 99,"initialExchangeDate": 90,"maturityDate": 1970,"terminationDate": 2446,"purchaseDate": 12,"capitalizationEndDate": 4901,"cycleAnchorDateOfInterestPayment": 361,"cycleAnchorDateOfRateReset": 2014223715,"cycleAnchorDateOfScalingIndex": 17,"cycleAnchorDateOfFee": 1532892063,"notionalPrincipal": 4,"nominalInterestRate": 951,"feeAccrued": 59,"accruedInterest": 4900,"rateMultiplier": 71,"rateSpread": 1532892064,"feeRate": 31,"nextResetRate": 899,"penaltyRate": 31,"premiumDiscountAtIED": 2448,"priceAtPurchaseDate": 11,"cycleOfInterestPayment": {"i": 69,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 900,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 95,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 255,"p": 1,"s": 1,"isSet": false},"lifeCap": 109,"lifeFloor": 49,"periodCap": 4799,"periodFloor": 2014223716}, 256, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [173,13,99,47,225,172,131,25,88,41,46,60,191,94,206,179,160,32,87,14,184,230,250,36,118,155,34,186,228,99,106,144],"legalEntityIdCounterparty": [59,148,60,208,245,225,70,217,105,205,167,159,69,176,84,125,31,110,198,76,112,168,41,59,40,244,94,70,194,206,207,24],"dayCountConvention": 2,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 951,"statusDate": 255,"initialExchangeDate": 900,"maturityDate": 50,"terminationDate": 49,"purchaseDate": 3999,"capitalizationEndDate": 27,"cycleAnchorDateOfInterestPayment": 86401,"cycleAnchorDateOfRateReset": 32075,"cycleAnchorDateOfScalingIndex": 68570,"cycleAnchorDateOfFee": 18,"notionalPrincipal": 39,"nominalInterestRate": 149,"feeAccrued": 2014223714,"accruedInterest": 17,"rateMultiplier": 1461,"rateSpread": 80,"feeRate": 1971,"nextResetRate": 97,"penaltyRate": 96,"premiumDiscountAtIED": 399,"priceAtPurchaseDate": 121,"cycleOfInterestPayment": {"i": 86400,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 99,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 3,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 86399,"p": 2,"s": 0,"isSet": true},"lifeCap": 100,"lifeFloor": 21,"periodCap": 110,"periodFloor": 64}, 10, 255,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [243,230,95,93,193,237,143,198,43,90,182,98,68,191,216,233,69,126,130,195,132,180,218,10,81,30,189,152,121,109,73,184],"legalEntityIdCounterparty": [166,194,159,254,27,229,133,162,4,150,78,151,120,33,195,48,55,200,235,30,223,44,146,10,24,230,171,125,51,114,110,36],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 257,"statusDate": 2440588,"initialExchangeDate": 32074,"maturityDate": 1337,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 97,"cycleAnchorDateOfRateReset": 899,"cycleAnchorDateOfScalingIndex": 1,"cycleAnchorDateOfFee": 20,"notionalPrincipal": 1338,"nominalInterestRate": 0,"feeAccrued": 110,"accruedInterest": 41,"rateMultiplier": 399,"rateSpread": 31,"feeRate": 50,"nextResetRate": -1,"penaltyRate": 4001,"premiumDiscountAtIED": 159,"priceAtPurchaseDate": 3999,"cycleOfInterestPayment": {"i": 97,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 32076,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 50,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 32074,"p": 2,"s": 1,"isSet": false},"lifeCap": 6,"lifeFloor": 2014223716,"periodCap": 39,"periodFloor": 129}, 400, 2440589,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [68,205,247,79,147,37,92,173,217,167,254,86,169,87,150,180,138,35,170,76,230,20,187,76,226,49,237,68,236,171,62,155],"legalEntityIdCounterparty": [132,11,242,67,192,238,245,21,64,87,6,29,147,228,228,48,164,115,57,172,166,177,241,129,52,3,106,30,23,101,185,130],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 4,"statusDate": 150,"initialExchangeDate": 110,"maturityDate": 900,"terminationDate": 49,"purchaseDate": 1462,"capitalizationEndDate": 1336,"cycleAnchorDateOfInterestPayment": 66,"cycleAnchorDateOfRateReset": 4801,"cycleAnchorDateOfScalingIndex": 29,"cycleAnchorDateOfFee": 4800,"notionalPrincipal": 366,"nominalInterestRate": 18,"feeAccrued": 20,"accruedInterest": 27,"rateMultiplier": 10001,"rateSpread": 1461000,"feeRate": 2,"nextResetRate": 19,"penaltyRate": 129,"premiumDiscountAtIED": 17,"priceAtPurchaseDate": 2014223716,"cycleOfInterestPayment": {"i": 1461000,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 367,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 1532892064,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 900,"p": 2,"s": 1,"isSet": false},"lifeCap": 160,"lifeFloor": 6,"periodCap": 51,"periodFloor": 121}, 1336, 949,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [45,69,54,93,91,239,252,245,206,149,190,12,150,180,120,180,123,224,199,81,180,165,119,121,75,53,184,253,170,17,4,154],"legalEntityIdCounterparty": [143,64,7,54,151,7,180,90,244,210,46,169,255,189,174,168,98,129,156,69,43,60,28,117,236,85,15,232,16,245,16,197],"dayCountConvention": 1,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 59,"statusDate": 63,"initialExchangeDate": 9,"maturityDate": 1970,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 32,"cycleAnchorDateOfRateReset": 14,"cycleAnchorDateOfScalingIndex": 59,"cycleAnchorDateOfFee": 30,"notionalPrincipal": 1,"nominalInterestRate": 0,"feeAccrued": 49,"accruedInterest": 361,"rateMultiplier": 71,"rateSpread": 68570,"feeRate": 32074,"nextResetRate": 160,"penaltyRate": 899,"premiumDiscountAtIED": 1970,"priceAtPurchaseDate": 4,"cycleOfInterestPayment": {"i": 401,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 16,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 254,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 0,"p": 2,"s": 1,"isSet": false},"lifeCap": 68568,"lifeFloor": 400,"periodCap": 365,"periodFloor": 951}, 1460, 2440588,{from: accounts[0]});
  });
});
