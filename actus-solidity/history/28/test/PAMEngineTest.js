const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 8,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [251,159,6,203,253,100,54,139,243,196,103,21,18,192,215,106,16,185,70,140,158,179,215,88,140,245,91,162,221,48,50,183],"legalEntityIdCounterparty": [117,214,244,8,165,53,100,224,177,185,27,106,191,144,204,143,35,134,124,151,24,144,81,87,209,76,220,131,93,85,189,177],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 131,"statusDate": 149,"initialExchangeDate": 1462,"maturityDate": 146096,"terminationDate": 111,"purchaseDate": 101,"capitalizationEndDate": 949,"cycleAnchorDateOfInterestPayment": 0,"cycleAnchorDateOfRateReset": 1461,"cycleAnchorDateOfScalingIndex": 20,"cycleAnchorDateOfFee": 99,"notionalPrincipal": 81,"nominalInterestRate": 68570,"feeAccrued": 368,"accruedInterest": 25,"rateMultiplier": 64,"rateSpread": 901,"feeRate": 91,"nextResetRate": 3999,"penaltyRate": 86401,"premiumDiscountAtIED": 129,"priceAtPurchaseDate": 161,"cycleOfInterestPayment": {"i": 368,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1460,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 18,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 129,"p": 0,"s": 1,"isSet": false},"lifeCap": 130,"lifeFloor": 1971,"periodCap": 86401,"periodFloor": 1532892064},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 14,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [94,219,70,58,166,84,117,27,38,23,63,115,47,178,168,67,239,20,65,139,37,162,235,76,204,37,98,190,148,83,61,27],"legalEntityIdCounterparty": [197,166,122,123,162,94,50,243,195,215,89,48,0,14,27,7,120,187,211,203,58,167,134,168,160,163,163,232,33,224,157,211],"dayCountConvention": 3,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 1461002,"statusDate": 2447,"initialExchangeDate": 4800,"maturityDate": 151,"terminationDate": 1337,"purchaseDate": 24,"capitalizationEndDate": 160,"cycleAnchorDateOfInterestPayment": 11,"cycleAnchorDateOfRateReset": 361,"cycleAnchorDateOfScalingIndex": 59,"cycleAnchorDateOfFee": 63,"notionalPrincipal": 899,"nominalInterestRate": 66,"feeAccrued": 59,"accruedInterest": 366,"rateMultiplier": 5,"rateSpread": 4900,"feeRate": -1,"nextResetRate": 39,"penaltyRate": 71,"premiumDiscountAtIED": 366,"priceAtPurchaseDate": 64,"cycleOfInterestPayment": {"i": 32074,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 4801,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 149,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 1336,"p": 2,"s": 0,"isSet": false},"lifeCap": 4,"lifeFloor": 146098,"periodCap": 10001,"periodFloor": 4000}, {"lastEventTime": 48,"contractStatus": 1,"timeFromLastEvent": 32075,"nominalValue": 4799,"nominalAccrued": 367,"feeAccrued": 1460,"nominalRate": 2,"interestScalingMultiplier": 949,"nominalScalingMultiplier": 32,"contractRoleSign": 6}, 950,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 10,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [239,210,197,155,3,246,13,65,131,91,57,9,84,96,40,255,34,36,155,238,212,211,138,163,150,179,134,254,54,218,209,70],"legalEntityIdCounterparty": [130,96,145,76,243,82,161,220,95,139,192,178,160,172,186,5,18,211,149,249,150,86,113,160,219,225,37,192,194,168,40,252],"dayCountConvention": 4,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 64,"statusDate": 32,"initialExchangeDate": 68570,"maturityDate": 2447,"terminationDate": 39,"purchaseDate": 3,"capitalizationEndDate": 1338,"cycleAnchorDateOfInterestPayment": 24,"cycleAnchorDateOfRateReset": 109,"cycleAnchorDateOfScalingIndex": 8,"cycleAnchorDateOfFee": 9999,"notionalPrincipal": 2447,"nominalInterestRate": 71,"feeAccrued": 16,"accruedInterest": 4001,"rateMultiplier": 12,"rateSpread": 109,"feeRate": 10000,"nextResetRate": 1970,"penaltyRate": 3,"premiumDiscountAtIED": 119,"priceAtPurchaseDate": 26,"cycleOfInterestPayment": {"i": 25,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 96,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 20,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 70,"p": 5,"s": 1,"isSet": true},"lifeCap": 86399,"lifeFloor": 71,"periodCap": 140,"periodFloor": 2014223715}, {"lastEventTime": 2448,"contractStatus": 1,"timeFromLastEvent": 64,"nominalValue": 2440589,"nominalAccrued": 1,"feeAccrued": 2440589,"nominalRate": 64,"interestScalingMultiplier": 149,"nominalScalingMultiplier": 68570,"contractRoleSign": 0}, {"eventTime": 129,"eventTimeWithEpochOffset": 2446,"scheduleTime": 257,"eventType": 4,"currency": accounts[4],"pofType": 8,"stfType": 11}, 50,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [105,207,72,169,140,194,227,53,225,174,216,88,31,244,126,24,217,4,9,173,117,73,35,130,171,26,21,199,152,172,170,188],"legalEntityIdCounterparty": [159,69,114,102,128,190,212,146,170,200,98,142,230,147,9,79,88,40,11,92,145,250,57,83,174,245,49,91,158,158,65,134],"dayCountConvention": 0,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 1,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 1336,"statusDate": 27,"initialExchangeDate": 10000,"maturityDate": 32075,"terminationDate": 32,"purchaseDate": 11,"capitalizationEndDate": 68570,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 1971,"cycleAnchorDateOfScalingIndex": 1461001,"cycleAnchorDateOfFee": 32074,"notionalPrincipal": 359,"nominalInterestRate": 361,"feeAccrued": 140,"accruedInterest": -1,"rateMultiplier": 68570,"rateSpread": 5,"feeRate": 151,"nextResetRate": 146098,"penaltyRate": 146096,"premiumDiscountAtIED": 65,"priceAtPurchaseDate": 399,"cycleOfInterestPayment": {"i": 24,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 19,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4001,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 255,"p": 1,"s": 1,"isSet": false},"lifeCap": 1336,"lifeFloor": 1338,"periodCap": 2440589,"periodFloor": 89}, 19, 15,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [102,227,83,118,231,11,145,5,110,122,103,187,97,63,34,138,26,8,107,208,196,21,43,84,73,108,100,81,238,157,138,122],"legalEntityIdCounterparty": [158,0,54,70,110,189,248,212,43,215,66,126,40,19,140,29,87,111,146,192,14,193,146,171,151,208,182,192,241,102,27,205],"dayCountConvention": 2,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 10,"statusDate": 364,"initialExchangeDate": 130,"maturityDate": 12,"terminationDate": 2440587,"purchaseDate": 39,"capitalizationEndDate": 130,"cycleAnchorDateOfInterestPayment": 4,"cycleAnchorDateOfRateReset": 97,"cycleAnchorDateOfScalingIndex": 1970,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 159,"nominalInterestRate": -1,"feeAccrued": 69,"accruedInterest": 140,"rateMultiplier": 1461001,"rateSpread": 1460,"feeRate": 400,"nextResetRate": 59,"penaltyRate": 5,"premiumDiscountAtIED": 1460,"priceAtPurchaseDate": 4000,"cycleOfInterestPayment": {"i": 8,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1532892063,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 100,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 3999,"p": 2,"s": 1,"isSet": false},"lifeCap": 139,"lifeFloor": 9,"periodCap": 3999,"periodFloor": 149}, 121, 900,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [102,43,211,140,55,44,142,196,192,144,138,69,67,231,115,11,144,82,200,103,250,156,27,76,190,180,105,80,214,59,215,53],"legalEntityIdCounterparty": [235,86,132,69,167,83,1,83,254,189,215,228,94,113,134,41,202,83,10,214,90,13,87,231,225,194,253,147,247,158,2,151],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 146098,"statusDate": 1461002,"initialExchangeDate": 4,"maturityDate": 32075,"terminationDate": 21,"purchaseDate": 86399,"capitalizationEndDate": 2,"cycleAnchorDateOfInterestPayment": 65,"cycleAnchorDateOfRateReset": 89,"cycleAnchorDateOfScalingIndex": 1336,"cycleAnchorDateOfFee": 16,"notionalPrincipal": 149,"nominalInterestRate": 30,"feeAccrued": 951,"accruedInterest": 79,"rateMultiplier": 1336,"rateSpread": 15,"feeRate": 2014223714,"nextResetRate": 10000,"penaltyRate": 366,"premiumDiscountAtIED": 80,"priceAtPurchaseDate": 25,"cycleOfInterestPayment": {"i": 2014223714,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 401,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 901,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 51,"p": 2,"s": 1,"isSet": true},"lifeCap": 21,"lifeFloor": 1461001,"periodCap": 949,"periodFloor": 257}, 2440589, 951,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [239,228,23,114,14,142,243,25,90,101,116,165,112,54,251,32,69,8,61,32,231,103,29,16,129,93,210,83,87,161,75,145],"legalEntityIdCounterparty": [37,194,42,14,134,111,23,243,248,67,231,29,228,171,197,139,92,69,68,47,4,158,96,10,62,188,222,49,133,239,128,11],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 2,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 900,"statusDate": 32076,"initialExchangeDate": 4901,"maturityDate": 18,"terminationDate": 1,"purchaseDate": 159,"capitalizationEndDate": 2440587,"cycleAnchorDateOfInterestPayment": 90,"cycleAnchorDateOfRateReset": 129,"cycleAnchorDateOfScalingIndex": 5,"cycleAnchorDateOfFee": 900,"notionalPrincipal": 1337,"nominalInterestRate": 4,"feeAccrued": 367,"accruedInterest": 361,"rateMultiplier": 146098,"rateSpread": 13,"feeRate": 366,"nextResetRate": 139,"penaltyRate": 12,"premiumDiscountAtIED": 79,"priceAtPurchaseDate": 10,"cycleOfInterestPayment": {"i": 0,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 31,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 68570,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 14,"p": 5,"s": 0,"isSet": true},"lifeCap": 19,"lifeFloor": 2440589,"periodCap": 20,"periodFloor": 65}, 10001, 1,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [181,234,70,163,189,220,142,35,57,51,85,238,166,102,44,63,59,174,96,32,168,159,45,15,45,91,207,166,240,37,156,90],"legalEntityIdCounterparty": [56,124,12,120,220,45,94,103,116,98,4,71,180,47,205,188,170,14,34,92,25,232,196,80,162,61,19,134,30,108,249,143],"dayCountConvention": 0,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 69,"statusDate": 2014223714,"initialExchangeDate": 64,"maturityDate": 10001,"terminationDate": 151,"purchaseDate": 0,"capitalizationEndDate": 19,"cycleAnchorDateOfInterestPayment": 8,"cycleAnchorDateOfRateReset": 9999,"cycleAnchorDateOfScalingIndex": 950,"cycleAnchorDateOfFee": 1461,"notionalPrincipal": 150,"nominalInterestRate": 256,"feeAccrued": 255,"accruedInterest": 2440588,"rateMultiplier": 2,"rateSpread": 366,"feeRate": 256,"nextResetRate": 141,"penaltyRate": 90,"premiumDiscountAtIED": 60,"priceAtPurchaseDate": 4799,"cycleOfInterestPayment": {"i": 5,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 0,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 31,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 901,"p": 4,"s": 0,"isSet": false},"lifeCap": 69,"lifeFloor": 5,"periodCap": 160,"periodFloor": 366}, 51, 1461,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [185,98,161,25,11,171,199,143,105,176,240,28,226,127,72,207,19,252,62,6,201,129,55,13,192,170,141,101,53,96,23,223],"legalEntityIdCounterparty": [150,167,153,251,73,229,175,121,189,87,82,214,236,117,24,58,53,66,141,104,239,182,100,95,14,82,104,248,71,95,122,181],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 359,"statusDate": 1461002,"initialExchangeDate": 9,"maturityDate": 131,"terminationDate": 30,"purchaseDate": 51,"capitalizationEndDate": 9,"cycleAnchorDateOfInterestPayment": 101,"cycleAnchorDateOfRateReset": 254,"cycleAnchorDateOfScalingIndex": 1532892062,"cycleAnchorDateOfFee": 151,"notionalPrincipal": 5,"nominalInterestRate": 32075,"feeAccrued": 97,"accruedInterest": 360,"rateMultiplier": 1461000,"rateSpread": 66,"feeRate": 950,"nextResetRate": 109,"penaltyRate": 3999,"premiumDiscountAtIED": 150,"priceAtPurchaseDate": 5,"cycleOfInterestPayment": {"i": 2448,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 141,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 10000,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 951,"p": 0,"s": 1,"isSet": false},"lifeCap": 1461,"lifeFloor": 1461001,"periodCap": 32076,"periodFloor": 70}, 1532892062, 99,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [143,34,29,172,82,20,172,99,123,255,27,225,192,83,145,203,49,191,130,170,181,223,80,187,69,60,89,89,83,77,99,23],"legalEntityIdCounterparty": [101,216,192,52,80,136,173,57,3,65,63,127,121,80,152,162,169,111,189,137,135,191,194,6,137,252,196,1,234,15,125,210],"dayCountConvention": 0,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 20,"statusDate": 141,"initialExchangeDate": 60,"maturityDate": 368,"terminationDate": 2014223716,"purchaseDate": 7,"capitalizationEndDate": 129,"cycleAnchorDateOfInterestPayment": 32076,"cycleAnchorDateOfRateReset": 367,"cycleAnchorDateOfScalingIndex": 2,"cycleAnchorDateOfFee": 9,"notionalPrincipal": 13,"nominalInterestRate": 99,"feeAccrued": 5,"accruedInterest": 119,"rateMultiplier": 366,"rateSpread": 30,"feeRate": 140,"nextResetRate": 901,"penaltyRate": -1,"premiumDiscountAtIED": 1338,"priceAtPurchaseDate": 159,"cycleOfInterestPayment": {"i": 68568,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 110,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 41,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 69,"p": 2,"s": 1,"isSet": true},"lifeCap": 1461001,"lifeFloor": 13,"periodCap": 18,"periodFloor": 1971}, 81, 255,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [253,59,194,113,20,74,38,131,234,181,77,234,85,233,24,208,204,61,75,224,109,29,202,19,49,148,28,165,190,75,230,20],"legalEntityIdCounterparty": [177,129,208,75,164,19,53,68,241,137,105,15,89,82,244,95,83,3,247,173,95,173,26,199,221,101,188,23,138,34,172,24],"dayCountConvention": 4,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 10001,"statusDate": 49,"initialExchangeDate": 2448,"maturityDate": 255,"terminationDate": 0,"purchaseDate": 120,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1461002,"cycleAnchorDateOfRateReset": 1970,"cycleAnchorDateOfScalingIndex": 86399,"cycleAnchorDateOfFee": 401,"notionalPrincipal": 2448,"nominalInterestRate": 4000,"feeAccrued": 111,"accruedInterest": 109,"rateMultiplier": 17,"rateSpread": 2,"feeRate": 2440588,"nextResetRate": 21,"penaltyRate": 89,"premiumDiscountAtIED": 48,"priceAtPurchaseDate": 17,"cycleOfInterestPayment": {"i": 97,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 13,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 69,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 121,"p": 5,"s": 1,"isSet": true},"lifeCap": 11,"lifeFloor": 2447,"periodCap": 150,"periodFloor": 109}, 32, 71,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [24,160,114,147,50,98,66,43,169,157,48,116,236,90,20,89,39,56,115,38,68,58,10,85,71,111,228,55,119,69,157,18],"legalEntityIdCounterparty": [26,26,238,221,18,203,175,54,132,139,142,3,204,65,236,65,113,38,210,118,150,218,148,32,235,130,42,254,197,193,19,136],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 40,"statusDate": 2448,"initialExchangeDate": 40,"maturityDate": 10000,"terminationDate": 40,"purchaseDate": 4899,"capitalizationEndDate": 2014223715,"cycleAnchorDateOfInterestPayment": 18,"cycleAnchorDateOfRateReset": 20,"cycleAnchorDateOfScalingIndex": 900,"cycleAnchorDateOfFee": 49,"notionalPrincipal": 39,"nominalInterestRate": 2447,"feeAccrued": 21,"accruedInterest": 4799,"rateMultiplier": 146098,"rateSpread": 401,"feeRate": 146096,"nextResetRate": 14,"penaltyRate": 32076,"premiumDiscountAtIED": 1970,"priceAtPurchaseDate": 2014223716,"cycleOfInterestPayment": {"i": 149,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 65,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2446,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 159,"p": 1,"s": 1,"isSet": true},"lifeCap": 364,"lifeFloor": 7,"periodCap": 8,"periodFloor": 18}, 366, 86401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [210,146,186,160,216,46,68,96,198,99,23,248,54,97,138,229,27,159,196,127,228,59,109,66,155,250,106,47,56,85,213,187],"legalEntityIdCounterparty": [215,55,211,38,127,92,205,81,230,253,90,63,168,62,122,7,11,64,165,19,236,218,105,219,167,101,218,67,252,209,224,51],"dayCountConvention": 2,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 96,"statusDate": 79,"initialExchangeDate": 1338,"maturityDate": 359,"terminationDate": 24,"purchaseDate": 32075,"capitalizationEndDate": 19,"cycleAnchorDateOfInterestPayment": 146097,"cycleAnchorDateOfRateReset": 2447,"cycleAnchorDateOfScalingIndex": 100,"cycleAnchorDateOfFee": 96,"notionalPrincipal": 17,"nominalInterestRate": 39,"feeAccrued": 30,"accruedInterest": 10,"rateMultiplier": 4801,"rateSpread": 151,"feeRate": 119,"nextResetRate": 1461002,"penaltyRate": 61,"premiumDiscountAtIED": 10,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 10,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 25,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 900,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 5,"p": 4,"s": 1,"isSet": true},"lifeCap": 1462,"lifeFloor": 1969,"periodCap": 60,"periodFloor": 81}, 86399, 14,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [36,180,184,168,145,136,227,175,163,243,76,6,235,76,43,191,110,213,162,85,207,172,241,181,205,69,35,231,211,108,131,93],"legalEntityIdCounterparty": [219,7,30,41,167,114,18,70,110,77,62,57,173,67,184,212,240,35,216,250,135,193,139,201,22,184,200,249,133,153,162,154],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 2448,"statusDate": 2440589,"initialExchangeDate": 368,"maturityDate": 4901,"terminationDate": 1,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 14,"cycleAnchorDateOfRateReset": 32074,"cycleAnchorDateOfScalingIndex": 130,"cycleAnchorDateOfFee": 1532892064,"notionalPrincipal": 9999,"nominalInterestRate": 0,"feeAccrued": 4900,"accruedInterest": 32074,"rateMultiplier": 66,"rateSpread": 6,"feeRate": 9999,"nextResetRate": 2,"penaltyRate": 399,"premiumDiscountAtIED": 101,"priceAtPurchaseDate": 256,"cycleOfInterestPayment": {"i": 25,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 0,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 86401,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 3,"p": 0,"s": 1,"isSet": true},"lifeCap": 11,"lifeFloor": 40,"periodCap": 16,"periodFloor": 69}, 900, 10000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [102,111,211,80,78,199,29,235,216,67,85,18,144,139,96,177,166,219,120,177,147,109,223,48,124,84,245,106,29,192,150,110],"legalEntityIdCounterparty": [196,22,192,79,162,110,221,98,18,51,230,136,252,81,11,76,89,22,170,66,154,157,193,160,120,146,181,199,32,165,55,24],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 99,"statusDate": 1969,"initialExchangeDate": 131,"maturityDate": 1461002,"terminationDate": 20,"purchaseDate": 119,"capitalizationEndDate": 51,"cycleAnchorDateOfInterestPayment": 151,"cycleAnchorDateOfRateReset": 10,"cycleAnchorDateOfScalingIndex": 131,"cycleAnchorDateOfFee": 361,"notionalPrincipal": 399,"nominalInterestRate": 950,"feeAccrued": 1971,"accruedInterest": 69,"rateMultiplier": 255,"rateSpread": 99,"feeRate": 401,"nextResetRate": 256,"penaltyRate": 32,"premiumDiscountAtIED": 32074,"priceAtPurchaseDate": 1969,"cycleOfInterestPayment": {"i": 150,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 4901,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 364,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 10,"p": 0,"s": 1,"isSet": false},"lifeCap": 49,"lifeFloor": 9999,"periodCap": 1462,"periodFloor": 8}, 1462, 12,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [143,4,131,211,237,244,51,228,204,13,156,173,240,240,176,151,77,190,239,78,10,60,113,100,49,248,134,134,5,176,213,225],"legalEntityIdCounterparty": [158,153,116,44,43,33,208,44,153,46,151,50,233,213,204,60,121,130,214,65,204,129,144,132,76,0,216,152,232,128,231,61],"dayCountConvention": 1,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 359,"statusDate": 32074,"initialExchangeDate": 368,"maturityDate": 149,"terminationDate": 159,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 10001,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 39,"cycleAnchorDateOfFee": 48,"notionalPrincipal": 90,"nominalInterestRate": 0,"feeAccrued": 60,"accruedInterest": 4800,"rateMultiplier": 8,"rateSpread": 1462,"feeRate": 66,"nextResetRate": 69,"penaltyRate": 17,"premiumDiscountAtIED": 68570,"priceAtPurchaseDate": 32,"cycleOfInterestPayment": {"i": 2014223716,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 110,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 29,"p": 0,"s": 1,"isSet": true},"lifeCap": -1,"lifeFloor": 2014223715,"periodCap": 7,"periodFloor": 24}, 80, 2,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [179,130,68,162,101,235,208,26,209,30,48,32,143,185,157,202,147,86,101,104,1,11,190,221,101,106,253,47,208,58,191,18],"legalEntityIdCounterparty": [143,211,17,98,31,193,193,3,174,99,134,221,145,52,176,144,230,103,112,102,214,74,188,63,197,142,123,182,122,244,103,153],"dayCountConvention": 1,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 66,"statusDate": 9999,"initialExchangeDate": 2014223714,"maturityDate": 950,"terminationDate": 361,"purchaseDate": 39,"capitalizationEndDate": 1461,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 5,"cycleAnchorDateOfScalingIndex": 900,"cycleAnchorDateOfFee": 90,"notionalPrincipal": 399,"nominalInterestRate": 1461,"feeAccrued": 1971,"accruedInterest": 15,"rateMultiplier": 2014223715,"rateSpread": 4801,"feeRate": 30,"nextResetRate": 21,"penaltyRate": 21,"premiumDiscountAtIED": 120,"priceAtPurchaseDate": 81,"cycleOfInterestPayment": {"i": 1,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 951,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 86399,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 4801,"p": 4,"s": 0,"isSet": true},"lifeCap": 900,"lifeFloor": 3,"periodCap": 901,"periodFloor": 2014223716}, 10, 1461002,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [161,172,139,25,23,66,14,160,218,38,146,21,70,148,147,182,254,194,54,114,44,137,82,179,61,62,251,206,185,196,45,87],"legalEntityIdCounterparty": [233,46,254,230,224,220,233,15,218,119,23,223,242,201,250,75,81,197,96,118,106,64,141,192,185,46,177,26,17,15,246,249],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 17,"statusDate": 899,"initialExchangeDate": 121,"maturityDate": 4800,"terminationDate": 399,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 68570,"cycleAnchorDateOfRateReset": 30,"cycleAnchorDateOfScalingIndex": 1337,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 160,"nominalInterestRate": 0,"feeAccrued": 13,"accruedInterest": 131,"rateMultiplier": 12,"rateSpread": 359,"feeRate": 32,"nextResetRate": 12,"penaltyRate": 66,"premiumDiscountAtIED": 359,"priceAtPurchaseDate": 14,"cycleOfInterestPayment": {"i": 97,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 4900,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 12,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 19,"p": 1,"s": 1,"isSet": false},"lifeCap": 18,"lifeFloor": 8,"periodCap": 4000,"periodFloor": 139}, 4801, 161,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [193,85,156,129,126,131,140,82,130,11,36,154,118,58,162,33,188,37,91,62,2,34,125,221,8,22,49,26,20,96,163,54],"legalEntityIdCounterparty": [171,175,232,50,209,25,1,191,135,67,190,98,164,251,188,96,26,106,140,134,94,52,63,129,9,160,213,8,149,161,194,170],"dayCountConvention": 3,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 139,"statusDate": 1532892063,"initialExchangeDate": 96,"maturityDate": 949,"terminationDate": 41,"purchaseDate": 950,"capitalizationEndDate": 66,"cycleAnchorDateOfInterestPayment": 256,"cycleAnchorDateOfRateReset": 79,"cycleAnchorDateOfScalingIndex": 19,"cycleAnchorDateOfFee": 254,"notionalPrincipal": 2446,"nominalInterestRate": 366,"feeAccrued": 19,"accruedInterest": 89,"rateMultiplier": 1462,"rateSpread": 23,"feeRate": 2440588,"nextResetRate": 9,"penaltyRate": 97,"premiumDiscountAtIED": 89,"priceAtPurchaseDate": 2014223716,"cycleOfInterestPayment": {"i": 1461000,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 109,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 14,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 17,"p": 5,"s": 0,"isSet": false},"lifeCap": 146097,"lifeFloor": 71,"periodCap": 29,"periodFloor": 360}, 140, 48,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [100,226,87,232,245,47,70,207,78,9,227,100,88,18,142,177,1,39,33,21,168,220,159,124,227,145,255,151,4,84,43,82],"legalEntityIdCounterparty": [124,213,14,188,138,208,50,125,132,88,99,154,107,242,8,9,115,66,235,199,25,131,46,134,135,54,90,177,22,244,63,30],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 4001,"statusDate": 1337,"initialExchangeDate": 4901,"maturityDate": 31,"terminationDate": 95,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 120,"cycleAnchorDateOfRateReset": 25,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 901,"notionalPrincipal": 13,"nominalInterestRate": 0,"feeAccrued": 10,"accruedInterest": 27,"rateMultiplier": 901,"rateSpread": 29,"feeRate": 13,"nextResetRate": 40,"penaltyRate": 7,"premiumDiscountAtIED": 71,"priceAtPurchaseDate": 365,"cycleOfInterestPayment": {"i": 1969,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 146096,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4899,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 149,"p": 3,"s": 0,"isSet": false},"lifeCap": 39,"lifeFloor": 10,"periodCap": 30,"periodFloor": 101}, 4000, 4899,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [133,234,173,46,54,126,113,233,106,153,208,76,51,215,37,62,37,12,237,130,175,4,122,234,102,100,59,186,116,8,241,248],"legalEntityIdCounterparty": [151,154,142,42,154,142,92,0,123,240,22,103,170,233,67,75,176,203,126,190,248,96,171,4,13,64,42,67,18,232,232,233],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 95,"statusDate": 30,"initialExchangeDate": 361,"maturityDate": 150,"terminationDate": 2447,"purchaseDate": 51,"capitalizationEndDate": 365,"cycleAnchorDateOfInterestPayment": 2448,"cycleAnchorDateOfRateReset": 1969,"cycleAnchorDateOfScalingIndex": 49,"cycleAnchorDateOfFee": 2447,"notionalPrincipal": 21,"nominalInterestRate": 2446,"feeAccrued": 86400,"accruedInterest": 141,"rateMultiplier": 10000,"rateSpread": 1532892063,"feeRate": 96,"nextResetRate": 71,"penaltyRate": 949,"premiumDiscountAtIED": 10,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 100,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 51,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 5,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 4799,"p": 2,"s": 0,"isSet": true},"lifeCap": 96,"lifeFloor": 8,"periodCap": 110,"periodFloor": 1461000}, 4801, 368,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [52,55,58,111,186,124,70,46,255,113,136,117,233,219,37,53,70,247,209,197,57,60,138,126,13,81,205,124,59,43,94,38],"legalEntityIdCounterparty": [8,170,25,198,6,56,115,184,186,251,105,168,248,158,253,239,246,239,188,55,152,70,36,57,139,146,62,52,84,67,149,141],"dayCountConvention": 1,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 4799,"statusDate": 4901,"initialExchangeDate": 32074,"maturityDate": 2447,"terminationDate": 2447,"purchaseDate": 365,"capitalizationEndDate": 255,"cycleAnchorDateOfInterestPayment": 2440587,"cycleAnchorDateOfRateReset": 140,"cycleAnchorDateOfScalingIndex": 146097,"cycleAnchorDateOfFee": 16,"notionalPrincipal": 2440588,"nominalInterestRate": 6,"feeAccrued": 109,"accruedInterest": 3999,"rateMultiplier": 160,"rateSpread": 4901,"feeRate": 100,"nextResetRate": 59,"penaltyRate": 949,"premiumDiscountAtIED": 0,"priceAtPurchaseDate": 68569,"cycleOfInterestPayment": {"i": 9999,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 150,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 119,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 11,"p": 2,"s": 1,"isSet": true},"lifeCap": 26,"lifeFloor": 1461000,"periodCap": 99,"periodFloor": 2440589}, 40, 146096,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [229,16,155,45,250,129,199,88,255,144,80,107,253,39,92,250,211,208,69,218,171,69,69,114,147,234,151,200,7,188,43,108],"legalEntityIdCounterparty": [48,46,81,150,70,124,141,176,29,242,171,141,79,13,216,158,184,175,22,58,248,179,210,53,170,61,207,10,223,141,189,184],"dayCountConvention": 2,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 101,"statusDate": 1532892062,"initialExchangeDate": 86399,"maturityDate": 8,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 61,"cycleAnchorDateOfRateReset": 65,"cycleAnchorDateOfScalingIndex": 161,"cycleAnchorDateOfFee": 151,"notionalPrincipal": 111,"nominalInterestRate": 0,"feeAccrued": 361,"accruedInterest": 149,"rateMultiplier": 2014223714,"rateSpread": 28,"feeRate": 66,"nextResetRate": 68568,"penaltyRate": 1336,"premiumDiscountAtIED": 2014223714,"priceAtPurchaseDate": 96,"cycleOfInterestPayment": {"i": 121,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 150,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4800,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 3999,"p": 5,"s": 1,"isSet": false},"lifeCap": 23,"lifeFloor": 146097,"periodCap": 1338,"periodFloor": 2448}, 60, 13,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [222,139,52,125,63,9,57,78,185,150,28,162,145,30,157,13,88,170,83,135,54,124,10,166,80,135,100,201,196,224,1,14],"legalEntityIdCounterparty": [56,212,131,116,129,36,188,31,253,131,90,46,36,108,56,10,10,150,43,132,58,92,132,251,165,186,41,232,195,58,137,252],"dayCountConvention": 4,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 66,"statusDate": 4800,"initialExchangeDate": 13,"maturityDate": 1461,"terminationDate": 69,"purchaseDate": 14,"capitalizationEndDate": 1461,"cycleAnchorDateOfInterestPayment": 399,"cycleAnchorDateOfRateReset": 111,"cycleAnchorDateOfScalingIndex": 2440587,"cycleAnchorDateOfFee": 2,"notionalPrincipal": 99,"nominalInterestRate": 368,"feeAccrued": 24,"accruedInterest": 121,"rateMultiplier": 21,"rateSpread": 399,"feeRate": 61,"nextResetRate": 26,"penaltyRate": 4001,"premiumDiscountAtIED": 359,"priceAtPurchaseDate": 13,"cycleOfInterestPayment": {"i": 68568,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 146096,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 146097,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 66,"p": 0,"s": 0,"isSet": false},"lifeCap": 7,"lifeFloor": 400,"periodCap": 146097,"periodFloor": 0}, 4899, 1336,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [27,180,42,99,63,109,92,15,234,2,118,154,49,16,83,166,133,211,66,241,188,138,31,93,38,180,108,229,249,52,118,195],"legalEntityIdCounterparty": [128,77,48,38,73,105,182,62,203,51,27,18,35,107,242,200,52,80,102,27,162,218,123,165,49,127,181,178,180,152,219,104],"dayCountConvention": 5,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 32,"statusDate": 4900,"initialExchangeDate": 26,"maturityDate": 32076,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 48,"cycleAnchorDateOfRateReset": 1969,"cycleAnchorDateOfScalingIndex": 64,"cycleAnchorDateOfFee": 146097,"notionalPrincipal": 66,"nominalInterestRate": 0,"feeAccrued": 2440587,"accruedInterest": 2440589,"rateMultiplier": 19,"rateSpread": 1338,"feeRate": 86400,"nextResetRate": 4900,"penaltyRate": 4800,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 69,"cycleOfInterestPayment": {"i": 4900,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 4901,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 3999,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 130,"p": 1,"s": 1,"isSet": false},"lifeCap": 140,"lifeFloor": 86401,"periodCap": 15,"periodFloor": 4001}, 9, 6,{from: accounts[0]});
  });
});
