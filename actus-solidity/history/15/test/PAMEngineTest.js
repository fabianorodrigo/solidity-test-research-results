const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 7,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [197,132,49,11,144,50,223,46,120,249,3,196,16,217,64,41,218,72,20,132,164,84,225,249,198,208,53,26,114,255,3,193],"legalEntityIdCounterparty": [167,59,57,0,128,95,239,10,179,221,15,165,222,118,95,138,209,203,20,191,207,0,174,91,138,241,29,140,42,184,208,214],"dayCountConvention": 6,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 61,"statusDate": 359,"initialExchangeDate": 81,"maturityDate": 4901,"terminationDate": 900,"purchaseDate": 7,"capitalizationEndDate": 399,"cycleAnchorDateOfInterestPayment": 41,"cycleAnchorDateOfRateReset": 364,"cycleAnchorDateOfScalingIndex": 1969,"cycleAnchorDateOfFee": 64,"notionalPrincipal": 17,"nominalInterestRate": 2440587,"feeAccrued": 146097,"accruedInterest": 364,"rateMultiplier": 129,"rateSpread": 368,"feeRate": 4001,"nextResetRate": 141,"penaltyRate": 2447,"premiumDiscountAtIED": 64,"priceAtPurchaseDate": 130,"cycleOfInterestPayment": {"i": 360,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 111,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 50,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 12,"p": 3,"s": 1,"isSet": false},"lifeCap": 1338,"lifeFloor": 61,"periodCap": 31,"periodFloor": 2446},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 3,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [218,133,95,166,225,225,175,84,83,215,87,40,160,148,183,113,9,197,247,116,18,4,127,36,243,30,88,147,87,169,28,10],"legalEntityIdCounterparty": [236,248,68,125,123,49,117,209,20,172,186,213,224,237,240,236,95,65,111,57,12,156,24,234,234,30,208,181,250,154,239,95],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 68569,"statusDate": 4800,"initialExchangeDate": 15,"maturityDate": 4801,"terminationDate": 86400,"purchaseDate": 2448,"capitalizationEndDate": 1532892063,"cycleAnchorDateOfInterestPayment": 1461,"cycleAnchorDateOfRateReset": 4,"cycleAnchorDateOfScalingIndex": 366,"cycleAnchorDateOfFee": 95,"notionalPrincipal": 149,"nominalInterestRate": 89,"feeAccrued": 121,"accruedInterest": 6,"rateMultiplier": 4001,"rateSpread": 160,"feeRate": 119,"nextResetRate": 50,"penaltyRate": 111,"premiumDiscountAtIED": 361,"priceAtPurchaseDate": 901,"cycleOfInterestPayment": {"i": 39,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 367,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 86401,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 1971,"p": 4,"s": 0,"isSet": false},"lifeCap": 256,"lifeFloor": 160,"periodCap": 1461000,"periodFloor": 18}, {"lastEventTime": 141,"contractStatus": 3,"timeFromLastEvent": 4,"nominalValue": 18,"nominalAccrued": 121,"feeAccrued": 901,"nominalRate": 151,"interestScalingMultiplier": 59,"nominalScalingMultiplier": 161,"contractRoleSign": 2}, 101,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 16,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [251,149,158,236,22,137,1,189,220,23,115,185,136,154,113,91,159,120,108,217,9,232,232,40,72,137,187,136,60,161,1,192],"legalEntityIdCounterparty": [140,229,21,54,9,246,127,117,198,4,64,220,230,89,157,27,70,74,114,163,215,201,25,165,200,205,54,98,153,121,178,45],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 3,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 32,"statusDate": 4800,"initialExchangeDate": 4801,"maturityDate": 18,"terminationDate": 68570,"purchaseDate": 96,"capitalizationEndDate": 4000,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 151,"cycleAnchorDateOfScalingIndex": 1,"cycleAnchorDateOfFee": 120,"notionalPrincipal": 10,"nominalInterestRate": 359,"feeAccrued": 86399,"accruedInterest": 160,"rateMultiplier": 146098,"rateSpread": 12,"feeRate": 8,"nextResetRate": 31,"penaltyRate": 949,"premiumDiscountAtIED": 364,"priceAtPurchaseDate": 86401,"cycleOfInterestPayment": {"i": 950,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1532892063,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 159,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 26,"p": 3,"s": 0,"isSet": false},"lifeCap": 1461001,"lifeFloor": 18,"periodCap": 364,"periodFloor": 23}, {"lastEventTime": 1462,"contractStatus": 2,"timeFromLastEvent": 1969,"nominalValue": 4800,"nominalAccrued": 159,"feeAccrued": 899,"nominalRate": 2447,"interestScalingMultiplier": 9,"nominalScalingMultiplier": 29,"contractRoleSign": 5}, {"eventTime": 899,"eventTimeWithEpochOffset": 2447,"scheduleTime": 61,"eventType": 16,"currency": accounts[5],"pofType": 12,"stfType": 2}, 66,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [66,189,156,244,214,17,179,225,248,121,144,133,89,246,194,109,127,236,91,0,105,89,35,154,206,158,102,12,190,69,140,49],"legalEntityIdCounterparty": [41,244,212,50,160,74,218,116,218,26,244,65,239,70,7,208,65,197,181,113,235,237,77,244,225,81,4,166,131,1,162,109],"dayCountConvention": 3,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 86399,"statusDate": 65,"initialExchangeDate": 401,"maturityDate": 86401,"terminationDate": 96,"purchaseDate": 32,"capitalizationEndDate": 24,"cycleAnchorDateOfInterestPayment": 4800,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 2448,"cycleAnchorDateOfFee": 7,"notionalPrincipal": 1460,"nominalInterestRate": 90,"feeAccrued": 3999,"accruedInterest": 18,"rateMultiplier": 1970,"rateSpread": 31,"feeRate": 2448,"nextResetRate": 160,"penaltyRate": 8,"premiumDiscountAtIED": 32,"priceAtPurchaseDate": 255,"cycleOfInterestPayment": {"i": 146096,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2440587,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 50,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 2014223716,"p": 3,"s": 0,"isSet": true},"lifeCap": 64,"lifeFloor": 146098,"periodCap": 68569,"periodFloor": 399}, 131, 28,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [179,124,58,188,249,2,131,128,71,205,70,73,59,15,17,40,24,156,105,173,74,30,202,32,102,41,242,206,131,98,133,2],"legalEntityIdCounterparty": [22,163,115,51,11,144,153,222,244,6,135,158,161,255,229,154,35,85,182,158,234,146,208,96,129,184,230,95,57,92,156,78],"dayCountConvention": 3,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 1461002,"statusDate": 71,"initialExchangeDate": 1338,"maturityDate": 1970,"terminationDate": 366,"purchaseDate": 32074,"capitalizationEndDate": 68569,"cycleAnchorDateOfInterestPayment": 257,"cycleAnchorDateOfRateReset": 4000,"cycleAnchorDateOfScalingIndex": 364,"cycleAnchorDateOfFee": 949,"notionalPrincipal": 1338,"nominalInterestRate": 61,"feeAccrued": 1461,"accruedInterest": 31,"rateMultiplier": 1,"rateSpread": 160,"feeRate": 10000,"nextResetRate": 63,"penaltyRate": 4900,"premiumDiscountAtIED": 901,"priceAtPurchaseDate": 11,"cycleOfInterestPayment": {"i": 129,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 9999,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 364,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 40,"p": 1,"s": 1,"isSet": false},"lifeCap": 81,"lifeFloor": 86400,"periodCap": 30,"periodFloor": 64}, 949, 32074,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [237,74,252,161,42,228,0,133,76,201,24,152,238,128,67,147,236,235,105,47,136,72,219,60,96,159,137,196,159,232,146,33],"legalEntityIdCounterparty": [32,109,240,72,111,122,232,126,189,190,113,79,94,91,253,48,95,163,65,159,75,170,25,139,21,185,205,48,11,4,238,102],"dayCountConvention": 2,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 32074,"statusDate": 4000,"initialExchangeDate": 91,"maturityDate": 32074,"terminationDate": 257,"purchaseDate": 364,"capitalizationEndDate": 2014223715,"cycleAnchorDateOfInterestPayment": 31,"cycleAnchorDateOfRateReset": 96,"cycleAnchorDateOfScalingIndex": 1971,"cycleAnchorDateOfFee": 90,"notionalPrincipal": 97,"nominalInterestRate": 121,"feeAccrued": 68569,"accruedInterest": 50,"rateMultiplier": 1461,"rateSpread": 2440589,"feeRate": 29,"nextResetRate": 899,"penaltyRate": 9999,"premiumDiscountAtIED": 20,"priceAtPurchaseDate": 1338,"cycleOfInterestPayment": {"i": 131,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 7,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 129,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 9,"p": 1,"s": 1,"isSet": true},"lifeCap": 4899,"lifeFloor": 364,"periodCap": 367,"periodFloor": 1461002}, 50, 4000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [111,51,158,107,220,185,245,174,154,221,225,41,230,179,20,147,25,28,144,7,48,31,125,218,223,21,207,253,118,160,142,150],"legalEntityIdCounterparty": [194,52,143,208,230,149,157,35,95,74,242,16,216,8,100,202,44,107,114,74,51,66,182,238,78,152,162,111,157,182,207,175],"dayCountConvention": 2,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 32075,"statusDate": 4899,"initialExchangeDate": 79,"maturityDate": 1969,"terminationDate": 70,"purchaseDate": 4900,"capitalizationEndDate": 4899,"cycleAnchorDateOfInterestPayment": 2446,"cycleAnchorDateOfRateReset": 121,"cycleAnchorDateOfScalingIndex": 1461001,"cycleAnchorDateOfFee": 8,"notionalPrincipal": 63,"nominalInterestRate": 51,"feeAccrued": 96,"accruedInterest": 68569,"rateMultiplier": 9999,"rateSpread": 68568,"feeRate": 1,"nextResetRate": 6,"penaltyRate": 120,"premiumDiscountAtIED": 109,"priceAtPurchaseDate": 68568,"cycleOfInterestPayment": {"i": 1,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 5,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 1460,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 70,"p": 4,"s": 1,"isSet": false},"lifeCap": 60,"lifeFloor": 31,"periodCap": 31,"periodFloor": 4899}, 1532892062, 90,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [163,93,97,95,236,171,166,182,76,250,89,211,30,85,69,73,162,228,162,48,249,121,33,189,238,5,159,20,156,122,37,122],"legalEntityIdCounterparty": [61,162,207,40,49,189,55,52,97,72,55,49,68,76,151,105,246,4,196,232,99,136,155,219,31,22,13,143,248,96,155,48],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 12,"statusDate": 28,"initialExchangeDate": 59,"maturityDate": 4001,"terminationDate": 66,"purchaseDate": 0,"capitalizationEndDate": 1,"cycleAnchorDateOfInterestPayment": 161,"cycleAnchorDateOfRateReset": 26,"cycleAnchorDateOfScalingIndex": 10,"cycleAnchorDateOfFee": 1461001,"notionalPrincipal": 32075,"nominalInterestRate": 23,"feeAccrued": 368,"accruedInterest": 160,"rateMultiplier": 2,"rateSpread": 160,"feeRate": 401,"nextResetRate": 364,"penaltyRate": 4899,"premiumDiscountAtIED": 86400,"priceAtPurchaseDate": 257,"cycleOfInterestPayment": {"i": 146098,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 40,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 4,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 20,"p": 2,"s": 0,"isSet": true},"lifeCap": 2,"lifeFloor": 2440589,"periodCap": 48,"periodFloor": 19}, 111, 59,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [48,233,33,131,30,207,121,42,20,242,228,108,62,238,255,81,104,226,232,31,14,163,140,35,228,179,198,91,222,149,199,90],"legalEntityIdCounterparty": [222,52,62,102,165,213,142,125,1,129,212,9,222,146,187,151,12,60,255,211,87,142,167,62,176,203,52,222,23,139,31,248],"dayCountConvention": 0,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 1336,"statusDate": 10000,"initialExchangeDate": 401,"maturityDate": 60,"terminationDate": 1971,"purchaseDate": 119,"capitalizationEndDate": 131,"cycleAnchorDateOfInterestPayment": 48,"cycleAnchorDateOfRateReset": 79,"cycleAnchorDateOfScalingIndex": 129,"cycleAnchorDateOfFee": 3999,"notionalPrincipal": 91,"nominalInterestRate": 21,"feeAccrued": 2446,"accruedInterest": 1532892062,"rateMultiplier": 2447,"rateSpread": 2440587,"feeRate": 1532892063,"nextResetRate": 2014223714,"penaltyRate": 20,"premiumDiscountAtIED": 361,"priceAtPurchaseDate": 2446,"cycleOfInterestPayment": {"i": 68569,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 18,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 4801,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 364,"p": 3,"s": 0,"isSet": false},"lifeCap": 399,"lifeFloor": 63,"periodCap": 256,"periodFloor": 96}, 2014223715, 49,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [10,67,60,245,183,106,58,44,128,202,72,182,220,182,91,115,125,137,25,21,62,54,70,216,93,125,78,63,83,230,115,157],"legalEntityIdCounterparty": [112,160,247,81,183,197,90,211,224,49,156,86,193,255,53,95,38,62,140,171,69,226,247,155,157,252,63,81,179,224,244,131],"dayCountConvention": 1,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 160,"statusDate": 365,"initialExchangeDate": 86399,"maturityDate": 1337,"terminationDate": 900,"purchaseDate": 101,"capitalizationEndDate": 63,"cycleAnchorDateOfInterestPayment": 2446,"cycleAnchorDateOfRateReset": 86400,"cycleAnchorDateOfScalingIndex": 2,"cycleAnchorDateOfFee": 4899,"notionalPrincipal": 97,"nominalInterestRate": 10000,"feeAccrued": 100,"accruedInterest": 257,"rateMultiplier": 399,"rateSpread": 30,"feeRate": 61,"nextResetRate": 68570,"penaltyRate": 79,"premiumDiscountAtIED": 2014223716,"priceAtPurchaseDate": 1461002,"cycleOfInterestPayment": {"i": 91,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 256,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 69,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 2440588,"p": 0,"s": 0,"isSet": true},"lifeCap": 110,"lifeFloor": 1336,"periodCap": 4800,"periodFloor": 160}, 4800, 70,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [0,105,254,253,76,59,90,176,71,24,123,121,248,37,118,79,36,34,245,145,250,140,163,235,220,218,1,191,118,151,196,85],"legalEntityIdCounterparty": [58,11,245,201,119,91,34,137,5,54,188,2,6,196,2,1,155,30,87,64,98,48,49,204,84,78,250,125,238,7,187,26],"dayCountConvention": 5,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 150,"statusDate": 3,"initialExchangeDate": 1461000,"maturityDate": 50,"terminationDate": 949,"purchaseDate": 14,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 91,"cycleAnchorDateOfScalingIndex": 1461000,"cycleAnchorDateOfFee": 2014223716,"notionalPrincipal": 24,"nominalInterestRate": 256,"feeAccrued": 159,"accruedInterest": 901,"rateMultiplier": 361,"rateSpread": 2446,"feeRate": 90,"nextResetRate": 160,"penaltyRate": 29,"premiumDiscountAtIED": 70,"priceAtPurchaseDate": 257,"cycleOfInterestPayment": {"i": 900,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 367,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 99,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 2448,"p": 2,"s": 0,"isSet": true},"lifeCap": 49,"lifeFloor": 26,"periodCap": 1532892062,"periodFloor": 364}, 4801, 65,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [131,174,157,147,119,107,84,252,195,233,68,161,9,177,239,148,72,35,35,130,66,33,212,134,35,100,83,180,249,139,32,2],"legalEntityIdCounterparty": [99,157,174,204,198,81,229,224,10,32,186,189,196,57,202,103,172,37,28,25,60,188,70,1,194,18,104,177,2,231,62,204],"dayCountConvention": 5,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 6,"statusDate": 61,"initialExchangeDate": 86400,"maturityDate": 365,"terminationDate": 49,"purchaseDate": 27,"capitalizationEndDate": 151,"cycleAnchorDateOfInterestPayment": 131,"cycleAnchorDateOfRateReset": 160,"cycleAnchorDateOfScalingIndex": 2447,"cycleAnchorDateOfFee": 13,"notionalPrincipal": 27,"nominalInterestRate": 111,"feeAccrued": 89,"accruedInterest": 160,"rateMultiplier": 129,"rateSpread": 131,"feeRate": 365,"nextResetRate": 32076,"penaltyRate": 13,"premiumDiscountAtIED": 8,"priceAtPurchaseDate": 32,"cycleOfInterestPayment": {"i": 365,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 949,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1532892063,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 20,"p": 2,"s": 0,"isSet": true},"lifeCap": 2440587,"lifeFloor": 2014223716,"periodCap": 949,"periodFloor": 10}, 4000, 29,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [75,58,234,85,121,136,213,99,25,151,201,36,61,31,131,254,70,117,108,28,224,245,73,217,213,71,191,31,47,162,153,64],"legalEntityIdCounterparty": [215,253,189,45,9,244,98,223,179,222,54,129,62,19,122,50,240,126,214,73,71,212,232,190,185,202,195,86,219,29,84,83],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 4000,"statusDate": 2,"initialExchangeDate": 159,"maturityDate": 19,"terminationDate": 361,"purchaseDate": 4,"capitalizationEndDate": 68569,"cycleAnchorDateOfInterestPayment": 4901,"cycleAnchorDateOfRateReset": 359,"cycleAnchorDateOfScalingIndex": 109,"cycleAnchorDateOfFee": 21,"notionalPrincipal": 4900,"nominalInterestRate": 0,"feeAccrued": 19,"accruedInterest": 25,"rateMultiplier": 139,"rateSpread": 4799,"feeRate": 48,"nextResetRate": 131,"penaltyRate": 130,"premiumDiscountAtIED": 2440587,"priceAtPurchaseDate": 146098,"cycleOfInterestPayment": {"i": 48,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1461,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4000,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 69,"p": 0,"s": 1,"isSet": false},"lifeCap": 4800,"lifeFloor": 131,"periodCap": 16,"periodFloor": 17}, 0, 160,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [77,154,87,143,232,50,131,211,184,188,45,58,124,138,95,149,42,145,78,72,86,139,94,168,190,33,114,166,5,62,59,216],"legalEntityIdCounterparty": [203,154,184,249,89,153,222,94,158,93,216,26,151,116,66,45,64,217,129,63,3,29,234,55,13,80,61,208,198,146,121,111],"dayCountConvention": 0,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 32074,"statusDate": 361,"initialExchangeDate": 66,"maturityDate": 30,"terminationDate": 400,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 95,"cycleAnchorDateOfRateReset": 161,"cycleAnchorDateOfScalingIndex": 1337,"cycleAnchorDateOfFee": 86401,"notionalPrincipal": 4901,"nominalInterestRate": 0,"feeAccrued": 1461,"accruedInterest": 1969,"rateMultiplier": 68569,"rateSpread": 110,"feeRate": 2446,"nextResetRate": 140,"penaltyRate": 61,"premiumDiscountAtIED": 16,"priceAtPurchaseDate": 131,"cycleOfInterestPayment": {"i": 50,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 4901,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 26,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 97,"p": 4,"s": 0,"isSet": true},"lifeCap": 27,"lifeFloor": 86400,"periodCap": 32074,"periodFloor": 14}, 11, 30,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [18,70,240,1,162,193,229,110,158,20,116,84,76,28,43,100,255,70,200,226,241,44,15,63,14,145,181,157,251,102,14,220],"legalEntityIdCounterparty": [30,255,226,234,203,237,166,3,145,255,12,148,56,206,173,219,114,109,62,110,125,10,95,118,207,145,154,179,24,86,36,55],"dayCountConvention": 5,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 10,"statusDate": 1,"initialExchangeDate": 1970,"maturityDate": 365,"terminationDate": 1532892063,"purchaseDate": 79,"capitalizationEndDate": 4800,"cycleAnchorDateOfInterestPayment": 4899,"cycleAnchorDateOfRateReset": 25,"cycleAnchorDateOfScalingIndex": 26,"cycleAnchorDateOfFee": 40,"notionalPrincipal": -1,"nominalInterestRate": 8,"feeAccrued": 139,"accruedInterest": 366,"rateMultiplier": 359,"rateSpread": 2014223715,"feeRate": 9,"nextResetRate": 27,"penaltyRate": 49,"premiumDiscountAtIED": 949,"priceAtPurchaseDate": 364,"cycleOfInterestPayment": {"i": 4899,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 160,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 49,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 366,"p": 3,"s": 1,"isSet": true},"lifeCap": 150,"lifeFloor": 151,"periodCap": 49,"periodFloor": 69}, 11, 1969,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [0,68,243,150,253,99,107,46,153,38,129,83,190,225,188,57,193,63,205,153,69,157,117,248,178,146,132,51,35,198,137,141],"legalEntityIdCounterparty": [129,143,111,122,102,187,81,170,53,69,20,82,46,241,237,92,196,111,175,89,227,226,171,201,54,99,220,9,1,178,54,196],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 100,"statusDate": 254,"initialExchangeDate": 2014223714,"maturityDate": 2014223716,"terminationDate": 950,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 4901,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 4800,"cycleAnchorDateOfFee": 1338,"notionalPrincipal": 31,"nominalInterestRate": 0,"feeAccrued": 4900,"accruedInterest": 71,"rateMultiplier": 79,"rateSpread": 91,"feeRate": 26,"nextResetRate": 254,"penaltyRate": 3,"premiumDiscountAtIED": 29,"priceAtPurchaseDate": 4800,"cycleOfInterestPayment": {"i": 1461000,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 99,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 0,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 120,"p": 2,"s": 0,"isSet": false},"lifeCap": 109,"lifeFloor": 32,"periodCap": 2014223716,"periodFloor": 151}, 2, 401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [247,39,5,42,222,232,33,207,48,46,130,129,37,50,131,82,206,254,40,32,201,157,55,141,8,54,243,233,111,92,204,168],"legalEntityIdCounterparty": [95,21,102,205,173,139,54,240,157,173,82,58,250,242,145,42,244,200,191,66,17,75,233,249,239,38,23,193,71,103,110,60],"dayCountConvention": 6,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 51,"statusDate": 1969,"initialExchangeDate": 20,"maturityDate": 149,"terminationDate": 10001,"purchaseDate": 16,"capitalizationEndDate": 399,"cycleAnchorDateOfInterestPayment": 1532892062,"cycleAnchorDateOfRateReset": 41,"cycleAnchorDateOfScalingIndex": 1461001,"cycleAnchorDateOfFee": 361,"notionalPrincipal": 950,"nominalInterestRate": 81,"feeAccrued": 120,"accruedInterest": 9999,"rateMultiplier": 1532892062,"rateSpread": 69,"feeRate": 951,"nextResetRate": 1460,"penaltyRate": 949,"premiumDiscountAtIED": 86401,"priceAtPurchaseDate": 141,"cycleOfInterestPayment": {"i": 130,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 900,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 11,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 100,"p": 3,"s": 1,"isSet": false},"lifeCap": 68568,"lifeFloor": 86400,"periodCap": 1336,"periodFloor": 18}, 149, 86400,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [62,127,57,78,197,23,109,181,6,207,239,162,239,195,164,42,112,133,83,188,39,97,77,179,39,157,232,58,103,0,96,122],"legalEntityIdCounterparty": [172,237,202,157,153,22,168,30,105,139,92,58,167,232,213,192,176,70,42,249,64,163,115,223,30,84,41,99,209,43,35,149],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 64,"statusDate": 4000,"initialExchangeDate": 109,"maturityDate": 399,"terminationDate": 1971,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 17,"cycleAnchorDateOfRateReset": 28,"cycleAnchorDateOfScalingIndex": 150,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 86401,"nominalInterestRate": 0,"feeAccrued": 48,"accruedInterest": 146096,"rateMultiplier": 150,"rateSpread": 8,"feeRate": 1532892062,"nextResetRate": 257,"penaltyRate": 2440587,"premiumDiscountAtIED": 97,"priceAtPurchaseDate": 99,"cycleOfInterestPayment": {"i": 10001,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 68570,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 160,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 257,"p": 4,"s": 1,"isSet": false},"lifeCap": 2440587,"lifeFloor": 79,"periodCap": 2014223715,"periodFloor": 86399}, 1, 2014223714,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [166,202,75,234,202,59,17,76,229,100,28,59,143,184,154,129,129,179,170,20,169,111,89,233,233,85,226,132,99,196,89,209],"legalEntityIdCounterparty": [72,121,232,223,225,162,25,65,179,177,252,242,72,158,107,121,202,217,163,32,66,104,127,8,12,219,216,157,44,108,237,238],"dayCountConvention": 6,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 4799,"statusDate": 1532892064,"initialExchangeDate": 131,"maturityDate": 65,"terminationDate": 949,"purchaseDate": 61,"capitalizationEndDate": 1969,"cycleAnchorDateOfInterestPayment": 950,"cycleAnchorDateOfRateReset": 399,"cycleAnchorDateOfScalingIndex": 21,"cycleAnchorDateOfFee": 3,"notionalPrincipal": 109,"nominalInterestRate": 1461001,"feeAccrued": 2440587,"accruedInterest": 364,"rateMultiplier": 64,"rateSpread": 160,"feeRate": 1,"nextResetRate": 121,"penaltyRate": 17,"premiumDiscountAtIED": 60,"priceAtPurchaseDate": 90,"cycleOfInterestPayment": {"i": 86400,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 69,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 50,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 359,"p": 4,"s": 1,"isSet": false},"lifeCap": 159,"lifeFloor": 32075,"periodCap": 1460,"periodFloor": 51}, 91, 901,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [90,32,163,0,220,166,27,177,93,234,15,237,162,104,227,229,3,97,9,20,199,109,240,100,240,168,202,60,58,234,240,29],"legalEntityIdCounterparty": [4,91,178,161,37,214,238,202,34,233,252,194,142,211,86,201,211,7,83,177,52,216,172,0,204,198,168,211,195,105,120,51],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 3,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 4900,"statusDate": 111,"initialExchangeDate": 15,"maturityDate": 39,"terminationDate": 4799,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 364,"cycleAnchorDateOfRateReset": 139,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 51,"notionalPrincipal": 367,"nominalInterestRate": 0,"feeAccrued": 12,"accruedInterest": 364,"rateMultiplier": 4800,"rateSpread": 1460,"feeRate": 86399,"nextResetRate": 100,"penaltyRate": 2440587,"premiumDiscountAtIED": 26,"priceAtPurchaseDate": 140,"cycleOfInterestPayment": {"i": 86401,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 950,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 4000,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 86400,"p": 5,"s": 0,"isSet": true},"lifeCap": 368,"lifeFloor": 2447,"periodCap": 2448,"periodFloor": 96}, 140, 150,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [43,49,208,26,43,115,115,95,127,22,56,130,44,208,22,84,52,169,215,95,241,51,225,62,127,102,199,223,63,254,253,50],"legalEntityIdCounterparty": [97,41,162,112,102,241,170,21,35,176,207,85,104,28,249,238,33,196,80,237,164,3,72,68,86,173,14,253,59,126,201,49],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 1461002,"statusDate": 69,"initialExchangeDate": 41,"maturityDate": 2446,"terminationDate": 23,"purchaseDate": 1,"capitalizationEndDate": 27,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 109,"cycleAnchorDateOfScalingIndex": 1461002,"cycleAnchorDateOfFee": 95,"notionalPrincipal": 110,"nominalInterestRate": 161,"feeAccrued": 1,"accruedInterest": 4800,"rateMultiplier": 41,"rateSpread": 9999,"feeRate": 361,"nextResetRate": 2440589,"penaltyRate": 59,"premiumDiscountAtIED": 2446,"priceAtPurchaseDate": 49,"cycleOfInterestPayment": {"i": 80,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 2014223716,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 41,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 140,"p": 0,"s": 1,"isSet": true},"lifeCap": 899,"lifeFloor": 31,"periodCap": 4001,"periodFloor": 68568}, 159, 86399,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [252,143,29,103,181,104,118,105,199,155,7,185,24,129,210,237,131,191,31,143,212,95,247,177,48,200,108,169,224,21,245,166],"legalEntityIdCounterparty": [155,189,56,68,41,15,209,68,113,13,248,149,105,1,44,103,61,58,30,168,254,41,7,27,123,209,128,99,167,132,239,70],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 2448,"statusDate": 1460,"initialExchangeDate": 4900,"maturityDate": 4799,"terminationDate": 367,"purchaseDate": 1461000,"capitalizationEndDate": 1461001,"cycleAnchorDateOfInterestPayment": 13,"cycleAnchorDateOfRateReset": 64,"cycleAnchorDateOfScalingIndex": 146097,"cycleAnchorDateOfFee": 49,"notionalPrincipal": 13,"nominalInterestRate": 1336,"feeAccrued": 29,"accruedInterest": 4001,"rateMultiplier": 2014223715,"rateSpread": 2446,"feeRate": 86399,"nextResetRate": 257,"penaltyRate": 100,"premiumDiscountAtIED": 24,"priceAtPurchaseDate": 4801,"cycleOfInterestPayment": {"i": 1532892062,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 63,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 97,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 1460,"p": 1,"s": 1,"isSet": false},"lifeCap": 1,"lifeFloor": 151,"periodCap": 399,"periodFloor": 97}, 11, 60,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [202,198,241,141,211,174,73,208,25,118,254,192,250,79,96,58,42,140,50,213,217,185,46,209,216,166,6,232,117,207,247,253],"legalEntityIdCounterparty": [1,94,136,105,130,93,216,168,119,93,172,217,166,166,144,182,105,151,122,215,230,103,116,250,62,232,137,179,76,15,105,97],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 1971,"statusDate": 365,"initialExchangeDate": 96,"maturityDate": 360,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 109,"cycleAnchorDateOfRateReset": 4900,"cycleAnchorDateOfScalingIndex": 131,"cycleAnchorDateOfFee": 4800,"notionalPrincipal": 146096,"nominalInterestRate": 0,"feeAccrued": 255,"accruedInterest": 140,"rateMultiplier": 32075,"rateSpread": 70,"feeRate": 4000,"nextResetRate": 101,"penaltyRate": 28,"premiumDiscountAtIED": 32076,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 69,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 68568,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 39,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 131,"p": 5,"s": 0,"isSet": false},"lifeCap": 401,"lifeFloor": 1336,"periodCap": 1,"periodFloor": 950}, 150, 120,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [165,40,251,116,237,69,144,255,148,12,83,210,47,78,91,112,127,235,146,110,212,146,207,32,18,54,46,57,26,145,218,39],"legalEntityIdCounterparty": [177,21,38,100,50,164,223,144,246,78,198,125,56,41,241,239,104,57,211,191,63,140,71,115,202,204,17,221,27,200,44,115],"dayCountConvention": 2,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 95,"statusDate": 146097,"initialExchangeDate": 71,"maturityDate": 1336,"terminationDate": 121,"purchaseDate": 141,"capitalizationEndDate": 69,"cycleAnchorDateOfInterestPayment": 1532892064,"cycleAnchorDateOfRateReset": 8,"cycleAnchorDateOfScalingIndex": 66,"cycleAnchorDateOfFee": 130,"notionalPrincipal": 1970,"nominalInterestRate": 901,"feeAccrued": 900,"accruedInterest": 16,"rateMultiplier": 13,"rateSpread": 4001,"feeRate": 24,"nextResetRate": 130,"penaltyRate": 2448,"premiumDiscountAtIED": 1,"priceAtPurchaseDate": 89,"cycleOfInterestPayment": {"i": 32074,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 161,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 360,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 1969,"p": 2,"s": 1,"isSet": true},"lifeCap": 39,"lifeFloor": 99,"periodCap": 951,"periodFloor": 40}, 1461002, 1338,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [34,188,239,167,113,33,195,64,9,85,170,168,147,138,232,76,82,152,26,73,103,134,204,6,167,113,26,1,25,56,203,99],"legalEntityIdCounterparty": [239,40,71,94,203,162,198,138,111,238,129,186,219,65,77,135,42,76,88,180,10,228,32,171,91,124,152,86,169,229,203,229],"dayCountConvention": 3,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 901,"statusDate": 1460,"initialExchangeDate": 32076,"maturityDate": 361,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 2440588,"cycleAnchorDateOfRateReset": 4,"cycleAnchorDateOfScalingIndex": 901,"cycleAnchorDateOfFee": 140,"notionalPrincipal": 146096,"nominalInterestRate": 0,"feeAccrued": 50,"accruedInterest": 5,"rateMultiplier": 4799,"rateSpread": 81,"feeRate": 69,"nextResetRate": 4901,"penaltyRate": 111,"premiumDiscountAtIED": 4000,"priceAtPurchaseDate": 71,"cycleOfInterestPayment": {"i": 2446,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1532892063,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 4,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 2014223714,"p": 2,"s": 0,"isSet": true},"lifeCap": 70,"lifeFloor": 4900,"periodCap": 160,"periodFloor": 2014223715}, 2446, 70,{from: accounts[0]});
  });
});
