const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 10,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [36,203,175,152,27,203,227,87,164,35,215,240,254,102,199,222,170,95,173,246,180,181,3,80,148,159,26,168,143,2,62,43],"legalEntityIdCounterparty": [169,160,8,249,0,206,114,55,225,83,235,98,211,25,226,0,168,201,232,175,183,184,113,99,78,149,100,12,93,206,240,16],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 1532892063,"statusDate": 4800,"initialExchangeDate": 141,"maturityDate": 64,"terminationDate": 2440587,"purchaseDate": 49,"capitalizationEndDate": 86401,"cycleAnchorDateOfInterestPayment": 2014223714,"cycleAnchorDateOfRateReset": 32074,"cycleAnchorDateOfScalingIndex": 120,"cycleAnchorDateOfFee": 365,"notionalPrincipal": 2446,"nominalInterestRate": 1971,"feeAccrued": 1462,"accruedInterest": 111,"rateMultiplier": 1461002,"rateSpread": 159,"feeRate": 89,"nextResetRate": 130,"penaltyRate": 1970,"premiumDiscountAtIED": 120,"priceAtPurchaseDate": 9,"cycleOfInterestPayment": {"i": 8,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 4801,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 149,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 11,"p": 3,"s": 0,"isSet": false},"lifeCap": 109,"lifeFloor": 28,"periodCap": 149,"periodFloor": 70},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 0,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [20,100,69,47,224,80,106,119,26,156,145,71,184,128,1,161,245,3,97,47,90,96,80,15,248,185,38,84,213,201,220,1],"legalEntityIdCounterparty": [144,64,209,84,95,195,65,92,238,146,146,80,88,141,252,50,205,226,199,109,15,1,35,206,190,110,129,117,106,163,223,110],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 7,"statusDate": 1338,"initialExchangeDate": 146097,"maturityDate": 360,"terminationDate": 15,"purchaseDate": 81,"capitalizationEndDate": 360,"cycleAnchorDateOfInterestPayment": 0,"cycleAnchorDateOfRateReset": 401,"cycleAnchorDateOfScalingIndex": 27,"cycleAnchorDateOfFee": 10000,"notionalPrincipal": 3,"nominalInterestRate": 1971,"feeAccrued": 1970,"accruedInterest": -1,"rateMultiplier": 39,"rateSpread": 21,"feeRate": 4900,"nextResetRate": 139,"penaltyRate": 16,"premiumDiscountAtIED": 86401,"priceAtPurchaseDate": 69,"cycleOfInterestPayment": {"i": 146097,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 64,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 86400,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 1461001,"p": 3,"s": 0,"isSet": false},"lifeCap": 255,"lifeFloor": 364,"periodCap": 4000,"periodFloor": 0}, {"lastEventTime": 89,"contractStatus": 3,"timeFromLastEvent": 146096,"nominalValue": 4799,"nominalAccrued": 95,"feeAccrued": 32,"nominalRate": 71,"interestScalingMultiplier": 64,"nominalScalingMultiplier": 2447,"contractRoleSign": 8}, 119,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 14,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [37,242,105,210,224,193,70,243,248,124,120,142,56,88,207,217,191,42,169,30,135,38,178,95,7,63,0,67,211,120,27,121],"legalEntityIdCounterparty": [41,228,61,128,1,30,74,223,32,179,23,237,34,234,69,108,176,196,227,0,191,225,173,163,138,78,241,234,242,5,65,70],"dayCountConvention": 1,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 4799,"statusDate": 1,"initialExchangeDate": 899,"maturityDate": 89,"terminationDate": 6,"purchaseDate": 86401,"capitalizationEndDate": 64,"cycleAnchorDateOfInterestPayment": 1461001,"cycleAnchorDateOfRateReset": 15,"cycleAnchorDateOfScalingIndex": 2448,"cycleAnchorDateOfFee": 3,"notionalPrincipal": 159,"nominalInterestRate": 21,"feeAccrued": 146096,"accruedInterest": 24,"rateMultiplier": 1971,"rateSpread": 27,"feeRate": 2440588,"nextResetRate": 150,"penaltyRate": 4901,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 254,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 110,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 79,"p": 1,"s": 0,"isSet": false},"lifeCap": 68569,"lifeFloor": 4900,"periodCap": 1336,"periodFloor": 949}, {"lastEventTime": 146097,"contractStatus": 3,"timeFromLastEvent": 7,"nominalValue": 146096,"nominalAccrued": 6,"feeAccrued": 66,"nominalRate": 51,"interestScalingMultiplier": 15,"nominalScalingMultiplier": 24,"contractRoleSign": 7}, {"eventTime": 254,"eventTimeWithEpochOffset": 68570,"scheduleTime": 40,"eventType": 11,"currency": accounts[1],"pofType": 13,"stfType": 15}, 23,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [90,214,148,51,160,13,128,17,99,100,16,123,117,16,33,123,62,30,80,132,138,130,5,247,81,86,197,162,213,249,31,73],"legalEntityIdCounterparty": [44,176,5,48,64,102,209,83,61,187,25,29,218,224,240,195,206,201,51,59,168,122,53,67,10,219,235,201,207,75,179,181],"dayCountConvention": 1,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 32,"statusDate": 61,"initialExchangeDate": 7,"maturityDate": 121,"terminationDate": 2,"purchaseDate": 111,"capitalizationEndDate": 24,"cycleAnchorDateOfInterestPayment": 141,"cycleAnchorDateOfRateReset": 7,"cycleAnchorDateOfScalingIndex": 10001,"cycleAnchorDateOfFee": 13,"notionalPrincipal": 100,"nominalInterestRate": 79,"feeAccrued": 140,"accruedInterest": 68568,"rateMultiplier": 2,"rateSpread": -1,"feeRate": 26,"nextResetRate": 32,"penaltyRate": 1460,"premiumDiscountAtIED": 49,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 25,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 32074,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 61,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 2014223714,"p": 5,"s": 0,"isSet": false},"lifeCap": 4901,"lifeFloor": 20,"periodCap": 10001,"periodFloor": 20}, 0, 18,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [186,192,71,174,214,115,75,42,101,140,71,92,58,252,80,171,127,252,41,254,108,103,239,24,38,137,151,162,196,101,75,244],"legalEntityIdCounterparty": [146,13,194,82,77,27,166,205,4,196,0,62,57,213,172,61,96,120,79,113,232,245,52,208,36,54,3,64,147,222,220,247],"dayCountConvention": 4,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 1971,"statusDate": 399,"initialExchangeDate": 27,"maturityDate": 29,"terminationDate": 4901,"purchaseDate": 61,"capitalizationEndDate": 2014223716,"cycleAnchorDateOfInterestPayment": 1532892062,"cycleAnchorDateOfRateReset": 1532892063,"cycleAnchorDateOfScalingIndex": 9,"cycleAnchorDateOfFee": 10001,"notionalPrincipal": 51,"nominalInterestRate": 4799,"feeAccrued": 255,"accruedInterest": 139,"rateMultiplier": 71,"rateSpread": 90,"feeRate": 80,"nextResetRate": 95,"penaltyRate": 100,"premiumDiscountAtIED": 0,"priceAtPurchaseDate": 32074,"cycleOfInterestPayment": {"i": 48,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 10001,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 86399,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 86399,"p": 1,"s": 0,"isSet": true},"lifeCap": 6,"lifeFloor": 99,"periodCap": 16,"periodFloor": 80}, 6, 109,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [220,62,94,199,220,105,229,126,91,202,197,123,30,1,44,20,194,190,87,193,237,8,198,169,174,37,79,88,72,191,104,195],"legalEntityIdCounterparty": [136,60,231,24,109,88,179,205,210,76,124,94,212,195,39,182,14,91,202,6,222,186,14,58,196,168,199,45,217,179,197,206],"dayCountConvention": 2,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 8,"statusDate": 10000,"initialExchangeDate": 30,"maturityDate": 255,"terminationDate": 12,"purchaseDate": 15,"capitalizationEndDate": 1971,"cycleAnchorDateOfInterestPayment": 951,"cycleAnchorDateOfRateReset": 66,"cycleAnchorDateOfScalingIndex": 159,"cycleAnchorDateOfFee": 2014223714,"notionalPrincipal": 368,"nominalInterestRate": 4,"feeAccrued": 359,"accruedInterest": 1532892062,"rateMultiplier": 121,"rateSpread": 359,"feeRate": 91,"nextResetRate": 109,"penaltyRate": 255,"premiumDiscountAtIED": 1532892062,"priceAtPurchaseDate": 129,"cycleOfInterestPayment": {"i": 99,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 360,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 256,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 7,"p": 2,"s": 1,"isSet": false},"lifeCap": 17,"lifeFloor": 121,"periodCap": 65,"periodFloor": 950}, 71, 21,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [146,76,225,172,44,192,104,154,218,65,76,147,63,181,163,107,58,12,213,162,207,48,204,172,108,37,59,97,113,104,184,21],"legalEntityIdCounterparty": [224,67,11,170,109,232,107,96,41,163,33,31,195,146,229,236,201,76,78,193,176,215,125,243,138,121,167,213,164,136,194,250],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 10000,"statusDate": 256,"initialExchangeDate": 256,"maturityDate": 4000,"terminationDate": 2448,"purchaseDate": 17,"capitalizationEndDate": 7,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 63,"cycleAnchorDateOfScalingIndex": 901,"cycleAnchorDateOfFee": 2447,"notionalPrincipal": 9,"nominalInterestRate": 64,"feeAccrued": 12,"accruedInterest": 4000,"rateMultiplier": 141,"rateSpread": 91,"feeRate": 79,"nextResetRate": 3999,"penaltyRate": 80,"premiumDiscountAtIED": 32,"priceAtPurchaseDate": 130,"cycleOfInterestPayment": {"i": 365,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 90,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 59,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 86401,"p": 3,"s": 0,"isSet": true},"lifeCap": 7,"lifeFloor": 146098,"periodCap": 68568,"periodFloor": 91}, 4899, 10,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [106,122,112,100,159,40,80,29,14,116,154,152,96,237,93,110,121,34,211,23,186,156,160,14,28,229,23,3,140,155,228,141],"legalEntityIdCounterparty": [177,149,30,223,35,180,243,129,5,14,104,41,136,34,101,79,64,167,36,180,154,241,2,246,22,18,76,31,232,223,226,124],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 1336,"statusDate": 2014223714,"initialExchangeDate": 14,"maturityDate": 16,"terminationDate": 257,"purchaseDate": 0,"capitalizationEndDate": 10001,"cycleAnchorDateOfInterestPayment": 81,"cycleAnchorDateOfRateReset": 5,"cycleAnchorDateOfScalingIndex": 13,"cycleAnchorDateOfFee": 39,"notionalPrincipal": 24,"nominalInterestRate": 2,"feeAccrued": 32074,"accruedInterest": 2014223715,"rateMultiplier": 66,"rateSpread": 150,"feeRate": 130,"nextResetRate": 2440587,"penaltyRate": 368,"premiumDiscountAtIED": 1532892063,"priceAtPurchaseDate": 2014223715,"cycleOfInterestPayment": {"i": 111,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 151,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 91,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 14,"p": 4,"s": 0,"isSet": false},"lifeCap": 129,"lifeFloor": 364,"periodCap": 97,"periodFloor": 2448}, 119, 3,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [184,124,33,74,143,12,142,78,164,255,215,16,39,36,60,28,30,171,165,18,85,237,164,128,99,188,184,59,23,54,160,203],"legalEntityIdCounterparty": [142,63,18,6,228,208,29,76,121,91,24,41,67,29,241,146,199,117,50,140,177,209,150,240,57,233,198,131,102,111,90,238],"dayCountConvention": 4,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 360,"statusDate": 2447,"initialExchangeDate": 41,"maturityDate": 120,"terminationDate": 2014223715,"purchaseDate": 3,"capitalizationEndDate": 10001,"cycleAnchorDateOfInterestPayment": 49,"cycleAnchorDateOfRateReset": 59,"cycleAnchorDateOfScalingIndex": 2440589,"cycleAnchorDateOfFee": 400,"notionalPrincipal": 86401,"nominalInterestRate": 25,"feeAccrued": -1,"accruedInterest": 2014223716,"rateMultiplier": 61,"rateSpread": 13,"feeRate": 13,"nextResetRate": 31,"penaltyRate": 901,"premiumDiscountAtIED": 1336,"priceAtPurchaseDate": 1532892062,"cycleOfInterestPayment": {"i": 140,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 29,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 359,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 4801,"p": 0,"s": 0,"isSet": false},"lifeCap": 1532892062,"lifeFloor": 2014223715,"periodCap": 66,"periodFloor": 24}, 49, 30,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [59,252,46,16,247,203,69,125,136,30,141,3,4,104,87,100,67,19,229,67,23,211,140,167,60,216,213,44,180,138,224,7],"legalEntityIdCounterparty": [101,183,209,66,32,247,144,22,214,134,15,217,32,252,220,191,191,136,227,211,55,14,178,174,248,81,152,96,140,85,248,211],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 2448,"statusDate": 7,"initialExchangeDate": 14,"maturityDate": 1338,"terminationDate": 146096,"purchaseDate": 901,"capitalizationEndDate": 1461002,"cycleAnchorDateOfInterestPayment": 140,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 86400,"cycleAnchorDateOfFee": 1969,"notionalPrincipal": 2440589,"nominalInterestRate": 68569,"feeAccrued": 146096,"accruedInterest": 951,"rateMultiplier": 16,"rateSpread": 1532892064,"feeRate": 949,"nextResetRate": 159,"penaltyRate": 400,"premiumDiscountAtIED": 7,"priceAtPurchaseDate": 11,"cycleOfInterestPayment": {"i": 9999,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 367,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2014223716,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 111,"p": 3,"s": 1,"isSet": true},"lifeCap": 151,"lifeFloor": 400,"periodCap": 24,"periodFloor": 64}, 18, 48,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [238,249,41,56,85,136,185,9,47,154,146,242,64,25,124,214,103,11,223,228,73,79,227,107,130,53,186,118,30,117,214,187],"legalEntityIdCounterparty": [166,27,144,29,215,191,172,246,23,108,237,120,116,25,2,99,63,195,153,232,115,40,162,71,209,75,240,109,230,81,19,101],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 9,"statusDate": 255,"initialExchangeDate": 68569,"maturityDate": 13,"terminationDate": 64,"purchaseDate": 97,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 10001,"cycleAnchorDateOfRateReset": 4001,"cycleAnchorDateOfScalingIndex": 120,"cycleAnchorDateOfFee": 901,"notionalPrincipal": 950,"nominalInterestRate": 12,"feeAccrued": 29,"accruedInterest": 50,"rateMultiplier": 66,"rateSpread": 151,"feeRate": 17,"nextResetRate": 19,"penaltyRate": 27,"premiumDiscountAtIED": 26,"priceAtPurchaseDate": 2,"cycleOfInterestPayment": {"i": 901,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 119,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 12,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 68569,"p": 1,"s": 0,"isSet": true},"lifeCap": 59,"lifeFloor": 367,"periodCap": 359,"periodFloor": 1532892064}, 4001, 1532892064,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [195,0,128,65,136,240,226,21,14,97,143,247,127,253,143,7,140,51,155,7,17,142,92,242,16,170,79,27,19,31,98,203],"legalEntityIdCounterparty": [120,116,19,119,87,107,120,158,166,150,167,139,169,130,137,19,111,82,34,131,248,110,127,62,155,53,68,42,113,229,186,128],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 367,"statusDate": 1969,"initialExchangeDate": 16,"maturityDate": 1336,"terminationDate": 4899,"purchaseDate": 69,"capitalizationEndDate": 50,"cycleAnchorDateOfInterestPayment": 359,"cycleAnchorDateOfRateReset": 79,"cycleAnchorDateOfScalingIndex": 29,"cycleAnchorDateOfFee": 99,"notionalPrincipal": 256,"nominalInterestRate": 4899,"feeAccrued": 255,"accruedInterest": 254,"rateMultiplier": 4000,"rateSpread": 40,"feeRate": 9999,"nextResetRate": 100,"penaltyRate": 20,"premiumDiscountAtIED": 1532892062,"priceAtPurchaseDate": 79,"cycleOfInterestPayment": {"i": 1461001,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 121,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1970,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 4800,"p": 3,"s": 1,"isSet": false},"lifeCap": 97,"lifeFloor": 111,"periodCap": 256,"periodFloor": 7}, 5, 89,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [47,193,213,212,94,118,138,251,240,102,236,131,111,226,97,38,20,67,6,176,210,204,223,134,7,9,24,180,177,78,185,117],"legalEntityIdCounterparty": [223,133,128,65,9,62,146,64,128,156,230,59,202,123,26,158,57,196,244,126,208,200,202,195,44,16,172,111,20,142,33,202],"dayCountConvention": 0,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 950,"statusDate": 89,"initialExchangeDate": 51,"maturityDate": 64,"terminationDate": 131,"purchaseDate": 359,"capitalizationEndDate": 255,"cycleAnchorDateOfInterestPayment": 0,"cycleAnchorDateOfRateReset": 61,"cycleAnchorDateOfScalingIndex": 3999,"cycleAnchorDateOfFee": 13,"notionalPrincipal": 121,"nominalInterestRate": 951,"feeAccrued": 10001,"accruedInterest": 2014223715,"rateMultiplier": 901,"rateSpread": 1462,"feeRate": 365,"nextResetRate": 1970,"penaltyRate": 13,"premiumDiscountAtIED": 91,"priceAtPurchaseDate": 64,"cycleOfInterestPayment": {"i": 2440589,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 96,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 24,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 15,"p": 1,"s": 1,"isSet": false},"lifeCap": 159,"lifeFloor": 95,"periodCap": 4799,"periodFloor": 24}, 8, 257,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [241,200,65,229,129,16,52,88,20,85,0,106,226,59,98,126,16,103,28,137,253,59,79,128,104,27,86,105,131,170,106,123],"legalEntityIdCounterparty": [8,23,64,43,53,18,44,3,173,50,146,71,123,226,20,116,172,137,197,172,79,16,166,27,81,12,109,187,17,6,49,16],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 119,"statusDate": 2,"initialExchangeDate": 80,"maturityDate": 5,"terminationDate": 4899,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 949,"cycleAnchorDateOfRateReset": 151,"cycleAnchorDateOfScalingIndex": 255,"cycleAnchorDateOfFee": 399,"notionalPrincipal": 149,"nominalInterestRate": 0,"feeAccrued": 48,"accruedInterest": 71,"rateMultiplier": 21,"rateSpread": 0,"feeRate": 60,"nextResetRate": 65,"penaltyRate": 119,"premiumDiscountAtIED": 950,"priceAtPurchaseDate": 48,"cycleOfInterestPayment": {"i": 68569,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1969,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 101,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 2014223715,"p": 2,"s": 0,"isSet": false},"lifeCap": 29,"lifeFloor": 66,"periodCap": 4800,"periodFloor": 17}, 1971, 366,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [54,72,190,85,3,14,245,165,85,85,84,156,100,122,6,169,201,85,22,247,4,208,137,205,146,170,247,41,169,133,135,192],"legalEntityIdCounterparty": [4,213,109,229,124,39,8,104,127,83,95,85,50,61,216,251,109,236,148,70,27,145,56,96,76,115,36,102,253,179,179,103],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 149,"statusDate": 951,"initialExchangeDate": 4801,"maturityDate": 80,"terminationDate": 255,"purchaseDate": 6,"capitalizationEndDate": 2440588,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 21,"cycleAnchorDateOfScalingIndex": 13,"cycleAnchorDateOfFee": 18,"notionalPrincipal": 32074,"nominalInterestRate": 99,"feeAccrued": 29,"accruedInterest": 10001,"rateMultiplier": 150,"rateSpread": 95,"feeRate": 60,"nextResetRate": 255,"penaltyRate": 365,"premiumDiscountAtIED": 12,"priceAtPurchaseDate": 900,"cycleOfInterestPayment": {"i": 20,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 86401,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 15,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 901,"p": 4,"s": 0,"isSet": true},"lifeCap": 146097,"lifeFloor": 13,"periodCap": 2440587,"periodFloor": 4899}, 14, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [41,170,232,31,87,147,81,93,194,225,162,93,227,104,240,67,97,83,231,21,245,138,46,153,176,208,86,79,79,36,101,42],"legalEntityIdCounterparty": [52,208,188,172,76,167,73,20,14,144,118,207,104,100,178,131,118,164,8,48,87,159,102,6,65,183,155,158,33,61,150,61],"dayCountConvention": 1,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 86400,"statusDate": 3,"initialExchangeDate": 150,"maturityDate": 2440588,"terminationDate": 146098,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1532892062,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 1,"cycleAnchorDateOfFee": 10000,"notionalPrincipal": 400,"nominalInterestRate": 0,"feeAccrued": 3,"accruedInterest": 1462,"rateMultiplier": 359,"rateSpread": 11,"feeRate": 399,"nextResetRate": -1,"penaltyRate": 14,"premiumDiscountAtIED": 1532892062,"priceAtPurchaseDate": 4799,"cycleOfInterestPayment": {"i": 27,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 28,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1532892064,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 400,"p": 5,"s": 0,"isSet": true},"lifeCap": 4799,"lifeFloor": 1461002,"periodCap": 950,"periodFloor": 64}, 41, 2014223715,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [244,204,223,123,3,33,201,181,228,84,49,174,119,136,63,162,74,61,222,48,168,224,76,70,163,63,235,169,101,11,59,46],"legalEntityIdCounterparty": [46,159,54,113,162,232,195,66,226,166,11,224,56,143,187,59,151,166,179,202,187,182,156,130,60,61,101,60,226,39,46,50],"dayCountConvention": 5,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 2014223715,"statusDate": 366,"initialExchangeDate": 3,"maturityDate": 59,"terminationDate": 146096,"purchaseDate": 901,"capitalizationEndDate": 8,"cycleAnchorDateOfInterestPayment": 1462,"cycleAnchorDateOfRateReset": 4001,"cycleAnchorDateOfScalingIndex": 68568,"cycleAnchorDateOfFee": 140,"notionalPrincipal": 901,"nominalInterestRate": 16,"feeAccrued": 30,"accruedInterest": 9,"rateMultiplier": 68570,"rateSpread": 110,"feeRate": 254,"nextResetRate": 12,"penaltyRate": 71,"premiumDiscountAtIED": 25,"priceAtPurchaseDate": 401,"cycleOfInterestPayment": {"i": 28,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 9,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 19,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 400,"p": 3,"s": 0,"isSet": true},"lifeCap": 29,"lifeFloor": 17,"periodCap": 63,"periodFloor": 79}, 71, 32075,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [250,171,112,213,24,190,42,159,249,39,112,2,241,242,205,29,240,194,199,97,7,29,165,57,189,24,36,90,71,198,184,255],"legalEntityIdCounterparty": [209,133,234,241,202,159,230,186,165,233,12,12,99,101,168,152,139,208,158,171,9,96,178,206,94,40,124,22,10,52,13,122],"dayCountConvention": 0,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 89,"statusDate": 32075,"initialExchangeDate": 901,"maturityDate": 364,"terminationDate": 365,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 9,"cycleAnchorDateOfRateReset": 12,"cycleAnchorDateOfScalingIndex": 101,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 64,"nominalInterestRate": 0,"feeAccrued": 2014223715,"accruedInterest": 139,"rateMultiplier": 141,"rateSpread": 0,"feeRate": 140,"nextResetRate": 86400,"penaltyRate": 68570,"premiumDiscountAtIED": 14,"priceAtPurchaseDate": 64,"cycleOfInterestPayment": {"i": 41,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 4799,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 68568,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 28,"p": 5,"s": 0,"isSet": true},"lifeCap": 400,"lifeFloor": 9999,"periodCap": 1532892064,"periodFloor": 2440587}, 64, 4899,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [156,137,124,11,87,186,54,80,10,144,160,113,135,252,40,170,162,71,105,230,229,7,233,147,62,1,198,30,246,19,128,186],"legalEntityIdCounterparty": [154,150,141,182,238,186,88,202,29,222,233,35,76,62,210,108,140,201,125,73,225,28,126,220,128,85,38,218,142,27,124,115],"dayCountConvention": 5,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 129,"statusDate": 4900,"initialExchangeDate": 110,"maturityDate": 401,"terminationDate": 255,"purchaseDate": 10,"capitalizationEndDate": 71,"cycleAnchorDateOfInterestPayment": 141,"cycleAnchorDateOfRateReset": 17,"cycleAnchorDateOfScalingIndex": 159,"cycleAnchorDateOfFee": 151,"notionalPrincipal": 80,"nominalInterestRate": 1461000,"feeAccrued": 15,"accruedInterest": 80,"rateMultiplier": 95,"rateSpread": 255,"feeRate": 48,"nextResetRate": 1460,"penaltyRate": 255,"premiumDiscountAtIED": 10001,"priceAtPurchaseDate": 160,"cycleOfInterestPayment": {"i": 3999,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 146096,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 1532892063,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 68570,"p": 4,"s": 0,"isSet": true},"lifeCap": 39,"lifeFloor": 4900,"periodCap": 951,"periodFloor": 10}, 61, 364,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [132,114,143,43,17,150,123,74,99,79,250,5,13,119,127,153,184,75,45,219,149,20,12,126,189,164,126,197,115,201,67,155],"legalEntityIdCounterparty": [65,149,162,64,59,75,247,174,123,26,11,50,169,93,179,30,135,133,60,252,90,108,136,10,68,230,248,176,229,185,181,8],"dayCountConvention": 3,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 2448,"statusDate": 32,"initialExchangeDate": 29,"maturityDate": 129,"terminationDate": 61,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 4,"cycleAnchorDateOfRateReset": 50,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 111,"notionalPrincipal": 2440588,"nominalInterestRate": 0,"feeAccrued": 257,"accruedInterest": 14,"rateMultiplier": 1338,"rateSpread": 64,"feeRate": 59,"nextResetRate": 95,"penaltyRate": 256,"premiumDiscountAtIED": 1969,"priceAtPurchaseDate": 4899,"cycleOfInterestPayment": {"i": 30,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 91,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 150,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 1461002,"p": 5,"s": 0,"isSet": true},"lifeCap": 2440587,"lifeFloor": 86400,"periodCap": 31,"periodFloor": 951}, 25, 1337,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [170,218,125,243,254,152,148,59,213,75,232,82,56,16,52,53,22,127,98,148,181,170,17,150,188,41,75,232,12,174,60,149],"legalEntityIdCounterparty": [168,141,254,156,24,135,55,251,24,54,80,177,63,192,107,215,94,116,221,170,148,24,94,1,244,243,177,152,242,151,189,141],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 70,"statusDate": 64,"initialExchangeDate": 950,"maturityDate": 368,"terminationDate": 1969,"purchaseDate": 95,"capitalizationEndDate": 131,"cycleAnchorDateOfInterestPayment": 27,"cycleAnchorDateOfRateReset": 110,"cycleAnchorDateOfScalingIndex": 161,"cycleAnchorDateOfFee": 951,"notionalPrincipal": 4,"nominalInterestRate": 68569,"feeAccrued": 950,"accruedInterest": 26,"rateMultiplier": 7,"rateSpread": 4800,"feeRate": 86401,"nextResetRate": 61,"penaltyRate": 14,"premiumDiscountAtIED": 1971,"priceAtPurchaseDate": 360,"cycleOfInterestPayment": {"i": 140,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 10000,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 949,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 159,"p": 5,"s": 0,"isSet": true},"lifeCap": 2440589,"lifeFloor": 15,"periodCap": 255,"periodFloor": 31}, 68569, 161,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [26,123,92,91,175,191,180,196,6,5,130,5,203,19,23,178,190,58,69,73,105,220,196,152,188,195,1,49,184,53,229,157],"legalEntityIdCounterparty": [66,226,204,51,242,15,127,134,21,81,212,94,143,230,152,191,178,0,182,19,210,31,164,7,206,187,138,20,114,194,125,119],"dayCountConvention": 2,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 151,"statusDate": 68568,"initialExchangeDate": 366,"maturityDate": 68570,"terminationDate": 1461000,"purchaseDate": 40,"capitalizationEndDate": 129,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 86399,"cycleAnchorDateOfScalingIndex": 1461001,"cycleAnchorDateOfFee": 7,"notionalPrincipal": 100,"nominalInterestRate": 96,"feeAccrued": 951,"accruedInterest": 8,"rateMultiplier": 64,"rateSpread": 901,"feeRate": 1336,"nextResetRate": -1,"penaltyRate": 901,"premiumDiscountAtIED": 146098,"priceAtPurchaseDate": 21,"cycleOfInterestPayment": {"i": 25,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 951,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 3999,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 99,"p": 2,"s": 0,"isSet": true},"lifeCap": 21,"lifeFloor": 41,"periodCap": 899,"periodFloor": 2440588}, 71, 2448,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [230,118,3,234,196,49,96,8,249,233,77,42,173,215,112,215,62,123,101,98,6,223,193,30,12,219,13,153,86,167,229,82],"legalEntityIdCounterparty": [135,53,228,108,164,234,95,40,66,118,82,113,167,51,201,150,225,199,57,62,89,77,11,101,55,215,163,150,11,171,106,249],"dayCountConvention": 4,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 51,"statusDate": 26,"initialExchangeDate": 146096,"maturityDate": 130,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 28,"cycleAnchorDateOfRateReset": 900,"cycleAnchorDateOfScalingIndex": 146096,"cycleAnchorDateOfFee": 1461000,"notionalPrincipal": 21,"nominalInterestRate": 0,"feeAccrued": 2440589,"accruedInterest": 66,"rateMultiplier": 255,"rateSpread": 2448,"feeRate": 401,"nextResetRate": 25,"penaltyRate": 364,"premiumDiscountAtIED": 21,"priceAtPurchaseDate": 401,"cycleOfInterestPayment": {"i": 255,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1532892063,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 120,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 29,"p": 2,"s": 1,"isSet": true},"lifeCap": 60,"lifeFloor": 96,"periodCap": 949,"periodFloor": 68568}, 146097, 1969,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [108,134,79,35,157,120,67,70,16,251,212,216,54,217,230,243,20,165,160,67,174,226,201,204,198,166,163,248,152,71,180,229],"legalEntityIdCounterparty": [122,138,108,80,242,239,210,89,57,199,196,43,153,22,159,223,89,88,50,24,2,90,60,24,67,213,115,177,5,218,103,74],"dayCountConvention": 1,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 30,"statusDate": 361,"initialExchangeDate": 8,"maturityDate": 100,"terminationDate": 2447,"purchaseDate": 95,"capitalizationEndDate": 4001,"cycleAnchorDateOfInterestPayment": 2448,"cycleAnchorDateOfRateReset": 109,"cycleAnchorDateOfScalingIndex": 11,"cycleAnchorDateOfFee": 1532892062,"notionalPrincipal": 3,"nominalInterestRate": 10001,"feeAccrued": 9999,"accruedInterest": 39,"rateMultiplier": 32075,"rateSpread": 1460,"feeRate": 120,"nextResetRate": 15,"penaltyRate": 101,"premiumDiscountAtIED": 19,"priceAtPurchaseDate": 59,"cycleOfInterestPayment": {"i": 4801,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 32075,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 255,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 140,"p": 3,"s": 1,"isSet": false},"lifeCap": 4801,"lifeFloor": 14,"periodCap": 4,"periodFloor": 4801}, 61, 39,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [17,252,64,235,167,211,169,125,220,255,102,29,4,247,42,115,44,121,5,94,246,225,129,190,33,37,6,48,196,91,242,13],"legalEntityIdCounterparty": [62,179,62,225,120,94,223,155,189,216,89,120,241,231,6,132,245,106,55,67,155,54,104,47,168,246,201,80,216,148,108,173],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 146097,"statusDate": 69,"initialExchangeDate": 29,"maturityDate": 7,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 256,"cycleAnchorDateOfScalingIndex": 2448,"cycleAnchorDateOfFee": 4901,"notionalPrincipal": 365,"nominalInterestRate": 0,"feeAccrued": 951,"accruedInterest": 1532892062,"rateMultiplier": 64,"rateSpread": 899,"feeRate": 256,"nextResetRate": 4800,"penaltyRate": 2448,"premiumDiscountAtIED": 66,"priceAtPurchaseDate": 1461001,"cycleOfInterestPayment": {"i": 4800,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 61,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 1461002,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 139,"p": 4,"s": 1,"isSet": true},"lifeCap": 111,"lifeFloor": 61,"periodCap": 2014223715,"periodFloor": 400}, 68570, 71,{from: accounts[0]});
  });
});
