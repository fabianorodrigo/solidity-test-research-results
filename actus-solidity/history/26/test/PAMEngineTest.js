const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 1,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [69,177,98,118,210,225,43,243,30,158,57,15,251,202,23,251,136,162,45,240,140,128,104,110,170,212,26,101,35,74,151,168],"legalEntityIdCounterparty": [86,2,115,237,60,251,93,29,221,33,102,57,10,205,253,55,6,229,126,218,181,11,120,239,96,46,71,235,27,193,185,193],"dayCountConvention": 3,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 79,"statusDate": 160,"initialExchangeDate": 1971,"maturityDate": 2448,"terminationDate": 111,"purchaseDate": 146098,"capitalizationEndDate": 27,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 951,"cycleAnchorDateOfScalingIndex": 68570,"cycleAnchorDateOfFee": 4801,"notionalPrincipal": 27,"nominalInterestRate": 15,"feeAccrued": 99,"accruedInterest": 146098,"rateMultiplier": 40,"rateSpread": 2,"feeRate": 2446,"nextResetRate": 86400,"penaltyRate": 19,"premiumDiscountAtIED": 1532892064,"priceAtPurchaseDate": 10000,"cycleOfInterestPayment": {"i": 367,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 21,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 61,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 367,"p": 2,"s": 0,"isSet": true},"lifeCap": 5,"lifeFloor": 1971,"periodCap": 4801,"periodFloor": 95},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 17,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [2,34,135,110,108,221,62,17,143,188,236,214,122,225,122,86,47,107,131,245,211,138,76,17,29,132,166,17,126,170,95,193],"legalEntityIdCounterparty": [231,136,225,145,201,197,32,155,152,51,54,168,253,114,139,252,56,162,15,189,224,143,188,12,181,60,89,190,203,107,15,126],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 17,"statusDate": 365,"initialExchangeDate": 131,"maturityDate": 97,"terminationDate": 32074,"purchaseDate": 10000,"capitalizationEndDate": 1970,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 4801,"cycleAnchorDateOfScalingIndex": 2014223715,"cycleAnchorDateOfFee": 9999,"notionalPrincipal": 139,"nominalInterestRate": 13,"feeAccrued": 3999,"accruedInterest": 139,"rateMultiplier": 13,"rateSpread": 91,"feeRate": 17,"nextResetRate": 27,"penaltyRate": 2014223716,"premiumDiscountAtIED": 4901,"priceAtPurchaseDate": 32075,"cycleOfInterestPayment": {"i": 1971,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 110,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 367,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 400,"p": 2,"s": 1,"isSet": false},"lifeCap": 10000,"lifeFloor": 3999,"periodCap": 4900,"periodFloor": 24}, {"lastEventTime": 141,"contractStatus": 1,"timeFromLastEvent": 41,"nominalValue": 899,"nominalAccrued": 0,"feeAccrued": 1461000,"nominalRate": 4901,"interestScalingMultiplier": 2447,"nominalScalingMultiplier": 151,"contractRoleSign": 2}, 50,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 11,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [187,224,141,60,33,136,155,31,70,174,162,207,151,11,136,175,72,244,152,143,68,173,51,29,39,192,33,54,20,98,127,134],"legalEntityIdCounterparty": [5,238,133,187,189,118,53,186,186,18,188,3,226,165,221,45,161,194,248,180,20,137,83,216,251,248,25,109,34,224,122,148],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 4901,"statusDate": 68569,"initialExchangeDate": 3,"maturityDate": 1460,"terminationDate": 2014223715,"purchaseDate": 146097,"capitalizationEndDate": 23,"cycleAnchorDateOfInterestPayment": 63,"cycleAnchorDateOfRateReset": 27,"cycleAnchorDateOfScalingIndex": 257,"cycleAnchorDateOfFee": 21,"notionalPrincipal": 21,"nominalInterestRate": 49,"feeAccrued": 4800,"accruedInterest": 20,"rateMultiplier": 366,"rateSpread": 1338,"feeRate": 151,"nextResetRate": 2014223714,"penaltyRate": 49,"premiumDiscountAtIED": 2,"priceAtPurchaseDate": 66,"cycleOfInterestPayment": {"i": 19,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 4901,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 71,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 1462,"p": 5,"s": 1,"isSet": true},"lifeCap": 2014223716,"lifeFloor": 40,"periodCap": 4799,"periodFloor": 89}, {"lastEventTime": 100,"contractStatus": 1,"timeFromLastEvent": 48,"nominalValue": 13,"nominalAccrued": 1532892063,"feeAccrued": 50,"nominalRate": 1338,"interestScalingMultiplier": 3999,"nominalScalingMultiplier": 401,"contractRoleSign": 1}, {"eventTime": 71,"eventTimeWithEpochOffset": 68568,"scheduleTime": 110,"eventType": 10,"currency": accounts[0],"pofType": 16,"stfType": 2}, 32074,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [55,190,79,243,220,129,37,255,226,230,154,180,12,37,192,227,30,233,172,178,178,159,204,14,149,232,191,185,71,128,13,203],"legalEntityIdCounterparty": [23,83,98,249,245,41,143,112,34,117,95,207,33,27,239,34,156,239,182,202,81,39,74,114,2,195,189,17,50,156,173,169],"dayCountConvention": 0,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 100,"statusDate": 400,"initialExchangeDate": 91,"maturityDate": 1532892064,"terminationDate": 146097,"purchaseDate": 4000,"capitalizationEndDate": 950,"cycleAnchorDateOfInterestPayment": 10001,"cycleAnchorDateOfRateReset": 24,"cycleAnchorDateOfScalingIndex": 59,"cycleAnchorDateOfFee": 1461001,"notionalPrincipal": 6,"nominalInterestRate": 901,"feeAccrued": 360,"accruedInterest": 898,"rateMultiplier": 41,"rateSpread": 10000,"feeRate": 30,"nextResetRate": 20,"penaltyRate": 86400,"premiumDiscountAtIED": 1460,"priceAtPurchaseDate": 120,"cycleOfInterestPayment": {"i": 18,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 131,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 48,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 9,"p": 1,"s": 0,"isSet": true},"lifeCap": 149,"lifeFloor": 9999,"periodCap": 96,"periodFloor": 254}, 60, 80,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [182,6,204,215,235,91,189,53,144,82,153,242,82,1,120,173,146,24,10,94,12,70,75,114,204,198,142,97,187,114,208,104],"legalEntityIdCounterparty": [245,65,193,63,85,182,224,225,51,182,158,163,192,173,48,95,114,141,121,127,248,10,178,60,212,1,20,138,155,151,29,217],"dayCountConvention": 1,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 1532892062,"statusDate": 96,"initialExchangeDate": 21,"maturityDate": 4901,"terminationDate": 27,"purchaseDate": 64,"capitalizationEndDate": 901,"cycleAnchorDateOfInterestPayment": 1462,"cycleAnchorDateOfRateReset": 1461001,"cycleAnchorDateOfScalingIndex": 364,"cycleAnchorDateOfFee": 32074,"notionalPrincipal": 90,"nominalInterestRate": 4799,"feeAccrued": 10001,"accruedInterest": 2,"rateMultiplier": 16,"rateSpread": 950,"feeRate": 1337,"nextResetRate": 89,"penaltyRate": 1337,"premiumDiscountAtIED": 24,"priceAtPurchaseDate": 21,"cycleOfInterestPayment": {"i": 26,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 13,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1461000,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 32074,"p": 4,"s": 0,"isSet": true},"lifeCap": 151,"lifeFloor": 27,"periodCap": 4899,"periodFloor": 89}, 65, 2014223716,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [15,12,78,201,14,186,35,115,5,16,180,101,76,163,191,130,32,57,50,90,161,228,244,65,175,155,156,87,98,48,207,171],"legalEntityIdCounterparty": [118,79,60,115,130,80,162,163,182,105,191,243,134,240,7,146,7,114,18,69,52,68,8,199,77,194,186,99,201,212,51,123],"dayCountConvention": 2,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 11,"statusDate": 64,"initialExchangeDate": 81,"maturityDate": 4900,"terminationDate": 1338,"purchaseDate": 31,"capitalizationEndDate": 1532892064,"cycleAnchorDateOfInterestPayment": 1337,"cycleAnchorDateOfRateReset": 2440588,"cycleAnchorDateOfScalingIndex": 10,"cycleAnchorDateOfFee": 96,"notionalPrincipal": 86400,"nominalInterestRate": 1462,"feeAccrued": 50,"accruedInterest": 4901,"rateMultiplier": 1336,"rateSpread": 17,"feeRate": 898,"nextResetRate": 96,"penaltyRate": 26,"premiumDiscountAtIED": 4001,"priceAtPurchaseDate": 13,"cycleOfInterestPayment": {"i": 63,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 3,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 60,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 141,"p": 4,"s": 0,"isSet": false},"lifeCap": 4799,"lifeFloor": 51,"periodCap": 24,"periodFloor": 1461002}, 140, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [178,101,113,171,75,154,99,28,31,2,35,20,154,115,56,225,17,20,141,189,82,39,73,157,75,213,26,181,11,254,3,48],"legalEntityIdCounterparty": [96,1,117,82,26,17,162,70,53,136,185,222,94,53,102,229,158,84,254,150,136,30,148,188,66,185,199,108,115,116,34,72],"dayCountConvention": 6,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 66,"statusDate": 361,"initialExchangeDate": 2014223716,"maturityDate": 99,"terminationDate": 91,"purchaseDate": 120,"capitalizationEndDate": 4901,"cycleAnchorDateOfInterestPayment": 21,"cycleAnchorDateOfRateReset": 15,"cycleAnchorDateOfScalingIndex": 91,"cycleAnchorDateOfFee": 360,"notionalPrincipal": 1461001,"nominalInterestRate": 21,"feeAccrued": 66,"accruedInterest": 69,"rateMultiplier": 899,"rateSpread": 20,"feeRate": 365,"nextResetRate": 10000,"penaltyRate": 1532892064,"premiumDiscountAtIED": 400,"priceAtPurchaseDate": 16,"cycleOfInterestPayment": {"i": 899,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 19,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 50,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 99,"p": 0,"s": 1,"isSet": false},"lifeCap": 19,"lifeFloor": 30,"periodCap": 10000,"periodFloor": 10000}, 110, 10000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [75,143,205,175,250,26,93,193,227,188,181,139,96,23,26,116,13,30,180,72,51,38,199,100,0,55,67,82,49,7,223,100],"legalEntityIdCounterparty": [189,202,249,119,90,62,31,143,148,18,18,45,24,183,109,241,62,143,183,59,124,108,230,34,227,119,11,220,108,132,44,71],"dayCountConvention": 3,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 4901,"statusDate": 1,"initialExchangeDate": 2,"maturityDate": 68569,"terminationDate": 160,"purchaseDate": 0,"capitalizationEndDate": 365,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 898,"cycleAnchorDateOfFee": 365,"notionalPrincipal": 900,"nominalInterestRate": 25,"feeAccrued": 146098,"accruedInterest": 2446,"rateMultiplier": 146098,"rateSpread": 130,"feeRate": 10000,"nextResetRate": 23,"penaltyRate": 4901,"premiumDiscountAtIED": 4801,"priceAtPurchaseDate": 401,"cycleOfInterestPayment": {"i": 28,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 6,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 13,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 1,"p": 4,"s": 0,"isSet": true},"lifeCap": 65,"lifeFloor": 255,"periodCap": 12,"periodFloor": 151}, 120, 18,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [216,255,26,114,219,180,200,140,245,38,238,250,156,167,43,77,138,126,223,127,109,141,137,118,166,156,132,92,138,219,96,74],"legalEntityIdCounterparty": [68,197,66,194,245,200,129,69,77,55,107,5,135,81,180,19,91,98,154,234,138,83,149,79,63,242,229,36,111,145,204,28],"dayCountConvention": 5,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 89,"statusDate": 80,"initialExchangeDate": 1336,"maturityDate": 96,"terminationDate": 146097,"purchaseDate": 2448,"capitalizationEndDate": 950,"cycleAnchorDateOfInterestPayment": 4900,"cycleAnchorDateOfRateReset": 1461001,"cycleAnchorDateOfScalingIndex": 111,"cycleAnchorDateOfFee": 151,"notionalPrincipal": 109,"nominalInterestRate": 2447,"feeAccrued": 11,"accruedInterest": 16,"rateMultiplier": 400,"rateSpread": 10001,"feeRate": 4799,"nextResetRate": 8,"penaltyRate": 96,"premiumDiscountAtIED": 10000,"priceAtPurchaseDate": 24,"cycleOfInterestPayment": {"i": 10000,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 64,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1461,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 5,"p": 2,"s": 0,"isSet": false},"lifeCap": 8,"lifeFloor": 255,"periodCap": 17,"periodFloor": 8}, 100, 49,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [62,32,182,164,86,97,19,253,36,241,216,149,35,50,217,210,218,38,110,125,122,70,205,200,197,17,175,124,248,34,189,214],"legalEntityIdCounterparty": [80,47,133,23,177,240,229,36,233,240,59,194,97,212,75,200,160,100,160,57,122,234,169,227,201,249,117,160,170,200,100,10],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 16,"statusDate": 2014223714,"initialExchangeDate": 21,"maturityDate": 1336,"terminationDate": 151,"purchaseDate": 14,"capitalizationEndDate": 60,"cycleAnchorDateOfInterestPayment": 1462,"cycleAnchorDateOfRateReset": 41,"cycleAnchorDateOfScalingIndex": 159,"cycleAnchorDateOfFee": 3999,"notionalPrincipal": 361,"nominalInterestRate": 3999,"feeAccrued": 68569,"accruedInterest": 151,"rateMultiplier": 120,"rateSpread": 4801,"feeRate": 79,"nextResetRate": 86399,"penaltyRate": 1461,"premiumDiscountAtIED": 4799,"priceAtPurchaseDate": 900,"cycleOfInterestPayment": {"i": 80,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 899,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 14,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 4901,"p": 4,"s": 0,"isSet": false},"lifeCap": 401,"lifeFloor": 32,"periodCap": 19,"periodFloor": 4000}, 1461, 15,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [229,157,214,223,134,94,234,11,230,39,20,120,235,119,177,5,96,39,50,101,186,215,239,99,197,185,42,130,9,178,229,224],"legalEntityIdCounterparty": [46,59,40,97,236,177,105,106,170,19,251,72,99,186,210,9,45,190,227,174,19,252,49,255,212,171,250,48,80,96,90,166],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 1532892063,"statusDate": 4800,"initialExchangeDate": 86401,"maturityDate": 17,"terminationDate": 120,"purchaseDate": 59,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 368,"cycleAnchorDateOfRateReset": 2446,"cycleAnchorDateOfScalingIndex": 32075,"cycleAnchorDateOfFee": 131,"notionalPrincipal": 109,"nominalInterestRate": 31,"feeAccrued": 160,"accruedInterest": 1461,"rateMultiplier": 3999,"rateSpread": 129,"feeRate": 120,"nextResetRate": 68569,"penaltyRate": 41,"premiumDiscountAtIED": 63,"priceAtPurchaseDate": 901,"cycleOfInterestPayment": {"i": 951,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 48,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 367,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 60,"p": 0,"s": 0,"isSet": true},"lifeCap": 1,"lifeFloor": 901,"periodCap": 61,"periodFloor": 2448}, 1337, 68568,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [187,203,155,75,53,17,240,43,64,5,156,54,192,49,80,135,203,200,177,188,178,3,133,229,99,194,39,89,85,228,138,154],"legalEntityIdCounterparty": [189,83,26,129,91,57,233,124,233,18,95,52,203,39,85,167,172,137,57,100,143,223,5,146,112,170,214,24,178,191,61,206],"dayCountConvention": 1,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 1461,"statusDate": 1461000,"initialExchangeDate": 2446,"maturityDate": 901,"terminationDate": 96,"purchaseDate": 4801,"capitalizationEndDate": 361,"cycleAnchorDateOfInterestPayment": 101,"cycleAnchorDateOfRateReset": 141,"cycleAnchorDateOfScalingIndex": 1,"cycleAnchorDateOfFee": 4799,"notionalPrincipal": 1971,"nominalInterestRate": 32074,"feeAccrued": 90,"accruedInterest": 10000,"rateMultiplier": 131,"rateSpread": 141,"feeRate": 949,"nextResetRate": 1461000,"penaltyRate": 900,"premiumDiscountAtIED": 32076,"priceAtPurchaseDate": 3999,"cycleOfInterestPayment": {"i": 10001,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 146097,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 367,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 109,"p": 2,"s": 1,"isSet": true},"lifeCap": 19,"lifeFloor": 1,"periodCap": 23,"periodFloor": 401}, 101, 20,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [126,122,221,81,27,52,64,45,107,102,10,142,109,69,10,127,8,39,102,183,21,19,22,36,227,243,133,68,244,169,236,6],"legalEntityIdCounterparty": [34,80,85,174,43,84,238,33,39,218,252,126,13,97,71,137,154,20,76,146,218,83,164,29,79,32,33,186,252,142,230,32],"dayCountConvention": 4,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 2014223715,"statusDate": 29,"initialExchangeDate": 3,"maturityDate": 5,"terminationDate": 951,"purchaseDate": 31,"capitalizationEndDate": 255,"cycleAnchorDateOfInterestPayment": 31,"cycleAnchorDateOfRateReset": 100,"cycleAnchorDateOfScalingIndex": 10001,"cycleAnchorDateOfFee": 255,"notionalPrincipal": 131,"nominalInterestRate": 95,"feeAccrued": 121,"accruedInterest": 1532892063,"rateMultiplier": 111,"rateSpread": 1971,"feeRate": 96,"nextResetRate": -1,"penaltyRate": 19,"premiumDiscountAtIED": 31,"priceAtPurchaseDate": 4001,"cycleOfInterestPayment": {"i": 131,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 68570,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 70,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 4900,"p": 2,"s": 1,"isSet": true},"lifeCap": 150,"lifeFloor": 1337,"periodCap": 66,"periodFloor": 141}, 151, 86400,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [242,1,96,201,40,222,66,241,223,237,228,60,86,103,124,75,22,175,148,55,234,0,146,136,21,33,120,181,4,130,146,57],"legalEntityIdCounterparty": [158,164,218,177,80,101,58,88,139,158,227,65,115,93,64,183,109,42,135,89,151,37,207,134,225,212,27,95,23,91,206,191],"dayCountConvention": 4,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 60,"statusDate": 1461000,"initialExchangeDate": 131,"maturityDate": 21,"terminationDate": 1461,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 6,"cycleAnchorDateOfRateReset": 120,"cycleAnchorDateOfScalingIndex": 2014223716,"cycleAnchorDateOfFee": 146097,"notionalPrincipal": 2448,"nominalInterestRate": 0,"feeAccrued": 1532892064,"accruedInterest": 4799,"rateMultiplier": 24,"rateSpread": 1532892062,"feeRate": 254,"nextResetRate": 90,"penaltyRate": 1532892062,"premiumDiscountAtIED": 1970,"priceAtPurchaseDate": 20,"cycleOfInterestPayment": {"i": 150,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 4900,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1,"p": 4,"s": 0,"isSet": false},"cycleOfFee": {"i": 150,"p": 2,"s": 1,"isSet": false},"lifeCap": 160,"lifeFloor": 4001,"periodCap": 21,"periodFloor": 26}, 130, 161,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [221,56,64,109,21,38,48,110,255,138,104,160,244,109,162,10,175,76,248,207,163,161,41,59,95,238,141,171,201,93,66,230],"legalEntityIdCounterparty": [203,123,35,41,5,243,148,214,31,210,93,135,186,31,124,64,2,200,221,82,32,185,87,179,214,96,4,108,60,121,2,186],"dayCountConvention": 3,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 4901,"statusDate": 2448,"initialExchangeDate": 24,"maturityDate": 13,"terminationDate": 111,"purchaseDate": 1461001,"capitalizationEndDate": 1462,"cycleAnchorDateOfInterestPayment": 10,"cycleAnchorDateOfRateReset": 1970,"cycleAnchorDateOfScalingIndex": 66,"cycleAnchorDateOfFee": 68569,"notionalPrincipal": 130,"nominalInterestRate": 256,"feeAccrued": 95,"accruedInterest": 365,"rateMultiplier": -1,"rateSpread": 2446,"feeRate": 1461001,"nextResetRate": 146097,"penaltyRate": 951,"premiumDiscountAtIED": 80,"priceAtPurchaseDate": 367,"cycleOfInterestPayment": {"i": 1970,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 99,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4799,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 64,"p": 4,"s": 0,"isSet": false},"lifeCap": 24,"lifeFloor": 1532892062,"periodCap": 4799,"periodFloor": 901}, 1532892064, 81,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [86,174,89,132,62,10,233,53,188,2,215,7,69,73,133,10,89,103,249,85,115,109,188,110,102,162,9,221,198,138,199,79],"legalEntityIdCounterparty": [138,150,113,43,91,245,141,231,47,192,251,57,71,227,187,97,74,125,227,157,7,73,53,1,142,100,38,67,48,238,159,151],"dayCountConvention": 4,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 4799,"statusDate": 368,"initialExchangeDate": 27,"maturityDate": 159,"terminationDate": 61,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 95,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 364,"cycleAnchorDateOfFee": 24,"notionalPrincipal": 1970,"nominalInterestRate": 0,"feeAccrued": 23,"accruedInterest": 366,"rateMultiplier": 130,"rateSpread": 19,"feeRate": 1462,"nextResetRate": 8,"penaltyRate": 86400,"premiumDiscountAtIED": 51,"priceAtPurchaseDate": 32075,"cycleOfInterestPayment": {"i": 365,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 26,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 951,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 255,"p": 5,"s": 1,"isSet": false},"lifeCap": 1971,"lifeFloor": 1461,"periodCap": 20,"periodFloor": 400}, 1, 70,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [73,115,181,87,198,24,19,138,239,61,106,57,123,245,246,244,10,121,226,67,245,250,107,155,34,147,28,14,110,195,195,110],"legalEntityIdCounterparty": [182,190,203,137,198,109,102,150,178,235,101,50,97,119,174,73,102,231,101,212,37,253,194,251,254,73,83,73,93,98,244,186],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 24,"statusDate": 79,"initialExchangeDate": 90,"maturityDate": 24,"terminationDate": 32,"purchaseDate": 9999,"capitalizationEndDate": 2014223714,"cycleAnchorDateOfInterestPayment": 367,"cycleAnchorDateOfRateReset": 5,"cycleAnchorDateOfScalingIndex": 9999,"cycleAnchorDateOfFee": 86399,"notionalPrincipal": 79,"nominalInterestRate": 949,"feeAccrued": 900,"accruedInterest": 1,"rateMultiplier": 64,"rateSpread": 4000,"feeRate": 2,"nextResetRate": 30,"penaltyRate": 4900,"premiumDiscountAtIED": 367,"priceAtPurchaseDate": 1462,"cycleOfInterestPayment": {"i": 2014223714,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 2440588,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 111,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 151,"p": 4,"s": 0,"isSet": false},"lifeCap": 20,"lifeFloor": 70,"periodCap": 48,"periodFloor": 71}, 4901, 9,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [33,33,95,206,231,10,212,168,44,16,73,192,187,50,42,106,27,99,126,85,87,47,123,210,219,7,237,93,196,192,186,197],"legalEntityIdCounterparty": [200,87,245,120,205,202,18,227,164,123,245,192,209,229,10,215,247,35,103,203,238,52,21,208,2,148,247,107,157,103,245,144],"dayCountConvention": 4,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 5,"statusDate": 1336,"initialExchangeDate": 91,"maturityDate": 70,"terminationDate": 366,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 80,"cycleAnchorDateOfRateReset": 111,"cycleAnchorDateOfScalingIndex": 96,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 365,"nominalInterestRate": 0,"feeAccrued": 80,"accruedInterest": 71,"rateMultiplier": 899,"rateSpread": 1969,"feeRate": 3999,"nextResetRate": 39,"penaltyRate": 80,"premiumDiscountAtIED": 27,"priceAtPurchaseDate": 60,"cycleOfInterestPayment": {"i": 15,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 15,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 10001,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 8,"p": 0,"s": 0,"isSet": false},"lifeCap": 401,"lifeFloor": 4901,"periodCap": 21,"periodFloor": 1532892062}, 161, 24,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [58,54,122,46,210,220,243,113,67,154,131,167,119,9,2,141,60,19,250,135,202,81,255,1,49,118,14,157,95,99,217,137],"legalEntityIdCounterparty": [182,44,151,82,149,10,235,205,153,7,4,238,209,18,111,214,35,162,27,66,11,119,224,11,122,24,217,208,226,154,168,168],"dayCountConvention": 4,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 1532892064,"statusDate": 16,"initialExchangeDate": 401,"maturityDate": 51,"terminationDate": 91,"purchaseDate": 6,"capitalizationEndDate": 2014223715,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 91,"cycleAnchorDateOfScalingIndex": 70,"cycleAnchorDateOfFee": 1462,"notionalPrincipal": 29,"nominalInterestRate": 81,"feeAccrued": 901,"accruedInterest": 2,"rateMultiplier": 257,"rateSpread": 24,"feeRate": 10001,"nextResetRate": 10000,"penaltyRate": 28,"premiumDiscountAtIED": 151,"priceAtPurchaseDate": 2014223715,"cycleOfInterestPayment": {"i": 130,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 900,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 12,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 4901,"p": 4,"s": 1,"isSet": false},"lifeCap": 1336,"lifeFloor": 139,"periodCap": -1,"periodFloor": 400}, 4, 2,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [136,48,219,168,152,149,133,245,22,185,64,143,186,98,108,30,134,112,5,192,209,233,155,64,236,14,82,245,136,166,127,250],"legalEntityIdCounterparty": [189,8,234,1,202,225,141,35,204,7,161,70,229,162,81,142,180,142,201,165,51,5,59,246,120,164,157,197,10,1,52,153],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 900,"statusDate": 1460,"initialExchangeDate": 5,"maturityDate": 256,"terminationDate": 59,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1462,"cycleAnchorDateOfRateReset": 30,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 79,"notionalPrincipal": 129,"nominalInterestRate": 0,"feeAccrued": 95,"accruedInterest": 99,"rateMultiplier": 901,"rateSpread": 2440587,"feeRate": 361,"nextResetRate": 3,"penaltyRate": 32076,"premiumDiscountAtIED": 1462,"priceAtPurchaseDate": 99,"cycleOfInterestPayment": {"i": 66,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 23,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 151,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 3999,"p": 2,"s": 1,"isSet": true},"lifeCap": 1969,"lifeFloor": 4,"periodCap": 4899,"periodFloor": 2}, 66, 32,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [4,206,52,212,224,213,43,169,212,18,38,242,191,164,72,116,255,185,55,129,69,80,146,219,197,68,198,32,53,205,111,130],"legalEntityIdCounterparty": [62,91,81,40,30,5,28,69,32,36,150,111,127,92,155,50,227,198,131,36,100,54,87,25,32,234,36,45,39,56,249,124],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 4001,"statusDate": 7,"initialExchangeDate": 151,"maturityDate": 27,"terminationDate": 31,"purchaseDate": 2,"capitalizationEndDate": 21,"cycleAnchorDateOfInterestPayment": 951,"cycleAnchorDateOfRateReset": 99,"cycleAnchorDateOfScalingIndex": 17,"cycleAnchorDateOfFee": 1461,"notionalPrincipal": 2448,"nominalInterestRate": 4900,"feeAccrued": 99,"accruedInterest": 4800,"rateMultiplier": 13,"rateSpread": 8,"feeRate": 146097,"nextResetRate": -1,"penaltyRate": 79,"premiumDiscountAtIED": 64,"priceAtPurchaseDate": -1,"cycleOfInterestPayment": {"i": 7,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 160,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 20,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 25,"p": 0,"s": 1,"isSet": true},"lifeCap": 41,"lifeFloor": 366,"periodCap": 100,"periodFloor": 10000}, 951, 110,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [202,217,222,169,40,156,102,68,33,0,134,163,15,146,185,119,8,154,182,184,65,16,251,147,21,201,144,200,103,150,226,58],"legalEntityIdCounterparty": [224,115,29,37,59,236,216,111,45,18,200,48,150,40,155,75,126,143,163,129,168,196,67,251,218,24,24,220,204,184,42,47],"dayCountConvention": 6,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 2014223714,"statusDate": 32076,"initialExchangeDate": 80,"maturityDate": 68569,"terminationDate": 61,"purchaseDate": 1461002,"capitalizationEndDate": 2440589,"cycleAnchorDateOfInterestPayment": 97,"cycleAnchorDateOfRateReset": 48,"cycleAnchorDateOfScalingIndex": 368,"cycleAnchorDateOfFee": 2440588,"notionalPrincipal": 21,"nominalInterestRate": 7,"feeAccrued": 10001,"accruedInterest": 2014223715,"rateMultiplier": 131,"rateSpread": 40,"feeRate": 4799,"nextResetRate": 4000,"penaltyRate": 32075,"premiumDiscountAtIED": 27,"priceAtPurchaseDate": 121,"cycleOfInterestPayment": {"i": 41,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 68568,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 17,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 4899,"p": 4,"s": 1,"isSet": true},"lifeCap": 25,"lifeFloor": 10,"periodCap": 20,"periodFloor": 61}, 96, 1461,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [211,114,102,145,65,31,20,123,210,102,130,191,104,84,52,222,174,119,235,20,44,133,189,10,26,237,3,231,1,147,1,186],"legalEntityIdCounterparty": [64,149,115,37,180,73,147,160,66,209,121,199,16,251,93,249,102,166,194,135,119,159,118,189,190,88,19,132,65,211,106,127],"dayCountConvention": 1,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 17,"statusDate": 16,"initialExchangeDate": 1461001,"maturityDate": 0,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 28,"cycleAnchorDateOfRateReset": 899,"cycleAnchorDateOfScalingIndex": 901,"cycleAnchorDateOfFee": 2447,"notionalPrincipal": 64,"nominalInterestRate": 0,"feeAccrued": 1337,"accruedInterest": 4001,"rateMultiplier": 0,"rateSpread": 2014223714,"feeRate": 20,"nextResetRate": 950,"penaltyRate": 2447,"premiumDiscountAtIED": 1461,"priceAtPurchaseDate": 18,"cycleOfInterestPayment": {"i": 1462,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 899,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 120,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 86399,"p": 2,"s": 1,"isSet": true},"lifeCap": 130,"lifeFloor": 255,"periodCap": 1336,"periodFloor": 1461002}, 86401, 27,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [69,96,243,50,11,52,95,110,14,236,204,13,16,161,59,183,29,239,68,205,144,63,212,131,92,118,74,124,178,105,251,180],"legalEntityIdCounterparty": [72,106,44,111,185,64,243,29,168,128,244,136,45,177,17,157,34,90,203,202,112,85,137,166,108,171,230,246,48,191,60,48],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 70,"statusDate": 365,"initialExchangeDate": 1461002,"maturityDate": 901,"terminationDate": 51,"purchaseDate": 4901,"capitalizationEndDate": 99,"cycleAnchorDateOfInterestPayment": 100,"cycleAnchorDateOfRateReset": 146097,"cycleAnchorDateOfScalingIndex": 949,"cycleAnchorDateOfFee": 1338,"notionalPrincipal": 40,"nominalInterestRate": 139,"feeAccrued": 31,"accruedInterest": 149,"rateMultiplier": 16,"rateSpread": 149,"feeRate": 1461002,"nextResetRate": 1,"penaltyRate": 146098,"premiumDiscountAtIED": 81,"priceAtPurchaseDate": 4,"cycleOfInterestPayment": {"i": 41,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 21,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 1532892062,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 51,"p": 2,"s": 0,"isSet": false},"lifeCap": 86399,"lifeFloor": 130,"periodCap": 399,"periodFloor": 5}, 26, 139,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [242,128,222,206,157,191,42,21,50,69,181,20,60,251,137,41,76,12,254,232,205,194,173,169,154,3,168,162,15,251,116,47],"legalEntityIdCounterparty": [172,186,79,12,151,164,3,124,56,242,100,230,47,1,50,86,168,122,55,168,129,128,134,75,35,96,68,23,243,101,106,16],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 2,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 8,"statusDate": 121,"initialExchangeDate": 130,"maturityDate": 150,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 257,"cycleAnchorDateOfRateReset": 4801,"cycleAnchorDateOfScalingIndex": 1970,"cycleAnchorDateOfFee": 1337,"notionalPrincipal": 71,"nominalInterestRate": 0,"feeAccrued": 4,"accruedInterest": 159,"rateMultiplier": 66,"rateSpread": 81,"feeRate": 119,"nextResetRate": 10000,"penaltyRate": 146097,"premiumDiscountAtIED": 2446,"priceAtPurchaseDate": 901,"cycleOfInterestPayment": {"i": 61,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 151,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 149,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 151,"p": 1,"s": 1,"isSet": true},"lifeCap": 1532892062,"lifeFloor": 28,"periodCap": 364,"periodFloor": 2}, 1461002, 1461000,{from: accounts[0]});
  });
});
