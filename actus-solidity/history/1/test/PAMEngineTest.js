const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 11,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [28,111,137,228,175,128,106,109,114,180,84,151,45,223,197,159,63,146,96,95,136,67,163,77,126,138,201,211,156,49,147,255],"legalEntityIdCounterparty": [35,82,183,157,235,160,181,181,221,52,250,99,65,18,23,102,95,161,67,28,223,7,37,112,55,123,144,234,173,62,230,225],"dayCountConvention": 2,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 18,"statusDate": 4001,"initialExchangeDate": 24,"maturityDate": 949,"terminationDate": 19,"purchaseDate": 4799,"capitalizationEndDate": 361,"cycleAnchorDateOfInterestPayment": 95,"cycleAnchorDateOfRateReset": 401,"cycleAnchorDateOfScalingIndex": 48,"cycleAnchorDateOfFee": 68568,"notionalPrincipal": 401,"nominalInterestRate": 899,"feeAccrued": 900,"accruedInterest": 146098,"rateMultiplier": 86399,"rateSpread": 146098,"feeRate": 1969,"nextResetRate": 101,"penaltyRate": 18,"premiumDiscountAtIED": 4900,"priceAtPurchaseDate": 2440589,"cycleOfInterestPayment": {"i": 364,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 0,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 0,"p": 4,"s": 0,"isSet": false},"cycleOfFee": {"i": 2446,"p": 0,"s": 0,"isSet": true},"lifeCap": 17,"lifeFloor": 14,"periodCap": 63,"periodFloor": 4000},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 4,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [239,132,153,156,164,103,91,35,211,1,223,227,22,81,184,214,50,46,187,248,81,168,113,82,117,249,50,250,224,250,127,191],"legalEntityIdCounterparty": [84,217,62,21,230,66,170,233,66,100,194,144,192,33,163,112,254,165,216,25,238,174,127,193,12,32,42,159,90,18,244,204],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 21,"statusDate": 399,"initialExchangeDate": 140,"maturityDate": 40,"terminationDate": 400,"purchaseDate": 2440587,"capitalizationEndDate": 8,"cycleAnchorDateOfInterestPayment": 0,"cycleAnchorDateOfRateReset": 11,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 255,"notionalPrincipal": 1461001,"nominalInterestRate": 5,"feeAccrued": 63,"accruedInterest": 899,"rateMultiplier": 139,"rateSpread": 9999,"feeRate": 160,"nextResetRate": 68570,"penaltyRate": 4799,"premiumDiscountAtIED": 109,"priceAtPurchaseDate": 120,"cycleOfInterestPayment": {"i": 149,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 401,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 60,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 6,"p": 2,"s": 1,"isSet": false},"lifeCap": 32075,"lifeFloor": 27,"periodCap": 131,"periodFloor": 900}, {"lastEventTime": 101,"contractStatus": 0,"timeFromLastEvent": 257,"nominalValue": 1970,"nominalAccrued": 1,"feeAccrued": 1460,"nominalRate": 1532892062,"interestScalingMultiplier": 27,"nominalScalingMultiplier": 149,"contractRoleSign": 6}, 68570,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 13,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [36,126,99,78,105,50,231,159,49,216,75,92,211,54,202,210,171,145,239,161,178,226,60,214,117,62,187,112,94,141,28,254],"legalEntityIdCounterparty": [192,241,234,186,225,129,134,75,143,23,118,235,243,54,160,214,95,131,119,46,115,249,39,107,4,216,56,62,216,166,30,9],"dayCountConvention": 1,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 80,"statusDate": 15,"initialExchangeDate": 1461000,"maturityDate": 401,"terminationDate": 367,"purchaseDate": 21,"capitalizationEndDate": 1969,"cycleAnchorDateOfInterestPayment": 120,"cycleAnchorDateOfRateReset": 111,"cycleAnchorDateOfScalingIndex": 1336,"cycleAnchorDateOfFee": 86401,"notionalPrincipal": 4899,"nominalInterestRate": 1970,"feeAccrued": 10000,"accruedInterest": 146096,"rateMultiplier": 90,"rateSpread": 1460,"feeRate": 49,"nextResetRate": 10000,"penaltyRate": 2448,"premiumDiscountAtIED": 2440588,"priceAtPurchaseDate": 1970,"cycleOfInterestPayment": {"i": 65,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2448,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 89,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 401,"p": 0,"s": 1,"isSet": false},"lifeCap": 100,"lifeFloor": 70,"periodCap": 17,"periodFloor": 17}, {"lastEventTime": 364,"contractStatus": 3,"timeFromLastEvent": 139,"nominalValue": 950,"nominalAccrued": 2014223714,"feeAccrued": 80,"nominalRate": 4001,"interestScalingMultiplier": 2014223716,"nominalScalingMultiplier": 1462,"contractRoleSign": 3}, {"eventTime": 89,"eventTimeWithEpochOffset": 151,"scheduleTime": 1970,"eventType": 15,"currency": accounts[6],"pofType": 2,"stfType": 13}, 360,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [32,40,193,203,161,148,4,34,240,228,183,251,226,176,62,0,103,145,49,110,243,54,44,198,107,159,249,31,89,247,234,169],"legalEntityIdCounterparty": [119,91,0,87,40,215,153,54,197,140,98,27,3,4,53,122,157,99,27,205,52,55,163,25,188,202,230,88,239,149,79,194],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 86399,"statusDate": 19,"initialExchangeDate": 4001,"maturityDate": 2440589,"terminationDate": 951,"purchaseDate": 3,"capitalizationEndDate": 2448,"cycleAnchorDateOfInterestPayment": 32076,"cycleAnchorDateOfRateReset": 10001,"cycleAnchorDateOfScalingIndex": 8,"cycleAnchorDateOfFee": 101,"notionalPrincipal": 146098,"nominalInterestRate": 65,"feeAccrued": 1970,"accruedInterest": 15,"rateMultiplier": 31,"rateSpread": 146096,"feeRate": 2446,"nextResetRate": 254,"penaltyRate": 1532892062,"premiumDiscountAtIED": 17,"priceAtPurchaseDate": 146097,"cycleOfInterestPayment": {"i": 1532892063,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 0,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 10000,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 59,"p": 4,"s": 0,"isSet": true},"lifeCap": 146096,"lifeFloor": 399,"periodCap": 86400,"periodFloor": 4799}, 111, 51,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [171,23,134,226,3,8,227,85,106,41,155,42,165,25,205,236,58,230,55,192,125,55,15,72,60,48,18,36,179,213,169,63],"legalEntityIdCounterparty": [92,159,53,209,35,200,166,98,189,79,249,239,54,217,12,114,190,42,29,9,178,221,185,153,197,50,5,21,217,21,16,158],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 364,"statusDate": 161,"initialExchangeDate": 1461,"maturityDate": 2447,"terminationDate": 1338,"purchaseDate": 399,"capitalizationEndDate": 41,"cycleAnchorDateOfInterestPayment": 66,"cycleAnchorDateOfRateReset": 4800,"cycleAnchorDateOfScalingIndex": 68569,"cycleAnchorDateOfFee": 48,"notionalPrincipal": 146098,"nominalInterestRate": 97,"feeAccrued": 1336,"accruedInterest": 27,"rateMultiplier": 4801,"rateSpread": 400,"feeRate": 32074,"nextResetRate": 366,"penaltyRate": 255,"premiumDiscountAtIED": 2440589,"priceAtPurchaseDate": -1,"cycleOfInterestPayment": {"i": 86399,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 364,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 4800,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 21,"p": 3,"s": 0,"isSet": true},"lifeCap": 120,"lifeFloor": 10,"periodCap": 111,"periodFloor": 4799}, 19, 141,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [41,125,53,166,233,213,59,16,9,65,252,107,39,177,184,154,220,43,154,180,83,118,229,95,176,176,82,195,104,77,66,81],"legalEntityIdCounterparty": [31,37,198,105,190,46,75,146,37,245,6,251,236,26,244,99,213,16,6,141,95,10,121,129,29,63,171,171,153,106,177,92],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 150,"statusDate": 2,"initialExchangeDate": 2440588,"maturityDate": 1336,"terminationDate": 141,"purchaseDate": 10000,"capitalizationEndDate": 1338,"cycleAnchorDateOfInterestPayment": 110,"cycleAnchorDateOfRateReset": 901,"cycleAnchorDateOfScalingIndex": 2447,"cycleAnchorDateOfFee": 10,"notionalPrincipal": 60,"nominalInterestRate": 254,"feeAccrued": 2440588,"accruedInterest": 10001,"rateMultiplier": 4000,"rateSpread": 2448,"feeRate": 3,"nextResetRate": 32074,"penaltyRate": 951,"premiumDiscountAtIED": 1970,"priceAtPurchaseDate": 1337,"cycleOfInterestPayment": {"i": 365,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 26,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 89,"p": 4,"s": 1,"isSet": true},"cycleOfFee": {"i": 151,"p": 4,"s": 1,"isSet": false},"lifeCap": 60,"lifeFloor": 1461001,"periodCap": 160,"periodFloor": 31}, 20, 254,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [99,234,28,153,145,202,206,204,20,190,3,21,135,212,100,139,35,188,142,74,49,195,249,98,143,92,11,205,193,173,154,55],"legalEntityIdCounterparty": [130,170,129,107,254,101,195,100,48,115,14,111,4,149,74,59,205,168,146,79,200,242,211,42,29,74,249,4,60,190,186,224],"dayCountConvention": 5,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 49,"statusDate": 71,"initialExchangeDate": 40,"maturityDate": 256,"terminationDate": 17,"purchaseDate": 899,"capitalizationEndDate": 4800,"cycleAnchorDateOfInterestPayment": 99,"cycleAnchorDateOfRateReset": 399,"cycleAnchorDateOfScalingIndex": 100,"cycleAnchorDateOfFee": 1532892063,"notionalPrincipal": 63,"nominalInterestRate": 4800,"feeAccrued": 110,"accruedInterest": 64,"rateMultiplier": 2,"rateSpread": 15,"feeRate": 95,"nextResetRate": 121,"penaltyRate": 4901,"premiumDiscountAtIED": 61,"priceAtPurchaseDate": 139,"cycleOfInterestPayment": {"i": 32074,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1462,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 97,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 2014223715,"p": 2,"s": 1,"isSet": true},"lifeCap": 19,"lifeFloor": 2440588,"periodCap": 121,"periodFloor": 151}, 146097, 29,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [120,21,166,158,200,56,217,154,246,221,170,5,41,116,10,117,192,198,205,12,7,69,34,91,225,12,253,237,104,177,1,187],"legalEntityIdCounterparty": [96,64,95,13,8,165,29,30,187,95,55,72,233,248,58,82,49,28,173,207,210,89,36,60,242,142,170,147,41,129,243,248],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 1461001,"statusDate": 3999,"initialExchangeDate": 79,"maturityDate": 4001,"terminationDate": 20,"purchaseDate": 0,"capitalizationEndDate": 32,"cycleAnchorDateOfInterestPayment": 64,"cycleAnchorDateOfRateReset": 900,"cycleAnchorDateOfScalingIndex": 150,"cycleAnchorDateOfFee": 139,"notionalPrincipal": 399,"nominalInterestRate": 10,"feeAccrued": 2014223715,"accruedInterest": 79,"rateMultiplier": 1336,"rateSpread": 5,"feeRate": 2440587,"nextResetRate": 86400,"penaltyRate": 31,"premiumDiscountAtIED": 2440587,"priceAtPurchaseDate": 69,"cycleOfInterestPayment": {"i": 364,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1532892064,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 65,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 97,"p": 3,"s": 0,"isSet": false},"lifeCap": 5,"lifeFloor": 40,"periodCap": 949,"periodFloor": 60}, 1532892063, 366,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [68,23,71,12,214,191,149,109,201,9,82,216,249,26,125,66,4,13,193,69,34,247,168,35,138,131,147,54,161,77,82,102],"legalEntityIdCounterparty": [195,188,89,253,177,227,18,12,196,102,94,221,80,173,120,110,214,243,114,180,229,191,213,172,230,56,208,83,41,4,33,9],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 151,"statusDate": 0,"initialExchangeDate": 1461001,"maturityDate": 4800,"terminationDate": 10,"purchaseDate": 131,"capitalizationEndDate": 368,"cycleAnchorDateOfInterestPayment": 9999,"cycleAnchorDateOfRateReset": 59,"cycleAnchorDateOfScalingIndex": 66,"cycleAnchorDateOfFee": 160,"notionalPrincipal": 91,"nominalInterestRate": 60,"feeAccrued": 12,"accruedInterest": 1,"rateMultiplier": 1970,"rateSpread": 2014223716,"feeRate": 4799,"nextResetRate": 26,"penaltyRate": 255,"premiumDiscountAtIED": 26,"priceAtPurchaseDate": 25,"cycleOfInterestPayment": {"i": 146096,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 399,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 4900,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 139,"p": 4,"s": 1,"isSet": true},"lifeCap": 2440589,"lifeFloor": 40,"periodCap": 60,"periodFloor": 146096}, 4799, 1532892062,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [200,77,48,10,14,109,155,74,108,49,140,78,253,201,166,229,151,246,61,139,100,243,40,41,118,194,150,139,68,238,9,209],"legalEntityIdCounterparty": [92,129,128,62,237,99,57,250,202,95,223,246,195,12,142,28,98,44,11,191,90,134,82,175,21,252,223,1,198,151,212,30],"dayCountConvention": 2,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 2,"statusDate": 61,"initialExchangeDate": 1,"maturityDate": 97,"terminationDate": 14,"purchaseDate": 121,"capitalizationEndDate": 51,"cycleAnchorDateOfInterestPayment": 31,"cycleAnchorDateOfRateReset": 4901,"cycleAnchorDateOfScalingIndex": 7,"cycleAnchorDateOfFee": 1532892063,"notionalPrincipal": 63,"nominalInterestRate": 15,"feeAccrued": 1338,"accruedInterest": 69,"rateMultiplier": 951,"rateSpread": 95,"feeRate": 2440589,"nextResetRate": 159,"penaltyRate": 68568,"premiumDiscountAtIED": 1532892062,"priceAtPurchaseDate": 1461002,"cycleOfInterestPayment": {"i": 10000,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 68568,"p": 1,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 146097,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 4,"p": 1,"s": 1,"isSet": false},"lifeCap": 4801,"lifeFloor": -1,"periodCap": 161,"periodFloor": 8}, 364, 10,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [57,137,162,2,113,185,95,241,195,251,72,228,25,236,247,56,116,195,0,246,187,211,244,39,39,62,27,75,215,107,6,114],"legalEntityIdCounterparty": [91,196,142,185,92,88,192,224,28,205,189,231,110,235,176,71,77,203,236,71,220,130,33,183,216,48,138,5,173,208,142,104],"dayCountConvention": 3,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 86399,"statusDate": 5,"initialExchangeDate": 0,"maturityDate": 4900,"terminationDate": 121,"purchaseDate": 1461,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 4800,"cycleAnchorDateOfRateReset": 11,"cycleAnchorDateOfScalingIndex": 63,"cycleAnchorDateOfFee": 20,"notionalPrincipal": 100,"nominalInterestRate": 10001,"feeAccrued": 5,"accruedInterest": 19,"rateMultiplier": 10,"rateSpread": 151,"feeRate": 24,"nextResetRate": 4801,"penaltyRate": 7,"premiumDiscountAtIED": 399,"priceAtPurchaseDate": 20,"cycleOfInterestPayment": {"i": 129,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 399,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 2440588,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 1462,"p": 3,"s": 1,"isSet": false},"lifeCap": 18,"lifeFloor": 24,"periodCap": 360,"periodFloor": 4800}, 40, 146098,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [113,22,40,183,15,254,177,23,30,53,189,43,52,60,14,246,115,78,135,38,213,136,19,134,49,205,248,155,122,60,76,118],"legalEntityIdCounterparty": [210,211,131,12,180,157,147,193,10,106,26,34,176,204,117,108,52,114,2,80,118,154,140,70,84,16,5,123,27,243,0,129],"dayCountConvention": 2,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 21,"statusDate": 49,"initialExchangeDate": 3,"maturityDate": 111,"terminationDate": 950,"purchaseDate": 401,"capitalizationEndDate": 30,"cycleAnchorDateOfInterestPayment": 66,"cycleAnchorDateOfRateReset": 1532892063,"cycleAnchorDateOfScalingIndex": 140,"cycleAnchorDateOfFee": 70,"notionalPrincipal": 1532892062,"nominalInterestRate": 367,"feeAccrued": 951,"accruedInterest": 15,"rateMultiplier": 26,"rateSpread": 4899,"feeRate": 26,"nextResetRate": 160,"penaltyRate": 59,"premiumDiscountAtIED": 12,"priceAtPurchaseDate": 97,"cycleOfInterestPayment": {"i": 86399,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 69,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1337,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 14,"p": 2,"s": 0,"isSet": false},"lifeCap": 19,"lifeFloor": 949,"periodCap": 86400,"periodFloor": 2440589}, 901, 121,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [254,241,120,255,56,147,63,125,229,118,182,228,94,30,197,127,7,201,32,113,2,107,228,17,237,122,71,212,11,78,162,80],"legalEntityIdCounterparty": [222,33,103,68,172,207,106,153,172,160,196,177,111,150,174,189,189,93,89,112,98,81,220,6,106,194,176,89,234,26,217,227],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 109,"statusDate": 131,"initialExchangeDate": 89,"maturityDate": 365,"terminationDate": 17,"purchaseDate": 256,"capitalizationEndDate": 68569,"cycleAnchorDateOfInterestPayment": 4000,"cycleAnchorDateOfRateReset": 159,"cycleAnchorDateOfScalingIndex": 2446,"cycleAnchorDateOfFee": 89,"notionalPrincipal": 14,"nominalInterestRate": 0,"feeAccrued": 25,"accruedInterest": 63,"rateMultiplier": 29,"rateSpread": 1461002,"feeRate": 21,"nextResetRate": 2440589,"penaltyRate": 149,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 61,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1337,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 365,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 0,"p": 2,"s": 0,"isSet": false},"lifeCap": 2,"lifeFloor": 1532892062,"periodCap": 81,"periodFloor": 25}, 17, 28,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [84,205,67,174,181,95,102,191,38,193,65,16,57,236,232,232,128,46,136,170,82,221,62,31,59,109,196,140,23,253,70,94],"legalEntityIdCounterparty": [137,73,138,225,117,233,88,113,163,243,172,91,222,66,43,176,116,221,56,92,80,198,132,22,99,188,102,124,231,238,174,75],"dayCountConvention": 1,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 130,"statusDate": 32074,"initialExchangeDate": 899,"maturityDate": 71,"terminationDate": 130,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 110,"cycleAnchorDateOfRateReset": 256,"cycleAnchorDateOfScalingIndex": 130,"cycleAnchorDateOfFee": 9,"notionalPrincipal": 2440587,"nominalInterestRate": 0,"feeAccrued": 4800,"accruedInterest": 71,"rateMultiplier": 1461002,"rateSpread": 8,"feeRate": 13,"nextResetRate": 20,"penaltyRate": 95,"premiumDiscountAtIED": 10000,"priceAtPurchaseDate": 90,"cycleOfInterestPayment": {"i": 365,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 360,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 254,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 400,"p": 2,"s": 1,"isSet": true},"lifeCap": 4900,"lifeFloor": 359,"periodCap": 1337,"periodFloor": 111}, 161, 40,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [7,1,57,165,26,121,245,4,37,242,153,28,244,184,105,182,79,251,163,171,45,6,222,251,20,239,69,17,113,69,187,16],"legalEntityIdCounterparty": [159,94,147,45,139,27,19,165,86,197,192,151,136,198,196,49,13,226,40,128,54,231,34,95,21,202,89,1,216,236,13,217],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 4900,"statusDate": 2014223715,"initialExchangeDate": 159,"maturityDate": 48,"terminationDate": 31,"purchaseDate": 60,"capitalizationEndDate": 11,"cycleAnchorDateOfInterestPayment": 90,"cycleAnchorDateOfRateReset": 110,"cycleAnchorDateOfScalingIndex": 81,"cycleAnchorDateOfFee": 71,"notionalPrincipal": 399,"nominalInterestRate": 1532892063,"feeAccrued": 21,"accruedInterest": 66,"rateMultiplier": 0,"rateSpread": 1338,"feeRate": 256,"nextResetRate": 1461002,"penaltyRate": 2440587,"premiumDiscountAtIED": 13,"priceAtPurchaseDate": 97,"cycleOfInterestPayment": {"i": 130,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 21,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 13,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 4001,"p": 3,"s": 0,"isSet": true},"lifeCap": 65,"lifeFloor": 31,"periodCap": 1,"periodFloor": 2446}, 2, 2448,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [244,70,185,152,1,58,182,147,235,125,247,111,120,182,50,75,111,48,225,57,215,37,207,213,192,104,227,166,125,230,252,177],"legalEntityIdCounterparty": [6,166,243,147,215,94,51,99,109,126,23,131,65,225,235,93,255,232,56,123,212,229,22,204,142,181,85,109,1,182,140,219],"dayCountConvention": 2,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 256,"statusDate": 0,"initialExchangeDate": 4801,"maturityDate": 32,"terminationDate": 121,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1337,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 400,"cycleAnchorDateOfFee": 1969,"notionalPrincipal": 951,"nominalInterestRate": 0,"feeAccrued": 68568,"accruedInterest": -1,"rateMultiplier": 89,"rateSpread": 32076,"feeRate": 129,"nextResetRate": 11,"penaltyRate": 19,"premiumDiscountAtIED": 49,"priceAtPurchaseDate": 79,"cycleOfInterestPayment": {"i": 360,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 39,"p": 1,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 86399,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 4900,"p": 3,"s": 0,"isSet": false},"lifeCap": 139,"lifeFloor": 51,"periodCap": 99,"periodFloor": 361}, 110, 255,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [123,108,130,45,141,54,109,27,101,152,217,195,106,2,212,63,250,13,0,19,38,47,130,219,195,9,232,43,45,5,77,236],"legalEntityIdCounterparty": [2,168,162,198,176,120,153,201,166,163,249,18,39,253,112,147,197,125,88,56,41,129,199,76,41,97,243,116,247,87,160,230],"dayCountConvention": 2,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 401,"statusDate": 159,"initialExchangeDate": 159,"maturityDate": 1532892063,"terminationDate": 86399,"purchaseDate": 359,"capitalizationEndDate": 19,"cycleAnchorDateOfInterestPayment": 19,"cycleAnchorDateOfRateReset": 39,"cycleAnchorDateOfScalingIndex": 11,"cycleAnchorDateOfFee": 119,"notionalPrincipal": 146097,"nominalInterestRate": 64,"feeAccrued": 130,"accruedInterest": 97,"rateMultiplier": 31,"rateSpread": 63,"feeRate": 359,"nextResetRate": 110,"penaltyRate": 13,"premiumDiscountAtIED": 19,"priceAtPurchaseDate": 4800,"cycleOfInterestPayment": {"i": 256,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 149,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 4000,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 4800,"p": 3,"s": 1,"isSet": true},"lifeCap": 68568,"lifeFloor": 86401,"periodCap": 68569,"periodFloor": 96}, 130, 400,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [222,43,184,243,31,166,221,139,118,114,0,57,253,23,59,200,48,245,64,55,167,175,0,69,219,137,126,215,90,171,53,237],"legalEntityIdCounterparty": [227,144,59,27,190,163,138,69,33,196,19,69,119,157,172,61,137,102,82,174,224,235,182,233,230,224,34,227,81,235,8,89],"dayCountConvention": 1,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 86399,"statusDate": 1336,"initialExchangeDate": 141,"maturityDate": 32,"terminationDate": 86399,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 100,"cycleAnchorDateOfRateReset": 161,"cycleAnchorDateOfScalingIndex": 131,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 89,"nominalInterestRate": 0,"feeAccrued": 2,"accruedInterest": 899,"rateMultiplier": 1970,"rateSpread": 901,"feeRate": 4,"nextResetRate": 80,"penaltyRate": 367,"premiumDiscountAtIED": 2014223715,"priceAtPurchaseDate": 59,"cycleOfInterestPayment": {"i": 366,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 119,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 17,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 950,"p": 4,"s": 0,"isSet": false},"lifeCap": 2014223716,"lifeFloor": -1,"periodCap": 359,"periodFloor": 12}, 16, 4,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [245,206,249,109,178,1,113,185,110,213,100,66,239,196,100,113,26,93,254,225,0,246,237,221,80,132,27,104,60,133,111,198],"legalEntityIdCounterparty": [131,182,74,89,72,245,107,12,6,108,239,93,4,75,196,104,210,48,224,213,147,60,55,17,165,74,247,33,173,219,251,204],"dayCountConvention": 6,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 5,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 10,"statusDate": 100,"initialExchangeDate": 6,"maturityDate": 1462,"terminationDate": 99,"purchaseDate": 111,"capitalizationEndDate": 111,"cycleAnchorDateOfInterestPayment": 4799,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 65,"cycleAnchorDateOfFee": 2014223716,"notionalPrincipal": 86401,"nominalInterestRate": 28,"feeAccrued": 28,"accruedInterest": 51,"rateMultiplier": 1971,"rateSpread": 120,"feeRate": 364,"nextResetRate": 257,"penaltyRate": 79,"premiumDiscountAtIED": 80,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 101,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 950,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 17,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 951,"p": 4,"s": 0,"isSet": true},"lifeCap": 949,"lifeFloor": 95,"periodCap": 61,"periodFloor": 950}, 256, 81,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [181,237,49,176,248,117,159,120,18,251,77,172,120,31,145,232,127,191,87,255,137,212,205,42,222,252,240,88,0,82,78,112],"legalEntityIdCounterparty": [189,183,97,12,175,134,86,206,160,40,215,117,60,101,148,255,172,201,161,20,249,238,145,234,55,254,234,249,176,17,245,117],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 80,"statusDate": 70,"initialExchangeDate": 95,"maturityDate": 80,"terminationDate": 2440587,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 11,"cycleAnchorDateOfRateReset": 2447,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 68570,"notionalPrincipal": 95,"nominalInterestRate": 0,"feeAccrued": 109,"accruedInterest": 86399,"rateMultiplier": 151,"rateSpread": 110,"feeRate": 13,"nextResetRate": 4801,"penaltyRate": 4000,"premiumDiscountAtIED": 131,"priceAtPurchaseDate": 68569,"cycleOfInterestPayment": {"i": 97,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1969,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 160,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 4801,"p": 5,"s": 1,"isSet": true},"lifeCap": 4799,"lifeFloor": 23,"periodCap": 25,"periodFloor": 1337}, 6, 2014223714,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [54,197,46,79,149,172,143,204,19,27,8,221,171,168,33,26,70,31,94,248,135,43,199,245,7,120,98,47,246,199,116,149],"legalEntityIdCounterparty": [170,62,149,53,148,167,77,216,254,112,37,115,28,244,135,79,95,92,36,210,4,102,192,136,32,177,185,148,0,208,137,171],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 2440587,"statusDate": 97,"initialExchangeDate": 255,"maturityDate": 97,"terminationDate": 10000,"purchaseDate": 10,"capitalizationEndDate": 1462,"cycleAnchorDateOfInterestPayment": 1971,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 3,"cycleAnchorDateOfFee": 91,"notionalPrincipal": 1969,"nominalInterestRate": 400,"feeAccrued": 81,"accruedInterest": 32076,"rateMultiplier": 257,"rateSpread": 1,"feeRate": 1971,"nextResetRate": 2447,"penaltyRate": 1971,"premiumDiscountAtIED": 365,"priceAtPurchaseDate": 100,"cycleOfInterestPayment": {"i": 2440587,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 71,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 11,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 1,"p": 2,"s": 0,"isSet": false},"lifeCap": 4801,"lifeFloor": 65,"periodCap": 4001,"periodFloor": 365}, 1, 1532892063,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [54,70,16,176,15,88,240,255,80,118,110,121,229,83,214,245,103,91,87,45,60,40,40,233,59,182,83,165,48,44,110,6],"legalEntityIdCounterparty": [22,42,118,117,123,142,54,37,122,89,126,9,36,15,22,202,247,52,28,12,190,59,32,59,154,218,175,111,140,35,99,49],"dayCountConvention": 5,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 950,"statusDate": 121,"initialExchangeDate": 16,"maturityDate": 365,"terminationDate": 81,"purchaseDate": 26,"capitalizationEndDate": 50,"cycleAnchorDateOfInterestPayment": 359,"cycleAnchorDateOfRateReset": 5,"cycleAnchorDateOfScalingIndex": 5,"cycleAnchorDateOfFee": 79,"notionalPrincipal": 255,"nominalInterestRate": 368,"feeAccrued": 7,"accruedInterest": 950,"rateMultiplier": 27,"rateSpread": 60,"feeRate": -1,"nextResetRate": 26,"penaltyRate": 151,"premiumDiscountAtIED": 10001,"priceAtPurchaseDate": 32074,"cycleOfInterestPayment": {"i": 1971,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 96,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 2440589,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 19,"p": 2,"s": 0,"isSet": true},"lifeCap": 2014223714,"lifeFloor": 1461,"periodCap": 2447,"periodFloor": 129}, 26, 151,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [231,83,222,55,23,1,23,160,100,176,247,1,54,128,223,39,142,151,45,184,106,208,66,151,236,155,170,103,195,85,91,165],"legalEntityIdCounterparty": [24,185,226,130,138,231,241,128,131,2,42,197,254,20,88,219,116,161,234,199,143,196,228,76,7,160,188,247,40,220,232,132],"dayCountConvention": 3,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 146096,"statusDate": 96,"initialExchangeDate": 97,"maturityDate": 360,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 89,"cycleAnchorDateOfRateReset": 899,"cycleAnchorDateOfScalingIndex": 63,"cycleAnchorDateOfFee": 899,"notionalPrincipal": 4000,"nominalInterestRate": 0,"feeAccrued": 12,"accruedInterest": 10,"rateMultiplier": 254,"rateSpread": 1532892064,"feeRate": 28,"nextResetRate": 4800,"penaltyRate": 151,"premiumDiscountAtIED": 31,"priceAtPurchaseDate": 70,"cycleOfInterestPayment": {"i": 400,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 359,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2440587,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 12,"p": 4,"s": 1,"isSet": true},"lifeCap": 400,"lifeFloor": 368,"periodCap": 129,"periodFloor": 1532892064}, 68570, 1461,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [71,179,239,103,20,196,119,86,148,16,76,231,143,131,107,101,89,137,77,9,27,28,101,213,40,147,37,147,221,90,149,134],"legalEntityIdCounterparty": [65,178,252,233,21,50,252,212,72,35,27,200,128,226,115,206,120,33,187,109,86,44,44,46,160,105,99,2,41,1,11,139],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 12,"statusDate": 71,"initialExchangeDate": 129,"maturityDate": 400,"terminationDate": 89,"purchaseDate": 91,"capitalizationEndDate": 2014223715,"cycleAnchorDateOfInterestPayment": 68569,"cycleAnchorDateOfRateReset": 255,"cycleAnchorDateOfScalingIndex": 29,"cycleAnchorDateOfFee": 11,"notionalPrincipal": 68570,"nominalInterestRate": 12,"feeAccrued": 1969,"accruedInterest": 28,"rateMultiplier": 59,"rateSpread": 68569,"feeRate": 8,"nextResetRate": 71,"penaltyRate": 39,"premiumDiscountAtIED": 359,"priceAtPurchaseDate": 1532892064,"cycleOfInterestPayment": {"i": 1462,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 4001,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 69,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 2446,"p": 1,"s": 1,"isSet": true},"lifeCap": 401,"lifeFloor": 2440587,"periodCap": 2446,"periodFloor": 28}, 10001, 4799,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [102,166,37,215,213,135,206,82,228,252,215,22,106,163,151,145,8,58,224,85,74,159,217,42,26,29,146,165,180,11,190,25],"legalEntityIdCounterparty": [42,194,148,53,76,222,242,149,87,207,249,33,183,93,20,87,28,40,1,1,255,103,23,56,85,3,36,112,96,40,246,214],"dayCountConvention": 5,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 5,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 59,"statusDate": 109,"initialExchangeDate": 20,"maturityDate": 40,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 949,"cycleAnchorDateOfRateReset": 2446,"cycleAnchorDateOfScalingIndex": 71,"cycleAnchorDateOfFee": 359,"notionalPrincipal": 19,"nominalInterestRate": 0,"feeAccrued": 11,"accruedInterest": 48,"rateMultiplier": 401,"rateSpread": 68568,"feeRate": 32074,"nextResetRate": 149,"penaltyRate": 1,"premiumDiscountAtIED": 1,"priceAtPurchaseDate": 6,"cycleOfInterestPayment": {"i": 401,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 97,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 9999,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 400,"p": 2,"s": 0,"isSet": true},"lifeCap": 10001,"lifeFloor": 4799,"periodCap": 141,"periodFloor": 96}, 401, 25,{from: accounts[0]});
  });
});
