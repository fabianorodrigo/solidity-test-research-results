const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 14,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [82,131,158,2,37,228,196,4,23,232,113,156,190,115,230,98,173,74,192,98,186,43,95,126,152,231,64,23,85,55,27,239],"legalEntityIdCounterparty": [248,152,74,47,35,191,109,30,206,166,221,45,186,4,190,198,162,50,126,105,120,29,67,38,107,226,93,216,174,62,55,136],"dayCountConvention": 5,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 28,"statusDate": 4800,"initialExchangeDate": 65,"maturityDate": 16,"terminationDate": 9999,"purchaseDate": 1338,"capitalizationEndDate": 60,"cycleAnchorDateOfInterestPayment": 1460,"cycleAnchorDateOfRateReset": 254,"cycleAnchorDateOfScalingIndex": 31,"cycleAnchorDateOfFee": 32075,"notionalPrincipal": 1969,"nominalInterestRate": 3999,"feeAccrued": 257,"accruedInterest": 66,"rateMultiplier": 7,"rateSpread": 10001,"feeRate": 10001,"nextResetRate": 21,"penaltyRate": 3,"premiumDiscountAtIED": 97,"priceAtPurchaseDate": 50,"cycleOfInterestPayment": {"i": 361,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1337,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 6,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 401,"p": 1,"s": 1,"isSet": true},"lifeCap": 365,"lifeFloor": 4000,"periodCap": 2446,"periodFloor": 0},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 0,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [211,120,162,180,181,148,20,33,160,222,3,210,145,47,150,31,77,255,101,44,110,95,200,155,45,69,0,240,35,151,202,242],"legalEntityIdCounterparty": [50,224,23,6,37,43,220,197,78,62,190,206,240,68,170,57,207,88,250,175,17,5,41,96,69,12,150,241,240,231,206,169],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 86401,"statusDate": 110,"initialExchangeDate": 41,"maturityDate": 120,"terminationDate": 26,"purchaseDate": 1461,"capitalizationEndDate": 80,"cycleAnchorDateOfInterestPayment": 1460,"cycleAnchorDateOfRateReset": 951,"cycleAnchorDateOfScalingIndex": 146097,"cycleAnchorDateOfFee": 40,"notionalPrincipal": 901,"nominalInterestRate": 99,"feeAccrued": 0,"accruedInterest": 18,"rateMultiplier": 101,"rateSpread": 8,"feeRate": 1970,"nextResetRate": 3,"penaltyRate": 3,"premiumDiscountAtIED": 71,"priceAtPurchaseDate": 1337,"cycleOfInterestPayment": {"i": 90,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 32,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 48,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 1532892064,"p": 2,"s": 0,"isSet": true},"lifeCap": 1337,"lifeFloor": 4901,"periodCap": 2014223714,"periodFloor": 121}, {"lastEventTime": 2440587,"contractStatus": 0,"timeFromLastEvent": 901,"nominalValue": 1336,"nominalAccrued": 97,"feeAccrued": 51,"nominalRate": 121,"interestScalingMultiplier": 21,"nominalScalingMultiplier": 28,"contractRoleSign": 9}, 4000,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 8,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [9,187,176,193,93,156,253,253,206,65,87,163,253,155,97,103,194,152,123,101,5,8,12,80,129,153,0,122,196,78,6,65],"legalEntityIdCounterparty": [169,105,97,159,36,203,15,35,39,183,194,137,217,92,233,161,210,157,100,9,227,164,103,232,52,233,202,152,123,144,181,47],"dayCountConvention": 5,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 1532892064,"statusDate": 1336,"initialExchangeDate": 97,"maturityDate": 1461002,"terminationDate": 39,"purchaseDate": 66,"capitalizationEndDate": 66,"cycleAnchorDateOfInterestPayment": 59,"cycleAnchorDateOfRateReset": 950,"cycleAnchorDateOfScalingIndex": 1338,"cycleAnchorDateOfFee": 65,"notionalPrincipal": 6,"nominalInterestRate": 255,"feeAccrued": 71,"accruedInterest": 96,"rateMultiplier": 146098,"rateSpread": 2014223716,"feeRate": 110,"nextResetRate": 2014223714,"penaltyRate": 399,"premiumDiscountAtIED": 121,"priceAtPurchaseDate": 1338,"cycleOfInterestPayment": {"i": 130,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 97,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 31,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 30,"p": 5,"s": 0,"isSet": true},"lifeCap": 15,"lifeFloor": 111,"periodCap": 1,"periodFloor": 24}, {"lastEventTime": 29,"contractStatus": 0,"timeFromLastEvent": 4,"nominalValue": 51,"nominalAccrued": 151,"feeAccrued": 4901,"nominalRate": 17,"interestScalingMultiplier": 399,"nominalScalingMultiplier": 4800,"contractRoleSign": 0}, {"eventTime": 1,"eventTimeWithEpochOffset": 20,"scheduleTime": 70,"eventType": 15,"currency": accounts[8],"pofType": 6,"stfType": 20}, 359,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [242,85,212,58,18,20,54,78,172,158,81,49,251,146,79,73,50,118,154,207,24,138,26,15,73,21,245,102,226,75,137,2],"legalEntityIdCounterparty": [30,139,125,50,129,163,226,252,7,46,20,147,53,253,69,151,140,65,111,127,234,16,87,255,99,149,211,66,138,11,56,224],"dayCountConvention": 2,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 32076,"statusDate": 11,"initialExchangeDate": 2448,"maturityDate": 121,"terminationDate": 1461002,"purchaseDate": 254,"capitalizationEndDate": 15,"cycleAnchorDateOfInterestPayment": 150,"cycleAnchorDateOfRateReset": 131,"cycleAnchorDateOfScalingIndex": 1532892063,"cycleAnchorDateOfFee": 21,"notionalPrincipal": 9999,"nominalInterestRate": 2440589,"feeAccrued": 63,"accruedInterest": 110,"rateMultiplier": 255,"rateSpread": 401,"feeRate": 41,"nextResetRate": 0,"penaltyRate": 68569,"premiumDiscountAtIED": 86399,"priceAtPurchaseDate": 91,"cycleOfInterestPayment": {"i": 4799,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 81,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 23,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 2447,"p": 2,"s": 1,"isSet": true},"lifeCap": 400,"lifeFloor": 399,"periodCap": 64,"periodFloor": 1462}, 899, 950,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [72,42,159,148,112,112,58,10,232,83,141,192,242,232,13,189,86,92,63,66,10,54,87,32,163,138,190,158,125,126,18,84],"legalEntityIdCounterparty": [156,178,17,45,161,19,250,204,102,161,144,29,81,229,54,117,214,16,8,133,129,53,223,37,75,210,107,41,211,46,186,82],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 1,"statusDate": 32,"initialExchangeDate": 8,"maturityDate": 366,"terminationDate": 68570,"purchaseDate": 2447,"capitalizationEndDate": 49,"cycleAnchorDateOfInterestPayment": 1969,"cycleAnchorDateOfRateReset": 90,"cycleAnchorDateOfScalingIndex": 141,"cycleAnchorDateOfFee": 4899,"notionalPrincipal": 89,"nominalInterestRate": 80,"feeAccrued": 1461001,"accruedInterest": 4800,"rateMultiplier": 0,"rateSpread": 13,"feeRate": 4001,"nextResetRate": 1338,"penaltyRate": 79,"premiumDiscountAtIED": 2446,"priceAtPurchaseDate": 366,"cycleOfInterestPayment": {"i": 86399,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 31,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 41,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 949,"p": 1,"s": 0,"isSet": true},"lifeCap": 6,"lifeFloor": 81,"periodCap": 254,"periodFloor": 81}, 66, 2014223716,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [212,68,205,60,152,66,234,223,72,220,64,216,71,162,69,81,35,252,145,66,103,101,66,60,44,127,131,179,252,127,94,140],"legalEntityIdCounterparty": [16,13,67,176,192,106,251,203,207,102,76,141,45,37,167,183,209,214,242,138,189,236,173,216,209,38,68,175,227,11,69,122],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 51,"statusDate": 60,"initialExchangeDate": 120,"maturityDate": 11,"terminationDate": 1532892064,"purchaseDate": 86399,"capitalizationEndDate": 1336,"cycleAnchorDateOfInterestPayment": 1461,"cycleAnchorDateOfRateReset": 1,"cycleAnchorDateOfScalingIndex": 365,"cycleAnchorDateOfFee": 141,"notionalPrincipal": 1461000,"nominalInterestRate": 40,"feeAccrued": 159,"accruedInterest": 400,"rateMultiplier": 111,"rateSpread": 4901,"feeRate": 364,"nextResetRate": 86401,"penaltyRate": 1462,"premiumDiscountAtIED": 11,"priceAtPurchaseDate": 86400,"cycleOfInterestPayment": {"i": 9999,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 401,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 949,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 2440587,"p": 1,"s": 1,"isSet": false},"lifeCap": 50,"lifeFloor": 257,"periodCap": 1969,"periodFloor": 81}, 1338, 4000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [153,146,149,220,29,187,122,0,249,99,245,180,202,138,242,229,27,240,200,15,220,222,121,199,205,115,244,96,246,145,147,222],"legalEntityIdCounterparty": [142,87,73,198,14,35,9,82,219,50,216,143,119,178,60,41,90,10,186,136,129,28,228,145,171,163,191,73,30,44,17,138],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 2,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 4001,"statusDate": 1532892064,"initialExchangeDate": 364,"maturityDate": 26,"terminationDate": 150,"purchaseDate": 24,"capitalizationEndDate": 32075,"cycleAnchorDateOfInterestPayment": 4001,"cycleAnchorDateOfRateReset": 19,"cycleAnchorDateOfScalingIndex": 9999,"cycleAnchorDateOfFee": 2448,"notionalPrincipal": 149,"nominalInterestRate": 86401,"feeAccrued": 146098,"accruedInterest": 14,"rateMultiplier": 256,"rateSpread": 131,"feeRate": 901,"nextResetRate": 400,"penaltyRate": 71,"premiumDiscountAtIED": 1532892063,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 130,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 32076,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 24,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 141,"p": 4,"s": 0,"isSet": false},"lifeCap": 2440589,"lifeFloor": 81,"periodCap": 6,"periodFloor": 32076}, 71, 41,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [166,41,76,26,29,15,237,236,243,34,124,9,92,142,167,121,150,248,196,74,43,130,18,199,84,208,34,134,209,65,120,180],"legalEntityIdCounterparty": [61,228,163,53,241,129,106,235,27,65,104,133,102,215,143,121,81,200,62,208,197,167,138,153,228,172,45,95,129,198,249,106],"dayCountConvention": 0,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 151,"statusDate": 89,"initialExchangeDate": 255,"maturityDate": 91,"terminationDate": 146096,"purchaseDate": 0,"capitalizationEndDate": 1461000,"cycleAnchorDateOfInterestPayment": 4799,"cycleAnchorDateOfRateReset": 3999,"cycleAnchorDateOfScalingIndex": 141,"cycleAnchorDateOfFee": 30,"notionalPrincipal": 4900,"nominalInterestRate": 32,"feeAccrued": 146097,"accruedInterest": 30,"rateMultiplier": 139,"rateSpread": 1337,"feeRate": 399,"nextResetRate": 16,"penaltyRate": 20,"premiumDiscountAtIED": 2440587,"priceAtPurchaseDate": 71,"cycleOfInterestPayment": {"i": 1461002,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 361,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 364,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 1532892062,"p": 5,"s": 1,"isSet": true},"lifeCap": 161,"lifeFloor": 29,"periodCap": 1461002,"periodFloor": 31}, 361, 254,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [89,7,130,211,231,80,252,156,242,203,48,42,248,105,128,77,211,18,123,38,191,220,186,136,62,175,25,205,73,8,70,241],"legalEntityIdCounterparty": [2,65,173,92,249,169,84,194,180,69,53,73,251,80,212,24,132,243,99,17,170,87,124,183,54,3,140,83,71,207,0,166],"dayCountConvention": 3,"businessDayConvention": 5,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 32,"statusDate": 359,"initialExchangeDate": 9999,"maturityDate": 13,"terminationDate": 48,"purchaseDate": 2440588,"capitalizationEndDate": 24,"cycleAnchorDateOfInterestPayment": 901,"cycleAnchorDateOfRateReset": 1969,"cycleAnchorDateOfScalingIndex": 4901,"cycleAnchorDateOfFee": 1460,"notionalPrincipal": 19,"nominalInterestRate": 4,"feeAccrued": 9,"accruedInterest": 48,"rateMultiplier": 901,"rateSpread": 2440589,"feeRate": 1338,"nextResetRate": 149,"penaltyRate": 49,"premiumDiscountAtIED": 121,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 61,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 9,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 12,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 1532892062,"p": 2,"s": 0,"isSet": true},"lifeCap": 100,"lifeFloor": 1,"periodCap": 1337,"periodFloor": 1337}, 19, 4801,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [115,64,161,101,229,248,22,119,81,56,251,69,48,208,168,193,52,248,55,28,14,144,176,84,60,254,118,217,173,195,101,119],"legalEntityIdCounterparty": [6,57,191,241,25,171,215,186,217,52,109,108,191,71,50,110,128,73,51,213,112,18,228,72,116,162,38,76,245,192,120,220],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 146097,"statusDate": 69,"initialExchangeDate": 359,"maturityDate": 146098,"terminationDate": 1460,"purchaseDate": 3999,"capitalizationEndDate": 121,"cycleAnchorDateOfInterestPayment": 32076,"cycleAnchorDateOfRateReset": 95,"cycleAnchorDateOfScalingIndex": 15,"cycleAnchorDateOfFee": 109,"notionalPrincipal": 32,"nominalInterestRate": 151,"feeAccrued": 399,"accruedInterest": 51,"rateMultiplier": 400,"rateSpread": 131,"feeRate": 27,"nextResetRate": 0,"penaltyRate": 120,"premiumDiscountAtIED": 69,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 96,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 51,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 29,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 146097,"p": 1,"s": 1,"isSet": true},"lifeCap": 2447,"lifeFloor": 4899,"periodCap": 901,"periodFloor": 68568}, 139, 4900,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [9,137,151,128,113,103,25,153,151,215,73,75,67,240,119,145,65,152,69,82,192,180,27,40,205,38,111,227,219,96,54,238],"legalEntityIdCounterparty": [79,10,117,109,68,72,95,10,87,97,214,144,198,128,64,20,214,86,153,188,237,80,155,170,67,130,204,108,108,238,179,21],"dayCountConvention": 4,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 146096,"statusDate": 17,"initialExchangeDate": 81,"maturityDate": 400,"terminationDate": 79,"purchaseDate": 150,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 6,"cycleAnchorDateOfRateReset": 367,"cycleAnchorDateOfScalingIndex": 159,"cycleAnchorDateOfFee": 14,"notionalPrincipal": 68568,"nominalInterestRate": 31,"feeAccrued": 364,"accruedInterest": 111,"rateMultiplier": 26,"rateSpread": 49,"feeRate": 4800,"nextResetRate": 32074,"penaltyRate": 1461000,"premiumDiscountAtIED": 4001,"priceAtPurchaseDate": 25,"cycleOfInterestPayment": {"i": 21,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 86399,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1462,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 365,"p": 2,"s": 1,"isSet": false},"lifeCap": 119,"lifeFloor": 130,"periodCap": 257,"periodFloor": 401}, 71, 29,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [54,66,142,196,141,117,95,202,151,87,28,185,104,121,104,239,185,21,158,243,42,74,112,72,79,87,228,150,64,232,213,221],"legalEntityIdCounterparty": [72,132,60,145,36,70,71,248,163,113,229,60,56,162,163,204,102,49,10,48,197,23,178,172,179,191,242,189,86,156,99,75],"dayCountConvention": 4,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 1460,"statusDate": 86401,"initialExchangeDate": 146096,"maturityDate": 401,"terminationDate": 139,"purchaseDate": 1337,"capitalizationEndDate": 150,"cycleAnchorDateOfInterestPayment": 151,"cycleAnchorDateOfRateReset": 1461000,"cycleAnchorDateOfScalingIndex": 66,"cycleAnchorDateOfFee": 2014223716,"notionalPrincipal": 3,"nominalInterestRate": 949,"feeAccrued": 86401,"accruedInterest": 361,"rateMultiplier": 4799,"rateSpread": 59,"feeRate": 1971,"nextResetRate": 24,"penaltyRate": 1460,"premiumDiscountAtIED": 2014223715,"priceAtPurchaseDate": 101,"cycleOfInterestPayment": {"i": 951,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 119,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 70,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 100,"p": 5,"s": 1,"isSet": false},"lifeCap": 69,"lifeFloor": 11,"periodCap": 61,"periodFloor": 48}, 66, 1336,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [211,117,210,96,8,251,234,113,138,71,124,129,135,125,134,206,184,195,51,61,196,182,59,212,27,99,38,159,135,21,240,209],"legalEntityIdCounterparty": [0,27,155,25,234,66,88,75,84,3,159,147,108,5,92,92,62,127,123,190,214,167,248,172,69,184,45,20,131,201,223,28],"dayCountConvention": 6,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 19,"statusDate": 100,"initialExchangeDate": 5,"maturityDate": 1,"terminationDate": 4,"purchaseDate": 3,"capitalizationEndDate": 2,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 4001,"cycleAnchorDateOfScalingIndex": 51,"cycleAnchorDateOfFee": 401,"notionalPrincipal": 254,"nominalInterestRate": 20,"feeAccrued": 80,"accruedInterest": 2,"rateMultiplier": 24,"rateSpread": 4000,"feeRate": 130,"nextResetRate": 23,"penaltyRate": 9999,"premiumDiscountAtIED": 23,"priceAtPurchaseDate": 1338,"cycleOfInterestPayment": {"i": 131,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 4000,"p": 1,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 149,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 401,"p": 5,"s": 0,"isSet": false},"lifeCap": 950,"lifeFloor": 80,"periodCap": 31,"periodFloor": 2014223716}, 367, 96,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [97,117,130,236,4,45,142,39,81,6,92,244,51,131,67,186,162,111,187,203,229,223,49,138,74,140,74,26,158,112,141,112],"legalEntityIdCounterparty": [18,71,56,17,178,123,169,221,153,229,251,131,28,157,50,183,134,237,135,197,37,52,175,11,120,6,182,59,201,169,187,52],"dayCountConvention": 2,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 951,"statusDate": 899,"initialExchangeDate": 65,"maturityDate": 109,"terminationDate": 63,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 139,"cycleAnchorDateOfRateReset": 254,"cycleAnchorDateOfScalingIndex": 96,"cycleAnchorDateOfFee": 26,"notionalPrincipal": 1969,"nominalInterestRate": 0,"feeAccrued": 900,"accruedInterest": 400,"rateMultiplier": 1532892064,"rateSpread": 12,"feeRate": 4800,"nextResetRate": 1970,"penaltyRate": 13,"premiumDiscountAtIED": 1460,"priceAtPurchaseDate": 89,"cycleOfInterestPayment": {"i": 151,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 1,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 68568,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 17,"p": 0,"s": 1,"isSet": true},"lifeCap": 1461000,"lifeFloor": 48,"periodCap": 360,"periodFloor": 61}, 366, 1971,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [157,236,188,18,105,17,219,97,120,228,239,239,240,29,216,75,153,17,104,103,119,10,60,171,88,148,214,172,195,216,31,226],"legalEntityIdCounterparty": [50,173,58,105,103,55,73,127,141,224,168,100,245,212,105,153,120,222,97,141,35,138,27,249,219,172,154,151,205,80,148,198],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 2440589,"statusDate": 68568,"initialExchangeDate": 2440589,"maturityDate": 401,"terminationDate": 48,"purchaseDate": 366,"capitalizationEndDate": 10000,"cycleAnchorDateOfInterestPayment": 7,"cycleAnchorDateOfRateReset": 119,"cycleAnchorDateOfScalingIndex": 2014223716,"cycleAnchorDateOfFee": 141,"notionalPrincipal": 12,"nominalInterestRate": 1337,"feeAccrued": 24,"accruedInterest": 140,"rateMultiplier": 368,"rateSpread": 1532892062,"feeRate": 400,"nextResetRate": 121,"penaltyRate": 256,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 1460,"cycleOfInterestPayment": {"i": 101,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 3,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 4900,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 49,"p": 5,"s": 0,"isSet": true},"lifeCap": 149,"lifeFloor": 9,"periodCap": 1970,"periodFloor": 2440589}, 949, 4900,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [75,190,53,171,99,101,11,160,21,108,9,236,194,87,144,120,220,211,233,96,80,169,48,15,255,19,56,209,58,143,26,120],"legalEntityIdCounterparty": [222,195,42,64,37,64,102,80,68,121,87,254,145,197,241,220,49,105,167,86,40,171,246,71,83,234,213,48,85,208,58,26],"dayCountConvention": 6,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 27,"statusDate": 11,"initialExchangeDate": 31,"maturityDate": 949,"terminationDate": 951,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 110,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 161,"cycleAnchorDateOfFee": 2014223716,"notionalPrincipal": 13,"nominalInterestRate": 0,"feeAccrued": 949,"accruedInterest": 3999,"rateMultiplier": 99,"rateSpread": 1337,"feeRate": 1461002,"nextResetRate": 68570,"penaltyRate": 3,"premiumDiscountAtIED": 100,"priceAtPurchaseDate": 21,"cycleOfInterestPayment": {"i": 4899,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 5,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 2014223715,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 11,"p": 4,"s": 1,"isSet": false},"lifeCap": 15,"lifeFloor": 16,"periodCap": 3,"periodFloor": 4800}, 11, 86399,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [61,35,218,214,158,71,159,129,95,1,101,155,85,87,110,78,191,152,235,235,144,99,58,21,94,159,103,57,37,174,119,130],"legalEntityIdCounterparty": [53,37,1,82,64,109,160,84,230,71,159,34,73,177,164,226,254,68,82,36,98,68,243,220,208,217,243,162,114,57,131,212],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 51,"statusDate": 364,"initialExchangeDate": 2,"maturityDate": 111,"terminationDate": 21,"purchaseDate": 146097,"capitalizationEndDate": 25,"cycleAnchorDateOfInterestPayment": 120,"cycleAnchorDateOfRateReset": 257,"cycleAnchorDateOfScalingIndex": 1336,"cycleAnchorDateOfFee": 129,"notionalPrincipal": 30,"nominalInterestRate": 32076,"feeAccrued": 28,"accruedInterest": 40,"rateMultiplier": 3999,"rateSpread": 139,"feeRate": 401,"nextResetRate": 1336,"penaltyRate": 2014223715,"premiumDiscountAtIED": 2014223714,"priceAtPurchaseDate": 1461001,"cycleOfInterestPayment": {"i": 900,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 24,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 4001,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 4901,"p": 0,"s": 1,"isSet": false},"lifeCap": 899,"lifeFloor": 2440589,"periodCap": 1461002,"periodFloor": 95}, 68568, 1532892062,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [254,48,69,230,118,93,65,185,223,23,163,95,246,106,25,229,19,175,1,52,235,254,87,206,136,185,167,225,165,185,172,185],"legalEntityIdCounterparty": [73,188,147,48,104,111,207,146,150,94,47,99,80,111,160,193,190,92,28,227,165,202,55,27,251,149,4,61,86,145,110,180],"dayCountConvention": 0,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 4899,"statusDate": 2446,"initialExchangeDate": 10,"maturityDate": 149,"terminationDate": 2440589,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 4000,"cycleAnchorDateOfRateReset": 60,"cycleAnchorDateOfScalingIndex": 1461000,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 68570,"nominalInterestRate": 0,"feeAccrued": 2440588,"accruedInterest": 7,"rateMultiplier": 41,"rateSpread": 71,"feeRate": 1532892063,"nextResetRate": 60,"penaltyRate": 160,"premiumDiscountAtIED": 89,"priceAtPurchaseDate": 100,"cycleOfInterestPayment": {"i": 15,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 256,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 10,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 27,"p": 2,"s": 0,"isSet": false},"lifeCap": 4799,"lifeFloor": 79,"periodCap": 1460,"periodFloor": 110}, 81, 10000,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [233,134,198,39,225,120,92,112,191,12,77,236,165,59,17,69,135,78,91,143,242,135,28,6,115,236,229,104,6,18,27,96],"legalEntityIdCounterparty": [179,237,127,255,66,166,108,66,126,128,254,25,120,39,41,200,142,69,58,196,105,185,184,99,50,250,57,0,218,156,69,124],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 2440589,"statusDate": 2440589,"initialExchangeDate": 3,"maturityDate": 161,"terminationDate": 13,"purchaseDate": 39,"capitalizationEndDate": 81,"cycleAnchorDateOfInterestPayment": 32,"cycleAnchorDateOfRateReset": 15,"cycleAnchorDateOfScalingIndex": 950,"cycleAnchorDateOfFee": 90,"notionalPrincipal": 367,"nominalInterestRate": 257,"feeAccrued": 1,"accruedInterest": 95,"rateMultiplier": 1461002,"rateSpread": 141,"feeRate": 20,"nextResetRate": -1,"penaltyRate": 95,"premiumDiscountAtIED": 49,"priceAtPurchaseDate": 21,"cycleOfInterestPayment": {"i": 146096,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 151,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 255,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 1338,"p": 1,"s": 0,"isSet": true},"lifeCap": 9,"lifeFloor": 367,"periodCap": 139,"periodFloor": 1462}, 31, 3,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [166,242,141,193,180,225,209,54,136,72,92,218,160,47,45,255,31,166,224,221,191,135,165,185,68,5,59,197,244,148,19,27],"legalEntityIdCounterparty": [102,190,21,6,100,44,172,177,128,45,133,6,198,132,18,177,63,159,193,20,10,246,71,60,142,4,107,203,234,153,237,168],"dayCountConvention": 1,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 11,"statusDate": 0,"initialExchangeDate": 1337,"maturityDate": 1337,"terminationDate": 151,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 159,"cycleAnchorDateOfRateReset": 141,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 25,"notionalPrincipal": 4,"nominalInterestRate": 0,"feeAccrued": 951,"accruedInterest": 1461000,"rateMultiplier": 401,"rateSpread": 1461002,"feeRate": 3999,"nextResetRate": 96,"penaltyRate": 2440587,"premiumDiscountAtIED": 1969,"priceAtPurchaseDate": 950,"cycleOfInterestPayment": {"i": 65,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 86399,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 399,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 32075,"p": 3,"s": 1,"isSet": true},"lifeCap": 2014223716,"lifeFloor": 86401,"periodCap": 41,"periodFloor": 40}, 11, 1461002,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [217,143,39,175,41,254,106,107,241,61,136,145,70,12,223,175,78,101,20,110,210,132,244,14,201,187,152,2,147,202,43,211],"legalEntityIdCounterparty": [97,64,120,38,218,214,99,159,8,58,252,102,1,189,63,130,106,234,107,192,238,133,40,111,222,250,171,35,146,165,151,119],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 2,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 359,"statusDate": 4800,"initialExchangeDate": 29,"maturityDate": 256,"terminationDate": 2,"purchaseDate": 1461000,"capitalizationEndDate": 9999,"cycleAnchorDateOfInterestPayment": 2440589,"cycleAnchorDateOfRateReset": 59,"cycleAnchorDateOfScalingIndex": 900,"cycleAnchorDateOfFee": 109,"notionalPrincipal": 64,"nominalInterestRate": 32076,"feeAccrued": 70,"accruedInterest": 950,"rateMultiplier": 32,"rateSpread": 1532892064,"feeRate": 900,"nextResetRate": 1532892063,"penaltyRate": 10001,"premiumDiscountAtIED": 21,"priceAtPurchaseDate": 101,"cycleOfInterestPayment": {"i": 9999,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 70,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 30,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 110,"p": 3,"s": 1,"isSet": true},"lifeCap": 71,"lifeFloor": 0,"periodCap": 121,"periodFloor": 1461002}, 30, 32,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [250,164,237,59,209,117,235,141,96,232,164,163,161,253,236,157,65,107,83,103,130,61,157,99,205,82,131,24,107,46,131,6],"legalEntityIdCounterparty": [237,76,138,10,43,176,111,183,164,229,67,23,230,91,165,53,247,226,96,41,238,33,33,87,231,82,65,55,55,228,0,216],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 41,"statusDate": 150,"initialExchangeDate": 79,"maturityDate": 2440589,"terminationDate": 365,"purchaseDate": 71,"capitalizationEndDate": 59,"cycleAnchorDateOfInterestPayment": 32,"cycleAnchorDateOfRateReset": 119,"cycleAnchorDateOfScalingIndex": 146097,"cycleAnchorDateOfFee": 6,"notionalPrincipal": 64,"nominalInterestRate": 71,"feeAccrued": 14,"accruedInterest": 111,"rateMultiplier": 19,"rateSpread": 359,"feeRate": 15,"nextResetRate": 119,"penaltyRate": 1461,"premiumDiscountAtIED": 48,"priceAtPurchaseDate": 15,"cycleOfInterestPayment": {"i": 63,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 89,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 59,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 1532892063,"p": 1,"s": 0,"isSet": false},"lifeCap": 151,"lifeFloor": 10001,"periodCap": 1971,"periodFloor": 60}, 6, 96,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [127,179,51,233,156,157,234,82,110,1,134,117,30,232,17,99,193,137,147,74,65,245,191,209,34,159,12,15,78,99,168,200],"legalEntityIdCounterparty": [197,46,113,130,93,248,72,115,143,211,251,239,168,131,214,156,60,206,84,166,81,117,135,222,103,49,157,79,98,4,41,143],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 1532892063,"statusDate": 27,"initialExchangeDate": 32,"maturityDate": 59,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1,"cycleAnchorDateOfRateReset": 1461002,"cycleAnchorDateOfScalingIndex": 9,"cycleAnchorDateOfFee": 1532892063,"notionalPrincipal": 59,"nominalInterestRate": 0,"feeAccrued": 63,"accruedInterest": 121,"rateMultiplier": 30,"rateSpread": 1970,"feeRate": 151,"nextResetRate": 1971,"penaltyRate": 80,"premiumDiscountAtIED": 131,"priceAtPurchaseDate": 120,"cycleOfInterestPayment": {"i": 63,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 146097,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 95,"p": 1,"s": 0,"isSet": true},"cycleOfFee": {"i": 120,"p": 1,"s": 1,"isSet": false},"lifeCap": 1532892063,"lifeFloor": 18,"periodCap": 2448,"periodFloor": 7}, 24, 149,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [162,222,230,103,30,109,229,68,240,250,142,85,204,13,144,111,70,60,1,38,219,243,194,171,201,30,244,124,222,221,156,107],"legalEntityIdCounterparty": [176,73,44,234,16,238,53,125,231,135,18,63,190,9,147,173,187,146,202,92,194,9,36,254,148,21,102,161,144,80,226,224],"dayCountConvention": 5,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 4001,"statusDate": 4799,"initialExchangeDate": 86399,"maturityDate": 2448,"terminationDate": 359,"purchaseDate": 900,"capitalizationEndDate": 63,"cycleAnchorDateOfInterestPayment": 1532892062,"cycleAnchorDateOfRateReset": 120,"cycleAnchorDateOfScalingIndex": 161,"cycleAnchorDateOfFee": 29,"notionalPrincipal": 254,"nominalInterestRate": 1,"feeAccrued": 1971,"accruedInterest": 146098,"rateMultiplier": 70,"rateSpread": 257,"feeRate": 86400,"nextResetRate": 7,"penaltyRate": 10000,"premiumDiscountAtIED": 0,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 81,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 399,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 140,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 39,"p": 1,"s": 1,"isSet": true},"lifeCap": 139,"lifeFloor": 7,"periodCap": 3,"periodFloor": 160}, 131, 59,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [61,18,241,40,176,1,195,126,174,76,2,177,250,202,234,40,10,118,134,95,154,118,42,167,132,99,40,179,34,40,122,127],"legalEntityIdCounterparty": [156,187,184,216,13,77,150,232,126,250,177,236,120,1,197,146,31,126,35,108,236,148,145,232,129,17,58,205,253,223,125,230],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 28,"statusDate": 18,"initialExchangeDate": 79,"maturityDate": 31,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 70,"cycleAnchorDateOfRateReset": 400,"cycleAnchorDateOfScalingIndex": 48,"cycleAnchorDateOfFee": 1,"notionalPrincipal": 146097,"nominalInterestRate": 0,"feeAccrued": 1971,"accruedInterest": 21,"rateMultiplier": 360,"rateSpread": 254,"feeRate": 1971,"nextResetRate": 364,"penaltyRate": 86400,"premiumDiscountAtIED": 29,"priceAtPurchaseDate": 4800,"cycleOfInterestPayment": {"i": 139,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 80,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 899,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 95,"p": 0,"s": 1,"isSet": false},"lifeCap": 95,"lifeFloor": 49,"periodCap": 40,"periodFloor": 1532892062}, 950, 4900,{from: accounts[0]});
  });
});
