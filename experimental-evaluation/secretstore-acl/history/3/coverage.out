npm run coverage
ter 10 nov 2020 07:30:55 -03
Truffle v4.1.15 (core: 4.1.15)
Solidity v0.4.25 (solc-js)

> secretstore-acl@0.1.0 coverage /home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl
> npx solidity-coverage

Generating coverage environment
Running: truffle compile  
(this can take a few seconds)...
Compiling ./contracts/AclStorage.sol...
Compiling ./contracts/Migrations.sol...
Compiling ./contracts/OnceTransferablePermission.sol...

Compilation warnings encountered:

/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/Migrations.sol:14:2: Warning: Defining constructors as functions with the same name as the contract is deprecated. Use "constructor(...) { ... }" instead.
	function Migrations() public {
 ^ (Relevant source part starts here and spans across multiple lines).

Writing artifacts to ./build/contracts

Instrumenting  ./coverageEnv/contracts/AclStorage.sol
Skipping instrumentation of  ./coverageEnv/contracts/Migrations.sol
Instrumenting  ./coverageEnv/contracts/OnceTransferablePermission.sol
Running: truffle compile  
(this can take a few seconds)...
Compiling ./contracts/AclStorage.sol...
Compiling ./contracts/Migrations.sol...
Compiling ./contracts/OnceTransferablePermission.sol...

Compilation warnings encountered:

/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/Migrations.sol:14:2: Warning: Defining constructors as functions with the same name as the contract is deprecated. Use "constructor(...) { ... }" instead.
	function Migrations() public {
 ^ (Relevant source part starts here and spans across multiple lines).
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:41:94: Warning: Invoking events without "emit" prefix is deprecated.
 ... __FunctionCoverageOnceTransferableP ... /OnceTransferablePermission.sol',1) ... 
     ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:43:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',36);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:44:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',1);
		 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:46:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',37);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:47:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',2);
		 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:52:50: Warning: Invoking events without "emit" prefix is deprecated.
	function createKey(bytes32 serverKeyId) public {__FunctionCoverageOnceTransferableP ... /OnceTransferablePermission.sol',2);
	                                                ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:54:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',42);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:55:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',3);
		 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:57:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',43);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:58:3: Warning: Invoking events without "emit" prefix is deprecated.
		__AssertPreCoverageOnceTransferable ... /OnceTransferablePermission.sol',1);
		^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:59:2: Warning: Invoking events without "emit" prefix is deprecated.
 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',4);
 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:60:34: Warning: Invoking events without "emit" prefix is deprecated.
require(key.owner == address(0));__AssertPostCoverageOnceTransferabl ... /OnceTransferablePermission.sol',1);
                                 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:62:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',44);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:63:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',5);
		 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:68:77: Warning: Invoking events without "emit" prefix is deprecated.
 ... __FunctionCoverageOnceTransferableP ... /OnceTransferablePermission.sol',3) ... 
     ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:70:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',49);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:71:3: Warning: Invoking events without "emit" prefix is deprecated.
		__AssertPreCoverageOnceTransferable ... /OnceTransferablePermission.sol',2);
		^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:72:2: Warning: Invoking events without "emit" prefix is deprecated.
 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',6);
 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:73:33: Warning: Invoking events without "emit" prefix is deprecated.
require(newOwner != address(0));__AssertPostCoverageOnceTransferabl ... /OnceTransferablePermission.sol',2);
                                ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:76:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',51);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:77:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',7);
		 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:79:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',52);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:80:3: Warning: Invoking events without "emit" prefix is deprecated.
		__AssertPreCoverageOnceTransferable ... /OnceTransferablePermission.sol',3);
		^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:81:2: Warning: Invoking events without "emit" prefix is deprecated.
 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',8);
 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:82:55: Warning: Invoking events without "emit" prefix is deprecated.
require(!key.isTransfered && key.owner == msg.sender);__AssertPostCoverageOnceTransferabl ... /OnceTransferablePermission.sol',3);
                                                      ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:84:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',53);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:85:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... /OnceTransferablePermission.sol',9);
		 ^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:87:1: Warning: Invoking events without "emit" prefix is deprecated.
__CoverageOnceTransferablePermissio ... OnceTransferablePermission.sol',54);
^-------------------------------------------------------------------------^
,/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/coverageEnv/contracts/OnceTransferablePermission.sol:88:4: Warning: Invoking events without "emit" prefix is deprecated.
		 __StatementCoverageOnceTransferable ... OnceTransferablePermission.sol',10);
		 ^-------------------------------------------------------------------------^

Writing artifacts to ./build/contracts

Launched testrpc on port 8555
Running: truffle test  
(this can take a few seconds)...
Using network 'development'.


[0m[0m
[0m  Contract: OnceTransferablePermission[0m
  [32m  ✓[0m[90m Should execute checkPermissions(address,bytes32)[0m[33m (57ms)[0m
  [32m  ✓[0m[90m Should execute createKey(bytes32)[0m[33m (70ms)[0m
  [31m  1) Should execute transferPermission(bytes32,address) WHEN newOwner!=0x0000000000000000000000000000000000000000,MemberAccess.Identifier!=true[0m
    > No events were emitted
  [32m  ✓[0m[90m Should fail transferPermission(bytes32,address) when NOT comply with: newOwner != 0x0000000000000000000000000000000000000000[0m[33m (48ms)[0m


[92m [0m[32m 3 passing[0m[90m (549ms)[0m
[31m  1 failing[0m

[0m  1) Contract: OnceTransferablePermission
       Should execute transferPermission(bytes32,address) WHEN newOwner!=0x0000000000000000000000000000000000000000,MemberAccess.Identifier!=true:
[0m[31m     Error: VM Exception while processing transaction: revert[0m[90m
      at Object.InvalidResponse (/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/web3/lib/web3/errors.js:38:1)
      at /home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/web3/lib/web3/requestmanager.js:86:1
      at /home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/packages/truffle-provider/wrapper.js:134:1
      at XMLHttpRequest.request.onreadystatechange (/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/web3/lib/web3/httpprovider.js:128:1)
      at XMLHttpRequestEventTarget.dispatchEvent (/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:64:1)
      at XMLHttpRequest._setReadyState (/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:354:1)
      at XMLHttpRequest._onHttpResponseEnd (/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:509:1)
      at IncomingMessage.<anonymous> (/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/secretstore-acl/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:469:1)
      at endReadableNT (_stream_readable.js:1125:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)
[0m


---------------------------------|----------|----------|----------|----------|----------------|
File                             |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
---------------------------------|----------|----------|----------|----------|----------------|
 contracts/                      |       80 |       50 |      100 |       80 |                |
  AclStorage.sol                 |      100 |      100 |      100 |      100 |                |
  OnceTransferablePermission.sol |       80 |       50 |      100 |       80 |          53,54 |
---------------------------------|----------|----------|----------|----------|----------------|
All files                        |       80 |       50 |      100 |       80 |                |
---------------------------------|----------|----------|----------|----------|----------------|

Istanbul coverage reports generated
Cleaning up...
Some truffle tests failed while running coverage
