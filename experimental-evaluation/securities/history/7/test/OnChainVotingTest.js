const truffleAssert = require('truffle-assertions');
const PaymentTokenMock = artifacts.require("PaymentTokenMock");
const RedeemableTokenMock = artifacts.require("RedeemableTokenMock");
const OffChainPayments = artifacts.require("OffChainPayments");
const OnChainPayments = artifacts.require("OnChainPayments");
const FixedPriceTender = artifacts.require("FixedPriceTender");
const FullRedemption = artifacts.require("FullRedemption");
const PartialRedemption = artifacts.require("PartialRedemption");
const RedeemableToken = artifacts.require("RedeemableToken");
const OnChainVoting = artifacts.require("OnChainVoting");
const ECDSA = artifacts.require("openzeppelin-solidity/contracts/cryptography/ECDSA.sol");
const Math = artifacts.require("openzeppelin-solidity/contracts/math/Math.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ERC20 = artifacts.require("openzeppelin-solidity/contracts/token/ERC20/ERC20.sol");

contract("OnChainVoting",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractMath = null;
  let contractECDSA = null;
  let contractERC20 = null;
  let contractRedeemableToken = null;
  let contractPaymentTokenMock = null;
  let contractRedeemableTokenMock = null;
  let contractOffChainPayments = null;
  let contractPartialRedemption = null;
  let contractOnChainPayments = null;
  let contractFixedPriceTender = null;
  let contractFullRedemption = null;
  let contractOnChainVoting = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractMath = await Math.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Math.new({from: accounts[0]}');
    contractECDSA = await ECDSA.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ECDSA.new({from: accounts[0]}');
    ERC20.link("SafeMath",contractSafeMath.address);
    contractERC20 = await ERC20.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ERC20.new({from: accounts[0]}');
    RedeemableToken.link("SafeMath",contractSafeMath.address);
    contractRedeemableToken = await RedeemableToken.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableToken.new({from: accounts[0]}');
    contractPaymentTokenMock = await PaymentTokenMock.new(accounts[4],65,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PaymentTokenMock.new(accounts[4],65,{from:accounts[0]}');
    contractRedeemableTokenMock = await RedeemableTokenMock.new(accounts[8],64,{from:accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableTokenMock.new(accounts[8],64,{from:accounts[0]}');
    OffChainPayments.link("SafeMath",contractSafeMath.address);
     OffChainPayments.link("ECDSA",contractECDSA.address);
    contractOffChainPayments = await OffChainPayments.new(accounts[6],{from:accounts[7]});
    if(trace) console.log('SUCESSO: OffChainPayments.new(accounts[6],{from:accounts[7]}');
    PartialRedemption.link("SafeMath",contractSafeMath.address);
    contractPartialRedemption = await PartialRedemption.new(contractRedeemableToken.address,contractRedeemableToken.address,accounts[5],26,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PartialRedemption.new(contractRedeemableToken.address,contractRedeemableToken.address,accounts[5],26,{from:accounts[0]}');
    OnChainPayments.link("SafeMath",contractSafeMath.address);
     OnChainPayments.link("ECDSA",contractECDSA.address);
    contractOnChainPayments = await OnChainPayments.new(contractRedeemableToken.address,contractRedeemableToken.address,accounts[5],{from:accounts[0]});
    if(trace) console.log('SUCESSO: OnChainPayments.new(contractRedeemableToken.address,contractRedeemableToken.address,accounts[5],{from:accounts[0]}');
    FixedPriceTender.link("Math",contractMath.address);
     FixedPriceTender.link("SafeMath",contractSafeMath.address);
    contractFixedPriceTender = await FixedPriceTender.new(1532892063,contractRedeemableTokenMock.address,contractRedeemableTokenMock.address,accounts[0],5,64,{from:accounts[4]});
    if(trace) console.log('SUCESSO: FixedPriceTender.new(1532892063,contractRedeemableTokenMock.address,contractRedeemableTokenMock.address,accounts[0],5,64,{from:accounts[4]}');
    FullRedemption.link("SafeMath",contractSafeMath.address);
    contractFullRedemption = await FullRedemption.new(contractRedeemableTokenMock.address,contractRedeemableTokenMock.address,accounts[1],4,{from:accounts[0]});
    if(trace) console.log('SUCESSO: FullRedemption.new(contractRedeemableTokenMock.address,contractRedeemableTokenMock.address,accounts[1],4,{from:accounts[0]}');
    OnChainVoting.link("SafeMath",contractSafeMath.address);
    contractOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+587,{from:accounts[8]});
    if(trace) console.log('SUCESSO: OnChainVoting.new(contractRedeemableToken.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+587,{from:accounts[8]}');
  });
  
  it('Should execute placeVote(string) WHEN (await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp<endTime', async () => {
    let result = await contractOnChainVoting.placeVote("\x19Ethereum Signed Message:\n32",{from: accounts[0]});
  });
  it('Should execute submitUserVotes(bytes32[],bytes32[]) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,_usersSaltHash.length==_usersVote.length,_usersSaltHash.length!=0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+58,{from:accounts[8]});
    let result = await localOnChainVoting.submitUserVotes([[124,131,187,103,128,155,236,253,136,187,102,152,79,41,167,104,205,158,99,222,171,17,132,118,110,166,174,51,37,211,206,185],[135,76,57,28,176,153,58,19,77,156,105,136,247,93,76,158,119,197,219,234,212,73,99,132,253,132,29,27,56,52,245,23],[160,156,155,157,89,69,105,85,167,102,175,93,245,112,227,62,81,98,109,155,5,210,195,73,58,122,182,176,180,24,23,35],[168,98,218,141,70,31,139,138,52,117,68,143,81,104,167,231,224,166,194,46,72,100,13,232,45,86,163,141,103,8,142,206],[128,27,105,168,200,198,231,122,134,176,63,245,213,16,22,68,11,95,80,141,125,64,38,13,117,160,190,190,153,78,207,94],[15,176,93,43,48,202,70,223,183,85,230,88,254,12,197,49,150,157,146,220,82,159,226,214,36,176,68,71,196,156,200,74],[99,147,137,34,159,113,161,19,196,13,131,89,85,119,237,82,212,60,201,164,238,160,33,46,123,102,3,52,43,229,22,234],[213,160,1,42,67,79,39,122,238,169,118,62,114,236,25,47,48,0,47,201,144,124,107,144,230,169,51,4,8,199,31,171],[112,137,84,223,234,244,12,107,207,108,121,242,43,247,141,52,222,173,225,78,10,157,73,25,167,40,133,187,217,142,49,60],[66,83,119,52,58,65,170,233,81,86,36,24,171,73,163,227,237,7,54,70,30,183,56,70,176,139,66,163,19,45,214,193],[45,69,245,49,216,242,129,220,44,55,114,212,22,131,79,100,1,195,136,230,238,22,71,225,181,97,48,184,136,135,241,206],[226,56,191,136,34,146,184,180,1,68,220,78,36,117,237,185,64,86,177,14,196,98,248,159,183,194,180,234,227,173,152,46],[125,183,21,24,37,100,59,136,245,170,195,26,215,238,32,231,109,126,174,188,234,155,151,176,175,236,19,169,63,55,10,82],[8,125,110,133,248,100,84,13,110,24,36,171,17,241,192,67,108,97,50,4,235,106,161,79,35,116,182,13,255,145,15,183],[207,136,166,142,145,6,70,254,37,48,203,110,84,131,45,194,89,160,59,186,50,34,18,85,37,116,108,7,41,77,104,138],[0,53,26,240,141,133,251,88,52,155,24,136,205,147,146,166,15,200,216,183,133,82,32,149,66,210,18,127,85,89,48,67],[70,160,116,92,77,84,84,122,180,253,209,29,10,237,96,97,117,249,159,231,110,34,243,6,3,72,53,212,112,46,144,98],[224,142,135,35,34,165,91,244,134,137,4,89,62,192,211,216,93,199,75,112,140,116,131,254,13,112,71,70,62,120,243,236],[13,187,160,166,59,66,63,253,202,238,172,203,131,4,156,147,249,205,147,53,244,82,83,149,106,193,240,99,213,12,60,43],[4,45,85,232,113,17,35,230,148,160,40,237,93,10,171,112,206,29,23,66,252,87,224,86,191,225,114,29,157,1,187,194],[139,32,234,58,221,47,254,39,28,114,136,228,149,48,15,58,180,199,81,186,73,247,33,6,47,84,54,93,50,243,168,85],[251,1,127,248,160,230,89,158,247,190,63,167,64,51,31,47,178,76,31,149,196,30,33,221,57,146,53,194,93,127,27,125],[115,233,49,158,47,162,166,159,197,185,36,7,99,13,224,197,99,72,162,146,13,23,18,221,29,249,81,213,143,64,140,21],[148,240,155,107,87,181,227,128,164,175,17,163,209,136,71,181,91,77,97,23,59,115,107,72,112,128,186,144,112,52,151,37],[34,0,158,22,82,237,144,103,120,112,47,64,235,182,127,25,213,193,94,232,166,234,188,5,218,158,26,233,195,242,77,127],[95,229,156,10,30,124,43,91,107,1,172,57,20,217,184,154,92,97,153,161,6,7,38,0,71,62,196,55,113,243,168,81],[240,224,118,92,131,61,47,79,116,230,35,238,137,120,115,67,217,244,147,144,101,160,135,78,138,185,119,67,226,7,230,248],[105,81,58,169,138,239,54,241,210,186,180,237,43,160,75,155,230,160,118,180,198,216,203,209,16,77,35,54,40,224,153,108],[71,53,153,75,99,3,193,127,79,114,237,177,203,160,178,15,43,197,2,46,131,226,80,173,58,92,12,105,171,55,227,162],[106,101,102,168,168,151,17,34,86,195,111,23,140,240,4,181,7,133,114,254,112,209,53,126,195,130,122,47,25,70,16,205],[233,148,108,183,199,3,201,96,166,36,178,151,154,122,127,38,99,218,149,137,56,95,18,135,234,114,91,205,195,146,25,76],[191,2,51,214,235,210,5,213,8,197,242,212,91,251,105,140,248,81,229,164,116,232,30,46,221,229,78,93,65,176,185,42],[144,26,79,37,152,149,46,102,240,198,186,222,247,139,95,176,38,16,1,110,215,137,92,144,96,207,216,83,144,171,207,225],[81,199,157,249,213,244,188,65,133,55,123,236,161,225,46,23,209,91,98,158,182,219,156,244,157,39,132,65,203,152,217,0],[58,194,15,200,155,62,141,209,188,85,116,24,178,96,118,172,16,206,52,152,189,45,236,73,83,128,61,88,3,196,98,149],[138,90,67,120,182,144,35,5,168,101,239,66,155,87,247,255,90,18,221,208,53,36,46,53,32,194,22,74,164,51,87,134],[22,1,112,171,51,109,97,228,155,25,171,91,208,103,163,131,43,187,232,8,108,25,164,167,182,158,88,222,92,34,148,144],[181,25,119,25,95,200,20,27,148,87,47,115,39,133,182,152,148,138,213,251,202,206,219,58,206,255,156,155,140,30,52,244],[173,167,113,125,142,250,250,52,234,109,12,75,70,220,57,59,250,127,178,138,68,184,107,70,164,248,24,115,66,39,249,15],[33,206,80,16,206,32,199,90,90,15,85,101,208,234,28,244,74,197,1,85,236,229,78,213,241,0,194,75,115,59,3,43],[188,92,229,13,78,66,43,164,119,147,181,186,164,142,19,6,230,47,99,66,76,10,241,40,22,225,170,171,110,215,84,223],[93,197,194,181,210,78,174,237,198,115,86,119,69,5,241,106,118,81,189,95,220,190,179,231,180,29,179,92,121,71,249,68],[187,127,212,145,128,80,97,70,85,64,60,34,139,116,48,114,250,151,64,82,203,152,228,203,140,214,247,104,42,84,142,99],[158,60,242,72,202,65,6,94,104,221,32,121,120,164,29,91,36,38,76,25,254,227,140,83,25,50,100,93,80,169,110,165],[86,238,170,46,140,178,38,228,92,81,78,5,250,233,64,136,53,110,224,13,159,143,208,85,212,61,108,150,169,89,201,110],[66,60,105,101,109,188,253,11,1,250,169,93,218,169,63,114,1,48,56,141,88,33,42,86,233,48,15,117,23,160,161,99],[21,190,243,78,195,235,222,248,143,61,66,234,54,155,68,184,5,121,55,216,135,10,67,194,25,204,191,243,183,24,33,110],[162,220,249,244,170,147,103,47,244,140,241,201,196,188,61,1,182,76,147,29,31,219,187,92,203,169,80,237,27,180,181,139],[14,128,204,45,224,243,227,84,236,69,201,190,8,12,224,166,76,85,251,248,236,190,39,213,95,155,68,19,235,152,176,68],[5,86,6,201,60,235,126,201,4,109,40,67,136,65,180,248,45,23,177,22,188,114,149,210,185,121,195,159,135,12,112,250],[238,163,221,230,197,194,238,213,89,229,16,132,253,153,111,213,174,249,124,192,210,217,246,100,41,187,78,1,90,110,12,46],[198,181,79,130,208,67,59,75,150,87,121,52,230,64,14,26,43,115,76,171,73,132,40,1,89,109,253,238,44,229,185,56],[130,223,65,127,37,155,255,189,9,85,54,249,57,190,54,98,182,234,193,224,220,182,176,64,143,6,207,193,5,118,242,221],[54,160,82,118,24,214,249,43,23,255,107,18,199,182,197,218,165,27,48,76,201,150,19,14,140,128,180,140,156,148,123,239],[124,94,103,61,159,117,82,92,44,42,205,23,131,84,59,230,185,35,58,8,206,192,170,249,211,115,78,119,220,87,49,6],[207,220,187,250,35,86,178,200,46,70,71,58,17,179,198,14,88,0,228,207,181,56,97,248,92,1,202,137,83,124,58,197],[253,172,234,106,217,45,20,42,29,69,71,234,33,230,19,163,25,254,35,92,246,186,164,240,182,235,239,150,2,78,223,107],[110,187,151,44,57,182,154,82,231,78,243,255,247,207,129,76,124,21,139,28,230,76,153,24,39,75,182,235,129,249,57,32],[82,200,193,102,184,234,240,28,37,39,122,93,213,49,29,15,200,213,35,190,23,105,115,136,236,129,128,255,255,103,247,94],[200,109,40,210,2,177,255,186,114,87,243,106,101,30,115,156,217,228,118,95,109,72,28,61,197,212,163,151,49,53,71,223],[33,170,68,169,81,149,107,132,227,82,67,28,186,96,7,107,164,169,32,222,64,48,76,215,59,91,246,43,223,73,216,189],[14,195,157,11,11,128,96,90,77,71,53,161,33,2,99,188,118,167,79,70,152,235,49,124,138,220,200,117,46,228,144,28],[68,84,115,136,241,182,155,141,100,134,51,53,185,250,23,7,144,172,122,203,183,220,25,76,63,67,177,55,152,32,52,124],[58,7,242,214,232,132,138,186,24,179,51,41,45,47,16,19,7,181,61,239,113,223,103,108,178,151,227,189,123,193,223,188],[105,221,31,53,166,133,90,124,12,94,51,95,99,80,59,120,232,4,18,148,221,54,105,241,62,215,236,141,215,42,132,133]], [[41,254,82,168,12,70,159,42,205,116,165,35,145,74,155,96,157,221,213,160,216,34,251,138,145,230,156,96,56,69,78,28],[91,141,17,17,154,224,215,190,63,204,220,180,4,185,12,69,98,152,153,4,93,40,145,92,82,20,138,16,160,49,54,13],[2,109,7,200,26,254,130,146,150,209,149,123,211,59,202,145,39,148,94,244,152,249,144,22,3,202,48,171,243,152,181,162],[102,121,198,16,82,201,154,175,47,154,248,199,43,109,170,154,50,236,55,184,8,35,31,149,237,207,249,120,246,152,185,234],[59,237,150,119,126,164,233,177,170,117,202,104,74,19,0,102,113,70,29,196,65,76,76,45,224,10,55,166,223,42,169,34],[131,37,178,203,109,98,79,117,104,242,48,91,254,185,98,104,215,57,173,30,94,245,112,173,133,49,4,94,90,170,247,135],[187,188,205,189,80,0,140,233,205,39,149,47,155,26,128,205,130,90,154,118,27,62,164,242,15,239,68,162,156,56,152,125],[146,43,73,147,32,198,197,204,185,79,7,11,4,170,202,150,159,157,31,110,15,5,134,88,176,19,161,72,148,147,60,225],[178,237,232,59,114,170,227,71,193,200,62,248,4,188,203,119,108,98,249,157,77,233,118,1,29,2,39,25,235,58,53,106],[192,59,199,149,243,73,168,176,18,192,210,55,212,14,61,234,35,23,4,3,176,231,192,37,239,171,118,88,212,82,197,255],[197,147,143,83,175,41,200,235,161,126,68,110,226,201,143,226,229,235,175,150,26,196,132,223,107,171,31,208,112,99,11,198],[148,173,27,49,182,225,33,84,107,201,34,4,247,170,136,212,209,234,133,203,89,165,159,30,119,205,232,138,37,77,59,237],[23,158,111,162,165,61,101,187,103,154,139,62,80,164,134,33,230,48,190,195,51,225,2,236,128,23,26,193,221,122,221,68],[21,143,230,170,74,118,112,149,223,133,58,13,19,220,192,224,221,72,251,252,156,38,15,210,125,123,13,81,19,176,184,109],[17,7,194,81,51,202,70,217,166,33,151,216,202,13,117,219,19,150,83,228,78,252,84,80,43,170,155,123,243,145,185,58],[63,46,160,58,171,240,181,238,228,111,48,141,116,197,226,9,71,38,154,163,189,192,199,179,99,197,226,48,67,35,130,207],[101,142,104,136,153,93,245,207,131,144,186,228,124,120,142,216,56,103,98,44,201,23,134,213,114,9,45,25,35,248,30,208],[78,154,245,98,128,253,191,209,104,2,155,212,164,154,26,196,165,65,94,33,122,119,1,151,201,143,225,236,33,116,121,169],[77,26,91,234,102,238,229,108,179,229,214,80,220,217,54,61,172,201,126,117,55,148,26,249,140,68,41,28,72,205,180,252],[9,18,132,192,227,161,165,16,73,147,208,34,159,233,234,171,211,55,228,103,188,188,168,102,167,19,114,168,164,248,184,180],[70,210,28,42,232,85,93,21,47,102,165,65,111,102,112,63,221,186,121,85,168,162,205,82,140,79,252,14,71,142,38,152],[255,208,119,143,118,121,146,79,16,77,82,69,248,33,178,19,124,247,13,12,33,98,76,129,58,104,183,150,222,75,25,126],[64,29,196,113,6,88,247,31,159,112,227,18,116,102,94,107,219,252,237,143,156,234,156,151,7,181,100,222,79,17,234,55],[102,126,157,130,88,109,54,244,215,243,132,115,146,120,100,187,236,224,145,102,230,163,175,18,248,186,189,171,201,91,126,140],[5,248,92,125,198,100,147,57,4,196,102,255,141,65,211,5,19,121,14,25,47,148,182,192,96,48,204,83,174,109,127,68],[15,78,124,189,200,185,95,44,251,123,239,132,150,135,181,143,7,244,48,55,161,187,119,17,87,245,119,102,61,57,133,133],[93,87,33,43,78,48,14,39,195,133,208,111,126,200,87,80,90,135,171,207,234,182,15,104,134,204,60,220,19,3,102,228],[156,115,34,210,168,67,51,126,93,26,49,6,230,170,2,166,49,22,166,113,17,183,124,164,155,5,168,20,250,123,160,130],[92,185,146,169,185,232,74,121,138,46,57,104,125,99,28,177,138,244,175,192,202,100,86,244,229,52,16,181,132,208,165,247],[12,128,181,48,232,251,55,232,25,117,238,38,230,57,87,251,13,22,75,76,28,221,70,152,211,185,141,225,15,82,194,11],[151,204,188,155,155,216,175,194,205,16,193,223,208,215,65,51,153,58,252,139,175,155,47,65,62,77,41,174,76,118,131,169],[29,61,136,27,4,0,221,125,33,204,135,128,90,150,246,8,52,240,19,167,236,116,74,192,126,124,165,226,83,159,232,108],[171,63,199,231,5,183,88,30,212,24,94,82,106,233,38,1,147,116,185,59,13,2,74,67,231,62,82,56,254,153,128,89],[105,133,212,126,30,200,33,48,204,111,157,125,253,9,121,147,19,185,178,238,33,160,1,162,17,243,14,81,129,67,232,34],[213,4,108,23,182,13,231,204,8,73,161,104,194,242,214,72,145,62,91,165,181,248,218,157,90,142,146,146,44,233,184,116],[39,193,135,15,88,29,39,166,69,180,142,108,206,101,14,219,197,172,101,145,102,209,19,103,141,231,178,103,217,28,134,176],[148,7,138,50,92,120,109,218,73,162,210,153,187,191,100,243,255,53,99,70,96,163,14,69,169,37,136,109,181,100,212,208],[11,56,36,119,219,251,192,36,19,26,119,197,63,198,130,241,76,78,131,45,130,21,155,246,250,59,157,178,9,227,203,190],[64,20,199,97,238,136,148,220,36,187,50,222,73,187,10,130,31,233,92,155,96,137,64,230,117,189,143,117,188,206,128,175],[67,238,1,172,185,28,129,179,41,74,202,68,101,28,47,9,250,221,44,242,137,232,150,173,222,236,166,175,174,92,226,107],[24,121,244,129,155,54,132,149,100,98,106,72,223,96,227,196,35,241,20,161,198,242,198,58,166,106,144,118,68,165,72,68],[224,110,138,234,79,204,151,232,11,7,47,235,4,102,99,186,215,115,145,75,33,106,31,111,127,189,149,201,6,64,194,213],[168,189,188,10,203,231,97,149,204,231,225,31,53,1,184,109,136,136,135,118,147,121,2,177,158,134,13,28,88,113,92,41],[209,37,197,94,65,206,42,58,88,94,32,248,140,145,146,187,33,46,39,38,138,250,37,233,249,88,41,133,113,13,130,119],[30,202,66,30,37,16,142,82,20,100,140,74,183,41,8,136,88,179,91,79,81,76,249,253,138,147,47,34,174,5,5,238],[118,160,182,105,77,34,120,92,183,5,210,196,65,188,47,125,2,144,11,240,228,221,60,233,1,18,228,181,229,185,201,42],[76,145,38,140,20,206,183,59,31,221,110,34,165,116,188,123,84,50,126,72,70,140,200,182,97,31,203,213,182,107,160,182],[253,116,56,108,15,146,18,183,252,233,73,136,9,249,120,126,195,197,168,94,54,119,146,8,83,243,99,198,101,9,196,170],[64,41,129,168,121,229,70,71,43,25,106,232,45,188,173,46,248,145,37,173,232,18,145,94,248,133,215,124,89,250,252,190],[74,99,155,76,148,103,81,185,12,219,3,22,215,222,141,121,162,230,183,32,108,204,52,80,23,79,168,24,125,185,177,40],[168,57,190,165,35,17,195,43,235,253,51,67,41,209,149,231,115,160,207,143,25,73,121,68,135,47,215,27,103,2,30,178],[207,47,132,42,198,151,133,230,221,142,130,73,68,219,53,124,88,49,125,45,38,50,36,117,206,255,4,246,76,195,181,120],[120,221,212,135,83,149,90,188,40,142,197,175,237,102,105,201,14,53,231,159,44,178,232,76,70,141,130,26,33,234,121,214],[3,71,178,144,42,62,230,7,93,118,139,221,244,204,136,110,146,136,241,43,23,151,123,79,93,183,237,126,29,172,95,107],[213,21,229,13,146,167,121,221,47,188,93,228,219,201,238,145,176,8,153,170,4,93,183,122,91,167,230,74,33,55,169,65],[235,208,211,101,23,36,26,20,199,29,98,56,248,57,27,0,5,5,6,180,199,72,151,4,10,199,131,171,71,80,117,223],[89,48,237,226,81,43,251,233,211,79,117,126,190,14,228,180,249,209,223,58,73,39,121,95,181,221,47,24,216,79,8,174],[149,213,34,121,175,36,53,69,247,153,47,190,98,141,18,27,101,108,208,195,229,111,236,114,80,146,8,220,217,29,100,42],[71,232,63,182,30,156,71,19,244,73,203,30,74,40,142,68,201,132,227,90,103,194,234,78,78,52,168,27,203,138,142,192],[254,241,210,244,179,117,18,221,165,33,86,182,71,245,151,134,74,163,173,107,229,35,162,92,244,129,203,236,155,248,3,192],[197,160,233,55,5,240,50,59,43,103,127,30,74,231,7,188,177,52,110,55,6,58,115,178,75,111,240,200,98,120,59,191],[158,94,101,13,130,31,133,102,178,3,255,242,55,192,154,223,64,152,29,117,123,69,161,249,136,68,83,43,118,174,82,23],[210,251,4,50,205,239,79,172,162,220,178,146,48,55,146,21,44,150,198,140,31,170,166,31,18,140,168,93,164,232,95,37],[18,50,79,152,215,106,120,72,7,5,218,182,127,238,207,161,212,161,166,201,101,181,106,30,239,170,17,238,96,182,231,86],[191,32,23,119,100,98,165,217,145,206,175,117,221,202,168,150,245,62,226,14,62,250,209,148,240,139,143,84,178,44,200,193]],{from: accounts[8]});
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+58,{from:accounts[8]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[124,131,187,103,128,155,236,253,136,187,102,152,79,41,167,104,205,158,99,222,171,17,132,118,110,166,174,51,37,211,206,185],[135,76,57,28,176,153,58,19,77,156,105,136,247,93,76,158,119,197,219,234,212,73,99,132,253,132,29,27,56,52,245,23],[160,156,155,157,89,69,105,85,167,102,175,93,245,112,227,62,81,98,109,155,5,210,195,73,58,122,182,176,180,24,23,35],[168,98,218,141,70,31,139,138,52,117,68,143,81,104,167,231,224,166,194,46,72,100,13,232,45,86,163,141,103,8,142,206],[128,27,105,168,200,198,231,122,134,176,63,245,213,16,22,68,11,95,80,141,125,64,38,13,117,160,190,190,153,78,207,94],[15,176,93,43,48,202,70,223,183,85,230,88,254,12,197,49,150,157,146,220,82,159,226,214,36,176,68,71,196,156,200,74],[99,147,137,34,159,113,161,19,196,13,131,89,85,119,237,82,212,60,201,164,238,160,33,46,123,102,3,52,43,229,22,234],[213,160,1,42,67,79,39,122,238,169,118,62,114,236,25,47,48,0,47,201,144,124,107,144,230,169,51,4,8,199,31,171],[112,137,84,223,234,244,12,107,207,108,121,242,43,247,141,52,222,173,225,78,10,157,73,25,167,40,133,187,217,142,49,60],[66,83,119,52,58,65,170,233,81,86,36,24,171,73,163,227,237,7,54,70,30,183,56,70,176,139,66,163,19,45,214,193],[45,69,245,49,216,242,129,220,44,55,114,212,22,131,79,100,1,195,136,230,238,22,71,225,181,97,48,184,136,135,241,206],[226,56,191,136,34,146,184,180,1,68,220,78,36,117,237,185,64,86,177,14,196,98,248,159,183,194,180,234,227,173,152,46],[125,183,21,24,37,100,59,136,245,170,195,26,215,238,32,231,109,126,174,188,234,155,151,176,175,236,19,169,63,55,10,82],[8,125,110,133,248,100,84,13,110,24,36,171,17,241,192,67,108,97,50,4,235,106,161,79,35,116,182,13,255,145,15,183],[207,136,166,142,145,6,70,254,37,48,203,110,84,131,45,194,89,160,59,186,50,34,18,85,37,116,108,7,41,77,104,138],[0,53,26,240,141,133,251,88,52,155,24,136,205,147,146,166,15,200,216,183,133,82,32,149,66,210,18,127,85,89,48,67],[70,160,116,92,77,84,84,122,180,253,209,29,10,237,96,97,117,249,159,231,110,34,243,6,3,72,53,212,112,46,144,98],[224,142,135,35,34,165,91,244,134,137,4,89,62,192,211,216,93,199,75,112,140,116,131,254,13,112,71,70,62,120,243,236],[13,187,160,166,59,66,63,253,202,238,172,203,131,4,156,147,249,205,147,53,244,82,83,149,106,193,240,99,213,12,60,43],[4,45,85,232,113,17,35,230,148,160,40,237,93,10,171,112,206,29,23,66,252,87,224,86,191,225,114,29,157,1,187,194],[139,32,234,58,221,47,254,39,28,114,136,228,149,48,15,58,180,199,81,186,73,247,33,6,47,84,54,93,50,243,168,85],[251,1,127,248,160,230,89,158,247,190,63,167,64,51,31,47,178,76,31,149,196,30,33,221,57,146,53,194,93,127,27,125],[115,233,49,158,47,162,166,159,197,185,36,7,99,13,224,197,99,72,162,146,13,23,18,221,29,249,81,213,143,64,140,21],[148,240,155,107,87,181,227,128,164,175,17,163,209,136,71,181,91,77,97,23,59,115,107,72,112,128,186,144,112,52,151,37],[34,0,158,22,82,237,144,103,120,112,47,64,235,182,127,25,213,193,94,232,166,234,188,5,218,158,26,233,195,242,77,127],[95,229,156,10,30,124,43,91,107,1,172,57,20,217,184,154,92,97,153,161,6,7,38,0,71,62,196,55,113,243,168,81],[240,224,118,92,131,61,47,79,116,230,35,238,137,120,115,67,217,244,147,144,101,160,135,78,138,185,119,67,226,7,230,248],[105,81,58,169,138,239,54,241,210,186,180,237,43,160,75,155,230,160,118,180,198,216,203,209,16,77,35,54,40,224,153,108],[71,53,153,75,99,3,193,127,79,114,237,177,203,160,178,15,43,197,2,46,131,226,80,173,58,92,12,105,171,55,227,162],[106,101,102,168,168,151,17,34,86,195,111,23,140,240,4,181,7,133,114,254,112,209,53,126,195,130,122,47,25,70,16,205],[233,148,108,183,199,3,201,96,166,36,178,151,154,122,127,38,99,218,149,137,56,95,18,135,234,114,91,205,195,146,25,76],[191,2,51,214,235,210,5,213,8,197,242,212,91,251,105,140,248,81,229,164,116,232,30,46,221,229,78,93,65,176,185,42],[144,26,79,37,152,149,46,102,240,198,186,222,247,139,95,176,38,16,1,110,215,137,92,144,96,207,216,83,144,171,207,225],[81,199,157,249,213,244,188,65,133,55,123,236,161,225,46,23,209,91,98,158,182,219,156,244,157,39,132,65,203,152,217,0],[58,194,15,200,155,62,141,209,188,85,116,24,178,96,118,172,16,206,52,152,189,45,236,73,83,128,61,88,3,196,98,149],[138,90,67,120,182,144,35,5,168,101,239,66,155,87,247,255,90,18,221,208,53,36,46,53,32,194,22,74,164,51,87,134],[22,1,112,171,51,109,97,228,155,25,171,91,208,103,163,131,43,187,232,8,108,25,164,167,182,158,88,222,92,34,148,144],[181,25,119,25,95,200,20,27,148,87,47,115,39,133,182,152,148,138,213,251,202,206,219,58,206,255,156,155,140,30,52,244],[173,167,113,125,142,250,250,52,234,109,12,75,70,220,57,59,250,127,178,138,68,184,107,70,164,248,24,115,66,39,249,15],[33,206,80,16,206,32,199,90,90,15,85,101,208,234,28,244,74,197,1,85,236,229,78,213,241,0,194,75,115,59,3,43],[188,92,229,13,78,66,43,164,119,147,181,186,164,142,19,6,230,47,99,66,76,10,241,40,22,225,170,171,110,215,84,223],[93,197,194,181,210,78,174,237,198,115,86,119,69,5,241,106,118,81,189,95,220,190,179,231,180,29,179,92,121,71,249,68],[187,127,212,145,128,80,97,70,85,64,60,34,139,116,48,114,250,151,64,82,203,152,228,203,140,214,247,104,42,84,142,99],[158,60,242,72,202,65,6,94,104,221,32,121,120,164,29,91,36,38,76,25,254,227,140,83,25,50,100,93,80,169,110,165],[86,238,170,46,140,178,38,228,92,81,78,5,250,233,64,136,53,110,224,13,159,143,208,85,212,61,108,150,169,89,201,110],[66,60,105,101,109,188,253,11,1,250,169,93,218,169,63,114,1,48,56,141,88,33,42,86,233,48,15,117,23,160,161,99],[21,190,243,78,195,235,222,248,143,61,66,234,54,155,68,184,5,121,55,216,135,10,67,194,25,204,191,243,183,24,33,110],[162,220,249,244,170,147,103,47,244,140,241,201,196,188,61,1,182,76,147,29,31,219,187,92,203,169,80,237,27,180,181,139],[14,128,204,45,224,243,227,84,236,69,201,190,8,12,224,166,76,85,251,248,236,190,39,213,95,155,68,19,235,152,176,68],[5,86,6,201,60,235,126,201,4,109,40,67,136,65,180,248,45,23,177,22,188,114,149,210,185,121,195,159,135,12,112,250],[238,163,221,230,197,194,238,213,89,229,16,132,253,153,111,213,174,249,124,192,210,217,246,100,41,187,78,1,90,110,12,46],[198,181,79,130,208,67,59,75,150,87,121,52,230,64,14,26,43,115,76,171,73,132,40,1,89,109,253,238,44,229,185,56],[130,223,65,127,37,155,255,189,9,85,54,249,57,190,54,98,182,234,193,224,220,182,176,64,143,6,207,193,5,118,242,221],[54,160,82,118,24,214,249,43,23,255,107,18,199,182,197,218,165,27,48,76,201,150,19,14,140,128,180,140,156,148,123,239],[124,94,103,61,159,117,82,92,44,42,205,23,131,84,59,230,185,35,58,8,206,192,170,249,211,115,78,119,220,87,49,6],[207,220,187,250,35,86,178,200,46,70,71,58,17,179,198,14,88,0,228,207,181,56,97,248,92,1,202,137,83,124,58,197],[253,172,234,106,217,45,20,42,29,69,71,234,33,230,19,163,25,254,35,92,246,186,164,240,182,235,239,150,2,78,223,107],[110,187,151,44,57,182,154,82,231,78,243,255,247,207,129,76,124,21,139,28,230,76,153,24,39,75,182,235,129,249,57,32],[82,200,193,102,184,234,240,28,37,39,122,93,213,49,29,15,200,213,35,190,23,105,115,136,236,129,128,255,255,103,247,94],[200,109,40,210,2,177,255,186,114,87,243,106,101,30,115,156,217,228,118,95,109,72,28,61,197,212,163,151,49,53,71,223],[33,170,68,169,81,149,107,132,227,82,67,28,186,96,7,107,164,169,32,222,64,48,76,215,59,91,246,43,223,73,216,189],[14,195,157,11,11,128,96,90,77,71,53,161,33,2,99,188,118,167,79,70,152,235,49,124,138,220,200,117,46,228,144,28],[68,84,115,136,241,182,155,141,100,134,51,53,185,250,23,7,144,172,122,203,183,220,25,76,63,67,177,55,152,32,52,124],[58,7,242,214,232,132,138,186,24,179,51,41,45,47,16,19,7,181,61,239,113,223,103,108,178,151,227,189,123,193,223,188],[105,221,31,53,166,133,90,124,12,94,51,95,99,80,59,120,232,4,18,148,221,54,105,241,62,215,236,141,215,42,132,133]], [[41,254,82,168,12,70,159,42,205,116,165,35,145,74,155,96,157,221,213,160,216,34,251,138,145,230,156,96,56,69,78,28],[91,141,17,17,154,224,215,190,63,204,220,180,4,185,12,69,98,152,153,4,93,40,145,92,82,20,138,16,160,49,54,13],[2,109,7,200,26,254,130,146,150,209,149,123,211,59,202,145,39,148,94,244,152,249,144,22,3,202,48,171,243,152,181,162],[102,121,198,16,82,201,154,175,47,154,248,199,43,109,170,154,50,236,55,184,8,35,31,149,237,207,249,120,246,152,185,234],[59,237,150,119,126,164,233,177,170,117,202,104,74,19,0,102,113,70,29,196,65,76,76,45,224,10,55,166,223,42,169,34],[131,37,178,203,109,98,79,117,104,242,48,91,254,185,98,104,215,57,173,30,94,245,112,173,133,49,4,94,90,170,247,135],[187,188,205,189,80,0,140,233,205,39,149,47,155,26,128,205,130,90,154,118,27,62,164,242,15,239,68,162,156,56,152,125],[146,43,73,147,32,198,197,204,185,79,7,11,4,170,202,150,159,157,31,110,15,5,134,88,176,19,161,72,148,147,60,225],[178,237,232,59,114,170,227,71,193,200,62,248,4,188,203,119,108,98,249,157,77,233,118,1,29,2,39,25,235,58,53,106],[192,59,199,149,243,73,168,176,18,192,210,55,212,14,61,234,35,23,4,3,176,231,192,37,239,171,118,88,212,82,197,255],[197,147,143,83,175,41,200,235,161,126,68,110,226,201,143,226,229,235,175,150,26,196,132,223,107,171,31,208,112,99,11,198],[148,173,27,49,182,225,33,84,107,201,34,4,247,170,136,212,209,234,133,203,89,165,159,30,119,205,232,138,37,77,59,237],[23,158,111,162,165,61,101,187,103,154,139,62,80,164,134,33,230,48,190,195,51,225,2,236,128,23,26,193,221,122,221,68],[21,143,230,170,74,118,112,149,223,133,58,13,19,220,192,224,221,72,251,252,156,38,15,210,125,123,13,81,19,176,184,109],[17,7,194,81,51,202,70,217,166,33,151,216,202,13,117,219,19,150,83,228,78,252,84,80,43,170,155,123,243,145,185,58],[63,46,160,58,171,240,181,238,228,111,48,141,116,197,226,9,71,38,154,163,189,192,199,179,99,197,226,48,67,35,130,207],[101,142,104,136,153,93,245,207,131,144,186,228,124,120,142,216,56,103,98,44,201,23,134,213,114,9,45,25,35,248,30,208],[78,154,245,98,128,253,191,209,104,2,155,212,164,154,26,196,165,65,94,33,122,119,1,151,201,143,225,236,33,116,121,169],[77,26,91,234,102,238,229,108,179,229,214,80,220,217,54,61,172,201,126,117,55,148,26,249,140,68,41,28,72,205,180,252],[9,18,132,192,227,161,165,16,73,147,208,34,159,233,234,171,211,55,228,103,188,188,168,102,167,19,114,168,164,248,184,180],[70,210,28,42,232,85,93,21,47,102,165,65,111,102,112,63,221,186,121,85,168,162,205,82,140,79,252,14,71,142,38,152],[255,208,119,143,118,121,146,79,16,77,82,69,248,33,178,19,124,247,13,12,33,98,76,129,58,104,183,150,222,75,25,126],[64,29,196,113,6,88,247,31,159,112,227,18,116,102,94,107,219,252,237,143,156,234,156,151,7,181,100,222,79,17,234,55],[102,126,157,130,88,109,54,244,215,243,132,115,146,120,100,187,236,224,145,102,230,163,175,18,248,186,189,171,201,91,126,140],[5,248,92,125,198,100,147,57,4,196,102,255,141,65,211,5,19,121,14,25,47,148,182,192,96,48,204,83,174,109,127,68],[15,78,124,189,200,185,95,44,251,123,239,132,150,135,181,143,7,244,48,55,161,187,119,17,87,245,119,102,61,57,133,133],[93,87,33,43,78,48,14,39,195,133,208,111,126,200,87,80,90,135,171,207,234,182,15,104,134,204,60,220,19,3,102,228],[156,115,34,210,168,67,51,126,93,26,49,6,230,170,2,166,49,22,166,113,17,183,124,164,155,5,168,20,250,123,160,130],[92,185,146,169,185,232,74,121,138,46,57,104,125,99,28,177,138,244,175,192,202,100,86,244,229,52,16,181,132,208,165,247],[12,128,181,48,232,251,55,232,25,117,238,38,230,57,87,251,13,22,75,76,28,221,70,152,211,185,141,225,15,82,194,11],[151,204,188,155,155,216,175,194,205,16,193,223,208,215,65,51,153,58,252,139,175,155,47,65,62,77,41,174,76,118,131,169],[29,61,136,27,4,0,221,125,33,204,135,128,90,150,246,8,52,240,19,167,236,116,74,192,126,124,165,226,83,159,232,108],[171,63,199,231,5,183,88,30,212,24,94,82,106,233,38,1,147,116,185,59,13,2,74,67,231,62,82,56,254,153,128,89],[105,133,212,126,30,200,33,48,204,111,157,125,253,9,121,147,19,185,178,238,33,160,1,162,17,243,14,81,129,67,232,34],[213,4,108,23,182,13,231,204,8,73,161,104,194,242,214,72,145,62,91,165,181,248,218,157,90,142,146,146,44,233,184,116],[39,193,135,15,88,29,39,166,69,180,142,108,206,101,14,219,197,172,101,145,102,209,19,103,141,231,178,103,217,28,134,176],[148,7,138,50,92,120,109,218,73,162,210,153,187,191,100,243,255,53,99,70,96,163,14,69,169,37,136,109,181,100,212,208],[11,56,36,119,219,251,192,36,19,26,119,197,63,198,130,241,76,78,131,45,130,21,155,246,250,59,157,178,9,227,203,190],[64,20,199,97,238,136,148,220,36,187,50,222,73,187,10,130,31,233,92,155,96,137,64,230,117,189,143,117,188,206,128,175],[67,238,1,172,185,28,129,179,41,74,202,68,101,28,47,9,250,221,44,242,137,232,150,173,222,236,166,175,174,92,226,107],[24,121,244,129,155,54,132,149,100,98,106,72,223,96,227,196,35,241,20,161,198,242,198,58,166,106,144,118,68,165,72,68],[224,110,138,234,79,204,151,232,11,7,47,235,4,102,99,186,215,115,145,75,33,106,31,111,127,189,149,201,6,64,194,213],[168,189,188,10,203,231,97,149,204,231,225,31,53,1,184,109,136,136,135,118,147,121,2,177,158,134,13,28,88,113,92,41],[209,37,197,94,65,206,42,58,88,94,32,248,140,145,146,187,33,46,39,38,138,250,37,233,249,88,41,133,113,13,130,119],[30,202,66,30,37,16,142,82,20,100,140,74,183,41,8,136,88,179,91,79,81,76,249,253,138,147,47,34,174,5,5,238],[118,160,182,105,77,34,120,92,183,5,210,196,65,188,47,125,2,144,11,240,228,221,60,233,1,18,228,181,229,185,201,42],[76,145,38,140,20,206,183,59,31,221,110,34,165,116,188,123,84,50,126,72,70,140,200,182,97,31,203,213,182,107,160,182],[253,116,56,108,15,146,18,183,252,233,73,136,9,249,120,126,195,197,168,94,54,119,146,8,83,243,99,198,101,9,196,170],[64,41,129,168,121,229,70,71,43,25,106,232,45,188,173,46,248,145,37,173,232,18,145,94,248,133,215,124,89,250,252,190],[74,99,155,76,148,103,81,185,12,219,3,22,215,222,141,121,162,230,183,32,108,204,52,80,23,79,168,24,125,185,177,40],[168,57,190,165,35,17,195,43,235,253,51,67,41,209,149,231,115,160,207,143,25,73,121,68,135,47,215,27,103,2,30,178],[207,47,132,42,198,151,133,230,221,142,130,73,68,219,53,124,88,49,125,45,38,50,36,117,206,255,4,246,76,195,181,120],[120,221,212,135,83,149,90,188,40,142,197,175,237,102,105,201,14,53,231,159,44,178,232,76,70,141,130,26,33,234,121,214],[3,71,178,144,42,62,230,7,93,118,139,221,244,204,136,110,146,136,241,43,23,151,123,79,93,183,237,126,29,172,95,107],[213,21,229,13,146,167,121,221,47,188,93,228,219,201,238,145,176,8,153,170,4,93,183,122,91,167,230,74,33,55,169,65],[235,208,211,101,23,36,26,20,199,29,98,56,248,57,27,0,5,5,6,180,199,72,151,4,10,199,131,171,71,80,117,223],[89,48,237,226,81,43,251,233,211,79,117,126,190,14,228,180,249,209,223,58,73,39,121,95,181,221,47,24,216,79,8,174],[149,213,34,121,175,36,53,69,247,153,47,190,98,141,18,27,101,108,208,195,229,111,236,114,80,146,8,220,217,29,100,42],[71,232,63,182,30,156,71,19,244,73,203,30,74,40,142,68,201,132,227,90,103,194,234,78,78,52,168,27,203,138,142,192],[254,241,210,244,179,117,18,221,165,33,86,182,71,245,151,134,74,163,173,107,229,35,162,92,244,129,203,236,155,248,3,192],[197,160,233,55,5,240,50,59,43,103,127,30,74,231,7,188,177,52,110,55,6,58,115,178,75,111,240,200,98,120,59,191],[158,94,101,13,130,31,133,102,178,3,255,242,55,192,154,223,64,152,29,117,123,69,161,249,136,68,83,43,118,174,82,23],[210,251,4,50,205,239,79,172,162,220,178,146,48,55,146,21,44,150,198,140,31,170,166,31,18,140,168,93,164,232,95,37],[18,50,79,152,215,106,120,72,7,5,218,182,127,238,207,161,212,161,166,201,101,181,106,30,239,170,17,238,96,182,231,86],[191,32,23,119,100,98,165,217,145,206,175,117,221,202,168,150,245,62,226,14,62,250,209,148,240,139,143,84,178,44,200,193]],{from: accounts[9]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length == _usersVote.length', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+58,{from:accounts[8]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[175,174,106,193,104,104,177,254,27,75,78,79,188,245,172,60,225,30,235,2,85,79,76,173,31,68,132,202,195,184,212,77],[66,191,209,220,174,38,191,90,46,227,97,242,62,188,66,5,188,184,164,36,241,114,122,5,106,238,191,139,197,22,124,101],[123,22,48,201,112,83,95,236,191,165,251,48,235,20,32,218,252,250,170,9,192,35,161,215,6,141,255,18,54,41,132,140],[66,210,38,42,142,120,154,225,30,185,199,141,165,2,155,29,35,117,184,170,59,167,170,193,198,134,142,168,150,202,7,48],[17,202,233,86,237,79,54,207,191,127,92,218,190,173,87,91,4,37,102,53,122,45,75,24,205,246,143,204,255,22,205,29],[18,206,165,19,57,155,26,139,30,15,187,14,136,170,246,160,187,175,33,18,39,37,51,182,10,234,109,187,30,213,17,153],[2,249,255,46,173,64,150,24,60,167,155,111,253,251,182,181,232,203,102,75,19,89,52,192,105,158,78,43,70,147,92,7],[138,106,115,170,161,30,143,182,174,218,155,237,206,108,72,164,90,185,52,119,87,100,225,169,111,188,79,31,90,153,154,243],[144,133,6,174,220,47,100,65,131,3,61,34,101,206,226,57,192,202,159,10,18,234,226,203,159,51,112,232,207,253,22,218],[49,11,255,215,168,2,139,248,13,33,180,209,165,47,119,148,95,239,14,91,227,221,248,81,180,7,205,118,178,0,72,104],[52,197,129,5,145,148,122,235,90,194,90,86,0,95,174,38,162,248,231,238,160,149,2,185,172,74,47,89,204,217,162,36],[129,1,101,250,6,158,1,100,102,116,59,180,142,188,46,244,196,162,124,75,157,117,225,0,163,218,212,63,118,122,211,91],[143,0,220,12,131,234,178,205,102,145,55,169,209,14,182,135,254,16,112,255,170,178,45,59,227,225,9,116,241,95,169,122],[165,59,41,52,176,9,143,146,7,117,129,168,137,63,19,170,161,201,58,196,169,200,32,240,116,81,219,145,10,33,87,234],[218,225,201,225,84,13,247,4,28,205,142,108,239,45,181,89,114,253,50,253,185,241,193,143,106,116,214,116,98,171,228,246],[159,237,15,17,107,197,208,24,12,68,98,183,116,148,143,140,9,53,148,86,190,253,15,245,208,35,220,3,16,192,250,244],[28,229,94,8,162,230,153,212,8,24,8,31,243,38,201,186,153,95,173,174,138,48,197,48,150,21,3,108,31,69,57,188],[11,230,88,186,211,253,149,34,143,106,219,197,159,146,181,214,249,70,193,73,2,136,9,128,58,207,226,253,44,62,223,88],[234,5,97,153,171,216,150,178,41,150,186,241,66,86,77,38,155,115,19,19,157,124,231,232,162,7,246,176,127,163,111,41],[16,28,237,237,63,239,245,194,25,148,131,131,71,68,73,117,185,114,133,254,103,142,103,124,253,142,228,116,250,188,98,250],[160,145,49,91,149,243,55,241,172,57,64,44,83,209,247,179,145,20,105,9,176,191,23,178,224,149,81,56,184,194,120,222],[204,104,113,17,242,149,229,151,0,63,83,32,8,50,240,245,87,80,184,126,181,105,202,58,8,176,87,93,109,198,213,31],[86,219,56,74,79,77,102,153,185,18,206,12,112,127,169,177,70,73,57,68,222,118,70,45,196,221,105,148,78,192,140,112],[3,90,192,106,162,140,232,10,174,1,29,176,115,118,224,215,17,184,14,229,124,241,87,249,60,155,100,186,48,89,23,172],[254,96,66,31,231,152,231,197,3,156,243,102,174,83,247,25,225,98,88,240,89,111,101,227,84,19,42,45,33,29,249,77],[1,54,87,62,198,184,72,121,191,34,60,198,115,65,146,116,161,162,6,6,11,51,21,161,23,38,187,248,58,70,151,250],[247,40,196,152,77,115,198,56,114,9,94,115,30,17,188,116,125,114,216,112,177,179,23,225,3,18,111,206,183,151,160,71],[91,172,247,80,111,164,196,130,7,186,118,197,241,80,245,236,109,59,162,214,50,112,18,228,7,64,249,213,76,78,99,157],[49,130,22,125,0,219,1,169,150,52,56,211,22,34,250,115,218,169,151,34,184,221,59,163,228,216,114,223,223,81,116,129],[234,221,94,74,96,138,140,106,29,64,235,255,100,246,59,166,17,152,255,233,83,82,111,192,107,163,21,30,170,78,237,233],[63,232,2,243,136,69,167,177,170,229,206,37,70,227,67,95,216,25,158,214,251,26,49,248,13,203,17,23,180,146,188,50],[216,175,113,157,103,182,132,154,74,23,219,152,253,126,76,54,16,51,200,248,246,240,44,192,140,0,5,62,171,108,144,4],[146,249,107,224,5,108,219,208,217,203,11,247,85,7,173,108,70,185,69,192,199,200,165,71,73,20,45,119,137,219,138,194],[4,15,226,214,148,160,248,194,191,172,106,113,190,30,247,219,155,209,212,47,247,171,224,140,115,142,237,75,63,146,205,206],[84,22,54,54,18,3,216,79,1,187,46,107,11,147,50,124,86,111,101,180,58,52,43,73,130,222,174,115,227,221,202,9],[255,214,181,15,131,88,0,128,33,115,63,202,146,195,134,201,120,74,72,250,128,162,125,169,9,147,36,67,126,188,178,2],[164,250,130,202,224,142,38,137,37,157,160,24,152,236,76,123,173,125,209,144,61,138,234,17,18,89,152,140,80,247,254,31],[71,167,219,215,82,5,196,216,33,152,205,118,178,97,85,166,164,222,237,14,191,221,133,102,183,132,217,149,217,39,12,232],[229,33,61,57,163,80,100,182,201,115,124,229,244,91,127,122,11,219,111,27,224,242,30,232,244,18,75,4,89,240,211,106],[186,82,238,33,47,10,79,58,105,141,130,240,110,200,175,93,124,248,146,169,23,200,193,196,201,126,38,57,246,43,215,40],[203,104,109,47,137,81,131,186,184,255,247,51,124,51,181,23,53,125,176,244,133,111,230,10,254,89,152,170,233,12,98,116],[122,64,79,45,156,78,168,209,77,223,248,246,39,238,82,87,116,132,143,159,200,201,220,209,46,38,247,81,110,196,156,90],[215,48,56,138,146,81,107,243,95,153,165,92,244,156,172,12,117,36,31,165,10,129,138,143,7,119,26,220,226,84,236,157],[44,100,10,226,87,166,60,80,71,220,194,121,211,166,78,186,192,44,168,130,38,229,149,24,188,253,105,124,158,121,170,127],[185,84,241,174,83,121,213,209,252,252,143,105,254,177,173,157,44,163,119,191,143,246,2,191,47,225,104,68,104,237,100,14],[91,44,103,186,194,225,79,41,177,46,182,194,49,96,243,69,47,221,67,89,190,156,254,88,192,99,72,142,96,237,42,6],[105,142,40,185,215,100,218,60,44,178,149,16,154,108,27,96,122,97,180,36,96,60,195,116,89,202,239,123,255,131,175,150],[14,122,236,120,34,45,159,241,69,89,183,250,140,81,48,196,16,64,31,141,253,96,35,63,76,219,7,194,137,180,156,140],[186,164,235,222,98,0,248,13,136,44,20,118,245,237,111,154,4,0,90,40,115,222,46,95,10,54,225,66,188,189,105,34],[142,165,159,197,137,109,195,203,27,143,55,63,207,194,139,105,240,111,206,19,240,12,67,120,151,82,222,66,68,76,155,164],[116,127,47,253,116,103,243,8,66,249,83,182,207,255,128,80,41,115,169,52,124,221,148,12,71,90,226,247,36,49,129,80],[210,196,63,57,230,220,175,72,98,220,205,181,207,193,18,150,88,255,37,21,25,224,131,122,108,52,83,222,78,248,217,133],[91,154,16,176,64,230,43,157,110,128,15,132,77,8,18,134,133,101,150,58,139,139,234,33,99,175,206,115,254,72,129,21],[200,198,53,159,49,141,198,132,45,97,22,141,149,147,150,19,127,234,234,209,102,134,85,56,41,65,152,120,210,80,59,199],[15,206,185,82,96,80,27,208,129,21,22,227,109,173,104,194,198,128,59,76,185,181,81,253,206,61,130,115,80,103,198,194],[104,208,145,118,10,26,216,171,248,117,179,99,120,161,77,237,199,131,155,52,69,95,150,36,177,149,247,82,61,134,62,99],[19,171,219,91,201,101,169,0,71,29,247,135,166,128,165,215,159,171,231,79,78,157,7,81,100,199,92,202,9,250,61,131],[1,139,104,146,200,192,200,185,89,123,152,50,180,217,141,129,60,152,61,31,194,101,150,114,82,150,36,53,218,233,14,4],[20,194,208,161,31,116,253,143,225,27,56,151,251,118,182,58,58,117,235,85,105,85,48,205,94,99,39,93,1,66,87,48],[210,79,6,118,40,228,210,121,0,249,1,226,235,129,182,187,243,82,164,57,122,57,71,29,25,177,221,37,92,239,186,193],[169,156,17,169,175,9,217,239,123,77,71,131,36,15,109,96,105,135,162,168,78,228,84,102,122,92,75,127,21,110,189,12],[202,245,204,185,63,38,187,213,150,56,207,70,201,176,150,141,50,0,131,220,49,26,122,242,78,221,154,146,136,136,73,91],[195,157,201,53,248,227,185,40,232,31,144,44,204,30,236,41,16,249,165,90,207,213,239,126,246,6,193,53,214,117,207,33],[51,245,167,50,179,189,108,241,157,28,121,219,51,172,84,82,115,245,178,92,17,131,62,9,99,233,29,119,45,176,167,11],[239,180,243,170,122,156,5,247,177,138,48,164,213,85,5,220,80,54,105,166,173,42,211,11,7,53,13,57,59,110,67,51],[55,190,199,20,6,130,170,32,212,138,73,86,205,82,192,192,83,11,136,129,75,252,199,40,5,169,39,78,20,13,130,21]], [[41,254,82,168,12,70,159,42,205,116,165,35,145,74,155,96,157,221,213,160,216,34,251,138,145,230,156,96,56,69,78,28],[91,141,17,17,154,224,215,190,63,204,220,180,4,185,12,69,98,152,153,4,93,40,145,92,82,20,138,16,160,49,54,13],[2,109,7,200,26,254,130,146,150,209,149,123,211,59,202,145,39,148,94,244,152,249,144,22,3,202,48,171,243,152,181,162],[102,121,198,16,82,201,154,175,47,154,248,199,43,109,170,154,50,236,55,184,8,35,31,149,237,207,249,120,246,152,185,234],[59,237,150,119,126,164,233,177,170,117,202,104,74,19,0,102,113,70,29,196,65,76,76,45,224,10,55,166,223,42,169,34],[131,37,178,203,109,98,79,117,104,242,48,91,254,185,98,104,215,57,173,30,94,245,112,173,133,49,4,94,90,170,247,135],[187,188,205,189,80,0,140,233,205,39,149,47,155,26,128,205,130,90,154,118,27,62,164,242,15,239,68,162,156,56,152,125],[146,43,73,147,32,198,197,204,185,79,7,11,4,170,202,150,159,157,31,110,15,5,134,88,176,19,161,72,148,147,60,225],[178,237,232,59,114,170,227,71,193,200,62,248,4,188,203,119,108,98,249,157,77,233,118,1,29,2,39,25,235,58,53,106],[192,59,199,149,243,73,168,176,18,192,210,55,212,14,61,234,35,23,4,3,176,231,192,37,239,171,118,88,212,82,197,255],[197,147,143,83,175,41,200,235,161,126,68,110,226,201,143,226,229,235,175,150,26,196,132,223,107,171,31,208,112,99,11,198],[148,173,27,49,182,225,33,84,107,201,34,4,247,170,136,212,209,234,133,203,89,165,159,30,119,205,232,138,37,77,59,237],[23,158,111,162,165,61,101,187,103,154,139,62,80,164,134,33,230,48,190,195,51,225,2,236,128,23,26,193,221,122,221,68],[21,143,230,170,74,118,112,149,223,133,58,13,19,220,192,224,221,72,251,252,156,38,15,210,125,123,13,81,19,176,184,109],[17,7,194,81,51,202,70,217,166,33,151,216,202,13,117,219,19,150,83,228,78,252,84,80,43,170,155,123,243,145,185,58],[63,46,160,58,171,240,181,238,228,111,48,141,116,197,226,9,71,38,154,163,189,192,199,179,99,197,226,48,67,35,130,207],[101,142,104,136,153,93,245,207,131,144,186,228,124,120,142,216,56,103,98,44,201,23,134,213,114,9,45,25,35,248,30,208],[78,154,245,98,128,253,191,209,104,2,155,212,164,154,26,196,165,65,94,33,122,119,1,151,201,143,225,236,33,116,121,169],[77,26,91,234,102,238,229,108,179,229,214,80,220,217,54,61,172,201,126,117,55,148,26,249,140,68,41,28,72,205,180,252],[9,18,132,192,227,161,165,16,73,147,208,34,159,233,234,171,211,55,228,103,188,188,168,102,167,19,114,168,164,248,184,180],[70,210,28,42,232,85,93,21,47,102,165,65,111,102,112,63,221,186,121,85,168,162,205,82,140,79,252,14,71,142,38,152],[255,208,119,143,118,121,146,79,16,77,82,69,248,33,178,19,124,247,13,12,33,98,76,129,58,104,183,150,222,75,25,126],[64,29,196,113,6,88,247,31,159,112,227,18,116,102,94,107,219,252,237,143,156,234,156,151,7,181,100,222,79,17,234,55],[102,126,157,130,88,109,54,244,215,243,132,115,146,120,100,187,236,224,145,102,230,163,175,18,248,186,189,171,201,91,126,140],[5,248,92,125,198,100,147,57,4,196,102,255,141,65,211,5,19,121,14,25,47,148,182,192,96,48,204,83,174,109,127,68],[15,78,124,189,200,185,95,44,251,123,239,132,150,135,181,143,7,244,48,55,161,187,119,17,87,245,119,102,61,57,133,133],[93,87,33,43,78,48,14,39,195,133,208,111,126,200,87,80,90,135,171,207,234,182,15,104,134,204,60,220,19,3,102,228],[156,115,34,210,168,67,51,126,93,26,49,6,230,170,2,166,49,22,166,113,17,183,124,164,155,5,168,20,250,123,160,130],[92,185,146,169,185,232,74,121,138,46,57,104,125,99,28,177,138,244,175,192,202,100,86,244,229,52,16,181,132,208,165,247],[12,128,181,48,232,251,55,232,25,117,238,38,230,57,87,251,13,22,75,76,28,221,70,152,211,185,141,225,15,82,194,11],[151,204,188,155,155,216,175,194,205,16,193,223,208,215,65,51,153,58,252,139,175,155,47,65,62,77,41,174,76,118,131,169],[29,61,136,27,4,0,221,125,33,204,135,128,90,150,246,8,52,240,19,167,236,116,74,192,126,124,165,226,83,159,232,108],[171,63,199,231,5,183,88,30,212,24,94,82,106,233,38,1,147,116,185,59,13,2,74,67,231,62,82,56,254,153,128,89],[105,133,212,126,30,200,33,48,204,111,157,125,253,9,121,147,19,185,178,238,33,160,1,162,17,243,14,81,129,67,232,34],[213,4,108,23,182,13,231,204,8,73,161,104,194,242,214,72,145,62,91,165,181,248,218,157,90,142,146,146,44,233,184,116],[39,193,135,15,88,29,39,166,69,180,142,108,206,101,14,219,197,172,101,145,102,209,19,103,141,231,178,103,217,28,134,176],[148,7,138,50,92,120,109,218,73,162,210,153,187,191,100,243,255,53,99,70,96,163,14,69,169,37,136,109,181,100,212,208],[11,56,36,119,219,251,192,36,19,26,119,197,63,198,130,241,76,78,131,45,130,21,155,246,250,59,157,178,9,227,203,190],[64,20,199,97,238,136,148,220,36,187,50,222,73,187,10,130,31,233,92,155,96,137,64,230,117,189,143,117,188,206,128,175],[67,238,1,172,185,28,129,179,41,74,202,68,101,28,47,9,250,221,44,242,137,232,150,173,222,236,166,175,174,92,226,107],[24,121,244,129,155,54,132,149,100,98,106,72,223,96,227,196,35,241,20,161,198,242,198,58,166,106,144,118,68,165,72,68],[224,110,138,234,79,204,151,232,11,7,47,235,4,102,99,186,215,115,145,75,33,106,31,111,127,189,149,201,6,64,194,213],[168,189,188,10,203,231,97,149,204,231,225,31,53,1,184,109,136,136,135,118,147,121,2,177,158,134,13,28,88,113,92,41],[209,37,197,94,65,206,42,58,88,94,32,248,140,145,146,187,33,46,39,38,138,250,37,233,249,88,41,133,113,13,130,119],[30,202,66,30,37,16,142,82,20,100,140,74,183,41,8,136,88,179,91,79,81,76,249,253,138,147,47,34,174,5,5,238],[118,160,182,105,77,34,120,92,183,5,210,196,65,188,47,125,2,144,11,240,228,221,60,233,1,18,228,181,229,185,201,42],[76,145,38,140,20,206,183,59,31,221,110,34,165,116,188,123,84,50,126,72,70,140,200,182,97,31,203,213,182,107,160,182],[253,116,56,108,15,146,18,183,252,233,73,136,9,249,120,126,195,197,168,94,54,119,146,8,83,243,99,198,101,9,196,170],[64,41,129,168,121,229,70,71,43,25,106,232,45,188,173,46,248,145,37,173,232,18,145,94,248,133,215,124,89,250,252,190],[74,99,155,76,148,103,81,185,12,219,3,22,215,222,141,121,162,230,183,32,108,204,52,80,23,79,168,24,125,185,177,40],[168,57,190,165,35,17,195,43,235,253,51,67,41,209,149,231,115,160,207,143,25,73,121,68,135,47,215,27,103,2,30,178],[207,47,132,42,198,151,133,230,221,142,130,73,68,219,53,124,88,49,125,45,38,50,36,117,206,255,4,246,76,195,181,120],[120,221,212,135,83,149,90,188,40,142,197,175,237,102,105,201,14,53,231,159,44,178,232,76,70,141,130,26,33,234,121,214],[3,71,178,144,42,62,230,7,93,118,139,221,244,204,136,110,146,136,241,43,23,151,123,79,93,183,237,126,29,172,95,107],[213,21,229,13,146,167,121,221,47,188,93,228,219,201,238,145,176,8,153,170,4,93,183,122,91,167,230,74,33,55,169,65],[235,208,211,101,23,36,26,20,199,29,98,56,248,57,27,0,5,5,6,180,199,72,151,4,10,199,131,171,71,80,117,223],[89,48,237,226,81,43,251,233,211,79,117,126,190,14,228,180,249,209,223,58,73,39,121,95,181,221,47,24,216,79,8,174],[149,213,34,121,175,36,53,69,247,153,47,190,98,141,18,27,101,108,208,195,229,111,236,114,80,146,8,220,217,29,100,42],[71,232,63,182,30,156,71,19,244,73,203,30,74,40,142,68,201,132,227,90,103,194,234,78,78,52,168,27,203,138,142,192],[254,241,210,244,179,117,18,221,165,33,86,182,71,245,151,134,74,163,173,107,229,35,162,92,244,129,203,236,155,248,3,192],[197,160,233,55,5,240,50,59,43,103,127,30,74,231,7,188,177,52,110,55,6,58,115,178,75,111,240,200,98,120,59,191],[158,94,101,13,130,31,133,102,178,3,255,242,55,192,154,223,64,152,29,117,123,69,161,249,136,68,83,43,118,174,82,23],[210,251,4,50,205,239,79,172,162,220,178,146,48,55,146,21,44,150,198,140,31,170,166,31,18,140,168,93,164,232,95,37],[18,50,79,152,215,106,120,72,7,5,218,182,127,238,207,161,212,161,166,201,101,181,106,30,239,170,17,238,96,182,231,86],[191,32,23,119,100,98,165,217,145,206,175,117,221,202,168,150,245,62,226,14,62,250,209,148,240,139,143,84,178,44,200,193]],{from: accounts[8]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length != 0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+58,{from:accounts[8]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([], [[41,254,82,168,12,70,159,42,205,116,165,35,145,74,155,96,157,221,213,160,216,34,251,138,145,230,156,96,56,69,78,28],[91,141,17,17,154,224,215,190,63,204,220,180,4,185,12,69,98,152,153,4,93,40,145,92,82,20,138,16,160,49,54,13],[2,109,7,200,26,254,130,146,150,209,149,123,211,59,202,145,39,148,94,244,152,249,144,22,3,202,48,171,243,152,181,162],[102,121,198,16,82,201,154,175,47,154,248,199,43,109,170,154,50,236,55,184,8,35,31,149,237,207,249,120,246,152,185,234],[59,237,150,119,126,164,233,177,170,117,202,104,74,19,0,102,113,70,29,196,65,76,76,45,224,10,55,166,223,42,169,34],[131,37,178,203,109,98,79,117,104,242,48,91,254,185,98,104,215,57,173,30,94,245,112,173,133,49,4,94,90,170,247,135],[187,188,205,189,80,0,140,233,205,39,149,47,155,26,128,205,130,90,154,118,27,62,164,242,15,239,68,162,156,56,152,125],[146,43,73,147,32,198,197,204,185,79,7,11,4,170,202,150,159,157,31,110,15,5,134,88,176,19,161,72,148,147,60,225],[178,237,232,59,114,170,227,71,193,200,62,248,4,188,203,119,108,98,249,157,77,233,118,1,29,2,39,25,235,58,53,106],[192,59,199,149,243,73,168,176,18,192,210,55,212,14,61,234,35,23,4,3,176,231,192,37,239,171,118,88,212,82,197,255],[197,147,143,83,175,41,200,235,161,126,68,110,226,201,143,226,229,235,175,150,26,196,132,223,107,171,31,208,112,99,11,198],[148,173,27,49,182,225,33,84,107,201,34,4,247,170,136,212,209,234,133,203,89,165,159,30,119,205,232,138,37,77,59,237],[23,158,111,162,165,61,101,187,103,154,139,62,80,164,134,33,230,48,190,195,51,225,2,236,128,23,26,193,221,122,221,68],[21,143,230,170,74,118,112,149,223,133,58,13,19,220,192,224,221,72,251,252,156,38,15,210,125,123,13,81,19,176,184,109],[17,7,194,81,51,202,70,217,166,33,151,216,202,13,117,219,19,150,83,228,78,252,84,80,43,170,155,123,243,145,185,58],[63,46,160,58,171,240,181,238,228,111,48,141,116,197,226,9,71,38,154,163,189,192,199,179,99,197,226,48,67,35,130,207],[101,142,104,136,153,93,245,207,131,144,186,228,124,120,142,216,56,103,98,44,201,23,134,213,114,9,45,25,35,248,30,208],[78,154,245,98,128,253,191,209,104,2,155,212,164,154,26,196,165,65,94,33,122,119,1,151,201,143,225,236,33,116,121,169],[77,26,91,234,102,238,229,108,179,229,214,80,220,217,54,61,172,201,126,117,55,148,26,249,140,68,41,28,72,205,180,252],[9,18,132,192,227,161,165,16,73,147,208,34,159,233,234,171,211,55,228,103,188,188,168,102,167,19,114,168,164,248,184,180],[70,210,28,42,232,85,93,21,47,102,165,65,111,102,112,63,221,186,121,85,168,162,205,82,140,79,252,14,71,142,38,152],[255,208,119,143,118,121,146,79,16,77,82,69,248,33,178,19,124,247,13,12,33,98,76,129,58,104,183,150,222,75,25,126],[64,29,196,113,6,88,247,31,159,112,227,18,116,102,94,107,219,252,237,143,156,234,156,151,7,181,100,222,79,17,234,55],[102,126,157,130,88,109,54,244,215,243,132,115,146,120,100,187,236,224,145,102,230,163,175,18,248,186,189,171,201,91,126,140],[5,248,92,125,198,100,147,57,4,196,102,255,141,65,211,5,19,121,14,25,47,148,182,192,96,48,204,83,174,109,127,68],[15,78,124,189,200,185,95,44,251,123,239,132,150,135,181,143,7,244,48,55,161,187,119,17,87,245,119,102,61,57,133,133],[93,87,33,43,78,48,14,39,195,133,208,111,126,200,87,80,90,135,171,207,234,182,15,104,134,204,60,220,19,3,102,228],[156,115,34,210,168,67,51,126,93,26,49,6,230,170,2,166,49,22,166,113,17,183,124,164,155,5,168,20,250,123,160,130],[92,185,146,169,185,232,74,121,138,46,57,104,125,99,28,177,138,244,175,192,202,100,86,244,229,52,16,181,132,208,165,247],[12,128,181,48,232,251,55,232,25,117,238,38,230,57,87,251,13,22,75,76,28,221,70,152,211,185,141,225,15,82,194,11],[151,204,188,155,155,216,175,194,205,16,193,223,208,215,65,51,153,58,252,139,175,155,47,65,62,77,41,174,76,118,131,169],[29,61,136,27,4,0,221,125,33,204,135,128,90,150,246,8,52,240,19,167,236,116,74,192,126,124,165,226,83,159,232,108],[171,63,199,231,5,183,88,30,212,24,94,82,106,233,38,1,147,116,185,59,13,2,74,67,231,62,82,56,254,153,128,89],[105,133,212,126,30,200,33,48,204,111,157,125,253,9,121,147,19,185,178,238,33,160,1,162,17,243,14,81,129,67,232,34],[213,4,108,23,182,13,231,204,8,73,161,104,194,242,214,72,145,62,91,165,181,248,218,157,90,142,146,146,44,233,184,116],[39,193,135,15,88,29,39,166,69,180,142,108,206,101,14,219,197,172,101,145,102,209,19,103,141,231,178,103,217,28,134,176],[148,7,138,50,92,120,109,218,73,162,210,153,187,191,100,243,255,53,99,70,96,163,14,69,169,37,136,109,181,100,212,208],[11,56,36,119,219,251,192,36,19,26,119,197,63,198,130,241,76,78,131,45,130,21,155,246,250,59,157,178,9,227,203,190],[64,20,199,97,238,136,148,220,36,187,50,222,73,187,10,130,31,233,92,155,96,137,64,230,117,189,143,117,188,206,128,175],[67,238,1,172,185,28,129,179,41,74,202,68,101,28,47,9,250,221,44,242,137,232,150,173,222,236,166,175,174,92,226,107],[24,121,244,129,155,54,132,149,100,98,106,72,223,96,227,196,35,241,20,161,198,242,198,58,166,106,144,118,68,165,72,68],[224,110,138,234,79,204,151,232,11,7,47,235,4,102,99,186,215,115,145,75,33,106,31,111,127,189,149,201,6,64,194,213],[168,189,188,10,203,231,97,149,204,231,225,31,53,1,184,109,136,136,135,118,147,121,2,177,158,134,13,28,88,113,92,41],[209,37,197,94,65,206,42,58,88,94,32,248,140,145,146,187,33,46,39,38,138,250,37,233,249,88,41,133,113,13,130,119],[30,202,66,30,37,16,142,82,20,100,140,74,183,41,8,136,88,179,91,79,81,76,249,253,138,147,47,34,174,5,5,238],[118,160,182,105,77,34,120,92,183,5,210,196,65,188,47,125,2,144,11,240,228,221,60,233,1,18,228,181,229,185,201,42],[76,145,38,140,20,206,183,59,31,221,110,34,165,116,188,123,84,50,126,72,70,140,200,182,97,31,203,213,182,107,160,182],[253,116,56,108,15,146,18,183,252,233,73,136,9,249,120,126,195,197,168,94,54,119,146,8,83,243,99,198,101,9,196,170],[64,41,129,168,121,229,70,71,43,25,106,232,45,188,173,46,248,145,37,173,232,18,145,94,248,133,215,124,89,250,252,190],[74,99,155,76,148,103,81,185,12,219,3,22,215,222,141,121,162,230,183,32,108,204,52,80,23,79,168,24,125,185,177,40],[168,57,190,165,35,17,195,43,235,253,51,67,41,209,149,231,115,160,207,143,25,73,121,68,135,47,215,27,103,2,30,178],[207,47,132,42,198,151,133,230,221,142,130,73,68,219,53,124,88,49,125,45,38,50,36,117,206,255,4,246,76,195,181,120],[120,221,212,135,83,149,90,188,40,142,197,175,237,102,105,201,14,53,231,159,44,178,232,76,70,141,130,26,33,234,121,214],[3,71,178,144,42,62,230,7,93,118,139,221,244,204,136,110,146,136,241,43,23,151,123,79,93,183,237,126,29,172,95,107],[213,21,229,13,146,167,121,221,47,188,93,228,219,201,238,145,176,8,153,170,4,93,183,122,91,167,230,74,33,55,169,65],[235,208,211,101,23,36,26,20,199,29,98,56,248,57,27,0,5,5,6,180,199,72,151,4,10,199,131,171,71,80,117,223],[89,48,237,226,81,43,251,233,211,79,117,126,190,14,228,180,249,209,223,58,73,39,121,95,181,221,47,24,216,79,8,174],[149,213,34,121,175,36,53,69,247,153,47,190,98,141,18,27,101,108,208,195,229,111,236,114,80,146,8,220,217,29,100,42],[71,232,63,182,30,156,71,19,244,73,203,30,74,40,142,68,201,132,227,90,103,194,234,78,78,52,168,27,203,138,142,192],[254,241,210,244,179,117,18,221,165,33,86,182,71,245,151,134,74,163,173,107,229,35,162,92,244,129,203,236,155,248,3,192],[197,160,233,55,5,240,50,59,43,103,127,30,74,231,7,188,177,52,110,55,6,58,115,178,75,111,240,200,98,120,59,191],[158,94,101,13,130,31,133,102,178,3,255,242,55,192,154,223,64,152,29,117,123,69,161,249,136,68,83,43,118,174,82,23],[210,251,4,50,205,239,79,172,162,220,178,146,48,55,146,21,44,150,198,140,31,170,166,31,18,140,168,93,164,232,95,37],[18,50,79,152,215,106,120,72,7,5,218,182,127,238,207,161,212,161,166,201,101,181,106,30,239,170,17,238,96,182,231,86],[191,32,23,119,100,98,165,217,145,206,175,117,221,202,168,150,245,62,226,14,62,250,209,148,240,139,143,84,178,44,200,193]],{from: accounts[8]}),'revert');
  });
  it('Should execute finalizeVote(string) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,submissionsCount==votesCount', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[8],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+909,{from:accounts[8]});
    let result = await localOnChainVoting.finalizeVote("Example",{from: accounts[8]});
  });
  it('Should fail finalizeVote(string) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[8],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+909,{from:accounts[8]});
    let result = await truffleAssert.fails(localOnChainVoting.finalizeVote("Example",{from: accounts[9]}),'revert');
  });
});
