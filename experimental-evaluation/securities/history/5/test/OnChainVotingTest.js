const truffleAssert = require('truffle-assertions');
const PaymentTokenMock = artifacts.require("PaymentTokenMock");
const RedeemableTokenMock = artifacts.require("RedeemableTokenMock");
const OffChainPayments = artifacts.require("OffChainPayments");
const OnChainPayments = artifacts.require("OnChainPayments");
const FixedPriceTender = artifacts.require("FixedPriceTender");
const FullRedemption = artifacts.require("FullRedemption");
const PartialRedemption = artifacts.require("PartialRedemption");
const RedeemableToken = artifacts.require("RedeemableToken");
const OnChainVoting = artifacts.require("OnChainVoting");
const ECDSA = artifacts.require("openzeppelin-solidity/contracts/cryptography/ECDSA.sol");
const Math = artifacts.require("openzeppelin-solidity/contracts/math/Math.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ERC20 = artifacts.require("openzeppelin-solidity/contracts/token/ERC20/ERC20.sol");

contract("OnChainVoting",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractMath = null;
  let contractECDSA = null;
  let contractERC20 = null;
  let contractRedeemableToken = null;
  let contractPaymentTokenMock = null;
  let contractRedeemableTokenMock = null;
  let contractOffChainPayments = null;
  let contractPartialRedemption = null;
  let contractOnChainPayments = null;
  let contractFixedPriceTender = null;
  let contractFullRedemption = null;
  let contractOnChainVoting = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractMath = await Math.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Math.new({from: accounts[0]}');
    contractECDSA = await ECDSA.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ECDSA.new({from: accounts[0]}');
    ERC20.link("SafeMath",contractSafeMath.address);
    contractERC20 = await ERC20.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ERC20.new({from: accounts[0]}');
    RedeemableToken.link("SafeMath",contractSafeMath.address);
    contractRedeemableToken = await RedeemableToken.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableToken.new({from: accounts[0]}');
    contractPaymentTokenMock = await PaymentTokenMock.new(accounts[5],1,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PaymentTokenMock.new(accounts[5],1,{from:accounts[0]}');
    contractRedeemableTokenMock = await RedeemableTokenMock.new(accounts[7],10000,{from:accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableTokenMock.new(accounts[7],10000,{from:accounts[0]}');
    OffChainPayments.link("SafeMath",contractSafeMath.address);
     OffChainPayments.link("ECDSA",contractECDSA.address);
    contractOffChainPayments = await OffChainPayments.new(accounts[5],{from:accounts[0]});
    if(trace) console.log('SUCESSO: OffChainPayments.new(accounts[5],{from:accounts[0]}');
    PartialRedemption.link("SafeMath",contractSafeMath.address);
    contractPartialRedemption = await PartialRedemption.new(contractPaymentTokenMock.address,contractRedeemableToken.address,accounts[9],95,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PartialRedemption.new(contractPaymentTokenMock.address,contractRedeemableToken.address,accounts[9],95,{from:accounts[0]}');
    OnChainPayments.link("SafeMath",contractSafeMath.address);
     OnChainPayments.link("ECDSA",contractECDSA.address);
    contractOnChainPayments = await OnChainPayments.new(contractRedeemableTokenMock.address,contractPaymentTokenMock.address,accounts[6],{from:accounts[0]});
    if(trace) console.log('SUCESSO: OnChainPayments.new(contractRedeemableTokenMock.address,contractPaymentTokenMock.address,accounts[6],{from:accounts[0]}');
    FixedPriceTender.link("Math",contractMath.address);
     FixedPriceTender.link("SafeMath",contractSafeMath.address);
    contractFixedPriceTender = await FixedPriceTender.new(4,contractRedeemableToken.address,contractRedeemableTokenMock.address,accounts[9],2,0,{from:accounts[7]});
    if(trace) console.log('SUCESSO: FixedPriceTender.new(4,contractRedeemableToken.address,contractRedeemableTokenMock.address,accounts[9],2,0,{from:accounts[7]}');
    FullRedemption.link("SafeMath",contractSafeMath.address);
    contractFullRedemption = await FullRedemption.new(contractRedeemableToken.address,contractRedeemableToken.address,accounts[9],9999,{from:accounts[0]});
    if(trace) console.log('SUCESSO: FullRedemption.new(contractRedeemableToken.address,contractRedeemableToken.address,accounts[9],9999,{from:accounts[0]}');
    OnChainVoting.link("SafeMath",contractSafeMath.address);
    contractOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[9],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+282,{from:accounts[1]});
    if(trace) console.log('SUCESSO: OnChainVoting.new(contractRedeemableToken.address,accounts[9],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+282,{from:accounts[1]}');
  });
  
  it('Should execute placeVote(string) WHEN (await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp<endTime', async () => {
    let result = await contractOnChainVoting.placeVote("Example",{from: accounts[0]});
  });
  it('Should execute submitUserVotes(bytes32[],bytes32[]) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,_usersSaltHash.length==_usersVote.length,_usersSaltHash.length!=0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+587,{from:accounts[1]});
    let result = await localOnChainVoting.submitUserVotes([[39,129,194,116,14,204,39,234,86,89,14,127,57,255,15,25,20,144,113,47,206,233,127,185,90,219,231,164,3,206,249,207],[162,106,236,138,79,152,141,114,151,97,5,86,218,16,190,190,138,218,191,33,130,196,253,28,68,204,242,230,96,113,223,62],[237,72,243,18,181,45,58,133,62,210,239,195,123,112,116,53,193,113,173,200,91,182,217,161,202,227,199,61,225,184,247,179],[36,99,245,15,249,174,210,191,193,124,123,1,30,88,0,25,121,202,17,35,124,212,103,124,96,225,9,241,0,251,86,88],[112,81,207,86,210,67,140,55,199,31,76,114,165,193,30,124,232,0,237,230,106,23,50,207,48,216,211,217,20,163,2,150],[148,56,153,254,84,3,69,93,221,82,73,32,81,43,45,121,29,47,166,229,104,121,122,173,25,70,171,14,138,220,93,77],[250,200,199,174,145,197,157,181,25,97,112,72,188,94,64,129,125,208,154,250,175,254,26,240,18,40,204,150,181,220,125,98],[165,223,28,16,143,118,73,27,41,76,171,12,252,251,47,198,41,181,198,74,66,31,31,34,204,209,120,158,90,118,239,157],[154,247,76,168,207,248,58,144,25,89,223,76,139,105,59,112,104,40,246,209,149,225,115,18,195,15,188,34,236,136,192,166],[45,126,220,74,56,24,246,13,31,60,221,77,133,211,106,237,82,87,202,176,51,3,107,153,87,77,165,34,147,88,135,108],[236,206,3,20,194,224,77,65,115,217,177,131,52,180,18,124,225,184,75,100,144,15,187,109,33,30,231,77,199,200,52,195],[125,37,77,189,239,87,203,20,74,23,194,250,124,153,95,225,76,14,143,21,212,232,255,252,192,19,75,91,42,86,193,39],[198,126,107,192,41,221,252,96,186,75,223,79,139,239,87,42,90,156,9,149,229,144,46,177,154,162,51,118,117,49,187,65],[172,161,142,95,168,227,139,221,207,15,176,252,159,244,243,224,9,249,63,66,144,4,49,157,130,129,251,143,175,146,115,47],[231,72,255,11,37,171,216,162,177,241,63,93,236,248,236,252,138,92,140,169,172,156,179,196,180,10,45,53,191,203,176,96],[255,233,82,208,189,59,13,140,237,30,13,160,254,77,66,97,226,97,111,51,0,179,104,61,11,39,77,166,195,79,57,118],[122,178,186,98,20,196,189,48,126,233,189,99,193,169,0,95,40,202,188,223,54,20,12,100,245,228,171,143,152,85,205,97],[61,208,194,34,177,78,14,10,108,149,93,166,115,231,249,167,48,210,34,139,205,38,54,135,45,65,0,200,171,106,204,37],[150,246,93,160,20,200,218,253,201,38,152,8,206,103,134,26,201,200,0,244,190,193,217,230,5,68,248,226,130,24,149,184],[164,55,33,17,74,15,204,205,219,58,97,104,102,118,190,181,149,120,174,46,232,187,223,255,159,223,74,51,213,81,80,153],[254,47,186,163,242,50,201,29,73,73,149,163,249,132,110,226,6,11,169,21,26,54,84,2,205,112,91,251,31,248,69,240],[165,53,237,156,104,27,193,129,20,205,85,233,21,125,238,116,111,10,138,232,45,60,82,226,201,66,132,153,186,181,24,90],[240,92,169,241,110,117,213,189,2,88,122,168,175,251,36,89,29,148,183,61,165,13,161,153,130,121,246,220,186,94,89,25],[33,223,51,217,24,234,191,174,205,224,94,187,214,82,234,26,35,28,240,1,181,233,19,175,33,56,53,28,45,22,194,81],[26,121,146,242,68,160,183,239,203,233,98,9,22,65,72,144,84,82,121,220,151,107,2,144,32,83,131,187,108,9,175,86],[253,148,2,1,140,227,189,186,252,42,237,188,103,191,56,191,254,212,220,128,139,99,220,111,63,106,24,120,122,53,78,106],[125,177,96,110,117,222,147,1,189,172,237,195,193,51,11,91,176,59,96,115,225,188,225,25,17,55,87,10,155,8,65,62],[62,91,225,114,229,228,91,54,0,69,192,76,252,210,189,183,207,50,94,180,7,39,127,191,77,87,139,90,38,15,165,4],[105,162,189,131,209,209,174,205,135,104,75,58,69,149,254,254,50,177,137,2,38,162,166,221,114,217,141,192,153,170,87,116],[5,183,50,175,96,112,90,31,32,123,243,66,39,211,64,118,212,159,82,135,196,201,63,172,122,232,251,151,175,166,110,235],[99,53,245,228,124,197,72,12,198,83,168,121,117,22,126,189,80,237,52,144,239,186,88,211,170,99,65,21,190,131,254,145],[40,0,247,87,194,239,199,216,204,133,16,34,228,170,116,38,236,211,173,100,12,231,124,233,180,112,14,131,105,93,61,94],[173,54,189,6,46,78,237,11,226,181,149,57,255,44,37,88,51,255,120,20,115,181,150,26,17,206,188,36,67,126,162,39],[18,205,134,115,253,252,215,29,223,77,102,238,4,73,30,89,25,40,79,168,232,116,98,198,225,31,151,91,236,122,59,87],[109,255,188,216,180,178,55,56,28,20,43,129,169,50,170,252,204,171,248,251,56,169,234,220,167,59,124,50,23,128,62,188],[114,77,225,128,127,47,198,48,75,195,35,210,5,147,98,27,209,235,129,141,2,28,112,213,84,184,10,89,249,252,126,25],[82,136,106,143,123,2,79,230,155,180,195,242,28,219,234,44,79,222,182,181,63,128,79,198,223,228,19,110,200,119,70,120],[111,82,241,142,46,17,28,174,209,127,45,22,253,187,184,167,7,74,245,9,176,240,124,193,235,44,225,211,207,138,89,213],[119,225,196,156,116,6,187,204,150,46,93,226,190,72,120,58,83,58,132,126,74,236,192,147,51,9,108,84,31,10,170,198],[82,175,100,79,63,244,237,228,116,88,248,78,63,233,111,77,249,183,142,0,59,245,218,116,131,124,43,212,42,41,87,225],[254,135,124,166,103,233,105,76,214,98,134,30,197,76,49,34,15,92,155,145,216,205,36,160,87,82,209,155,198,21,8,23],[232,151,83,32,193,220,114,219,61,161,230,47,148,203,233,26,81,108,160,97,209,111,190,203,48,241,180,17,57,122,198,89],[163,28,39,243,117,187,166,49,171,141,142,207,36,158,46,118,145,225,185,60,202,111,117,138,186,191,64,56,59,192,41,127],[62,123,74,16,225,93,255,100,187,35,65,92,5,214,188,236,5,217,17,233,7,124,172,105,73,125,96,244,3,188,86,209],[170,70,161,182,122,70,3,166,219,190,214,33,226,222,105,196,196,227,135,190,188,219,178,254,200,94,87,93,249,210,22,216],[197,118,207,172,101,9,74,163,112,15,18,191,99,91,139,138,164,79,250,89,34,58,49,185,80,67,36,243,19,190,144,150],[184,124,121,154,147,220,36,101,229,19,71,66,97,19,101,144,223,165,123,95,222,236,242,244,77,228,64,159,167,29,217,239],[226,231,75,213,149,27,63,14,218,152,103,231,76,128,44,38,19,129,237,99,225,18,211,149,132,49,210,145,198,91,39,241],[206,142,148,96,38,138,112,46,246,48,180,43,230,81,121,121,46,20,188,42,94,238,253,199,89,104,110,30,38,189,79,8],[252,178,116,226,101,25,212,34,141,70,20,119,223,153,55,195,243,223,143,34,121,221,223,239,97,148,100,239,11,220,38,134],[66,124,4,185,129,219,189,252,23,170,70,253,177,189,254,167,103,119,98,245,177,236,133,40,84,151,219,120,117,149,198,198],[164,95,172,124,151,172,123,188,2,173,23,219,143,11,6,20,59,93,39,7,207,250,101,152,133,83,236,112,228,8,73,114],[200,132,195,196,78,206,158,69,75,137,21,171,12,151,17,92,96,246,58,9,106,137,107,134,142,225,148,69,196,155,227,89],[154,206,11,41,12,54,250,44,203,155,89,191,231,184,10,237,136,195,188,158,27,38,79,173,57,153,106,157,51,200,136,59],[84,57,71,101,175,45,108,110,40,11,185,216,44,116,123,176,110,83,245,183,42,50,120,140,33,202,146,221,128,197,176,191],[204,173,63,55,115,53,130,142,121,80,231,131,126,174,51,254,209,53,33,15,20,149,218,54,19,32,239,55,214,42,236,60],[123,98,202,161,196,181,86,117,99,54,2,250,112,200,180,111,175,95,250,90,230,185,186,93,241,105,4,147,129,138,249,44],[61,178,223,83,12,120,108,92,60,88,149,236,215,140,209,68,201,46,23,102,191,137,23,38,203,221,245,65,230,113,76,78],[255,69,159,142,40,168,143,6,224,244,135,228,5,192,220,238,239,32,207,141,88,203,199,7,171,60,118,175,237,135,176,9],[25,230,140,56,72,158,101,69,100,46,22,204,49,111,197,226,160,255,18,197,139,136,193,80,121,68,198,128,235,102,228,118],[61,118,152,6,134,252,145,235,202,31,70,246,68,151,176,199,243,120,75,190,52,105,50,220,4,203,247,87,224,116,213,229],[232,17,144,62,158,248,161,75,167,71,244,26,227,1,63,122,114,134,201,30,31,190,169,12,55,100,20,164,38,172,108,126],[122,215,233,233,46,223,218,119,15,158,65,34,191,102,121,21,173,0,56,149,29,214,94,194,128,3,201,176,115,157,86,96],[150,176,179,80,163,32,128,168,185,157,205,225,180,208,177,185,128,38,184,120,98,222,125,118,51,151,190,62,210,87,29,214]], [[75,174,6,187,186,228,6,76,113,92,155,147,93,233,173,199,135,18,119,54,111,206,200,119,16,208,27,173,140,204,89,51],[125,157,90,138,21,30,71,254,178,108,104,234,66,139,198,144,151,105,80,154,183,56,134,4,221,168,36,248,116,50,166,50],[233,250,15,144,70,80,230,35,210,222,156,176,159,254,242,153,108,184,68,174,237,29,141,215,16,126,52,241,83,69,48,117],[151,113,135,79,130,131,252,75,236,154,64,168,209,118,221,215,180,149,119,64,206,68,71,173,198,126,171,229,221,79,111,80],[126,51,131,208,223,45,96,132,60,141,45,16,220,132,204,104,24,149,162,156,174,93,92,175,136,29,181,233,24,111,23,34],[182,175,44,98,53,10,101,142,74,80,40,137,198,26,123,197,70,198,145,35,41,87,46,14,127,51,53,198,103,107,185,193],[45,84,109,133,216,111,216,63,202,222,242,58,155,206,21,40,39,188,158,15,15,235,105,4,140,131,52,196,192,52,204,158],[77,181,145,195,102,48,178,16,231,2,165,38,193,211,89,239,254,93,69,254,192,199,111,230,133,135,69,240,136,71,46,186],[65,179,33,128,125,13,131,194,246,224,153,143,151,95,229,132,242,123,214,172,130,36,86,21,64,70,195,44,174,15,132,32],[243,145,246,193,246,45,153,254,51,197,90,135,211,25,104,49,208,24,82,148,200,199,17,157,253,81,95,11,92,230,173,80],[155,149,143,140,245,103,240,117,96,190,104,142,248,218,46,150,7,186,41,244,5,199,220,4,240,77,3,110,163,79,78,215],[82,12,248,192,242,54,174,208,63,177,34,108,218,21,132,154,213,65,18,209,97,26,238,150,26,75,167,209,181,165,21,4],[157,149,207,168,254,89,88,103,224,174,175,163,25,194,198,39,151,23,136,59,142,106,186,219,239,59,214,81,50,110,57,155],[46,11,118,240,10,48,48,28,243,183,237,185,228,170,193,58,218,10,59,233,90,53,42,75,189,16,152,107,151,14,102,8],[3,79,139,4,160,51,200,95,189,59,239,71,104,148,42,21,174,73,220,140,168,175,157,236,30,109,77,89,52,202,42,56],[203,195,215,36,5,200,13,111,107,160,159,31,2,28,127,233,238,247,230,240,120,144,30,252,183,24,243,252,223,94,180,23],[212,128,13,167,81,120,43,50,32,95,178,121,230,213,197,132,214,137,184,152,96,162,143,230,244,87,63,105,223,76,158,87],[201,28,23,219,83,69,65,187,5,97,154,133,197,102,192,199,186,129,246,25,240,28,175,121,127,153,8,238,6,76,111,80],[144,213,164,5,231,149,242,198,219,49,147,178,100,10,142,121,100,52,250,240,26,33,194,14,10,120,245,77,146,74,28,187],[192,57,6,30,203,118,54,115,31,24,47,19,133,160,46,233,123,27,173,254,126,102,30,179,97,250,47,23,138,33,248,41],[27,68,151,8,184,140,129,65,89,251,5,213,128,123,178,166,18,154,179,202,12,65,207,100,13,109,141,20,254,10,169,52],[192,84,136,182,53,190,186,239,145,210,182,204,42,62,241,172,173,66,165,204,184,166,144,233,91,1,26,178,136,25,10,96],[10,19,69,118,105,141,51,157,132,41,71,140,117,134,190,75,143,153,154,36,208,194,98,172,248,181,237,48,87,10,5,39],[13,173,51,233,187,81,155,5,132,2,16,56,39,208,4,155,65,45,199,163,198,173,217,3,13,133,76,107,90,247,111,36],[6,201,0,141,77,105,222,65,133,223,210,149,152,208,215,192,179,21,6,57,79,13,75,159,189,100,38,160,152,6,137,56],[88,81,191,241,230,199,161,57,102,159,191,189,85,216,113,104,255,148,26,155,221,242,223,182,30,239,135,32,100,70,146,234],[228,226,93,175,114,239,120,44,143,138,148,144,93,74,178,77,199,161,246,185,46,155,137,14,34,193,120,193,58,153,30,25],[66,56,96,148,131,51,165,210,214,231,167,160,235,5,220,129,6,178,224,82,184,169,57,34,196,98,205,48,12,55,0,225],[149,241,143,50,206,203,47,217,134,184,90,178,163,121,51,172,177,80,97,204,145,103,107,163,200,24,127,251,93,233,190,141],[249,21,45,156,148,252,75,125,9,183,234,140,10,60,160,231,252,232,18,124,155,137,216,191,109,71,5,77,124,189,255,184],[133,92,16,131,168,96,175,153,68,65,149,48,146,68,16,185,44,190,67,13,14,109,233,225,153,100,136,215,142,120,163,4],[16,13,67,181,87,99,246,89,184,87,37,239,238,68,248,173,83,151,87,253,231,13,143,38,91,149,169,117,197,207,57,31],[0,112,244,97,179,43,228,116,11,233,4,111,18,26,190,142,201,60,218,247,178,163,118,203,126,39,121,187,196,86,60,228],[171,148,156,142,156,212,102,225,6,27,105,255,146,197,226,221,46,26,61,102,83,171,235,150,129,97,69,168,76,255,12,134],[214,239,106,229,76,242,63,133,19,150,160,200,158,175,162,166,100,5,206,52,157,6,117,124,134,156,59,75,252,113,161,137],[62,38,56,174,5,184,4,243,255,152,251,52,244,52,123,124,38,60,216,218,4,227,192,104,49,105,211,100,70,247,84,198],[98,151,88,118,159,247,19,104,223,166,242,172,186,1,215,89,50,238,66,66,204,162,93,150,20,124,203,245,25,39,185,41],[202,221,107,239,211,171,82,95,172,74,69,117,85,133,222,152,199,92,145,246,135,171,187,193,69,180,46,27,175,72,171,67],[144,160,203,212,18,214,53,252,49,209,66,124,68,221,205,110,70,232,67,216,45,126,38,243,222,166,96,37,108,12,245,22],[38,36,80,102,241,140,223,146,170,95,52,221,252,206,39,46,174,146,236,90,116,191,19,173,80,0,61,117,26,62,255,146],[124,147,245,142,163,127,123,10,246,24,78,0,174,24,203,253,249,182,139,124,179,9,55,243,94,177,145,173,114,151,77,195],[222,106,122,105,201,45,212,114,45,164,55,26,223,65,193,223,0,116,123,8,6,195,149,187,29,79,74,207,205,156,20,27],[190,129,134,64,120,108,183,136,127,30,163,68,98,38,54,149,145,97,149,191,162,115,135,133,165,187,241,11,165,234,105,134],[45,150,116,231,206,183,30,168,209,88,68,190,173,70,27,82,62,27,193,217,98,214,144,124,224,93,76,154,66,97,102,103],[28,152,234,11,98,200,118,125,154,152,147,238,123,203,225,245,201,113,113,37,51,31,132,11,203,170,136,249,116,242,134,136],[239,75,243,83,24,166,118,99,150,156,161,11,85,232,86,127,45,140,212,52,48,189,25,172,238,140,66,201,129,75,130,81],[163,115,209,160,205,161,234,47,49,192,240,123,96,188,203,20,235,252,61,71,128,67,208,145,20,97,156,181,225,139,1,159],[168,202,254,204,174,208,81,139,130,142,250,190,99,107,87,77,228,91,77,102,95,60,214,161,13,236,183,50,80,93,84,247],[213,127,249,198,38,201,94,239,73,134,93,73,134,98,62,195,220,239,138,131,86,30,250,91,227,121,195,218,34,77,28,231],[191,168,44,154,220,117,127,67,124,59,116,152,80,199,0,95,98,18,123,248,79,141,163,210,44,2,126,70,113,135,2,10],[33,116,82,231,70,99,127,193,58,190,71,86,247,73,198,165,26,57,62,117,184,189,53,207,108,250,58,209,123,157,225,216],[112,9,212,80,95,11,79,12,98,124,158,196,231,229,81,168,240,0,70,235,99,81,35,225,38,49,115,228,161,207,63,5],[137,173,241,244,253,98,38,55,136,32,156,153,22,129,114,76,109,193,53,24,231,241,39,186,101,34,73,165,209,120,34,176],[9,6,251,239,115,31,124,140,227,34,30,241,32,57,33,111,175,54,26,125,140,14,4,154,226,164,150,15,115,161,231,113],[119,38,145,215,82,182,194,53,124,83,122,28,48,188,165,236,182,28,86,232,183,141,178,44,205,8,171,35,239,118,93,161],[99,212,67,26,232,10,255,45,198,33,148,127,173,189,216,34,203,237,89,17,148,77,173,221,156,112,101,194,171,129,173,0],[147,147,32,116,56,236,15,243,37,95,4,211,92,63,139,174,210,35,48,242,157,209,208,91,16,165,109,70,40,14,121,157],[168,184,47,17,58,233,11,49,255,87,204,86,28,103,106,31,78,32,223,173,73,86,250,33,31,190,213,81,41,112,47,5],[161,211,247,102,176,176,185,209,6,158,2,197,0,52,171,212,140,149,249,226,188,95,211,157,211,78,138,236,182,75,63,196],[252,13,32,7,131,212,116,71,190,127,137,175,50,111,116,76,224,178,123,186,249,76,36,172,234,44,167,16,150,4,71,166],[212,162,135,101,242,203,169,159,43,47,166,71,205,54,124,145,138,50,103,4,49,150,241,90,146,117,14,87,171,203,167,97],[140,60,68,32,141,67,48,120,71,194,6,27,231,162,176,128,101,13,122,31,32,139,46,227,161,197,149,162,157,3,151,47],[252,255,185,48,230,196,45,94,135,232,179,213,195,210,234,149,36,83,248,160,43,8,117,109,178,124,173,141,210,42,226,138],[169,244,93,167,117,129,250,64,222,2,76,179,28,85,228,229,50,76,148,11,70,34,75,105,152,196,233,213,68,91,244,157]],{from: accounts[1]});
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+587,{from:accounts[1]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[39,129,194,116,14,204,39,234,86,89,14,127,57,255,15,25,20,144,113,47,206,233,127,185,90,219,231,164,3,206,249,207],[162,106,236,138,79,152,141,114,151,97,5,86,218,16,190,190,138,218,191,33,130,196,253,28,68,204,242,230,96,113,223,62],[237,72,243,18,181,45,58,133,62,210,239,195,123,112,116,53,193,113,173,200,91,182,217,161,202,227,199,61,225,184,247,179],[36,99,245,15,249,174,210,191,193,124,123,1,30,88,0,25,121,202,17,35,124,212,103,124,96,225,9,241,0,251,86,88],[112,81,207,86,210,67,140,55,199,31,76,114,165,193,30,124,232,0,237,230,106,23,50,207,48,216,211,217,20,163,2,150],[148,56,153,254,84,3,69,93,221,82,73,32,81,43,45,121,29,47,166,229,104,121,122,173,25,70,171,14,138,220,93,77],[250,200,199,174,145,197,157,181,25,97,112,72,188,94,64,129,125,208,154,250,175,254,26,240,18,40,204,150,181,220,125,98],[165,223,28,16,143,118,73,27,41,76,171,12,252,251,47,198,41,181,198,74,66,31,31,34,204,209,120,158,90,118,239,157],[154,247,76,168,207,248,58,144,25,89,223,76,139,105,59,112,104,40,246,209,149,225,115,18,195,15,188,34,236,136,192,166],[45,126,220,74,56,24,246,13,31,60,221,77,133,211,106,237,82,87,202,176,51,3,107,153,87,77,165,34,147,88,135,108],[236,206,3,20,194,224,77,65,115,217,177,131,52,180,18,124,225,184,75,100,144,15,187,109,33,30,231,77,199,200,52,195],[125,37,77,189,239,87,203,20,74,23,194,250,124,153,95,225,76,14,143,21,212,232,255,252,192,19,75,91,42,86,193,39],[198,126,107,192,41,221,252,96,186,75,223,79,139,239,87,42,90,156,9,149,229,144,46,177,154,162,51,118,117,49,187,65],[172,161,142,95,168,227,139,221,207,15,176,252,159,244,243,224,9,249,63,66,144,4,49,157,130,129,251,143,175,146,115,47],[231,72,255,11,37,171,216,162,177,241,63,93,236,248,236,252,138,92,140,169,172,156,179,196,180,10,45,53,191,203,176,96],[255,233,82,208,189,59,13,140,237,30,13,160,254,77,66,97,226,97,111,51,0,179,104,61,11,39,77,166,195,79,57,118],[122,178,186,98,20,196,189,48,126,233,189,99,193,169,0,95,40,202,188,223,54,20,12,100,245,228,171,143,152,85,205,97],[61,208,194,34,177,78,14,10,108,149,93,166,115,231,249,167,48,210,34,139,205,38,54,135,45,65,0,200,171,106,204,37],[150,246,93,160,20,200,218,253,201,38,152,8,206,103,134,26,201,200,0,244,190,193,217,230,5,68,248,226,130,24,149,184],[164,55,33,17,74,15,204,205,219,58,97,104,102,118,190,181,149,120,174,46,232,187,223,255,159,223,74,51,213,81,80,153],[254,47,186,163,242,50,201,29,73,73,149,163,249,132,110,226,6,11,169,21,26,54,84,2,205,112,91,251,31,248,69,240],[165,53,237,156,104,27,193,129,20,205,85,233,21,125,238,116,111,10,138,232,45,60,82,226,201,66,132,153,186,181,24,90],[240,92,169,241,110,117,213,189,2,88,122,168,175,251,36,89,29,148,183,61,165,13,161,153,130,121,246,220,186,94,89,25],[33,223,51,217,24,234,191,174,205,224,94,187,214,82,234,26,35,28,240,1,181,233,19,175,33,56,53,28,45,22,194,81],[26,121,146,242,68,160,183,239,203,233,98,9,22,65,72,144,84,82,121,220,151,107,2,144,32,83,131,187,108,9,175,86],[253,148,2,1,140,227,189,186,252,42,237,188,103,191,56,191,254,212,220,128,139,99,220,111,63,106,24,120,122,53,78,106],[125,177,96,110,117,222,147,1,189,172,237,195,193,51,11,91,176,59,96,115,225,188,225,25,17,55,87,10,155,8,65,62],[62,91,225,114,229,228,91,54,0,69,192,76,252,210,189,183,207,50,94,180,7,39,127,191,77,87,139,90,38,15,165,4],[105,162,189,131,209,209,174,205,135,104,75,58,69,149,254,254,50,177,137,2,38,162,166,221,114,217,141,192,153,170,87,116],[5,183,50,175,96,112,90,31,32,123,243,66,39,211,64,118,212,159,82,135,196,201,63,172,122,232,251,151,175,166,110,235],[99,53,245,228,124,197,72,12,198,83,168,121,117,22,126,189,80,237,52,144,239,186,88,211,170,99,65,21,190,131,254,145],[40,0,247,87,194,239,199,216,204,133,16,34,228,170,116,38,236,211,173,100,12,231,124,233,180,112,14,131,105,93,61,94],[173,54,189,6,46,78,237,11,226,181,149,57,255,44,37,88,51,255,120,20,115,181,150,26,17,206,188,36,67,126,162,39],[18,205,134,115,253,252,215,29,223,77,102,238,4,73,30,89,25,40,79,168,232,116,98,198,225,31,151,91,236,122,59,87],[109,255,188,216,180,178,55,56,28,20,43,129,169,50,170,252,204,171,248,251,56,169,234,220,167,59,124,50,23,128,62,188],[114,77,225,128,127,47,198,48,75,195,35,210,5,147,98,27,209,235,129,141,2,28,112,213,84,184,10,89,249,252,126,25],[82,136,106,143,123,2,79,230,155,180,195,242,28,219,234,44,79,222,182,181,63,128,79,198,223,228,19,110,200,119,70,120],[111,82,241,142,46,17,28,174,209,127,45,22,253,187,184,167,7,74,245,9,176,240,124,193,235,44,225,211,207,138,89,213],[119,225,196,156,116,6,187,204,150,46,93,226,190,72,120,58,83,58,132,126,74,236,192,147,51,9,108,84,31,10,170,198],[82,175,100,79,63,244,237,228,116,88,248,78,63,233,111,77,249,183,142,0,59,245,218,116,131,124,43,212,42,41,87,225],[254,135,124,166,103,233,105,76,214,98,134,30,197,76,49,34,15,92,155,145,216,205,36,160,87,82,209,155,198,21,8,23],[232,151,83,32,193,220,114,219,61,161,230,47,148,203,233,26,81,108,160,97,209,111,190,203,48,241,180,17,57,122,198,89],[163,28,39,243,117,187,166,49,171,141,142,207,36,158,46,118,145,225,185,60,202,111,117,138,186,191,64,56,59,192,41,127],[62,123,74,16,225,93,255,100,187,35,65,92,5,214,188,236,5,217,17,233,7,124,172,105,73,125,96,244,3,188,86,209],[170,70,161,182,122,70,3,166,219,190,214,33,226,222,105,196,196,227,135,190,188,219,178,254,200,94,87,93,249,210,22,216],[197,118,207,172,101,9,74,163,112,15,18,191,99,91,139,138,164,79,250,89,34,58,49,185,80,67,36,243,19,190,144,150],[184,124,121,154,147,220,36,101,229,19,71,66,97,19,101,144,223,165,123,95,222,236,242,244,77,228,64,159,167,29,217,239],[226,231,75,213,149,27,63,14,218,152,103,231,76,128,44,38,19,129,237,99,225,18,211,149,132,49,210,145,198,91,39,241],[206,142,148,96,38,138,112,46,246,48,180,43,230,81,121,121,46,20,188,42,94,238,253,199,89,104,110,30,38,189,79,8],[252,178,116,226,101,25,212,34,141,70,20,119,223,153,55,195,243,223,143,34,121,221,223,239,97,148,100,239,11,220,38,134],[66,124,4,185,129,219,189,252,23,170,70,253,177,189,254,167,103,119,98,245,177,236,133,40,84,151,219,120,117,149,198,198],[164,95,172,124,151,172,123,188,2,173,23,219,143,11,6,20,59,93,39,7,207,250,101,152,133,83,236,112,228,8,73,114],[200,132,195,196,78,206,158,69,75,137,21,171,12,151,17,92,96,246,58,9,106,137,107,134,142,225,148,69,196,155,227,89],[154,206,11,41,12,54,250,44,203,155,89,191,231,184,10,237,136,195,188,158,27,38,79,173,57,153,106,157,51,200,136,59],[84,57,71,101,175,45,108,110,40,11,185,216,44,116,123,176,110,83,245,183,42,50,120,140,33,202,146,221,128,197,176,191],[204,173,63,55,115,53,130,142,121,80,231,131,126,174,51,254,209,53,33,15,20,149,218,54,19,32,239,55,214,42,236,60],[123,98,202,161,196,181,86,117,99,54,2,250,112,200,180,111,175,95,250,90,230,185,186,93,241,105,4,147,129,138,249,44],[61,178,223,83,12,120,108,92,60,88,149,236,215,140,209,68,201,46,23,102,191,137,23,38,203,221,245,65,230,113,76,78],[255,69,159,142,40,168,143,6,224,244,135,228,5,192,220,238,239,32,207,141,88,203,199,7,171,60,118,175,237,135,176,9],[25,230,140,56,72,158,101,69,100,46,22,204,49,111,197,226,160,255,18,197,139,136,193,80,121,68,198,128,235,102,228,118],[61,118,152,6,134,252,145,235,202,31,70,246,68,151,176,199,243,120,75,190,52,105,50,220,4,203,247,87,224,116,213,229],[232,17,144,62,158,248,161,75,167,71,244,26,227,1,63,122,114,134,201,30,31,190,169,12,55,100,20,164,38,172,108,126],[122,215,233,233,46,223,218,119,15,158,65,34,191,102,121,21,173,0,56,149,29,214,94,194,128,3,201,176,115,157,86,96],[150,176,179,80,163,32,128,168,185,157,205,225,180,208,177,185,128,38,184,120,98,222,125,118,51,151,190,62,210,87,29,214]], [[75,174,6,187,186,228,6,76,113,92,155,147,93,233,173,199,135,18,119,54,111,206,200,119,16,208,27,173,140,204,89,51],[125,157,90,138,21,30,71,254,178,108,104,234,66,139,198,144,151,105,80,154,183,56,134,4,221,168,36,248,116,50,166,50],[233,250,15,144,70,80,230,35,210,222,156,176,159,254,242,153,108,184,68,174,237,29,141,215,16,126,52,241,83,69,48,117],[151,113,135,79,130,131,252,75,236,154,64,168,209,118,221,215,180,149,119,64,206,68,71,173,198,126,171,229,221,79,111,80],[126,51,131,208,223,45,96,132,60,141,45,16,220,132,204,104,24,149,162,156,174,93,92,175,136,29,181,233,24,111,23,34],[182,175,44,98,53,10,101,142,74,80,40,137,198,26,123,197,70,198,145,35,41,87,46,14,127,51,53,198,103,107,185,193],[45,84,109,133,216,111,216,63,202,222,242,58,155,206,21,40,39,188,158,15,15,235,105,4,140,131,52,196,192,52,204,158],[77,181,145,195,102,48,178,16,231,2,165,38,193,211,89,239,254,93,69,254,192,199,111,230,133,135,69,240,136,71,46,186],[65,179,33,128,125,13,131,194,246,224,153,143,151,95,229,132,242,123,214,172,130,36,86,21,64,70,195,44,174,15,132,32],[243,145,246,193,246,45,153,254,51,197,90,135,211,25,104,49,208,24,82,148,200,199,17,157,253,81,95,11,92,230,173,80],[155,149,143,140,245,103,240,117,96,190,104,142,248,218,46,150,7,186,41,244,5,199,220,4,240,77,3,110,163,79,78,215],[82,12,248,192,242,54,174,208,63,177,34,108,218,21,132,154,213,65,18,209,97,26,238,150,26,75,167,209,181,165,21,4],[157,149,207,168,254,89,88,103,224,174,175,163,25,194,198,39,151,23,136,59,142,106,186,219,239,59,214,81,50,110,57,155],[46,11,118,240,10,48,48,28,243,183,237,185,228,170,193,58,218,10,59,233,90,53,42,75,189,16,152,107,151,14,102,8],[3,79,139,4,160,51,200,95,189,59,239,71,104,148,42,21,174,73,220,140,168,175,157,236,30,109,77,89,52,202,42,56],[203,195,215,36,5,200,13,111,107,160,159,31,2,28,127,233,238,247,230,240,120,144,30,252,183,24,243,252,223,94,180,23],[212,128,13,167,81,120,43,50,32,95,178,121,230,213,197,132,214,137,184,152,96,162,143,230,244,87,63,105,223,76,158,87],[201,28,23,219,83,69,65,187,5,97,154,133,197,102,192,199,186,129,246,25,240,28,175,121,127,153,8,238,6,76,111,80],[144,213,164,5,231,149,242,198,219,49,147,178,100,10,142,121,100,52,250,240,26,33,194,14,10,120,245,77,146,74,28,187],[192,57,6,30,203,118,54,115,31,24,47,19,133,160,46,233,123,27,173,254,126,102,30,179,97,250,47,23,138,33,248,41],[27,68,151,8,184,140,129,65,89,251,5,213,128,123,178,166,18,154,179,202,12,65,207,100,13,109,141,20,254,10,169,52],[192,84,136,182,53,190,186,239,145,210,182,204,42,62,241,172,173,66,165,204,184,166,144,233,91,1,26,178,136,25,10,96],[10,19,69,118,105,141,51,157,132,41,71,140,117,134,190,75,143,153,154,36,208,194,98,172,248,181,237,48,87,10,5,39],[13,173,51,233,187,81,155,5,132,2,16,56,39,208,4,155,65,45,199,163,198,173,217,3,13,133,76,107,90,247,111,36],[6,201,0,141,77,105,222,65,133,223,210,149,152,208,215,192,179,21,6,57,79,13,75,159,189,100,38,160,152,6,137,56],[88,81,191,241,230,199,161,57,102,159,191,189,85,216,113,104,255,148,26,155,221,242,223,182,30,239,135,32,100,70,146,234],[228,226,93,175,114,239,120,44,143,138,148,144,93,74,178,77,199,161,246,185,46,155,137,14,34,193,120,193,58,153,30,25],[66,56,96,148,131,51,165,210,214,231,167,160,235,5,220,129,6,178,224,82,184,169,57,34,196,98,205,48,12,55,0,225],[149,241,143,50,206,203,47,217,134,184,90,178,163,121,51,172,177,80,97,204,145,103,107,163,200,24,127,251,93,233,190,141],[249,21,45,156,148,252,75,125,9,183,234,140,10,60,160,231,252,232,18,124,155,137,216,191,109,71,5,77,124,189,255,184],[133,92,16,131,168,96,175,153,68,65,149,48,146,68,16,185,44,190,67,13,14,109,233,225,153,100,136,215,142,120,163,4],[16,13,67,181,87,99,246,89,184,87,37,239,238,68,248,173,83,151,87,253,231,13,143,38,91,149,169,117,197,207,57,31],[0,112,244,97,179,43,228,116,11,233,4,111,18,26,190,142,201,60,218,247,178,163,118,203,126,39,121,187,196,86,60,228],[171,148,156,142,156,212,102,225,6,27,105,255,146,197,226,221,46,26,61,102,83,171,235,150,129,97,69,168,76,255,12,134],[214,239,106,229,76,242,63,133,19,150,160,200,158,175,162,166,100,5,206,52,157,6,117,124,134,156,59,75,252,113,161,137],[62,38,56,174,5,184,4,243,255,152,251,52,244,52,123,124,38,60,216,218,4,227,192,104,49,105,211,100,70,247,84,198],[98,151,88,118,159,247,19,104,223,166,242,172,186,1,215,89,50,238,66,66,204,162,93,150,20,124,203,245,25,39,185,41],[202,221,107,239,211,171,82,95,172,74,69,117,85,133,222,152,199,92,145,246,135,171,187,193,69,180,46,27,175,72,171,67],[144,160,203,212,18,214,53,252,49,209,66,124,68,221,205,110,70,232,67,216,45,126,38,243,222,166,96,37,108,12,245,22],[38,36,80,102,241,140,223,146,170,95,52,221,252,206,39,46,174,146,236,90,116,191,19,173,80,0,61,117,26,62,255,146],[124,147,245,142,163,127,123,10,246,24,78,0,174,24,203,253,249,182,139,124,179,9,55,243,94,177,145,173,114,151,77,195],[222,106,122,105,201,45,212,114,45,164,55,26,223,65,193,223,0,116,123,8,6,195,149,187,29,79,74,207,205,156,20,27],[190,129,134,64,120,108,183,136,127,30,163,68,98,38,54,149,145,97,149,191,162,115,135,133,165,187,241,11,165,234,105,134],[45,150,116,231,206,183,30,168,209,88,68,190,173,70,27,82,62,27,193,217,98,214,144,124,224,93,76,154,66,97,102,103],[28,152,234,11,98,200,118,125,154,152,147,238,123,203,225,245,201,113,113,37,51,31,132,11,203,170,136,249,116,242,134,136],[239,75,243,83,24,166,118,99,150,156,161,11,85,232,86,127,45,140,212,52,48,189,25,172,238,140,66,201,129,75,130,81],[163,115,209,160,205,161,234,47,49,192,240,123,96,188,203,20,235,252,61,71,128,67,208,145,20,97,156,181,225,139,1,159],[168,202,254,204,174,208,81,139,130,142,250,190,99,107,87,77,228,91,77,102,95,60,214,161,13,236,183,50,80,93,84,247],[213,127,249,198,38,201,94,239,73,134,93,73,134,98,62,195,220,239,138,131,86,30,250,91,227,121,195,218,34,77,28,231],[191,168,44,154,220,117,127,67,124,59,116,152,80,199,0,95,98,18,123,248,79,141,163,210,44,2,126,70,113,135,2,10],[33,116,82,231,70,99,127,193,58,190,71,86,247,73,198,165,26,57,62,117,184,189,53,207,108,250,58,209,123,157,225,216],[112,9,212,80,95,11,79,12,98,124,158,196,231,229,81,168,240,0,70,235,99,81,35,225,38,49,115,228,161,207,63,5],[137,173,241,244,253,98,38,55,136,32,156,153,22,129,114,76,109,193,53,24,231,241,39,186,101,34,73,165,209,120,34,176],[9,6,251,239,115,31,124,140,227,34,30,241,32,57,33,111,175,54,26,125,140,14,4,154,226,164,150,15,115,161,231,113],[119,38,145,215,82,182,194,53,124,83,122,28,48,188,165,236,182,28,86,232,183,141,178,44,205,8,171,35,239,118,93,161],[99,212,67,26,232,10,255,45,198,33,148,127,173,189,216,34,203,237,89,17,148,77,173,221,156,112,101,194,171,129,173,0],[147,147,32,116,56,236,15,243,37,95,4,211,92,63,139,174,210,35,48,242,157,209,208,91,16,165,109,70,40,14,121,157],[168,184,47,17,58,233,11,49,255,87,204,86,28,103,106,31,78,32,223,173,73,86,250,33,31,190,213,81,41,112,47,5],[161,211,247,102,176,176,185,209,6,158,2,197,0,52,171,212,140,149,249,226,188,95,211,157,211,78,138,236,182,75,63,196],[252,13,32,7,131,212,116,71,190,127,137,175,50,111,116,76,224,178,123,186,249,76,36,172,234,44,167,16,150,4,71,166],[212,162,135,101,242,203,169,159,43,47,166,71,205,54,124,145,138,50,103,4,49,150,241,90,146,117,14,87,171,203,167,97],[140,60,68,32,141,67,48,120,71,194,6,27,231,162,176,128,101,13,122,31,32,139,46,227,161,197,149,162,157,3,151,47],[252,255,185,48,230,196,45,94,135,232,179,213,195,210,234,149,36,83,248,160,43,8,117,109,178,124,173,141,210,42,226,138],[169,244,93,167,117,129,250,64,222,2,76,179,28,85,228,229,50,76,148,11,70,34,75,105,152,196,233,213,68,91,244,157]],{from: accounts[9]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length == _usersVote.length', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+587,{from:accounts[1]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[93,146,233,101,75,128,253,248,61,146,121,135,181,136,60,6,126,174,133,242,25,167,145,162,225,60,2,9,66,65,115,37],[54,17,94,79,235,115,82,139,124,38,184,190,123,101,105,22,158,222,233,224,7,15,138,21,200,239,18,146,0,99,26,217],[70,224,162,158,106,96,242,73,191,238,227,164,95,217,137,0,121,210,195,76,51,16,38,71,206,1,232,235,205,203,58,134],[117,248,62,224,250,37,223,42,245,255,117,240,129,153,29,167,50,245,25,156,218,86,1,56,96,60,5,219,119,182,247,166],[191,212,51,113,201,14,159,47,116,187,252,126,124,230,195,70,231,78,232,154,75,129,74,135,100,29,115,206,174,19,243,39],[125,149,113,21,52,232,224,209,32,33,251,9,117,54,5,99,217,54,177,179,41,150,21,51,45,118,149,88,69,212,9,129],[79,231,77,47,250,21,71,197,253,139,168,152,146,67,51,87,131,160,11,117,26,160,229,208,12,43,11,12,216,133,173,188],[84,223,176,74,98,5,11,54,195,64,212,116,48,34,0,212,110,35,253,1,181,200,184,143,172,121,233,44,78,246,29,174],[100,108,101,38,103,229,86,122,190,184,132,80,114,224,188,130,252,152,62,33,35,138,198,98,251,59,191,255,241,248,5,27],[113,9,58,232,62,3,86,31,159,90,115,230,137,50,59,179,81,204,165,179,149,220,66,70,131,36,229,37,40,108,14,249],[26,98,82,207,27,220,41,251,43,30,126,125,10,180,161,136,173,160,86,193,216,132,57,210,222,167,168,175,63,210,124,201],[171,22,229,255,173,239,143,139,169,212,122,71,118,254,92,200,244,239,195,13,68,43,244,203,6,104,192,95,88,45,34,246],[30,92,169,72,188,90,181,125,15,134,184,183,120,104,173,117,193,114,51,33,137,170,60,227,106,59,235,175,98,153,176,199],[214,17,15,233,172,220,241,197,25,51,139,254,31,250,179,71,82,105,66,124,195,148,196,248,166,10,22,148,8,145,160,66],[109,39,252,104,242,0,106,167,147,34,32,195,168,70,53,31,106,162,43,36,63,54,93,50,79,229,143,232,219,62,111,205],[156,54,51,86,125,253,153,66,191,184,95,211,107,213,226,236,204,121,48,185,137,181,40,28,41,247,111,222,92,145,3,183],[119,5,174,49,41,43,23,40,129,130,59,225,107,22,207,196,11,170,108,125,136,183,155,31,12,56,219,45,142,240,41,192],[81,5,35,87,201,219,86,71,56,40,45,54,65,224,162,183,249,117,209,90,37,17,93,141,248,54,240,115,163,69,145,38],[17,163,175,239,214,177,113,214,185,8,181,187,161,45,211,28,162,181,187,91,38,49,184,230,14,33,89,46,64,222,53,66],[49,30,99,233,226,72,199,197,134,133,175,115,10,184,40,130,118,64,248,249,147,60,58,139,55,243,235,153,221,103,195,142],[177,245,59,170,124,179,55,150,232,177,36,94,56,55,35,130,138,124,45,99,118,229,174,212,124,163,20,46,33,204,80,29],[17,156,232,209,5,173,46,255,22,201,127,224,205,198,183,3,239,142,60,176,212,174,42,7,33,232,79,80,124,186,215,53],[26,96,182,61,212,218,0,28,3,228,238,208,227,26,68,251,2,251,238,212,37,51,131,39,71,173,131,0,152,63,185,34],[186,199,27,164,246,144,250,57,137,200,139,81,167,154,21,190,44,223,8,45,133,201,20,58,148,84,43,233,161,241,161,133],[136,204,149,236,199,213,45,221,10,124,140,189,236,159,132,64,84,26,227,73,125,25,195,51,123,18,7,113,126,241,254,82],[254,164,166,140,225,21,123,39,223,132,97,210,93,94,24,34,168,217,151,63,79,135,255,22,185,151,226,139,209,124,17,171],[238,248,173,39,137,85,132,83,120,28,118,249,149,137,218,50,130,84,21,218,21,155,156,174,232,241,91,97,140,181,250,213],[214,66,121,249,187,178,191,146,174,34,49,180,248,123,5,66,45,236,79,182,213,20,35,156,6,138,62,195,40,202,82,120],[206,254,203,154,165,133,133,2,155,233,170,20,254,223,130,41,147,228,228,92,121,85,249,177,178,179,156,231,26,52,13,77],[0,218,65,248,170,212,227,236,234,64,62,89,117,140,63,54,39,114,90,237,59,242,59,115,189,188,239,47,106,15,5,218],[248,123,75,95,70,194,86,194,249,20,209,228,76,159,41,158,141,131,245,90,210,101,124,247,146,231,7,145,173,248,59,213],[255,89,96,13,66,179,23,212,119,219,146,169,64,86,15,207,167,189,13,134,156,132,222,155,139,64,64,248,194,124,128,158],[50,60,88,129,53,78,58,187,135,177,23,201,224,247,174,248,10,124,220,105,49,119,31,196,31,209,92,219,151,10,17,205],[87,60,175,246,244,242,34,44,48,249,120,135,38,159,116,41,186,155,230,164,83,163,22,106,221,72,38,155,14,111,207,24],[85,180,142,59,218,73,107,239,168,84,123,232,21,144,22,100,240,96,52,138,145,118,73,18,203,4,108,215,95,84,44,115],[106,51,143,165,150,164,232,135,180,90,45,87,62,210,96,191,207,139,207,154,135,99,218,154,191,76,248,19,107,121,153,166],[49,148,33,251,176,87,206,128,180,23,60,67,253,19,133,7,9,53,150,6,213,67,99,114,244,200,172,244,222,81,181,71],[123,11,69,95,101,240,98,168,161,156,39,175,192,133,19,226,231,112,176,137,77,224,152,241,144,150,157,85,207,91,153,244],[232,99,103,87,3,47,206,116,9,36,110,40,133,175,62,138,210,101,214,219,13,191,90,45,183,176,171,29,115,97,141,99],[13,179,154,113,86,223,42,8,172,158,249,145,75,160,248,46,187,182,52,240,50,185,28,59,189,240,242,242,24,89,75,62],[170,221,24,223,21,68,155,117,9,171,111,46,2,152,152,10,199,103,152,191,21,181,143,103,146,147,229,189,65,184,144,24],[142,196,4,101,239,169,160,226,183,248,58,232,43,52,242,178,107,195,121,187,252,170,34,27,96,236,61,230,215,222,123,33],[8,93,51,162,2,154,4,213,236,251,20,114,8,140,137,135,4,22,77,223,135,15,55,239,214,34,69,204,1,237,151,155],[45,119,240,139,61,101,102,72,148,243,18,143,206,188,210,221,8,161,163,73,251,198,111,182,61,30,49,140,30,232,127,121],[172,188,254,232,150,128,96,147,105,207,47,253,240,155,98,188,51,174,113,68,145,38,81,143,134,128,9,167,5,71,237,75],[190,103,249,192,97,122,141,125,84,31,85,215,7,185,137,58,83,189,68,140,159,33,157,93,37,68,60,225,36,214,164,77],[153,134,82,64,154,237,246,145,249,116,60,102,202,79,67,138,239,134,79,143,149,93,177,41,16,23,182,112,220,93,55,230],[225,41,91,254,11,211,168,24,186,206,12,162,213,136,208,237,105,18,91,213,232,162,110,214,118,45,87,213,214,198,187,107],[206,143,31,67,9,30,199,47,229,154,225,247,16,198,215,28,25,146,28,214,198,94,148,236,222,37,21,222,127,147,65,174],[189,176,46,104,40,12,34,212,95,80,233,141,80,118,101,152,166,189,164,0,87,122,86,113,108,168,197,60,22,191,66,128],[65,147,16,25,201,227,85,72,254,33,176,90,39,229,168,106,36,161,147,235,95,36,5,63,135,3,66,245,124,188,18,186],[139,228,78,178,240,127,184,179,246,9,55,161,66,242,243,1,215,200,60,154,220,178,124,174,83,75,6,249,172,62,194,147],[141,217,0,28,60,163,73,144,80,106,137,156,167,89,225,216,234,195,195,234,184,210,125,207,120,41,174,187,17,7,247,154],[78,231,243,89,9,14,220,55,194,137,77,113,96,80,226,218,41,167,158,240,123,52,122,27,232,46,229,47,118,157,82,23],[199,134,60,118,28,167,27,48,22,2,168,166,222,48,138,61,151,88,223,71,96,209,23,83,28,232,242,202,59,183,177,211],[181,113,12,191,204,198,225,160,129,240,198,51,89,16,11,181,199,159,206,77,164,1,191,46,74,221,211,207,17,159,247,4],[184,94,44,93,106,208,239,172,166,119,216,146,46,88,229,43,29,137,190,169,118,219,242,124,121,249,176,57,128,40,150,61],[180,148,214,228,245,141,247,57,182,27,143,70,32,180,83,37,25,181,64,46,129,13,100,7,117,222,195,120,253,76,53,145],[38,140,175,82,62,84,26,3,50,118,36,245,133,147,2,97,251,36,25,136,150,1,224,12,42,180,82,100,253,173,10,235],[3,156,28,71,30,61,6,173,226,233,69,247,84,27,99,255,150,236,5,182,175,148,185,130,221,209,233,78,245,38,195,90],[233,105,253,38,103,158,46,24,189,151,254,18,121,212,227,150,11,36,185,160,154,229,128,213,95,176,231,212,71,92,77,160],[1,13,174,131,249,62,241,164,219,35,27,243,167,144,34,149,60,151,223,35,180,194,179,107,249,43,39,137,229,91,16,177],[206,114,60,27,183,200,115,207,92,175,255,123,77,174,253,109,36,75,183,35,227,13,24,224,40,146,139,1,7,210,109,125],[77,90,199,66,193,216,42,81,139,142,135,52,108,203,50,128,16,128,41,60,206,224,156,245,174,231,216,122,64,225,233,66],[113,61,170,77,166,108,243,219,78,168,47,24,210,49,73,11,74,235,101,169,26,62,238,7,81,201,156,93,243,122,223,219]], [[75,174,6,187,186,228,6,76,113,92,155,147,93,233,173,199,135,18,119,54,111,206,200,119,16,208,27,173,140,204,89,51],[125,157,90,138,21,30,71,254,178,108,104,234,66,139,198,144,151,105,80,154,183,56,134,4,221,168,36,248,116,50,166,50],[233,250,15,144,70,80,230,35,210,222,156,176,159,254,242,153,108,184,68,174,237,29,141,215,16,126,52,241,83,69,48,117],[151,113,135,79,130,131,252,75,236,154,64,168,209,118,221,215,180,149,119,64,206,68,71,173,198,126,171,229,221,79,111,80],[126,51,131,208,223,45,96,132,60,141,45,16,220,132,204,104,24,149,162,156,174,93,92,175,136,29,181,233,24,111,23,34],[182,175,44,98,53,10,101,142,74,80,40,137,198,26,123,197,70,198,145,35,41,87,46,14,127,51,53,198,103,107,185,193],[45,84,109,133,216,111,216,63,202,222,242,58,155,206,21,40,39,188,158,15,15,235,105,4,140,131,52,196,192,52,204,158],[77,181,145,195,102,48,178,16,231,2,165,38,193,211,89,239,254,93,69,254,192,199,111,230,133,135,69,240,136,71,46,186],[65,179,33,128,125,13,131,194,246,224,153,143,151,95,229,132,242,123,214,172,130,36,86,21,64,70,195,44,174,15,132,32],[243,145,246,193,246,45,153,254,51,197,90,135,211,25,104,49,208,24,82,148,200,199,17,157,253,81,95,11,92,230,173,80],[155,149,143,140,245,103,240,117,96,190,104,142,248,218,46,150,7,186,41,244,5,199,220,4,240,77,3,110,163,79,78,215],[82,12,248,192,242,54,174,208,63,177,34,108,218,21,132,154,213,65,18,209,97,26,238,150,26,75,167,209,181,165,21,4],[157,149,207,168,254,89,88,103,224,174,175,163,25,194,198,39,151,23,136,59,142,106,186,219,239,59,214,81,50,110,57,155],[46,11,118,240,10,48,48,28,243,183,237,185,228,170,193,58,218,10,59,233,90,53,42,75,189,16,152,107,151,14,102,8],[3,79,139,4,160,51,200,95,189,59,239,71,104,148,42,21,174,73,220,140,168,175,157,236,30,109,77,89,52,202,42,56],[203,195,215,36,5,200,13,111,107,160,159,31,2,28,127,233,238,247,230,240,120,144,30,252,183,24,243,252,223,94,180,23],[212,128,13,167,81,120,43,50,32,95,178,121,230,213,197,132,214,137,184,152,96,162,143,230,244,87,63,105,223,76,158,87],[201,28,23,219,83,69,65,187,5,97,154,133,197,102,192,199,186,129,246,25,240,28,175,121,127,153,8,238,6,76,111,80],[144,213,164,5,231,149,242,198,219,49,147,178,100,10,142,121,100,52,250,240,26,33,194,14,10,120,245,77,146,74,28,187],[192,57,6,30,203,118,54,115,31,24,47,19,133,160,46,233,123,27,173,254,126,102,30,179,97,250,47,23,138,33,248,41],[27,68,151,8,184,140,129,65,89,251,5,213,128,123,178,166,18,154,179,202,12,65,207,100,13,109,141,20,254,10,169,52],[192,84,136,182,53,190,186,239,145,210,182,204,42,62,241,172,173,66,165,204,184,166,144,233,91,1,26,178,136,25,10,96],[10,19,69,118,105,141,51,157,132,41,71,140,117,134,190,75,143,153,154,36,208,194,98,172,248,181,237,48,87,10,5,39],[13,173,51,233,187,81,155,5,132,2,16,56,39,208,4,155,65,45,199,163,198,173,217,3,13,133,76,107,90,247,111,36],[6,201,0,141,77,105,222,65,133,223,210,149,152,208,215,192,179,21,6,57,79,13,75,159,189,100,38,160,152,6,137,56],[88,81,191,241,230,199,161,57,102,159,191,189,85,216,113,104,255,148,26,155,221,242,223,182,30,239,135,32,100,70,146,234],[228,226,93,175,114,239,120,44,143,138,148,144,93,74,178,77,199,161,246,185,46,155,137,14,34,193,120,193,58,153,30,25],[66,56,96,148,131,51,165,210,214,231,167,160,235,5,220,129,6,178,224,82,184,169,57,34,196,98,205,48,12,55,0,225],[149,241,143,50,206,203,47,217,134,184,90,178,163,121,51,172,177,80,97,204,145,103,107,163,200,24,127,251,93,233,190,141],[249,21,45,156,148,252,75,125,9,183,234,140,10,60,160,231,252,232,18,124,155,137,216,191,109,71,5,77,124,189,255,184],[133,92,16,131,168,96,175,153,68,65,149,48,146,68,16,185,44,190,67,13,14,109,233,225,153,100,136,215,142,120,163,4],[16,13,67,181,87,99,246,89,184,87,37,239,238,68,248,173,83,151,87,253,231,13,143,38,91,149,169,117,197,207,57,31],[0,112,244,97,179,43,228,116,11,233,4,111,18,26,190,142,201,60,218,247,178,163,118,203,126,39,121,187,196,86,60,228],[171,148,156,142,156,212,102,225,6,27,105,255,146,197,226,221,46,26,61,102,83,171,235,150,129,97,69,168,76,255,12,134],[214,239,106,229,76,242,63,133,19,150,160,200,158,175,162,166,100,5,206,52,157,6,117,124,134,156,59,75,252,113,161,137],[62,38,56,174,5,184,4,243,255,152,251,52,244,52,123,124,38,60,216,218,4,227,192,104,49,105,211,100,70,247,84,198],[98,151,88,118,159,247,19,104,223,166,242,172,186,1,215,89,50,238,66,66,204,162,93,150,20,124,203,245,25,39,185,41],[202,221,107,239,211,171,82,95,172,74,69,117,85,133,222,152,199,92,145,246,135,171,187,193,69,180,46,27,175,72,171,67],[144,160,203,212,18,214,53,252,49,209,66,124,68,221,205,110,70,232,67,216,45,126,38,243,222,166,96,37,108,12,245,22],[38,36,80,102,241,140,223,146,170,95,52,221,252,206,39,46,174,146,236,90,116,191,19,173,80,0,61,117,26,62,255,146],[124,147,245,142,163,127,123,10,246,24,78,0,174,24,203,253,249,182,139,124,179,9,55,243,94,177,145,173,114,151,77,195],[222,106,122,105,201,45,212,114,45,164,55,26,223,65,193,223,0,116,123,8,6,195,149,187,29,79,74,207,205,156,20,27],[190,129,134,64,120,108,183,136,127,30,163,68,98,38,54,149,145,97,149,191,162,115,135,133,165,187,241,11,165,234,105,134],[45,150,116,231,206,183,30,168,209,88,68,190,173,70,27,82,62,27,193,217,98,214,144,124,224,93,76,154,66,97,102,103],[28,152,234,11,98,200,118,125,154,152,147,238,123,203,225,245,201,113,113,37,51,31,132,11,203,170,136,249,116,242,134,136],[239,75,243,83,24,166,118,99,150,156,161,11,85,232,86,127,45,140,212,52,48,189,25,172,238,140,66,201,129,75,130,81],[163,115,209,160,205,161,234,47,49,192,240,123,96,188,203,20,235,252,61,71,128,67,208,145,20,97,156,181,225,139,1,159],[168,202,254,204,174,208,81,139,130,142,250,190,99,107,87,77,228,91,77,102,95,60,214,161,13,236,183,50,80,93,84,247],[213,127,249,198,38,201,94,239,73,134,93,73,134,98,62,195,220,239,138,131,86,30,250,91,227,121,195,218,34,77,28,231],[191,168,44,154,220,117,127,67,124,59,116,152,80,199,0,95,98,18,123,248,79,141,163,210,44,2,126,70,113,135,2,10],[33,116,82,231,70,99,127,193,58,190,71,86,247,73,198,165,26,57,62,117,184,189,53,207,108,250,58,209,123,157,225,216],[112,9,212,80,95,11,79,12,98,124,158,196,231,229,81,168,240,0,70,235,99,81,35,225,38,49,115,228,161,207,63,5],[137,173,241,244,253,98,38,55,136,32,156,153,22,129,114,76,109,193,53,24,231,241,39,186,101,34,73,165,209,120,34,176],[9,6,251,239,115,31,124,140,227,34,30,241,32,57,33,111,175,54,26,125,140,14,4,154,226,164,150,15,115,161,231,113],[119,38,145,215,82,182,194,53,124,83,122,28,48,188,165,236,182,28,86,232,183,141,178,44,205,8,171,35,239,118,93,161],[99,212,67,26,232,10,255,45,198,33,148,127,173,189,216,34,203,237,89,17,148,77,173,221,156,112,101,194,171,129,173,0],[147,147,32,116,56,236,15,243,37,95,4,211,92,63,139,174,210,35,48,242,157,209,208,91,16,165,109,70,40,14,121,157],[168,184,47,17,58,233,11,49,255,87,204,86,28,103,106,31,78,32,223,173,73,86,250,33,31,190,213,81,41,112,47,5],[161,211,247,102,176,176,185,209,6,158,2,197,0,52,171,212,140,149,249,226,188,95,211,157,211,78,138,236,182,75,63,196],[252,13,32,7,131,212,116,71,190,127,137,175,50,111,116,76,224,178,123,186,249,76,36,172,234,44,167,16,150,4,71,166],[212,162,135,101,242,203,169,159,43,47,166,71,205,54,124,145,138,50,103,4,49,150,241,90,146,117,14,87,171,203,167,97],[140,60,68,32,141,67,48,120,71,194,6,27,231,162,176,128,101,13,122,31,32,139,46,227,161,197,149,162,157,3,151,47],[252,255,185,48,230,196,45,94,135,232,179,213,195,210,234,149,36,83,248,160,43,8,117,109,178,124,173,141,210,42,226,138],[169,244,93,167,117,129,250,64,222,2,76,179,28,85,228,229,50,76,148,11,70,34,75,105,152,196,233,213,68,91,244,157]],{from: accounts[1]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length != 0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[7],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+587,{from:accounts[1]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([], [[75,174,6,187,186,228,6,76,113,92,155,147,93,233,173,199,135,18,119,54,111,206,200,119,16,208,27,173,140,204,89,51],[125,157,90,138,21,30,71,254,178,108,104,234,66,139,198,144,151,105,80,154,183,56,134,4,221,168,36,248,116,50,166,50],[233,250,15,144,70,80,230,35,210,222,156,176,159,254,242,153,108,184,68,174,237,29,141,215,16,126,52,241,83,69,48,117],[151,113,135,79,130,131,252,75,236,154,64,168,209,118,221,215,180,149,119,64,206,68,71,173,198,126,171,229,221,79,111,80],[126,51,131,208,223,45,96,132,60,141,45,16,220,132,204,104,24,149,162,156,174,93,92,175,136,29,181,233,24,111,23,34],[182,175,44,98,53,10,101,142,74,80,40,137,198,26,123,197,70,198,145,35,41,87,46,14,127,51,53,198,103,107,185,193],[45,84,109,133,216,111,216,63,202,222,242,58,155,206,21,40,39,188,158,15,15,235,105,4,140,131,52,196,192,52,204,158],[77,181,145,195,102,48,178,16,231,2,165,38,193,211,89,239,254,93,69,254,192,199,111,230,133,135,69,240,136,71,46,186],[65,179,33,128,125,13,131,194,246,224,153,143,151,95,229,132,242,123,214,172,130,36,86,21,64,70,195,44,174,15,132,32],[243,145,246,193,246,45,153,254,51,197,90,135,211,25,104,49,208,24,82,148,200,199,17,157,253,81,95,11,92,230,173,80],[155,149,143,140,245,103,240,117,96,190,104,142,248,218,46,150,7,186,41,244,5,199,220,4,240,77,3,110,163,79,78,215],[82,12,248,192,242,54,174,208,63,177,34,108,218,21,132,154,213,65,18,209,97,26,238,150,26,75,167,209,181,165,21,4],[157,149,207,168,254,89,88,103,224,174,175,163,25,194,198,39,151,23,136,59,142,106,186,219,239,59,214,81,50,110,57,155],[46,11,118,240,10,48,48,28,243,183,237,185,228,170,193,58,218,10,59,233,90,53,42,75,189,16,152,107,151,14,102,8],[3,79,139,4,160,51,200,95,189,59,239,71,104,148,42,21,174,73,220,140,168,175,157,236,30,109,77,89,52,202,42,56],[203,195,215,36,5,200,13,111,107,160,159,31,2,28,127,233,238,247,230,240,120,144,30,252,183,24,243,252,223,94,180,23],[212,128,13,167,81,120,43,50,32,95,178,121,230,213,197,132,214,137,184,152,96,162,143,230,244,87,63,105,223,76,158,87],[201,28,23,219,83,69,65,187,5,97,154,133,197,102,192,199,186,129,246,25,240,28,175,121,127,153,8,238,6,76,111,80],[144,213,164,5,231,149,242,198,219,49,147,178,100,10,142,121,100,52,250,240,26,33,194,14,10,120,245,77,146,74,28,187],[192,57,6,30,203,118,54,115,31,24,47,19,133,160,46,233,123,27,173,254,126,102,30,179,97,250,47,23,138,33,248,41],[27,68,151,8,184,140,129,65,89,251,5,213,128,123,178,166,18,154,179,202,12,65,207,100,13,109,141,20,254,10,169,52],[192,84,136,182,53,190,186,239,145,210,182,204,42,62,241,172,173,66,165,204,184,166,144,233,91,1,26,178,136,25,10,96],[10,19,69,118,105,141,51,157,132,41,71,140,117,134,190,75,143,153,154,36,208,194,98,172,248,181,237,48,87,10,5,39],[13,173,51,233,187,81,155,5,132,2,16,56,39,208,4,155,65,45,199,163,198,173,217,3,13,133,76,107,90,247,111,36],[6,201,0,141,77,105,222,65,133,223,210,149,152,208,215,192,179,21,6,57,79,13,75,159,189,100,38,160,152,6,137,56],[88,81,191,241,230,199,161,57,102,159,191,189,85,216,113,104,255,148,26,155,221,242,223,182,30,239,135,32,100,70,146,234],[228,226,93,175,114,239,120,44,143,138,148,144,93,74,178,77,199,161,246,185,46,155,137,14,34,193,120,193,58,153,30,25],[66,56,96,148,131,51,165,210,214,231,167,160,235,5,220,129,6,178,224,82,184,169,57,34,196,98,205,48,12,55,0,225],[149,241,143,50,206,203,47,217,134,184,90,178,163,121,51,172,177,80,97,204,145,103,107,163,200,24,127,251,93,233,190,141],[249,21,45,156,148,252,75,125,9,183,234,140,10,60,160,231,252,232,18,124,155,137,216,191,109,71,5,77,124,189,255,184],[133,92,16,131,168,96,175,153,68,65,149,48,146,68,16,185,44,190,67,13,14,109,233,225,153,100,136,215,142,120,163,4],[16,13,67,181,87,99,246,89,184,87,37,239,238,68,248,173,83,151,87,253,231,13,143,38,91,149,169,117,197,207,57,31],[0,112,244,97,179,43,228,116,11,233,4,111,18,26,190,142,201,60,218,247,178,163,118,203,126,39,121,187,196,86,60,228],[171,148,156,142,156,212,102,225,6,27,105,255,146,197,226,221,46,26,61,102,83,171,235,150,129,97,69,168,76,255,12,134],[214,239,106,229,76,242,63,133,19,150,160,200,158,175,162,166,100,5,206,52,157,6,117,124,134,156,59,75,252,113,161,137],[62,38,56,174,5,184,4,243,255,152,251,52,244,52,123,124,38,60,216,218,4,227,192,104,49,105,211,100,70,247,84,198],[98,151,88,118,159,247,19,104,223,166,242,172,186,1,215,89,50,238,66,66,204,162,93,150,20,124,203,245,25,39,185,41],[202,221,107,239,211,171,82,95,172,74,69,117,85,133,222,152,199,92,145,246,135,171,187,193,69,180,46,27,175,72,171,67],[144,160,203,212,18,214,53,252,49,209,66,124,68,221,205,110,70,232,67,216,45,126,38,243,222,166,96,37,108,12,245,22],[38,36,80,102,241,140,223,146,170,95,52,221,252,206,39,46,174,146,236,90,116,191,19,173,80,0,61,117,26,62,255,146],[124,147,245,142,163,127,123,10,246,24,78,0,174,24,203,253,249,182,139,124,179,9,55,243,94,177,145,173,114,151,77,195],[222,106,122,105,201,45,212,114,45,164,55,26,223,65,193,223,0,116,123,8,6,195,149,187,29,79,74,207,205,156,20,27],[190,129,134,64,120,108,183,136,127,30,163,68,98,38,54,149,145,97,149,191,162,115,135,133,165,187,241,11,165,234,105,134],[45,150,116,231,206,183,30,168,209,88,68,190,173,70,27,82,62,27,193,217,98,214,144,124,224,93,76,154,66,97,102,103],[28,152,234,11,98,200,118,125,154,152,147,238,123,203,225,245,201,113,113,37,51,31,132,11,203,170,136,249,116,242,134,136],[239,75,243,83,24,166,118,99,150,156,161,11,85,232,86,127,45,140,212,52,48,189,25,172,238,140,66,201,129,75,130,81],[163,115,209,160,205,161,234,47,49,192,240,123,96,188,203,20,235,252,61,71,128,67,208,145,20,97,156,181,225,139,1,159],[168,202,254,204,174,208,81,139,130,142,250,190,99,107,87,77,228,91,77,102,95,60,214,161,13,236,183,50,80,93,84,247],[213,127,249,198,38,201,94,239,73,134,93,73,134,98,62,195,220,239,138,131,86,30,250,91,227,121,195,218,34,77,28,231],[191,168,44,154,220,117,127,67,124,59,116,152,80,199,0,95,98,18,123,248,79,141,163,210,44,2,126,70,113,135,2,10],[33,116,82,231,70,99,127,193,58,190,71,86,247,73,198,165,26,57,62,117,184,189,53,207,108,250,58,209,123,157,225,216],[112,9,212,80,95,11,79,12,98,124,158,196,231,229,81,168,240,0,70,235,99,81,35,225,38,49,115,228,161,207,63,5],[137,173,241,244,253,98,38,55,136,32,156,153,22,129,114,76,109,193,53,24,231,241,39,186,101,34,73,165,209,120,34,176],[9,6,251,239,115,31,124,140,227,34,30,241,32,57,33,111,175,54,26,125,140,14,4,154,226,164,150,15,115,161,231,113],[119,38,145,215,82,182,194,53,124,83,122,28,48,188,165,236,182,28,86,232,183,141,178,44,205,8,171,35,239,118,93,161],[99,212,67,26,232,10,255,45,198,33,148,127,173,189,216,34,203,237,89,17,148,77,173,221,156,112,101,194,171,129,173,0],[147,147,32,116,56,236,15,243,37,95,4,211,92,63,139,174,210,35,48,242,157,209,208,91,16,165,109,70,40,14,121,157],[168,184,47,17,58,233,11,49,255,87,204,86,28,103,106,31,78,32,223,173,73,86,250,33,31,190,213,81,41,112,47,5],[161,211,247,102,176,176,185,209,6,158,2,197,0,52,171,212,140,149,249,226,188,95,211,157,211,78,138,236,182,75,63,196],[252,13,32,7,131,212,116,71,190,127,137,175,50,111,116,76,224,178,123,186,249,76,36,172,234,44,167,16,150,4,71,166],[212,162,135,101,242,203,169,159,43,47,166,71,205,54,124,145,138,50,103,4,49,150,241,90,146,117,14,87,171,203,167,97],[140,60,68,32,141,67,48,120,71,194,6,27,231,162,176,128,101,13,122,31,32,139,46,227,161,197,149,162,157,3,151,47],[252,255,185,48,230,196,45,94,135,232,179,213,195,210,234,149,36,83,248,160,43,8,117,109,178,124,173,141,210,42,226,138],[169,244,93,167,117,129,250,64,222,2,76,179,28,85,228,229,50,76,148,11,70,34,75,105,152,196,233,213,68,91,244,157]],{from: accounts[1]}),'revert');
  });
  it('Should execute finalizeVote(string) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,submissionsCount==votesCount', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[0],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+712,{from:accounts[1]});
    let result = await localOnChainVoting.finalizeVote("RevertWithReason",{from: accounts[1]});
  });
  it('Should fail finalizeVote(string) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableToken.address,accounts[0],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+712,{from:accounts[1]});
    let result = await truffleAssert.fails(localOnChainVoting.finalizeVote("RevertWithReason",{from: accounts[9]}),'revert');
  });
});
