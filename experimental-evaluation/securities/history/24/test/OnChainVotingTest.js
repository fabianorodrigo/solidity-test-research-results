const truffleAssert = require('truffle-assertions');
const PaymentTokenMock = artifacts.require("PaymentTokenMock");
const RedeemableTokenMock = artifacts.require("RedeemableTokenMock");
const OffChainPayments = artifacts.require("OffChainPayments");
const OnChainPayments = artifacts.require("OnChainPayments");
const FixedPriceTender = artifacts.require("FixedPriceTender");
const FullRedemption = artifacts.require("FullRedemption");
const PartialRedemption = artifacts.require("PartialRedemption");
const RedeemableToken = artifacts.require("RedeemableToken");
const OnChainVoting = artifacts.require("OnChainVoting");
const ECDSA = artifacts.require("openzeppelin-solidity/contracts/cryptography/ECDSA.sol");
const Math = artifacts.require("openzeppelin-solidity/contracts/math/Math.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ERC20 = artifacts.require("openzeppelin-solidity/contracts/token/ERC20/ERC20.sol");

contract("OnChainVoting",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractMath = null;
  let contractECDSA = null;
  let contractERC20 = null;
  let contractRedeemableToken = null;
  let contractPaymentTokenMock = null;
  let contractRedeemableTokenMock = null;
  let contractOffChainPayments = null;
  let contractPartialRedemption = null;
  let contractOnChainPayments = null;
  let contractFixedPriceTender = null;
  let contractFullRedemption = null;
  let contractOnChainVoting = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractMath = await Math.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Math.new({from: accounts[0]}');
    contractECDSA = await ECDSA.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ECDSA.new({from: accounts[0]}');
    ERC20.link("SafeMath",contractSafeMath.address);
    contractERC20 = await ERC20.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ERC20.new({from: accounts[0]}');
    RedeemableToken.link("SafeMath",contractSafeMath.address);
    contractRedeemableToken = await RedeemableToken.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableToken.new({from: accounts[0]}');
    contractPaymentTokenMock = await PaymentTokenMock.new(accounts[8],2014223714,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PaymentTokenMock.new(accounts[8],2014223714,{from:accounts[0]}');
    contractRedeemableTokenMock = await RedeemableTokenMock.new(accounts[5],28,{from:accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableTokenMock.new(accounts[5],28,{from:accounts[0]}');
    OffChainPayments.link("SafeMath",contractSafeMath.address);
     OffChainPayments.link("ECDSA",contractECDSA.address);
    contractOffChainPayments = await OffChainPayments.new(accounts[4],{from:accounts[4]});
    if(trace) console.log('SUCESSO: OffChainPayments.new(accounts[4],{from:accounts[4]}');
    PartialRedemption.link("SafeMath",contractSafeMath.address);
    contractPartialRedemption = await PartialRedemption.new(contractRedeemableToken.address,contractRedeemableTokenMock.address,accounts[3],1336,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PartialRedemption.new(contractRedeemableToken.address,contractRedeemableTokenMock.address,accounts[3],1336,{from:accounts[0]}');
    OnChainPayments.link("SafeMath",contractSafeMath.address);
     OnChainPayments.link("ECDSA",contractECDSA.address);
    contractOnChainPayments = await OnChainPayments.new(contractRedeemableTokenMock.address,contractRedeemableToken.address,accounts[2],{from:accounts[3]});
    if(trace) console.log('SUCESSO: OnChainPayments.new(contractRedeemableTokenMock.address,contractRedeemableToken.address,accounts[2],{from:accounts[3]}');
    FixedPriceTender.link("Math",contractMath.address);
     FixedPriceTender.link("SafeMath",contractSafeMath.address);
    contractFixedPriceTender = await FixedPriceTender.new(1532892062,contractRedeemableToken.address,contractPaymentTokenMock.address,accounts[4],28,254,{from:accounts[9]});
    if(trace) console.log('SUCESSO: FixedPriceTender.new(1532892062,contractRedeemableToken.address,contractPaymentTokenMock.address,accounts[4],28,254,{from:accounts[9]}');
    FullRedemption.link("SafeMath",contractSafeMath.address);
    contractFullRedemption = await FullRedemption.new(contractRedeemableTokenMock.address,contractRedeemableToken.address,accounts[4],5,{from:accounts[0]});
    if(trace) console.log('SUCESSO: FullRedemption.new(contractRedeemableTokenMock.address,contractRedeemableToken.address,accounts[4],5,{from:accounts[0]}');
    OnChainVoting.link("SafeMath",contractSafeMath.address);
    contractOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[1],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+373,{from:accounts[4]});
    if(trace) console.log('SUCESSO: OnChainVoting.new(contractPaymentTokenMock.address,accounts[1],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+373,{from:accounts[4]}');
  });
  
  it('Should execute placeVote(string) WHEN (await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp<endTime', async () => {
    let result = await contractOnChainVoting.placeVote("Example",{from: accounts[0]});
  });
  it('Should execute submitUserVotes(bytes32[],bytes32[]) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,_usersSaltHash.length==_usersVote.length,_usersSaltHash.length!=0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableTokenMock.address,accounts[6],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+100,{from:accounts[4]});
    let result = await localOnChainVoting.submitUserVotes([[232,1,130,4,143,225,254,221,226,150,87,248,185,175,29,168,53,204,208,92,9,52,95,191,143,82,92,153,15,221,21,216],[20,99,106,177,242,215,231,185,91,50,156,18,201,16,243,76,172,174,222,54,182,78,81,159,72,24,78,110,220,76,122,127],[72,82,223,242,72,248,65,203,142,162,99,250,215,10,183,28,142,116,102,139,10,88,231,131,9,166,216,65,39,43,22,101],[73,212,75,103,90,167,60,13,154,233,195,132,198,240,157,20,246,216,29,165,85,233,48,157,113,12,156,187,196,35,144,47],[52,50,5,160,66,79,191,46,251,207,185,167,15,227,208,28,255,233,182,172,14,198,217,48,185,102,72,50,110,233,130,115],[108,10,51,179,150,119,103,28,130,234,52,101,195,219,16,85,69,185,187,160,162,166,178,21,139,183,135,105,226,134,44,93],[236,109,215,58,94,190,85,31,228,253,116,247,155,211,33,123,65,1,170,69,245,68,150,24,79,174,229,214,134,222,4,60],[102,129,217,224,193,72,100,138,76,24,237,170,179,187,254,91,106,30,19,103,28,4,219,204,199,146,64,146,217,35,56,78],[145,56,113,93,228,75,151,93,176,180,239,229,8,125,213,114,246,78,41,239,101,28,124,235,14,109,114,33,144,231,211,172],[170,31,226,209,170,137,142,73,112,8,181,129,104,38,213,35,224,84,122,85,153,21,248,99,211,177,146,212,177,226,20,242],[177,180,40,120,78,235,29,25,215,245,184,222,85,92,122,242,99,59,169,83,190,234,116,34,253,206,189,124,181,234,168,239],[131,134,45,96,15,114,238,92,198,1,148,44,140,209,52,43,234,111,104,52,205,66,52,152,28,200,227,237,31,139,0,126],[16,12,65,217,132,95,190,230,61,223,45,188,110,189,112,87,1,95,5,91,177,115,128,254,68,138,112,183,19,61,75,159],[22,57,141,108,202,52,213,128,186,150,130,237,103,58,12,4,255,20,58,44,162,132,240,198,117,34,6,34,224,52,193,170],[9,61,178,90,201,37,219,250,100,54,193,207,93,126,64,1,97,20,240,206,4,224,72,65,59,1,111,158,195,3,90,86],[145,77,171,26,128,221,151,125,1,22,99,159,216,101,117,27,143,194,7,8,14,15,242,155,140,246,205,109,115,37,245,103],[172,212,128,9,28,61,151,142,50,42,49,21,115,175,213,60,144,66,75,3,129,148,150,211,82,130,251,220,147,184,174,171],[194,158,192,113,53,237,135,223,51,154,180,192,139,222,110,124,107,13,153,99,227,83,147,236,244,241,134,183,223,169,172,122],[195,245,129,122,140,192,108,217,5,17,108,126,19,21,204,199,99,210,18,216,174,171,47,246,171,165,72,121,107,94,210,163],[111,129,205,87,216,97,134,225,188,201,28,12,205,193,151,218,208,166,52,16,76,148,115,211,169,173,125,139,4,109,121,50],[116,127,133,182,146,61,90,83,19,37,205,249,220,194,76,117,94,10,146,165,44,16,11,83,64,234,101,200,138,230,214,223],[181,158,236,155,146,200,18,160,132,103,66,26,152,2,170,59,77,119,30,133,102,108,202,159,212,248,127,138,61,60,99,198],[74,4,151,123,17,138,173,219,19,176,120,152,37,45,161,84,222,178,184,79,206,216,97,239,125,228,176,22,155,94,164,101],[22,110,86,47,165,219,105,216,232,235,216,62,159,124,3,234,70,90,172,35,203,191,151,249,108,155,177,82,125,201,89,178],[10,220,55,252,233,36,228,161,140,154,141,53,224,5,27,102,250,11,148,39,149,158,135,188,53,29,62,162,151,243,54,145],[202,239,137,64,183,48,170,251,46,140,91,136,149,157,162,12,28,195,244,122,215,186,197,165,209,234,212,96,75,119,2,138],[233,115,29,98,188,220,71,141,142,97,29,251,5,85,163,49,65,143,244,221,2,53,174,32,150,59,158,85,73,211,119,62],[43,107,166,38,76,174,197,127,91,90,98,40,144,132,78,4,10,71,247,216,159,120,233,77,224,45,182,170,59,25,81,31],[195,242,253,176,167,215,142,24,35,150,85,99,90,74,165,162,250,149,223,169,119,157,189,91,109,170,195,98,136,255,185,104],[80,207,52,124,136,218,56,34,27,116,181,222,119,80,8,7,108,13,203,159,178,13,228,75,44,71,238,47,202,5,10,99],[17,51,225,137,87,190,161,142,217,14,118,142,194,247,40,145,221,227,33,220,163,200,178,10,52,205,154,119,87,83,136,176],[197,124,86,100,116,253,213,137,204,52,91,236,152,142,97,17,190,6,16,144,117,156,212,22,72,189,87,57,147,225,57,248],[68,141,77,131,61,193,156,24,91,220,112,41,67,160,194,0,215,158,23,135,201,157,201,73,29,61,186,5,230,211,77,187],[246,238,148,50,36,180,203,124,94,49,169,199,224,96,100,204,239,201,135,221,230,48,202,215,155,160,211,12,180,36,160,221],[234,92,125,153,103,41,243,242,40,115,158,177,174,235,223,174,128,212,81,36,205,75,178,194,153,44,6,243,134,54,191,149],[177,106,186,44,229,115,193,98,253,60,103,59,200,227,107,213,254,156,181,228,26,191,214,96,69,132,99,64,212,167,0,7],[230,82,240,56,152,188,217,191,111,214,83,205,175,59,166,247,231,201,147,101,33,152,85,193,146,32,148,124,94,192,46,136],[196,41,70,229,24,32,131,67,90,64,174,221,248,207,108,219,56,153,245,155,228,230,124,208,171,65,65,115,34,228,215,53],[89,251,64,52,12,160,10,149,138,49,128,144,80,101,69,46,224,148,109,174,187,114,199,154,130,11,136,73,142,96,191,168],[122,252,20,211,95,212,94,62,124,211,155,113,3,48,140,96,55,53,67,222,126,171,212,4,212,139,130,70,64,200,107,121],[97,56,163,188,231,191,218,18,8,169,137,97,162,37,161,207,188,69,34,32,185,119,209,90,220,113,197,12,51,136,130,217],[99,12,70,78,125,208,161,90,19,97,202,67,166,136,28,232,99,177,5,150,5,197,243,50,193,67,166,84,244,202,232,11],[26,19,81,24,140,106,229,232,145,103,109,237,36,101,191,8,229,118,64,71,53,159,226,215,249,31,20,128,193,185,105,213],[234,28,48,31,95,197,248,111,182,108,99,212,83,21,158,79,211,51,9,17,30,242,55,68,250,246,200,70,212,247,247,187],[57,27,251,110,86,93,135,102,113,221,242,114,233,215,231,66,121,108,251,244,207,169,164,14,67,232,132,205,80,206,1,195],[23,154,104,221,254,207,215,37,85,148,172,153,7,146,211,194,78,152,193,132,22,136,113,159,1,189,183,152,73,52,19,96],[64,172,70,183,213,210,138,170,26,136,194,240,219,65,195,167,206,53,193,147,23,83,222,0,90,211,229,58,165,82,138,234],[81,168,44,120,25,147,96,236,233,250,96,247,200,52,66,48,85,36,168,170,239,212,9,96,1,70,212,139,184,172,123,61],[184,77,125,179,163,173,172,170,166,217,202,110,149,134,226,181,110,4,108,138,28,213,217,37,183,191,74,117,107,141,124,170],[217,53,139,132,23,213,145,58,155,39,231,82,14,60,77,193,30,132,70,127,159,142,153,36,199,6,189,93,93,129,192,85],[45,176,194,203,58,185,169,176,255,159,109,218,79,54,235,249,19,29,20,19,148,75,240,62,235,227,41,216,113,119,39,31],[49,233,15,197,153,213,170,49,253,211,225,83,44,247,214,27,244,170,84,65,212,134,210,9,227,19,143,27,224,26,56,226],[14,136,16,205,192,58,234,85,60,195,71,51,39,220,98,122,16,237,171,80,217,112,193,91,159,215,122,219,245,20,24,107],[111,229,13,117,136,149,255,221,250,237,160,253,190,192,98,96,237,121,176,130,127,36,178,119,101,146,227,92,69,86,222,221],[25,225,138,108,211,32,92,157,131,28,65,42,16,224,119,53,215,249,101,37,158,247,62,84,22,102,53,90,183,102,92,201],[141,111,234,105,219,53,122,133,123,2,167,65,125,96,191,167,77,74,97,109,244,20,207,234,248,60,42,221,219,97,111,207],[124,35,98,31,27,9,15,21,25,53,82,130,122,49,194,191,30,240,241,73,246,95,187,161,71,65,96,112,86,176,143,134],[95,19,188,56,165,93,43,133,11,195,209,224,119,16,220,106,165,245,235,171,95,185,232,233,202,64,102,88,222,70,191,18],[116,189,140,41,194,159,116,76,32,90,116,13,64,6,69,12,18,89,123,202,228,197,37,80,214,123,83,20,210,223,18,8],[35,244,250,96,85,254,131,132,55,199,113,239,44,16,233,248,17,250,198,150,47,19,94,227,65,143,245,145,100,248,202,31],[136,109,24,6,146,51,73,171,251,120,54,222,84,100,142,150,245,3,142,191,114,0,230,58,232,46,213,88,240,146,245,69],[167,128,255,95,238,180,181,133,2,70,44,187,65,47,158,20,83,112,39,28,7,38,156,125,159,145,216,125,194,255,154,195],[15,76,20,219,38,46,148,170,188,127,221,35,137,131,115,231,229,33,203,56,191,167,150,59,71,7,18,82,216,57,206,190],[22,47,186,149,18,72,29,39,196,40,83,79,98,37,210,64,175,145,102,133,184,122,53,219,143,137,23,165,141,63,188,162],[185,71,121,144,12,211,125,225,14,97,189,88,14,196,78,37,228,249,68,134,250,232,146,36,31,211,88,219,152,74,136,241],[255,158,46,165,189,93,82,109,136,7,148,248,58,101,59,230,232,255,74,187,145,189,74,0,117,192,22,102,219,220,171,116]], [[70,175,232,125,149,21,37,140,15,9,117,58,211,26,149,16,147,207,9,77,216,58,209,2,97,251,227,155,69,168,18,106],[238,127,107,150,68,153,177,183,108,192,229,164,141,34,90,78,125,26,254,169,91,99,135,37,76,87,195,37,91,237,150,172],[13,165,55,245,156,211,55,219,28,36,49,178,189,56,70,5,48,217,100,217,212,100,242,233,18,126,55,166,200,203,224,224],[30,58,192,166,189,19,136,40,165,181,144,135,67,7,39,248,124,251,47,204,28,122,237,140,198,239,129,144,91,5,128,138],[47,237,171,201,22,63,159,203,20,101,66,50,197,211,39,39,153,124,234,179,226,63,22,37,224,162,109,89,43,120,42,47],[186,131,97,51,115,99,100,53,34,145,198,117,166,197,162,172,216,117,78,37,98,121,94,178,166,19,241,111,220,151,234,11],[192,137,14,164,119,14,70,223,111,182,179,245,88,165,178,252,173,45,86,217,42,153,72,204,212,103,104,146,103,6,13,135],[236,246,172,72,154,124,11,197,250,180,82,167,117,254,133,210,31,73,132,237,4,97,147,83,131,83,26,196,109,26,176,137],[210,223,114,154,64,8,204,252,6,78,178,91,57,73,226,173,205,230,248,170,62,45,249,36,101,15,208,93,29,20,37,141],[60,126,236,86,161,127,84,233,181,73,236,76,115,205,86,75,80,247,248,247,227,123,251,188,203,60,228,117,56,46,86,90],[42,168,152,0,205,9,184,55,44,56,63,230,106,217,93,174,148,136,37,12,64,155,30,30,254,70,255,123,144,249,17,26],[64,162,84,153,133,186,224,81,181,247,90,254,45,231,171,218,124,56,252,39,13,76,202,230,84,186,230,123,162,135,248,122],[175,127,211,229,160,125,26,148,226,223,251,120,190,226,50,232,131,82,57,163,26,134,214,71,13,113,233,117,217,10,30,157],[58,113,68,147,14,71,118,122,21,41,54,150,110,201,198,46,212,4,27,93,141,118,247,182,111,133,107,197,172,220,135,138],[34,205,107,187,98,118,209,13,249,162,154,253,128,198,74,93,137,27,105,9,77,81,27,54,38,239,84,195,93,46,227,182],[205,55,161,105,190,41,179,92,24,197,174,127,185,177,199,247,251,106,183,154,150,234,176,55,36,53,215,242,150,8,21,90],[194,147,106,42,194,203,126,25,32,185,108,145,197,49,120,221,227,225,205,126,198,189,50,45,151,62,73,108,186,68,205,206],[89,171,150,252,181,21,209,66,31,232,181,186,1,21,9,96,214,171,128,111,80,255,85,194,240,67,241,209,25,25,49,25],[185,37,212,28,63,165,61,22,20,72,24,68,98,15,40,250,119,121,203,253,208,32,116,201,94,141,75,38,149,114,214,128],[159,122,207,199,253,32,190,77,120,172,189,20,63,153,250,154,44,189,137,189,168,221,173,24,141,180,163,115,174,55,48,4],[111,217,135,118,112,142,87,123,201,93,248,253,121,23,61,89,203,231,13,4,17,231,163,152,52,28,254,175,181,161,244,33],[202,24,221,244,60,55,255,30,122,172,221,114,255,28,60,176,93,14,221,22,152,73,38,91,41,131,14,110,223,129,125,53],[240,247,165,119,79,9,109,65,220,235,224,136,35,39,168,217,62,25,91,17,47,27,188,11,40,190,220,30,207,183,43,144],[140,211,233,10,93,18,142,150,78,136,62,128,131,94,151,103,58,66,115,146,128,39,243,52,219,14,130,156,43,119,23,152],[131,3,142,131,45,238,81,148,220,149,147,123,174,228,142,66,205,2,60,71,20,203,195,206,25,228,146,204,112,41,249,252],[217,191,182,244,80,34,12,230,207,45,188,167,249,195,134,172,217,21,40,184,218,25,6,179,213,215,111,155,69,9,10,11],[3,6,20,45,30,136,26,73,147,94,20,62,40,105,83,42,211,109,176,234,92,213,204,240,50,186,21,2,66,7,149,231],[34,148,238,55,159,64,201,206,118,142,111,21,196,111,174,7,192,37,58,186,184,51,82,6,189,176,197,237,192,144,216,247],[181,143,97,149,39,98,91,79,114,134,9,125,17,149,255,237,146,143,55,163,19,194,221,73,131,12,102,93,30,107,153,145],[158,11,96,56,95,70,134,111,170,9,220,47,228,98,167,206,241,139,239,165,82,100,157,89,151,28,4,237,124,178,234,224],[24,70,142,176,86,164,18,6,181,98,130,54,19,161,234,133,181,32,219,234,179,184,195,110,63,228,165,85,110,1,140,96],[231,223,16,26,44,141,132,161,179,221,14,129,201,230,54,60,15,28,117,121,155,249,237,166,56,83,224,39,240,56,121,69],[241,212,33,38,69,101,61,221,188,202,82,86,189,135,135,95,107,151,134,152,75,140,72,89,180,236,105,224,194,152,236,247],[217,206,207,139,76,72,215,183,41,218,249,73,152,51,94,70,71,227,90,158,238,243,87,118,37,40,79,231,181,120,112,27],[48,244,205,155,80,184,143,58,127,69,57,181,210,105,60,58,12,11,131,58,88,97,247,160,89,116,223,43,249,220,119,76],[219,181,217,131,220,161,138,136,30,189,253,4,216,73,206,24,185,17,238,64,95,145,186,38,163,194,24,213,157,171,249,216],[105,7,89,125,187,206,32,35,161,136,71,227,169,37,78,121,190,228,131,111,183,39,81,54,98,109,199,169,110,113,98,1],[128,102,67,71,98,220,116,147,146,246,243,157,64,64,103,239,139,152,141,144,188,146,44,220,84,138,90,138,233,192,58,110],[119,233,171,158,137,171,96,238,132,229,141,62,97,158,154,159,61,118,2,102,51,105,213,98,226,121,68,166,191,195,2,61],[215,165,143,57,20,203,128,255,26,219,57,174,12,3,184,57,89,78,202,129,53,157,148,223,22,46,11,59,125,85,121,132],[60,135,173,247,227,227,89,28,69,6,145,158,67,208,166,36,178,159,249,193,193,124,21,62,90,15,134,199,149,205,126,11],[151,128,242,13,150,163,101,188,146,22,25,243,49,73,9,30,117,3,238,186,241,63,222,169,177,195,115,228,252,132,218,29],[105,186,130,174,5,247,53,128,154,86,150,160,75,207,99,163,104,72,98,26,227,86,193,170,254,93,52,209,9,58,152,79],[179,18,76,214,183,124,114,204,3,138,30,133,86,191,39,154,95,63,229,154,46,13,200,186,160,117,86,181,191,17,93,21],[187,230,109,2,187,4,202,60,30,233,83,164,77,157,189,116,217,31,79,213,69,32,192,193,186,76,192,212,194,148,26,80],[75,242,212,19,133,13,25,153,156,117,38,207,43,221,37,205,76,41,218,122,153,98,154,185,41,226,86,79,134,17,48,7],[75,44,236,194,242,1,217,154,125,250,252,1,52,132,238,220,22,142,1,66,116,139,227,90,6,13,84,163,51,90,203,132],[11,171,15,192,102,197,53,207,160,193,32,126,54,75,136,110,120,2,92,68,236,192,199,161,232,162,254,1,11,75,68,230],[8,83,65,133,182,42,65,244,82,185,49,20,217,74,187,79,176,214,249,63,139,94,123,255,230,23,114,53,34,162,137,223],[215,178,3,169,254,150,79,49,0,30,4,184,105,244,37,152,118,28,255,38,71,59,58,89,39,95,75,32,60,155,241,33],[237,94,70,246,67,4,181,179,46,81,11,132,206,26,25,172,26,100,74,207,97,16,111,92,193,22,249,177,181,54,233,145],[92,245,62,5,84,26,99,13,123,244,216,95,174,247,152,175,167,165,42,6,176,18,241,210,59,5,19,200,145,34,126,192],[216,208,182,31,249,66,136,110,86,84,192,225,2,205,71,141,13,226,15,5,242,89,238,153,12,84,110,83,196,85,28,199],[172,72,50,211,81,246,178,90,236,185,46,226,80,112,50,126,85,80,106,176,234,217,210,236,199,242,69,126,80,129,232,206],[216,73,131,6,150,193,21,249,144,234,184,168,143,162,21,134,44,203,73,92,33,238,216,47,137,220,175,65,40,108,220,176],[66,194,165,88,36,168,47,169,190,94,84,135,218,218,248,144,203,118,186,168,216,54,210,193,33,119,68,81,0,238,59,130],[254,220,246,99,167,179,46,125,177,240,104,211,159,192,135,228,66,18,251,96,17,177,231,130,46,208,160,195,193,177,112,154],[15,5,115,224,128,61,185,18,90,148,32,179,150,205,65,165,127,224,152,75,62,191,125,27,174,95,113,65,76,133,58,206],[23,216,183,91,221,251,226,142,224,67,152,113,235,6,248,45,84,83,66,130,146,33,125,231,65,75,24,35,141,245,251,168],[162,142,162,49,178,29,67,23,0,248,232,114,177,254,228,105,76,49,107,212,82,106,158,100,15,147,85,229,95,101,69,18],[188,63,246,131,61,167,121,235,101,103,154,90,130,130,71,124,37,127,156,27,40,194,14,126,81,22,202,167,117,173,182,113],[121,166,223,169,71,38,248,30,210,253,110,60,220,112,127,199,47,62,200,192,96,67,243,186,221,87,34,255,3,84,88,27],[185,130,204,7,208,66,25,201,39,77,49,136,77,196,14,168,158,100,37,52,159,172,137,78,236,203,183,86,218,173,71,73],[235,71,32,139,13,187,50,117,173,211,57,196,229,88,23,175,74,139,155,15,229,62,228,200,112,184,238,156,235,166,42,212],[221,70,91,244,142,194,27,152,139,128,6,150,41,150,141,122,249,103,83,34,23,254,16,72,146,196,37,224,56,28,114,17],[150,208,154,198,198,236,227,77,37,88,178,10,211,93,72,199,238,195,23,141,6,80,197,73,232,161,196,170,61,196,185,104]],{from: accounts[4]});
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableTokenMock.address,accounts[6],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+100,{from:accounts[4]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[232,1,130,4,143,225,254,221,226,150,87,248,185,175,29,168,53,204,208,92,9,52,95,191,143,82,92,153,15,221,21,216],[20,99,106,177,242,215,231,185,91,50,156,18,201,16,243,76,172,174,222,54,182,78,81,159,72,24,78,110,220,76,122,127],[72,82,223,242,72,248,65,203,142,162,99,250,215,10,183,28,142,116,102,139,10,88,231,131,9,166,216,65,39,43,22,101],[73,212,75,103,90,167,60,13,154,233,195,132,198,240,157,20,246,216,29,165,85,233,48,157,113,12,156,187,196,35,144,47],[52,50,5,160,66,79,191,46,251,207,185,167,15,227,208,28,255,233,182,172,14,198,217,48,185,102,72,50,110,233,130,115],[108,10,51,179,150,119,103,28,130,234,52,101,195,219,16,85,69,185,187,160,162,166,178,21,139,183,135,105,226,134,44,93],[236,109,215,58,94,190,85,31,228,253,116,247,155,211,33,123,65,1,170,69,245,68,150,24,79,174,229,214,134,222,4,60],[102,129,217,224,193,72,100,138,76,24,237,170,179,187,254,91,106,30,19,103,28,4,219,204,199,146,64,146,217,35,56,78],[145,56,113,93,228,75,151,93,176,180,239,229,8,125,213,114,246,78,41,239,101,28,124,235,14,109,114,33,144,231,211,172],[170,31,226,209,170,137,142,73,112,8,181,129,104,38,213,35,224,84,122,85,153,21,248,99,211,177,146,212,177,226,20,242],[177,180,40,120,78,235,29,25,215,245,184,222,85,92,122,242,99,59,169,83,190,234,116,34,253,206,189,124,181,234,168,239],[131,134,45,96,15,114,238,92,198,1,148,44,140,209,52,43,234,111,104,52,205,66,52,152,28,200,227,237,31,139,0,126],[16,12,65,217,132,95,190,230,61,223,45,188,110,189,112,87,1,95,5,91,177,115,128,254,68,138,112,183,19,61,75,159],[22,57,141,108,202,52,213,128,186,150,130,237,103,58,12,4,255,20,58,44,162,132,240,198,117,34,6,34,224,52,193,170],[9,61,178,90,201,37,219,250,100,54,193,207,93,126,64,1,97,20,240,206,4,224,72,65,59,1,111,158,195,3,90,86],[145,77,171,26,128,221,151,125,1,22,99,159,216,101,117,27,143,194,7,8,14,15,242,155,140,246,205,109,115,37,245,103],[172,212,128,9,28,61,151,142,50,42,49,21,115,175,213,60,144,66,75,3,129,148,150,211,82,130,251,220,147,184,174,171],[194,158,192,113,53,237,135,223,51,154,180,192,139,222,110,124,107,13,153,99,227,83,147,236,244,241,134,183,223,169,172,122],[195,245,129,122,140,192,108,217,5,17,108,126,19,21,204,199,99,210,18,216,174,171,47,246,171,165,72,121,107,94,210,163],[111,129,205,87,216,97,134,225,188,201,28,12,205,193,151,218,208,166,52,16,76,148,115,211,169,173,125,139,4,109,121,50],[116,127,133,182,146,61,90,83,19,37,205,249,220,194,76,117,94,10,146,165,44,16,11,83,64,234,101,200,138,230,214,223],[181,158,236,155,146,200,18,160,132,103,66,26,152,2,170,59,77,119,30,133,102,108,202,159,212,248,127,138,61,60,99,198],[74,4,151,123,17,138,173,219,19,176,120,152,37,45,161,84,222,178,184,79,206,216,97,239,125,228,176,22,155,94,164,101],[22,110,86,47,165,219,105,216,232,235,216,62,159,124,3,234,70,90,172,35,203,191,151,249,108,155,177,82,125,201,89,178],[10,220,55,252,233,36,228,161,140,154,141,53,224,5,27,102,250,11,148,39,149,158,135,188,53,29,62,162,151,243,54,145],[202,239,137,64,183,48,170,251,46,140,91,136,149,157,162,12,28,195,244,122,215,186,197,165,209,234,212,96,75,119,2,138],[233,115,29,98,188,220,71,141,142,97,29,251,5,85,163,49,65,143,244,221,2,53,174,32,150,59,158,85,73,211,119,62],[43,107,166,38,76,174,197,127,91,90,98,40,144,132,78,4,10,71,247,216,159,120,233,77,224,45,182,170,59,25,81,31],[195,242,253,176,167,215,142,24,35,150,85,99,90,74,165,162,250,149,223,169,119,157,189,91,109,170,195,98,136,255,185,104],[80,207,52,124,136,218,56,34,27,116,181,222,119,80,8,7,108,13,203,159,178,13,228,75,44,71,238,47,202,5,10,99],[17,51,225,137,87,190,161,142,217,14,118,142,194,247,40,145,221,227,33,220,163,200,178,10,52,205,154,119,87,83,136,176],[197,124,86,100,116,253,213,137,204,52,91,236,152,142,97,17,190,6,16,144,117,156,212,22,72,189,87,57,147,225,57,248],[68,141,77,131,61,193,156,24,91,220,112,41,67,160,194,0,215,158,23,135,201,157,201,73,29,61,186,5,230,211,77,187],[246,238,148,50,36,180,203,124,94,49,169,199,224,96,100,204,239,201,135,221,230,48,202,215,155,160,211,12,180,36,160,221],[234,92,125,153,103,41,243,242,40,115,158,177,174,235,223,174,128,212,81,36,205,75,178,194,153,44,6,243,134,54,191,149],[177,106,186,44,229,115,193,98,253,60,103,59,200,227,107,213,254,156,181,228,26,191,214,96,69,132,99,64,212,167,0,7],[230,82,240,56,152,188,217,191,111,214,83,205,175,59,166,247,231,201,147,101,33,152,85,193,146,32,148,124,94,192,46,136],[196,41,70,229,24,32,131,67,90,64,174,221,248,207,108,219,56,153,245,155,228,230,124,208,171,65,65,115,34,228,215,53],[89,251,64,52,12,160,10,149,138,49,128,144,80,101,69,46,224,148,109,174,187,114,199,154,130,11,136,73,142,96,191,168],[122,252,20,211,95,212,94,62,124,211,155,113,3,48,140,96,55,53,67,222,126,171,212,4,212,139,130,70,64,200,107,121],[97,56,163,188,231,191,218,18,8,169,137,97,162,37,161,207,188,69,34,32,185,119,209,90,220,113,197,12,51,136,130,217],[99,12,70,78,125,208,161,90,19,97,202,67,166,136,28,232,99,177,5,150,5,197,243,50,193,67,166,84,244,202,232,11],[26,19,81,24,140,106,229,232,145,103,109,237,36,101,191,8,229,118,64,71,53,159,226,215,249,31,20,128,193,185,105,213],[234,28,48,31,95,197,248,111,182,108,99,212,83,21,158,79,211,51,9,17,30,242,55,68,250,246,200,70,212,247,247,187],[57,27,251,110,86,93,135,102,113,221,242,114,233,215,231,66,121,108,251,244,207,169,164,14,67,232,132,205,80,206,1,195],[23,154,104,221,254,207,215,37,85,148,172,153,7,146,211,194,78,152,193,132,22,136,113,159,1,189,183,152,73,52,19,96],[64,172,70,183,213,210,138,170,26,136,194,240,219,65,195,167,206,53,193,147,23,83,222,0,90,211,229,58,165,82,138,234],[81,168,44,120,25,147,96,236,233,250,96,247,200,52,66,48,85,36,168,170,239,212,9,96,1,70,212,139,184,172,123,61],[184,77,125,179,163,173,172,170,166,217,202,110,149,134,226,181,110,4,108,138,28,213,217,37,183,191,74,117,107,141,124,170],[217,53,139,132,23,213,145,58,155,39,231,82,14,60,77,193,30,132,70,127,159,142,153,36,199,6,189,93,93,129,192,85],[45,176,194,203,58,185,169,176,255,159,109,218,79,54,235,249,19,29,20,19,148,75,240,62,235,227,41,216,113,119,39,31],[49,233,15,197,153,213,170,49,253,211,225,83,44,247,214,27,244,170,84,65,212,134,210,9,227,19,143,27,224,26,56,226],[14,136,16,205,192,58,234,85,60,195,71,51,39,220,98,122,16,237,171,80,217,112,193,91,159,215,122,219,245,20,24,107],[111,229,13,117,136,149,255,221,250,237,160,253,190,192,98,96,237,121,176,130,127,36,178,119,101,146,227,92,69,86,222,221],[25,225,138,108,211,32,92,157,131,28,65,42,16,224,119,53,215,249,101,37,158,247,62,84,22,102,53,90,183,102,92,201],[141,111,234,105,219,53,122,133,123,2,167,65,125,96,191,167,77,74,97,109,244,20,207,234,248,60,42,221,219,97,111,207],[124,35,98,31,27,9,15,21,25,53,82,130,122,49,194,191,30,240,241,73,246,95,187,161,71,65,96,112,86,176,143,134],[95,19,188,56,165,93,43,133,11,195,209,224,119,16,220,106,165,245,235,171,95,185,232,233,202,64,102,88,222,70,191,18],[116,189,140,41,194,159,116,76,32,90,116,13,64,6,69,12,18,89,123,202,228,197,37,80,214,123,83,20,210,223,18,8],[35,244,250,96,85,254,131,132,55,199,113,239,44,16,233,248,17,250,198,150,47,19,94,227,65,143,245,145,100,248,202,31],[136,109,24,6,146,51,73,171,251,120,54,222,84,100,142,150,245,3,142,191,114,0,230,58,232,46,213,88,240,146,245,69],[167,128,255,95,238,180,181,133,2,70,44,187,65,47,158,20,83,112,39,28,7,38,156,125,159,145,216,125,194,255,154,195],[15,76,20,219,38,46,148,170,188,127,221,35,137,131,115,231,229,33,203,56,191,167,150,59,71,7,18,82,216,57,206,190],[22,47,186,149,18,72,29,39,196,40,83,79,98,37,210,64,175,145,102,133,184,122,53,219,143,137,23,165,141,63,188,162],[185,71,121,144,12,211,125,225,14,97,189,88,14,196,78,37,228,249,68,134,250,232,146,36,31,211,88,219,152,74,136,241],[255,158,46,165,189,93,82,109,136,7,148,248,58,101,59,230,232,255,74,187,145,189,74,0,117,192,22,102,219,220,171,116]], [[70,175,232,125,149,21,37,140,15,9,117,58,211,26,149,16,147,207,9,77,216,58,209,2,97,251,227,155,69,168,18,106],[238,127,107,150,68,153,177,183,108,192,229,164,141,34,90,78,125,26,254,169,91,99,135,37,76,87,195,37,91,237,150,172],[13,165,55,245,156,211,55,219,28,36,49,178,189,56,70,5,48,217,100,217,212,100,242,233,18,126,55,166,200,203,224,224],[30,58,192,166,189,19,136,40,165,181,144,135,67,7,39,248,124,251,47,204,28,122,237,140,198,239,129,144,91,5,128,138],[47,237,171,201,22,63,159,203,20,101,66,50,197,211,39,39,153,124,234,179,226,63,22,37,224,162,109,89,43,120,42,47],[186,131,97,51,115,99,100,53,34,145,198,117,166,197,162,172,216,117,78,37,98,121,94,178,166,19,241,111,220,151,234,11],[192,137,14,164,119,14,70,223,111,182,179,245,88,165,178,252,173,45,86,217,42,153,72,204,212,103,104,146,103,6,13,135],[236,246,172,72,154,124,11,197,250,180,82,167,117,254,133,210,31,73,132,237,4,97,147,83,131,83,26,196,109,26,176,137],[210,223,114,154,64,8,204,252,6,78,178,91,57,73,226,173,205,230,248,170,62,45,249,36,101,15,208,93,29,20,37,141],[60,126,236,86,161,127,84,233,181,73,236,76,115,205,86,75,80,247,248,247,227,123,251,188,203,60,228,117,56,46,86,90],[42,168,152,0,205,9,184,55,44,56,63,230,106,217,93,174,148,136,37,12,64,155,30,30,254,70,255,123,144,249,17,26],[64,162,84,153,133,186,224,81,181,247,90,254,45,231,171,218,124,56,252,39,13,76,202,230,84,186,230,123,162,135,248,122],[175,127,211,229,160,125,26,148,226,223,251,120,190,226,50,232,131,82,57,163,26,134,214,71,13,113,233,117,217,10,30,157],[58,113,68,147,14,71,118,122,21,41,54,150,110,201,198,46,212,4,27,93,141,118,247,182,111,133,107,197,172,220,135,138],[34,205,107,187,98,118,209,13,249,162,154,253,128,198,74,93,137,27,105,9,77,81,27,54,38,239,84,195,93,46,227,182],[205,55,161,105,190,41,179,92,24,197,174,127,185,177,199,247,251,106,183,154,150,234,176,55,36,53,215,242,150,8,21,90],[194,147,106,42,194,203,126,25,32,185,108,145,197,49,120,221,227,225,205,126,198,189,50,45,151,62,73,108,186,68,205,206],[89,171,150,252,181,21,209,66,31,232,181,186,1,21,9,96,214,171,128,111,80,255,85,194,240,67,241,209,25,25,49,25],[185,37,212,28,63,165,61,22,20,72,24,68,98,15,40,250,119,121,203,253,208,32,116,201,94,141,75,38,149,114,214,128],[159,122,207,199,253,32,190,77,120,172,189,20,63,153,250,154,44,189,137,189,168,221,173,24,141,180,163,115,174,55,48,4],[111,217,135,118,112,142,87,123,201,93,248,253,121,23,61,89,203,231,13,4,17,231,163,152,52,28,254,175,181,161,244,33],[202,24,221,244,60,55,255,30,122,172,221,114,255,28,60,176,93,14,221,22,152,73,38,91,41,131,14,110,223,129,125,53],[240,247,165,119,79,9,109,65,220,235,224,136,35,39,168,217,62,25,91,17,47,27,188,11,40,190,220,30,207,183,43,144],[140,211,233,10,93,18,142,150,78,136,62,128,131,94,151,103,58,66,115,146,128,39,243,52,219,14,130,156,43,119,23,152],[131,3,142,131,45,238,81,148,220,149,147,123,174,228,142,66,205,2,60,71,20,203,195,206,25,228,146,204,112,41,249,252],[217,191,182,244,80,34,12,230,207,45,188,167,249,195,134,172,217,21,40,184,218,25,6,179,213,215,111,155,69,9,10,11],[3,6,20,45,30,136,26,73,147,94,20,62,40,105,83,42,211,109,176,234,92,213,204,240,50,186,21,2,66,7,149,231],[34,148,238,55,159,64,201,206,118,142,111,21,196,111,174,7,192,37,58,186,184,51,82,6,189,176,197,237,192,144,216,247],[181,143,97,149,39,98,91,79,114,134,9,125,17,149,255,237,146,143,55,163,19,194,221,73,131,12,102,93,30,107,153,145],[158,11,96,56,95,70,134,111,170,9,220,47,228,98,167,206,241,139,239,165,82,100,157,89,151,28,4,237,124,178,234,224],[24,70,142,176,86,164,18,6,181,98,130,54,19,161,234,133,181,32,219,234,179,184,195,110,63,228,165,85,110,1,140,96],[231,223,16,26,44,141,132,161,179,221,14,129,201,230,54,60,15,28,117,121,155,249,237,166,56,83,224,39,240,56,121,69],[241,212,33,38,69,101,61,221,188,202,82,86,189,135,135,95,107,151,134,152,75,140,72,89,180,236,105,224,194,152,236,247],[217,206,207,139,76,72,215,183,41,218,249,73,152,51,94,70,71,227,90,158,238,243,87,118,37,40,79,231,181,120,112,27],[48,244,205,155,80,184,143,58,127,69,57,181,210,105,60,58,12,11,131,58,88,97,247,160,89,116,223,43,249,220,119,76],[219,181,217,131,220,161,138,136,30,189,253,4,216,73,206,24,185,17,238,64,95,145,186,38,163,194,24,213,157,171,249,216],[105,7,89,125,187,206,32,35,161,136,71,227,169,37,78,121,190,228,131,111,183,39,81,54,98,109,199,169,110,113,98,1],[128,102,67,71,98,220,116,147,146,246,243,157,64,64,103,239,139,152,141,144,188,146,44,220,84,138,90,138,233,192,58,110],[119,233,171,158,137,171,96,238,132,229,141,62,97,158,154,159,61,118,2,102,51,105,213,98,226,121,68,166,191,195,2,61],[215,165,143,57,20,203,128,255,26,219,57,174,12,3,184,57,89,78,202,129,53,157,148,223,22,46,11,59,125,85,121,132],[60,135,173,247,227,227,89,28,69,6,145,158,67,208,166,36,178,159,249,193,193,124,21,62,90,15,134,199,149,205,126,11],[151,128,242,13,150,163,101,188,146,22,25,243,49,73,9,30,117,3,238,186,241,63,222,169,177,195,115,228,252,132,218,29],[105,186,130,174,5,247,53,128,154,86,150,160,75,207,99,163,104,72,98,26,227,86,193,170,254,93,52,209,9,58,152,79],[179,18,76,214,183,124,114,204,3,138,30,133,86,191,39,154,95,63,229,154,46,13,200,186,160,117,86,181,191,17,93,21],[187,230,109,2,187,4,202,60,30,233,83,164,77,157,189,116,217,31,79,213,69,32,192,193,186,76,192,212,194,148,26,80],[75,242,212,19,133,13,25,153,156,117,38,207,43,221,37,205,76,41,218,122,153,98,154,185,41,226,86,79,134,17,48,7],[75,44,236,194,242,1,217,154,125,250,252,1,52,132,238,220,22,142,1,66,116,139,227,90,6,13,84,163,51,90,203,132],[11,171,15,192,102,197,53,207,160,193,32,126,54,75,136,110,120,2,92,68,236,192,199,161,232,162,254,1,11,75,68,230],[8,83,65,133,182,42,65,244,82,185,49,20,217,74,187,79,176,214,249,63,139,94,123,255,230,23,114,53,34,162,137,223],[215,178,3,169,254,150,79,49,0,30,4,184,105,244,37,152,118,28,255,38,71,59,58,89,39,95,75,32,60,155,241,33],[237,94,70,246,67,4,181,179,46,81,11,132,206,26,25,172,26,100,74,207,97,16,111,92,193,22,249,177,181,54,233,145],[92,245,62,5,84,26,99,13,123,244,216,95,174,247,152,175,167,165,42,6,176,18,241,210,59,5,19,200,145,34,126,192],[216,208,182,31,249,66,136,110,86,84,192,225,2,205,71,141,13,226,15,5,242,89,238,153,12,84,110,83,196,85,28,199],[172,72,50,211,81,246,178,90,236,185,46,226,80,112,50,126,85,80,106,176,234,217,210,236,199,242,69,126,80,129,232,206],[216,73,131,6,150,193,21,249,144,234,184,168,143,162,21,134,44,203,73,92,33,238,216,47,137,220,175,65,40,108,220,176],[66,194,165,88,36,168,47,169,190,94,84,135,218,218,248,144,203,118,186,168,216,54,210,193,33,119,68,81,0,238,59,130],[254,220,246,99,167,179,46,125,177,240,104,211,159,192,135,228,66,18,251,96,17,177,231,130,46,208,160,195,193,177,112,154],[15,5,115,224,128,61,185,18,90,148,32,179,150,205,65,165,127,224,152,75,62,191,125,27,174,95,113,65,76,133,58,206],[23,216,183,91,221,251,226,142,224,67,152,113,235,6,248,45,84,83,66,130,146,33,125,231,65,75,24,35,141,245,251,168],[162,142,162,49,178,29,67,23,0,248,232,114,177,254,228,105,76,49,107,212,82,106,158,100,15,147,85,229,95,101,69,18],[188,63,246,131,61,167,121,235,101,103,154,90,130,130,71,124,37,127,156,27,40,194,14,126,81,22,202,167,117,173,182,113],[121,166,223,169,71,38,248,30,210,253,110,60,220,112,127,199,47,62,200,192,96,67,243,186,221,87,34,255,3,84,88,27],[185,130,204,7,208,66,25,201,39,77,49,136,77,196,14,168,158,100,37,52,159,172,137,78,236,203,183,86,218,173,71,73],[235,71,32,139,13,187,50,117,173,211,57,196,229,88,23,175,74,139,155,15,229,62,228,200,112,184,238,156,235,166,42,212],[221,70,91,244,142,194,27,152,139,128,6,150,41,150,141,122,249,103,83,34,23,254,16,72,146,196,37,224,56,28,114,17],[150,208,154,198,198,236,227,77,37,88,178,10,211,93,72,199,238,195,23,141,6,80,197,73,232,161,196,170,61,196,185,104]],{from: accounts[9]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length == _usersVote.length', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableTokenMock.address,accounts[6],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+100,{from:accounts[4]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[173,63,181,5,10,148,243,135,228,212,98,215,181,128,189,123,154,208,93,232,45,192,132,139,163,91,214,207,36,65,68,125],[70,148,217,94,229,35,141,214,229,48,63,169,180,87,180,112,80,115,158,185,103,194,235,172,146,46,69,139,12,85,18,51],[228,105,209,9,243,50,194,98,190,232,141,155,240,116,126,79,17,101,245,233,163,253,216,225,75,90,19,40,166,252,88,220],[235,204,237,165,136,59,104,5,120,181,121,96,216,192,167,147,244,255,75,34,177,254,132,107,166,178,28,126,95,159,210,28],[20,141,206,247,142,245,163,40,202,103,129,96,62,192,120,169,242,30,45,11,153,63,8,220,187,6,93,214,62,246,129,170],[201,66,87,248,25,180,12,124,117,203,45,227,248,189,246,227,170,106,201,243,248,229,90,228,56,140,254,41,126,13,139,16],[154,225,3,215,30,50,81,18,68,84,186,175,70,200,101,253,55,166,44,115,70,107,107,5,28,27,210,34,51,91,86,150],[193,27,246,220,242,90,230,138,192,198,52,203,243,247,55,179,89,131,34,29,34,8,178,168,190,119,62,254,109,130,113,171],[180,247,97,220,109,230,9,22,231,173,73,132,59,45,209,36,167,110,174,157,238,216,66,2,62,134,118,53,72,243,76,148],[54,196,88,116,209,196,122,246,192,249,216,6,15,199,38,57,103,205,138,46,201,34,221,223,228,37,70,148,243,206,199,249],[214,12,121,232,120,218,119,10,253,231,94,63,242,103,63,143,70,224,61,182,4,137,123,214,51,249,178,163,65,139,87,61],[173,172,136,144,130,246,87,208,59,87,197,76,63,17,235,47,253,177,53,129,192,39,232,171,230,48,22,80,239,124,224,3],[162,76,242,122,183,235,246,55,26,17,183,128,168,85,66,83,93,152,163,225,122,46,88,147,76,162,43,116,138,100,158,165],[163,32,11,14,69,113,183,227,197,81,149,165,127,193,205,174,79,235,234,21,197,169,210,124,178,114,98,44,184,147,131,243],[164,97,236,15,191,97,131,99,14,241,150,127,130,208,22,249,5,163,30,226,150,89,147,175,232,142,13,20,46,149,157,61],[95,195,8,47,244,60,48,137,150,212,37,246,43,25,3,54,12,26,210,173,245,14,159,6,48,16,42,129,235,129,60,173],[142,161,74,221,106,131,104,27,189,103,233,59,48,185,191,141,187,125,157,1,25,42,211,238,141,127,133,178,214,41,253,37],[155,69,25,128,102,141,228,116,144,224,121,179,182,107,38,181,47,53,34,206,78,138,179,112,77,147,86,13,33,235,47,31],[194,8,27,251,154,162,90,247,103,128,185,206,185,123,7,81,143,183,221,152,80,138,170,47,44,63,205,141,55,126,240,239],[223,201,101,165,62,56,83,38,232,155,227,72,82,135,39,175,74,13,121,10,150,85,129,163,16,224,137,15,144,205,68,98],[52,171,234,14,233,212,109,62,69,226,146,194,130,94,195,215,16,65,39,76,114,201,243,115,168,61,139,156,221,116,58,150],[189,184,50,42,16,19,71,77,89,87,82,34,46,51,140,163,234,157,63,170,117,80,35,201,124,37,11,127,239,107,141,162],[168,201,154,98,255,10,141,182,7,255,180,103,241,50,91,45,243,1,234,199,212,219,141,254,15,25,192,94,90,196,175,48],[236,35,184,75,185,118,126,255,143,212,73,194,234,25,164,34,153,104,155,179,85,212,218,79,137,121,168,52,213,228,0,84],[11,99,245,200,157,73,27,23,102,196,168,58,93,218,110,193,196,76,50,145,85,24,199,106,152,128,16,232,220,212,217,121],[121,24,86,49,235,232,15,244,0,178,133,111,42,95,81,165,228,148,207,9,94,85,214,46,221,54,99,81,248,187,4,88],[117,106,145,59,111,93,123,253,248,155,182,152,185,228,18,29,41,120,142,16,199,190,222,200,143,198,38,98,242,112,39,44],[89,115,206,4,198,90,73,57,161,161,207,223,112,101,186,18,60,0,56,155,167,97,165,209,167,115,40,47,13,128,143,200],[182,227,1,0,189,186,104,90,23,175,160,76,103,7,69,167,28,26,147,36,212,154,184,185,106,69,223,167,211,27,115,206],[213,77,217,70,216,253,148,221,190,41,151,126,250,48,12,121,204,93,38,28,149,207,159,54,29,183,91,82,74,199,86,145],[176,185,109,188,23,98,12,133,116,118,71,171,51,86,183,193,75,85,136,75,184,1,67,8,126,21,246,248,154,73,78,211],[44,115,166,138,71,206,255,153,221,199,112,3,226,180,22,47,6,121,107,13,236,109,193,109,224,16,105,42,134,255,10,38],[98,102,188,18,117,88,155,55,119,156,6,71,173,16,115,163,75,8,35,173,170,193,13,81,83,119,90,8,71,167,44,243],[5,184,223,134,248,176,165,205,84,66,254,234,132,83,175,56,143,7,96,192,245,47,149,49,148,62,40,84,62,159,167,76],[37,144,54,147,198,188,31,98,225,169,198,140,195,116,79,202,240,168,2,241,141,56,50,60,226,82,43,251,2,27,231,234],[142,73,54,27,253,226,150,62,168,59,10,166,248,176,62,92,63,111,52,20,22,200,222,1,169,18,119,120,60,73,210,235],[129,104,55,156,218,202,240,151,143,253,120,123,245,67,22,105,200,161,153,62,141,33,28,208,205,64,146,134,217,36,93,129],[114,7,68,122,38,74,44,161,178,28,12,65,198,145,213,210,253,84,131,120,217,220,16,35,225,75,45,186,68,92,221,94],[124,111,30,152,34,101,207,17,103,60,239,214,139,23,199,220,235,252,73,118,237,166,56,241,151,14,51,64,186,171,32,116],[71,90,91,132,121,51,142,182,130,207,255,221,129,192,134,45,228,81,76,198,104,130,209,167,252,188,221,244,247,49,186,20],[166,18,138,197,65,50,116,40,201,163,84,123,183,253,198,34,64,186,231,235,229,7,4,13,9,186,24,100,157,33,140,91],[152,41,148,79,57,7,73,70,246,82,82,181,122,109,166,236,184,243,208,148,57,10,211,131,227,74,63,34,19,17,76,103],[76,139,207,2,9,41,146,228,41,197,21,204,103,132,1,188,2,227,68,100,238,130,139,68,63,120,196,83,114,175,46,123],[136,78,164,112,80,138,96,66,207,190,116,96,169,69,62,184,205,80,122,232,86,200,96,190,108,166,8,211,39,115,98,155],[49,17,162,254,90,158,230,43,110,105,219,139,19,204,30,131,196,95,146,107,123,16,33,171,29,208,247,36,55,25,103,199],[111,131,214,102,9,180,133,182,67,246,99,76,218,252,33,99,45,235,35,213,175,190,183,65,188,195,33,229,1,146,28,114],[241,88,72,216,183,83,226,210,147,206,92,187,141,43,218,194,91,61,113,231,109,152,193,8,13,110,120,187,201,145,162,5],[72,70,125,250,18,71,190,50,37,188,125,198,236,141,85,243,232,193,6,185,13,94,92,113,115,141,111,177,178,114,159,61],[26,235,154,141,68,253,216,223,214,14,76,227,111,106,175,70,235,231,187,178,18,174,252,145,216,218,218,182,219,5,33,137],[67,130,153,37,200,60,175,110,213,238,129,119,229,155,184,110,254,165,183,33,186,74,186,150,59,157,174,183,171,234,65,191],[16,233,229,65,165,231,184,95,11,124,166,93,121,254,27,112,199,244,138,126,33,158,255,143,0,83,145,86,203,66,32,12],[74,61,82,3,11,91,169,138,224,214,162,196,230,102,195,130,16,49,105,218,117,60,209,204,140,169,51,235,254,211,67,181],[79,171,117,229,132,71,110,28,181,177,204,211,221,220,137,11,177,243,228,13,154,182,69,135,230,52,31,205,50,13,148,89],[69,45,24,130,205,177,139,223,147,45,12,45,125,14,96,129,45,69,252,231,196,14,80,100,155,164,219,88,204,255,26,27],[41,215,231,145,37,184,34,83,199,176,222,47,118,18,173,51,70,52,237,154,174,216,95,242,213,215,255,241,85,219,114,119],[135,199,78,216,128,31,6,229,192,67,133,14,115,131,202,22,43,23,177,178,78,230,142,20,230,192,3,198,73,105,225,138],[115,154,2,247,236,39,147,36,92,115,173,228,120,112,76,118,29,221,72,86,58,216,201,188,120,123,225,226,216,236,33,255],[8,119,18,200,206,118,224,209,13,46,118,161,84,182,9,211,133,59,21,252,238,97,250,238,105,147,123,19,142,223,11,253],[233,138,42,37,214,205,141,143,50,88,150,218,42,138,227,17,82,215,210,82,159,224,57,207,169,65,106,43,252,189,137,53],[2,194,24,14,6,179,250,125,139,16,162,26,196,213,4,19,90,189,124,140,128,3,11,86,46,126,92,228,72,98,231,207],[125,74,93,183,95,132,213,41,213,237,39,83,140,95,87,150,127,77,231,46,16,244,11,134,70,122,39,91,168,227,42,197],[103,86,71,23,14,164,229,2,220,138,117,95,19,187,63,189,92,84,175,249,40,180,53,157,34,223,43,36,79,254,4,30],[139,158,249,234,79,92,207,149,210,116,207,85,215,238,173,115,67,240,133,183,27,189,239,6,37,217,24,215,219,37,204,7],[96,224,218,46,140,28,78,176,20,119,162,201,206,75,253,136,24,246,248,78,7,106,112,13,252,240,233,14,16,6,178,215],[18,235,54,104,98,20,134,149,214,82,249,60,183,214,41,94,144,46,161,120,113,85,42,230,224,241,39,125,63,91,178,122],[10,51,91,58,144,191,236,194,253,92,206,80,73,53,182,194,168,125,79,62,232,179,43,131,18,190,174,151,236,89,206,1],[61,89,205,180,44,188,10,143,51,219,229,80,214,154,149,94,245,86,97,218,41,240,53,126,3,84,224,183,222,174,196,87]], [[70,175,232,125,149,21,37,140,15,9,117,58,211,26,149,16,147,207,9,77,216,58,209,2,97,251,227,155,69,168,18,106],[238,127,107,150,68,153,177,183,108,192,229,164,141,34,90,78,125,26,254,169,91,99,135,37,76,87,195,37,91,237,150,172],[13,165,55,245,156,211,55,219,28,36,49,178,189,56,70,5,48,217,100,217,212,100,242,233,18,126,55,166,200,203,224,224],[30,58,192,166,189,19,136,40,165,181,144,135,67,7,39,248,124,251,47,204,28,122,237,140,198,239,129,144,91,5,128,138],[47,237,171,201,22,63,159,203,20,101,66,50,197,211,39,39,153,124,234,179,226,63,22,37,224,162,109,89,43,120,42,47],[186,131,97,51,115,99,100,53,34,145,198,117,166,197,162,172,216,117,78,37,98,121,94,178,166,19,241,111,220,151,234,11],[192,137,14,164,119,14,70,223,111,182,179,245,88,165,178,252,173,45,86,217,42,153,72,204,212,103,104,146,103,6,13,135],[236,246,172,72,154,124,11,197,250,180,82,167,117,254,133,210,31,73,132,237,4,97,147,83,131,83,26,196,109,26,176,137],[210,223,114,154,64,8,204,252,6,78,178,91,57,73,226,173,205,230,248,170,62,45,249,36,101,15,208,93,29,20,37,141],[60,126,236,86,161,127,84,233,181,73,236,76,115,205,86,75,80,247,248,247,227,123,251,188,203,60,228,117,56,46,86,90],[42,168,152,0,205,9,184,55,44,56,63,230,106,217,93,174,148,136,37,12,64,155,30,30,254,70,255,123,144,249,17,26],[64,162,84,153,133,186,224,81,181,247,90,254,45,231,171,218,124,56,252,39,13,76,202,230,84,186,230,123,162,135,248,122],[175,127,211,229,160,125,26,148,226,223,251,120,190,226,50,232,131,82,57,163,26,134,214,71,13,113,233,117,217,10,30,157],[58,113,68,147,14,71,118,122,21,41,54,150,110,201,198,46,212,4,27,93,141,118,247,182,111,133,107,197,172,220,135,138],[34,205,107,187,98,118,209,13,249,162,154,253,128,198,74,93,137,27,105,9,77,81,27,54,38,239,84,195,93,46,227,182],[205,55,161,105,190,41,179,92,24,197,174,127,185,177,199,247,251,106,183,154,150,234,176,55,36,53,215,242,150,8,21,90],[194,147,106,42,194,203,126,25,32,185,108,145,197,49,120,221,227,225,205,126,198,189,50,45,151,62,73,108,186,68,205,206],[89,171,150,252,181,21,209,66,31,232,181,186,1,21,9,96,214,171,128,111,80,255,85,194,240,67,241,209,25,25,49,25],[185,37,212,28,63,165,61,22,20,72,24,68,98,15,40,250,119,121,203,253,208,32,116,201,94,141,75,38,149,114,214,128],[159,122,207,199,253,32,190,77,120,172,189,20,63,153,250,154,44,189,137,189,168,221,173,24,141,180,163,115,174,55,48,4],[111,217,135,118,112,142,87,123,201,93,248,253,121,23,61,89,203,231,13,4,17,231,163,152,52,28,254,175,181,161,244,33],[202,24,221,244,60,55,255,30,122,172,221,114,255,28,60,176,93,14,221,22,152,73,38,91,41,131,14,110,223,129,125,53],[240,247,165,119,79,9,109,65,220,235,224,136,35,39,168,217,62,25,91,17,47,27,188,11,40,190,220,30,207,183,43,144],[140,211,233,10,93,18,142,150,78,136,62,128,131,94,151,103,58,66,115,146,128,39,243,52,219,14,130,156,43,119,23,152],[131,3,142,131,45,238,81,148,220,149,147,123,174,228,142,66,205,2,60,71,20,203,195,206,25,228,146,204,112,41,249,252],[217,191,182,244,80,34,12,230,207,45,188,167,249,195,134,172,217,21,40,184,218,25,6,179,213,215,111,155,69,9,10,11],[3,6,20,45,30,136,26,73,147,94,20,62,40,105,83,42,211,109,176,234,92,213,204,240,50,186,21,2,66,7,149,231],[34,148,238,55,159,64,201,206,118,142,111,21,196,111,174,7,192,37,58,186,184,51,82,6,189,176,197,237,192,144,216,247],[181,143,97,149,39,98,91,79,114,134,9,125,17,149,255,237,146,143,55,163,19,194,221,73,131,12,102,93,30,107,153,145],[158,11,96,56,95,70,134,111,170,9,220,47,228,98,167,206,241,139,239,165,82,100,157,89,151,28,4,237,124,178,234,224],[24,70,142,176,86,164,18,6,181,98,130,54,19,161,234,133,181,32,219,234,179,184,195,110,63,228,165,85,110,1,140,96],[231,223,16,26,44,141,132,161,179,221,14,129,201,230,54,60,15,28,117,121,155,249,237,166,56,83,224,39,240,56,121,69],[241,212,33,38,69,101,61,221,188,202,82,86,189,135,135,95,107,151,134,152,75,140,72,89,180,236,105,224,194,152,236,247],[217,206,207,139,76,72,215,183,41,218,249,73,152,51,94,70,71,227,90,158,238,243,87,118,37,40,79,231,181,120,112,27],[48,244,205,155,80,184,143,58,127,69,57,181,210,105,60,58,12,11,131,58,88,97,247,160,89,116,223,43,249,220,119,76],[219,181,217,131,220,161,138,136,30,189,253,4,216,73,206,24,185,17,238,64,95,145,186,38,163,194,24,213,157,171,249,216],[105,7,89,125,187,206,32,35,161,136,71,227,169,37,78,121,190,228,131,111,183,39,81,54,98,109,199,169,110,113,98,1],[128,102,67,71,98,220,116,147,146,246,243,157,64,64,103,239,139,152,141,144,188,146,44,220,84,138,90,138,233,192,58,110],[119,233,171,158,137,171,96,238,132,229,141,62,97,158,154,159,61,118,2,102,51,105,213,98,226,121,68,166,191,195,2,61],[215,165,143,57,20,203,128,255,26,219,57,174,12,3,184,57,89,78,202,129,53,157,148,223,22,46,11,59,125,85,121,132],[60,135,173,247,227,227,89,28,69,6,145,158,67,208,166,36,178,159,249,193,193,124,21,62,90,15,134,199,149,205,126,11],[151,128,242,13,150,163,101,188,146,22,25,243,49,73,9,30,117,3,238,186,241,63,222,169,177,195,115,228,252,132,218,29],[105,186,130,174,5,247,53,128,154,86,150,160,75,207,99,163,104,72,98,26,227,86,193,170,254,93,52,209,9,58,152,79],[179,18,76,214,183,124,114,204,3,138,30,133,86,191,39,154,95,63,229,154,46,13,200,186,160,117,86,181,191,17,93,21],[187,230,109,2,187,4,202,60,30,233,83,164,77,157,189,116,217,31,79,213,69,32,192,193,186,76,192,212,194,148,26,80],[75,242,212,19,133,13,25,153,156,117,38,207,43,221,37,205,76,41,218,122,153,98,154,185,41,226,86,79,134,17,48,7],[75,44,236,194,242,1,217,154,125,250,252,1,52,132,238,220,22,142,1,66,116,139,227,90,6,13,84,163,51,90,203,132],[11,171,15,192,102,197,53,207,160,193,32,126,54,75,136,110,120,2,92,68,236,192,199,161,232,162,254,1,11,75,68,230],[8,83,65,133,182,42,65,244,82,185,49,20,217,74,187,79,176,214,249,63,139,94,123,255,230,23,114,53,34,162,137,223],[215,178,3,169,254,150,79,49,0,30,4,184,105,244,37,152,118,28,255,38,71,59,58,89,39,95,75,32,60,155,241,33],[237,94,70,246,67,4,181,179,46,81,11,132,206,26,25,172,26,100,74,207,97,16,111,92,193,22,249,177,181,54,233,145],[92,245,62,5,84,26,99,13,123,244,216,95,174,247,152,175,167,165,42,6,176,18,241,210,59,5,19,200,145,34,126,192],[216,208,182,31,249,66,136,110,86,84,192,225,2,205,71,141,13,226,15,5,242,89,238,153,12,84,110,83,196,85,28,199],[172,72,50,211,81,246,178,90,236,185,46,226,80,112,50,126,85,80,106,176,234,217,210,236,199,242,69,126,80,129,232,206],[216,73,131,6,150,193,21,249,144,234,184,168,143,162,21,134,44,203,73,92,33,238,216,47,137,220,175,65,40,108,220,176],[66,194,165,88,36,168,47,169,190,94,84,135,218,218,248,144,203,118,186,168,216,54,210,193,33,119,68,81,0,238,59,130],[254,220,246,99,167,179,46,125,177,240,104,211,159,192,135,228,66,18,251,96,17,177,231,130,46,208,160,195,193,177,112,154],[15,5,115,224,128,61,185,18,90,148,32,179,150,205,65,165,127,224,152,75,62,191,125,27,174,95,113,65,76,133,58,206],[23,216,183,91,221,251,226,142,224,67,152,113,235,6,248,45,84,83,66,130,146,33,125,231,65,75,24,35,141,245,251,168],[162,142,162,49,178,29,67,23,0,248,232,114,177,254,228,105,76,49,107,212,82,106,158,100,15,147,85,229,95,101,69,18],[188,63,246,131,61,167,121,235,101,103,154,90,130,130,71,124,37,127,156,27,40,194,14,126,81,22,202,167,117,173,182,113],[121,166,223,169,71,38,248,30,210,253,110,60,220,112,127,199,47,62,200,192,96,67,243,186,221,87,34,255,3,84,88,27],[185,130,204,7,208,66,25,201,39,77,49,136,77,196,14,168,158,100,37,52,159,172,137,78,236,203,183,86,218,173,71,73],[235,71,32,139,13,187,50,117,173,211,57,196,229,88,23,175,74,139,155,15,229,62,228,200,112,184,238,156,235,166,42,212],[221,70,91,244,142,194,27,152,139,128,6,150,41,150,141,122,249,103,83,34,23,254,16,72,146,196,37,224,56,28,114,17],[150,208,154,198,198,236,227,77,37,88,178,10,211,93,72,199,238,195,23,141,6,80,197,73,232,161,196,170,61,196,185,104]],{from: accounts[4]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length != 0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableTokenMock.address,accounts[6],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+100,{from:accounts[4]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([], [[70,175,232,125,149,21,37,140,15,9,117,58,211,26,149,16,147,207,9,77,216,58,209,2,97,251,227,155,69,168,18,106],[238,127,107,150,68,153,177,183,108,192,229,164,141,34,90,78,125,26,254,169,91,99,135,37,76,87,195,37,91,237,150,172],[13,165,55,245,156,211,55,219,28,36,49,178,189,56,70,5,48,217,100,217,212,100,242,233,18,126,55,166,200,203,224,224],[30,58,192,166,189,19,136,40,165,181,144,135,67,7,39,248,124,251,47,204,28,122,237,140,198,239,129,144,91,5,128,138],[47,237,171,201,22,63,159,203,20,101,66,50,197,211,39,39,153,124,234,179,226,63,22,37,224,162,109,89,43,120,42,47],[186,131,97,51,115,99,100,53,34,145,198,117,166,197,162,172,216,117,78,37,98,121,94,178,166,19,241,111,220,151,234,11],[192,137,14,164,119,14,70,223,111,182,179,245,88,165,178,252,173,45,86,217,42,153,72,204,212,103,104,146,103,6,13,135],[236,246,172,72,154,124,11,197,250,180,82,167,117,254,133,210,31,73,132,237,4,97,147,83,131,83,26,196,109,26,176,137],[210,223,114,154,64,8,204,252,6,78,178,91,57,73,226,173,205,230,248,170,62,45,249,36,101,15,208,93,29,20,37,141],[60,126,236,86,161,127,84,233,181,73,236,76,115,205,86,75,80,247,248,247,227,123,251,188,203,60,228,117,56,46,86,90],[42,168,152,0,205,9,184,55,44,56,63,230,106,217,93,174,148,136,37,12,64,155,30,30,254,70,255,123,144,249,17,26],[64,162,84,153,133,186,224,81,181,247,90,254,45,231,171,218,124,56,252,39,13,76,202,230,84,186,230,123,162,135,248,122],[175,127,211,229,160,125,26,148,226,223,251,120,190,226,50,232,131,82,57,163,26,134,214,71,13,113,233,117,217,10,30,157],[58,113,68,147,14,71,118,122,21,41,54,150,110,201,198,46,212,4,27,93,141,118,247,182,111,133,107,197,172,220,135,138],[34,205,107,187,98,118,209,13,249,162,154,253,128,198,74,93,137,27,105,9,77,81,27,54,38,239,84,195,93,46,227,182],[205,55,161,105,190,41,179,92,24,197,174,127,185,177,199,247,251,106,183,154,150,234,176,55,36,53,215,242,150,8,21,90],[194,147,106,42,194,203,126,25,32,185,108,145,197,49,120,221,227,225,205,126,198,189,50,45,151,62,73,108,186,68,205,206],[89,171,150,252,181,21,209,66,31,232,181,186,1,21,9,96,214,171,128,111,80,255,85,194,240,67,241,209,25,25,49,25],[185,37,212,28,63,165,61,22,20,72,24,68,98,15,40,250,119,121,203,253,208,32,116,201,94,141,75,38,149,114,214,128],[159,122,207,199,253,32,190,77,120,172,189,20,63,153,250,154,44,189,137,189,168,221,173,24,141,180,163,115,174,55,48,4],[111,217,135,118,112,142,87,123,201,93,248,253,121,23,61,89,203,231,13,4,17,231,163,152,52,28,254,175,181,161,244,33],[202,24,221,244,60,55,255,30,122,172,221,114,255,28,60,176,93,14,221,22,152,73,38,91,41,131,14,110,223,129,125,53],[240,247,165,119,79,9,109,65,220,235,224,136,35,39,168,217,62,25,91,17,47,27,188,11,40,190,220,30,207,183,43,144],[140,211,233,10,93,18,142,150,78,136,62,128,131,94,151,103,58,66,115,146,128,39,243,52,219,14,130,156,43,119,23,152],[131,3,142,131,45,238,81,148,220,149,147,123,174,228,142,66,205,2,60,71,20,203,195,206,25,228,146,204,112,41,249,252],[217,191,182,244,80,34,12,230,207,45,188,167,249,195,134,172,217,21,40,184,218,25,6,179,213,215,111,155,69,9,10,11],[3,6,20,45,30,136,26,73,147,94,20,62,40,105,83,42,211,109,176,234,92,213,204,240,50,186,21,2,66,7,149,231],[34,148,238,55,159,64,201,206,118,142,111,21,196,111,174,7,192,37,58,186,184,51,82,6,189,176,197,237,192,144,216,247],[181,143,97,149,39,98,91,79,114,134,9,125,17,149,255,237,146,143,55,163,19,194,221,73,131,12,102,93,30,107,153,145],[158,11,96,56,95,70,134,111,170,9,220,47,228,98,167,206,241,139,239,165,82,100,157,89,151,28,4,237,124,178,234,224],[24,70,142,176,86,164,18,6,181,98,130,54,19,161,234,133,181,32,219,234,179,184,195,110,63,228,165,85,110,1,140,96],[231,223,16,26,44,141,132,161,179,221,14,129,201,230,54,60,15,28,117,121,155,249,237,166,56,83,224,39,240,56,121,69],[241,212,33,38,69,101,61,221,188,202,82,86,189,135,135,95,107,151,134,152,75,140,72,89,180,236,105,224,194,152,236,247],[217,206,207,139,76,72,215,183,41,218,249,73,152,51,94,70,71,227,90,158,238,243,87,118,37,40,79,231,181,120,112,27],[48,244,205,155,80,184,143,58,127,69,57,181,210,105,60,58,12,11,131,58,88,97,247,160,89,116,223,43,249,220,119,76],[219,181,217,131,220,161,138,136,30,189,253,4,216,73,206,24,185,17,238,64,95,145,186,38,163,194,24,213,157,171,249,216],[105,7,89,125,187,206,32,35,161,136,71,227,169,37,78,121,190,228,131,111,183,39,81,54,98,109,199,169,110,113,98,1],[128,102,67,71,98,220,116,147,146,246,243,157,64,64,103,239,139,152,141,144,188,146,44,220,84,138,90,138,233,192,58,110],[119,233,171,158,137,171,96,238,132,229,141,62,97,158,154,159,61,118,2,102,51,105,213,98,226,121,68,166,191,195,2,61],[215,165,143,57,20,203,128,255,26,219,57,174,12,3,184,57,89,78,202,129,53,157,148,223,22,46,11,59,125,85,121,132],[60,135,173,247,227,227,89,28,69,6,145,158,67,208,166,36,178,159,249,193,193,124,21,62,90,15,134,199,149,205,126,11],[151,128,242,13,150,163,101,188,146,22,25,243,49,73,9,30,117,3,238,186,241,63,222,169,177,195,115,228,252,132,218,29],[105,186,130,174,5,247,53,128,154,86,150,160,75,207,99,163,104,72,98,26,227,86,193,170,254,93,52,209,9,58,152,79],[179,18,76,214,183,124,114,204,3,138,30,133,86,191,39,154,95,63,229,154,46,13,200,186,160,117,86,181,191,17,93,21],[187,230,109,2,187,4,202,60,30,233,83,164,77,157,189,116,217,31,79,213,69,32,192,193,186,76,192,212,194,148,26,80],[75,242,212,19,133,13,25,153,156,117,38,207,43,221,37,205,76,41,218,122,153,98,154,185,41,226,86,79,134,17,48,7],[75,44,236,194,242,1,217,154,125,250,252,1,52,132,238,220,22,142,1,66,116,139,227,90,6,13,84,163,51,90,203,132],[11,171,15,192,102,197,53,207,160,193,32,126,54,75,136,110,120,2,92,68,236,192,199,161,232,162,254,1,11,75,68,230],[8,83,65,133,182,42,65,244,82,185,49,20,217,74,187,79,176,214,249,63,139,94,123,255,230,23,114,53,34,162,137,223],[215,178,3,169,254,150,79,49,0,30,4,184,105,244,37,152,118,28,255,38,71,59,58,89,39,95,75,32,60,155,241,33],[237,94,70,246,67,4,181,179,46,81,11,132,206,26,25,172,26,100,74,207,97,16,111,92,193,22,249,177,181,54,233,145],[92,245,62,5,84,26,99,13,123,244,216,95,174,247,152,175,167,165,42,6,176,18,241,210,59,5,19,200,145,34,126,192],[216,208,182,31,249,66,136,110,86,84,192,225,2,205,71,141,13,226,15,5,242,89,238,153,12,84,110,83,196,85,28,199],[172,72,50,211,81,246,178,90,236,185,46,226,80,112,50,126,85,80,106,176,234,217,210,236,199,242,69,126,80,129,232,206],[216,73,131,6,150,193,21,249,144,234,184,168,143,162,21,134,44,203,73,92,33,238,216,47,137,220,175,65,40,108,220,176],[66,194,165,88,36,168,47,169,190,94,84,135,218,218,248,144,203,118,186,168,216,54,210,193,33,119,68,81,0,238,59,130],[254,220,246,99,167,179,46,125,177,240,104,211,159,192,135,228,66,18,251,96,17,177,231,130,46,208,160,195,193,177,112,154],[15,5,115,224,128,61,185,18,90,148,32,179,150,205,65,165,127,224,152,75,62,191,125,27,174,95,113,65,76,133,58,206],[23,216,183,91,221,251,226,142,224,67,152,113,235,6,248,45,84,83,66,130,146,33,125,231,65,75,24,35,141,245,251,168],[162,142,162,49,178,29,67,23,0,248,232,114,177,254,228,105,76,49,107,212,82,106,158,100,15,147,85,229,95,101,69,18],[188,63,246,131,61,167,121,235,101,103,154,90,130,130,71,124,37,127,156,27,40,194,14,126,81,22,202,167,117,173,182,113],[121,166,223,169,71,38,248,30,210,253,110,60,220,112,127,199,47,62,200,192,96,67,243,186,221,87,34,255,3,84,88,27],[185,130,204,7,208,66,25,201,39,77,49,136,77,196,14,168,158,100,37,52,159,172,137,78,236,203,183,86,218,173,71,73],[235,71,32,139,13,187,50,117,173,211,57,196,229,88,23,175,74,139,155,15,229,62,228,200,112,184,238,156,235,166,42,212],[221,70,91,244,142,194,27,152,139,128,6,150,41,150,141,122,249,103,83,34,23,254,16,72,146,196,37,224,56,28,114,17],[150,208,154,198,198,236,227,77,37,88,178,10,211,93,72,199,238,195,23,141,6,80,197,73,232,161,196,170,61,196,185,104]],{from: accounts[4]}),'revert');
  });
  it('Should execute finalizeVote(string) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,submissionsCount==votesCount', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+25,{from:accounts[4]});
    let result = await localOnChainVoting.finalizeVote("Example",{from: accounts[4]});
  });
  it('Should fail finalizeVote(string) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+25,{from:accounts[4]});
    let result = await truffleAssert.fails(localOnChainVoting.finalizeVote("Example",{from: accounts[9]}),'revert');
  });
});
