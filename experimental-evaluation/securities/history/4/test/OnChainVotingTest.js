const truffleAssert = require('truffle-assertions');
const PaymentTokenMock = artifacts.require("PaymentTokenMock");
const RedeemableTokenMock = artifacts.require("RedeemableTokenMock");
const OffChainPayments = artifacts.require("OffChainPayments");
const OnChainPayments = artifacts.require("OnChainPayments");
const FixedPriceTender = artifacts.require("FixedPriceTender");
const FullRedemption = artifacts.require("FullRedemption");
const PartialRedemption = artifacts.require("PartialRedemption");
const RedeemableToken = artifacts.require("RedeemableToken");
const OnChainVoting = artifacts.require("OnChainVoting");
const ECDSA = artifacts.require("openzeppelin-solidity/contracts/cryptography/ECDSA.sol");
const Math = artifacts.require("openzeppelin-solidity/contracts/math/Math.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ERC20 = artifacts.require("openzeppelin-solidity/contracts/token/ERC20/ERC20.sol");

contract("OnChainVoting",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractMath = null;
  let contractECDSA = null;
  let contractERC20 = null;
  let contractRedeemableToken = null;
  let contractPaymentTokenMock = null;
  let contractRedeemableTokenMock = null;
  let contractOffChainPayments = null;
  let contractPartialRedemption = null;
  let contractOnChainPayments = null;
  let contractFixedPriceTender = null;
  let contractFullRedemption = null;
  let contractOnChainVoting = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractMath = await Math.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Math.new({from: accounts[0]}');
    contractECDSA = await ECDSA.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ECDSA.new({from: accounts[0]}');
    ERC20.link("SafeMath",contractSafeMath.address);
    contractERC20 = await ERC20.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ERC20.new({from: accounts[0]}');
    RedeemableToken.link("SafeMath",contractSafeMath.address);
    contractRedeemableToken = await RedeemableToken.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableToken.new({from: accounts[0]}');
    contractPaymentTokenMock = await PaymentTokenMock.new(accounts[3],2014223716,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PaymentTokenMock.new(accounts[3],2014223716,{from:accounts[0]}');
    contractRedeemableTokenMock = await RedeemableTokenMock.new(accounts[7],1532892062,{from:accounts[0]});
    if(trace) console.log('SUCESSO: RedeemableTokenMock.new(accounts[7],1532892062,{from:accounts[0]}');
    OffChainPayments.link("SafeMath",contractSafeMath.address);
     OffChainPayments.link("ECDSA",contractECDSA.address);
    contractOffChainPayments = await OffChainPayments.new(accounts[8],{from:accounts[6]});
    if(trace) console.log('SUCESSO: OffChainPayments.new(accounts[8],{from:accounts[6]}');
    PartialRedemption.link("SafeMath",contractSafeMath.address);
    contractPartialRedemption = await PartialRedemption.new(contractRedeemableTokenMock.address,contractRedeemableTokenMock.address,accounts[8],1532892062,{from:accounts[0]});
    if(trace) console.log('SUCESSO: PartialRedemption.new(contractRedeemableTokenMock.address,contractRedeemableTokenMock.address,accounts[8],1532892062,{from:accounts[0]}');
    OnChainPayments.link("SafeMath",contractSafeMath.address);
     OnChainPayments.link("ECDSA",contractECDSA.address);
    contractOnChainPayments = await OnChainPayments.new(contractRedeemableTokenMock.address,contractPaymentTokenMock.address,accounts[8],{from:accounts[4]});
    if(trace) console.log('SUCESSO: OnChainPayments.new(contractRedeemableTokenMock.address,contractPaymentTokenMock.address,accounts[8],{from:accounts[4]}');
    FixedPriceTender.link("Math",contractMath.address);
     FixedPriceTender.link("SafeMath",contractSafeMath.address);
    contractFixedPriceTender = await FixedPriceTender.new(3,contractPaymentTokenMock.address,contractPaymentTokenMock.address,accounts[2],6,256,{from:accounts[5]});
    if(trace) console.log('SUCESSO: FixedPriceTender.new(3,contractPaymentTokenMock.address,contractPaymentTokenMock.address,accounts[2],6,256,{from:accounts[5]}');
    FullRedemption.link("SafeMath",contractSafeMath.address);
    contractFullRedemption = await FullRedemption.new(contractPaymentTokenMock.address,contractRedeemableToken.address,accounts[4],1532892064,{from:accounts[0]});
    if(trace) console.log('SUCESSO: FullRedemption.new(contractPaymentTokenMock.address,contractRedeemableToken.address,accounts[4],1532892064,{from:accounts[0]}');
    OnChainVoting.link("SafeMath",contractSafeMath.address);
    contractOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[5],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+677,{from:accounts[7]});
    if(trace) console.log('SUCESSO: OnChainVoting.new(contractPaymentTokenMock.address,accounts[5],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+677,{from:accounts[7]}');
  });
  
  it('Should execute placeVote(string) WHEN (await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp<endTime', async () => {
    let result = await contractOnChainVoting.placeVote("IsLibrary",{from: accounts[0]});
  });
  it('Should execute submitUserVotes(bytes32[],bytes32[]) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,_usersSaltHash.length==_usersVote.length,_usersSaltHash.length!=0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+789,{from:accounts[7]});
    let result = await localOnChainVoting.submitUserVotes([[173,151,213,150,36,173,93,212,153,229,84,75,206,87,123,63,106,128,223,95,39,233,199,75,253,94,46,42,61,117,198,13],[83,48,132,57,52,174,20,150,13,211,88,162,239,77,243,36,61,217,194,184,24,74,25,166,185,134,151,157,74,188,199,15],[113,91,204,175,193,3,244,181,168,11,113,115,230,115,242,64,84,254,233,84,77,93,1,213,181,55,225,161,138,121,180,196],[170,164,47,210,120,209,124,17,12,101,113,58,91,75,183,160,76,132,48,16,206,5,62,107,165,47,104,1,222,114,190,128],[23,116,50,20,28,134,252,78,145,131,37,142,254,97,150,186,238,6,114,31,240,126,122,89,114,9,171,198,137,77,205,39],[211,87,155,200,203,155,187,233,19,180,117,61,109,161,126,29,48,243,201,196,28,189,255,63,211,228,161,252,228,230,255,194],[210,167,11,106,119,101,119,150,14,147,86,196,92,50,250,55,195,20,113,26,54,13,185,81,177,80,89,126,246,77,80,129],[100,4,99,68,28,136,104,139,131,51,32,143,90,197,14,178,48,122,172,190,124,27,89,147,211,70,176,135,117,146,97,211],[70,110,200,4,97,5,19,139,65,250,194,152,225,34,185,17,104,163,230,124,66,193,79,158,48,42,183,37,57,186,150,161],[19,2,93,221,159,246,166,53,153,48,171,167,180,105,127,131,130,165,121,133,246,26,96,253,199,238,201,71,60,193,255,180],[17,180,200,185,103,40,222,152,183,66,104,205,30,61,75,187,101,144,245,62,155,227,199,85,244,55,169,197,242,124,106,7],[222,130,102,229,252,118,118,223,116,145,229,94,182,131,191,194,66,247,32,135,133,237,104,171,63,58,89,20,224,12,94,72],[207,30,174,251,70,123,69,177,164,84,223,49,197,64,182,137,194,161,81,210,201,109,211,203,220,116,113,15,122,1,242,217],[168,207,65,234,177,242,121,244,231,148,70,166,192,233,173,26,44,87,215,246,155,23,7,0,94,178,104,223,95,158,154,20],[220,78,164,51,177,234,76,93,125,240,211,74,169,77,237,245,167,88,92,101,218,138,107,61,249,8,148,163,212,152,61,31],[61,214,153,175,0,225,197,18,126,29,84,41,15,147,104,68,205,187,1,40,18,183,196,47,146,103,12,74,250,93,178,136],[127,18,91,58,156,246,22,177,236,108,51,162,195,117,65,108,18,85,69,144,247,78,106,4,9,86,115,149,180,99,152,101],[166,21,105,125,84,169,142,79,152,139,74,250,49,243,15,166,26,57,66,244,32,171,61,66,66,220,68,150,179,82,169,174],[167,110,133,40,156,44,248,235,3,117,139,76,20,107,208,7,70,213,154,26,165,213,50,15,49,223,38,155,2,241,218,63],[15,66,137,221,223,48,249,201,123,234,96,125,26,13,204,252,13,50,192,166,21,206,15,207,120,189,232,77,115,114,221,16],[32,44,127,213,117,215,3,12,233,4,66,156,12,85,148,132,8,99,199,249,197,252,42,197,136,134,22,30,91,66,101,165],[72,32,177,146,40,51,197,195,185,244,201,223,43,101,182,172,44,136,213,41,127,15,124,61,158,190,101,131,206,213,249,253],[130,179,218,30,254,119,253,14,146,70,81,102,26,248,14,5,28,139,90,243,64,74,183,226,8,155,48,143,152,72,80,19],[163,248,113,163,176,199,35,72,77,18,29,106,65,108,49,233,58,116,223,214,226,139,150,201,175,25,205,72,214,19,21,23],[193,217,202,17,142,158,186,248,250,195,19,240,99,219,55,36,60,11,184,214,151,68,61,227,18,79,50,130,42,24,252,96],[123,154,117,6,178,133,7,199,121,58,253,122,235,164,43,77,202,29,128,117,128,46,155,127,48,35,3,152,170,247,200,74],[147,170,200,214,180,218,134,127,114,255,53,12,0,221,115,184,198,243,82,49,201,221,141,164,70,250,159,221,170,173,195,203],[197,81,53,241,201,201,118,169,65,200,36,147,252,33,109,193,121,184,198,124,251,253,80,151,93,48,72,220,1,182,9,228],[86,126,142,5,170,64,222,6,144,252,129,127,25,87,88,199,242,92,35,225,147,82,133,64,26,131,201,190,166,192,32,163],[255,236,116,251,224,109,121,253,57,40,14,114,112,214,163,2,48,87,161,26,46,133,246,117,32,56,224,211,193,79,199,114],[86,171,90,47,196,239,222,33,215,146,16,212,87,146,73,193,5,6,181,110,230,172,201,208,117,28,46,211,218,110,102,252],[141,61,75,27,149,80,224,97,4,108,123,253,147,235,15,177,190,19,48,245,60,179,121,31,246,27,128,206,136,116,154,111],[59,95,187,132,124,147,21,35,75,8,158,108,254,37,61,188,59,142,13,86,3,80,234,190,93,48,198,81,42,243,220,50],[235,140,6,0,104,148,240,76,208,21,23,66,27,9,89,243,120,54,48,9,208,178,111,93,91,167,48,138,84,29,161,231],[190,19,115,165,134,114,163,77,16,75,65,146,197,10,133,108,209,153,156,212,113,4,89,85,245,165,151,226,210,163,149,129],[152,122,163,153,81,72,246,203,220,74,73,149,156,131,241,4,3,88,6,218,40,98,97,117,152,221,219,17,88,235,128,66],[70,67,129,75,159,249,39,226,5,85,14,224,238,240,118,161,106,192,61,240,18,105,197,162,95,176,223,0,145,92,208,131],[204,221,63,148,113,152,215,123,40,147,51,86,220,96,81,196,31,61,109,26,31,141,92,233,95,199,192,234,84,233,28,69],[203,15,190,47,112,252,23,176,68,248,54,172,128,217,171,244,162,21,50,92,135,6,109,203,101,20,7,244,208,61,17,168],[170,193,194,54,78,50,241,61,162,45,17,46,248,38,4,170,137,72,211,230,79,246,21,242,227,145,110,185,191,58,205,151],[153,42,20,114,198,119,223,166,226,47,106,30,166,24,32,113,73,88,214,201,40,80,111,7,136,78,226,87,158,86,196,102],[67,172,108,238,98,239,133,181,167,83,30,200,239,12,50,151,133,116,50,220,183,74,115,228,240,110,248,172,201,223,174,47],[58,162,117,55,159,2,241,110,148,67,64,0,50,92,111,171,230,61,201,65,4,14,76,54,235,181,157,96,79,71,151,121],[239,183,25,224,142,41,31,146,112,125,77,249,53,113,0,200,135,156,176,122,242,46,199,205,165,197,183,82,52,202,69,17],[79,134,179,66,75,183,116,76,165,56,39,207,196,241,217,167,2,58,103,33,171,235,15,225,229,161,180,89,247,62,246,245],[170,28,54,165,47,211,131,245,20,84,67,9,76,96,122,235,80,88,47,236,101,68,165,202,27,6,13,111,115,129,229,199],[151,29,5,201,197,57,134,228,61,152,181,211,95,80,52,115,220,60,116,157,147,223,205,160,240,82,18,73,133,48,190,250],[226,66,180,252,213,221,89,222,173,6,216,199,203,88,136,203,213,216,243,220,57,150,103,219,106,191,251,68,173,95,93,209],[42,211,103,146,14,37,70,24,115,28,45,46,191,83,136,19,136,166,238,79,27,7,4,92,44,175,197,241,214,0,50,129],[14,213,99,160,1,28,117,114,73,83,40,96,106,44,100,88,150,148,136,110,144,122,142,38,180,24,141,172,191,116,194,67],[211,23,55,173,100,28,96,238,187,130,202,81,76,16,168,21,89,78,93,168,79,133,194,224,26,52,112,11,34,148,87,170],[238,237,227,48,210,248,3,101,202,182,169,216,107,172,219,5,226,241,246,174,201,46,116,133,186,147,250,89,39,127,138,169],[103,196,7,196,195,146,101,189,109,100,106,254,116,74,203,231,163,54,141,187,188,155,87,253,44,215,164,127,171,215,152,135],[14,147,52,199,221,161,118,52,79,75,40,120,168,33,59,89,18,114,124,84,229,120,140,59,142,81,184,87,57,35,7,119],[134,153,154,148,203,93,151,141,14,105,43,11,242,91,204,124,156,36,143,138,227,23,196,90,71,160,37,84,230,117,40,186],[40,176,180,190,137,242,112,166,184,93,222,124,182,47,183,191,205,92,216,232,233,48,196,131,8,129,34,227,161,25,145,214],[203,75,244,110,117,199,174,241,1,74,214,157,248,161,43,63,252,206,236,197,24,42,74,119,219,12,240,49,234,230,111,61],[42,147,156,6,153,148,13,95,35,202,213,124,233,248,125,125,31,222,66,155,151,237,58,90,110,81,36,238,136,0,226,223],[34,130,168,192,133,223,144,212,173,245,116,158,133,220,109,242,79,132,125,170,18,146,199,130,66,33,164,101,239,24,247,243],[68,73,99,128,54,8,26,171,18,13,111,173,232,237,243,182,128,244,29,135,236,15,174,122,55,114,244,25,94,43,116,142],[120,18,221,50,135,143,30,244,77,64,115,4,100,12,114,209,239,67,195,44,131,119,78,90,162,206,146,31,76,80,69,215],[159,104,144,200,188,100,191,121,103,192,224,14,46,66,171,42,59,36,88,245,55,147,171,243,100,42,187,8,148,162,208,244],[49,210,208,235,212,83,134,37,253,60,32,245,13,79,192,220,92,179,170,88,177,47,128,159,137,204,40,132,81,115,30,200],[205,71,245,21,13,13,201,102,224,48,52,235,235,133,194,93,101,162,123,249,19,61,115,73,110,249,245,71,126,156,61,231],[122,231,89,131,241,38,191,216,216,20,103,36,239,63,40,67,79,135,77,139,29,125,82,13,15,142,158,165,254,55,194,120],[70,181,23,87,157,32,199,164,103,246,239,31,255,52,111,130,90,93,225,193,107,166,237,251,46,250,190,38,82,32,89,119]], [[71,79,55,201,28,214,1,45,100,111,191,18,178,229,218,141,99,184,92,19,9,203,158,141,69,46,74,12,117,178,35,48],[1,106,174,148,31,186,106,214,134,56,96,98,140,228,187,44,24,171,99,181,208,126,104,221,228,183,201,154,238,11,214,7],[215,164,115,46,227,140,33,102,108,93,210,206,89,206,97,151,65,106,102,128,244,207,246,177,37,97,111,6,151,238,162,88],[77,4,155,162,6,237,20,138,225,31,232,153,98,29,47,51,213,229,201,141,169,156,138,49,164,101,132,25,206,106,156,24],[222,220,22,168,10,15,209,250,140,240,247,28,157,75,171,206,11,223,83,55,93,92,9,249,203,63,27,239,59,220,136,137],[177,104,244,38,68,152,129,129,211,82,159,132,146,251,201,160,114,174,182,202,33,11,152,110,222,147,53,142,82,164,147,221],[227,195,85,100,143,14,249,196,100,203,47,80,163,36,85,231,196,81,103,118,30,93,66,222,238,33,183,157,221,37,68,136],[253,193,173,204,94,40,227,184,168,187,203,253,82,4,191,218,174,94,240,182,76,47,227,53,94,187,117,170,29,29,31,152],[181,139,110,48,250,197,230,51,145,4,231,88,46,142,19,216,117,138,75,19,251,23,229,48,108,136,166,197,226,238,227,117],[246,141,137,245,137,148,139,69,216,17,43,217,54,64,165,174,51,137,48,4,38,14,29,64,73,5,147,136,58,224,206,186],[149,62,244,88,145,101,237,9,175,178,230,183,1,251,74,5,109,33,47,35,121,110,56,230,210,154,208,230,101,105,147,65],[80,117,112,201,64,94,47,56,117,33,7,91,119,213,74,96,167,37,207,153,25,248,29,198,98,166,56,117,20,14,130,239],[135,69,117,65,220,139,208,248,21,120,180,52,24,220,216,39,231,190,98,189,5,151,237,112,99,106,123,10,181,19,196,155],[245,217,61,162,174,147,217,28,207,77,219,232,236,217,175,226,205,64,59,236,4,23,53,91,189,112,205,56,196,255,48,7],[79,236,177,107,109,208,246,98,136,245,237,18,193,83,47,244,173,252,77,167,217,170,41,207,68,59,73,230,157,199,225,182],[2,153,122,192,202,253,153,46,107,39,187,41,251,3,222,8,79,12,212,180,10,133,133,107,1,154,74,186,18,163,55,219],[220,83,255,191,40,188,23,184,146,132,26,98,47,243,212,192,87,133,234,53,173,96,90,251,251,32,210,36,84,41,46,227],[79,146,18,145,205,244,173,213,141,243,31,73,214,192,16,9,60,229,99,110,46,162,45,173,53,110,93,87,74,28,11,191],[255,187,209,184,155,37,165,217,44,103,126,196,58,2,207,55,168,219,71,135,26,120,166,232,226,154,242,52,37,153,52,167],[235,54,67,8,176,77,174,39,90,216,130,40,181,44,131,75,90,130,128,48,96,62,226,150,108,163,153,205,168,250,196,238],[50,64,98,27,17,245,96,199,106,217,87,114,145,94,90,42,161,247,49,252,179,111,2,33,32,90,180,192,44,13,155,201],[234,133,188,63,136,169,50,29,193,237,58,169,106,38,193,115,157,240,142,38,184,77,44,243,235,164,214,103,76,82,225,217],[211,253,248,72,200,56,90,162,139,123,73,62,34,64,140,69,11,157,225,51,20,5,185,3,180,103,133,8,98,150,135,98],[190,95,201,31,156,30,182,200,123,231,16,214,146,122,184,96,137,131,19,133,168,231,125,83,247,249,42,100,17,46,123,33],[60,195,202,130,146,76,215,232,11,120,254,27,35,15,163,173,158,200,254,21,195,29,163,34,49,161,10,200,96,104,167,56],[43,7,175,12,9,233,33,194,130,221,238,105,28,22,222,178,47,29,238,93,138,173,21,217,73,226,174,86,31,214,212,195],[27,98,6,111,84,165,159,124,221,186,39,249,6,54,37,86,249,101,69,91,105,134,246,70,91,218,98,252,18,119,158,225],[96,61,156,19,20,251,129,235,147,141,88,128,72,228,180,93,30,219,31,16,104,139,178,41,5,66,179,244,14,136,223,168],[159,92,157,116,67,123,100,147,52,135,251,207,26,108,92,232,87,18,71,239,195,141,205,11,208,93,85,229,75,53,238,218],[251,69,182,255,199,112,29,215,43,185,99,137,196,196,154,121,234,169,122,171,8,78,181,122,190,218,1,100,46,195,161,90],[99,220,58,185,24,18,149,234,99,236,59,231,147,14,141,65,125,255,235,254,214,1,211,215,191,150,217,244,188,186,104,197],[157,131,149,116,42,210,120,176,155,59,125,221,183,1,13,18,39,230,57,141,125,211,86,253,214,127,186,125,196,139,246,23],[182,43,220,132,144,86,208,234,204,152,52,16,204,48,225,0,69,60,223,126,142,25,74,50,254,49,102,151,75,166,61,13],[14,10,184,216,145,235,30,188,62,117,228,183,183,57,16,213,191,188,134,175,169,164,17,104,248,216,185,5,41,149,56,38],[255,92,77,5,71,253,34,228,77,169,228,64,117,15,239,20,177,83,114,24,111,39,159,19,161,89,110,56,183,137,94,168],[15,123,128,130,148,138,9,210,33,114,192,132,193,248,119,212,214,249,82,98,53,175,41,60,50,157,173,127,104,205,88,174],[179,27,93,189,57,154,116,17,230,151,87,69,226,248,144,247,175,228,172,155,106,94,153,137,2,205,212,229,128,246,152,43],[12,204,117,20,197,88,154,7,20,145,8,77,113,211,108,219,17,199,19,151,227,152,114,206,26,180,117,163,124,155,171,51],[219,14,236,180,14,161,79,122,175,234,45,186,16,219,230,128,19,9,217,80,128,24,139,17,75,244,39,238,82,207,159,2],[101,52,91,40,134,71,23,70,152,25,212,7,249,132,83,206,180,247,146,229,154,171,85,37,25,68,207,131,14,245,166,166],[246,223,110,108,214,85,181,101,240,143,232,132,28,224,175,97,80,225,208,112,56,178,37,171,113,167,195,204,43,63,2,32],[66,111,85,224,56,122,196,175,196,236,161,222,204,159,57,130,76,59,62,130,185,109,59,104,205,70,166,206,55,81,95,195],[157,31,18,212,10,112,174,15,65,109,160,82,75,27,103,167,204,44,103,107,179,250,103,32,148,113,245,160,255,160,208,102],[47,122,71,205,140,209,185,154,239,17,31,194,55,159,127,162,123,178,237,216,147,163,189,162,142,140,218,40,129,204,159,14],[230,83,154,117,21,82,95,75,215,245,158,250,95,139,31,23,192,54,16,167,21,235,138,22,91,241,142,140,94,187,147,71],[22,33,238,68,31,153,75,68,65,229,183,30,37,18,106,56,159,72,80,126,242,232,246,82,246,100,2,164,134,165,164,116],[146,103,166,224,198,151,134,70,57,242,181,234,171,92,56,56,129,249,225,244,210,217,131,229,141,255,221,103,114,164,18,64],[195,166,172,67,213,84,9,51,228,244,131,21,41,181,170,57,160,156,79,20,128,220,103,241,116,208,162,133,88,19,137,5],[122,245,62,159,38,125,196,26,208,131,196,54,107,19,89,170,203,154,177,13,219,177,191,143,211,130,104,36,174,206,190,34],[28,238,223,83,73,83,149,29,141,253,23,130,191,157,11,226,128,226,127,76,41,112,134,99,86,197,154,119,124,85,200,17],[105,152,104,2,204,250,117,78,183,2,174,200,94,230,49,163,244,217,98,119,136,161,234,241,147,230,90,153,116,17,109,169],[72,248,188,109,196,222,44,243,63,239,9,216,59,248,243,11,212,93,9,150,12,143,54,72,121,126,63,184,126,125,133,153],[252,108,54,109,29,129,203,84,144,160,26,62,206,42,119,52,70,214,240,19,232,158,208,31,215,87,47,117,94,253,230,223],[31,253,17,71,155,138,64,164,16,1,82,28,147,117,226,26,20,153,195,222,157,162,129,21,85,17,33,13,120,48,59,108],[26,154,93,217,251,219,19,6,129,66,169,213,153,181,119,34,8,82,217,21,215,230,29,137,255,49,210,176,152,35,179,135],[233,125,41,114,15,5,90,35,92,247,118,29,243,93,211,1,207,131,113,227,189,17,17,197,50,244,72,156,249,145,129,196],[123,45,179,27,232,129,45,43,226,194,245,90,103,63,16,48,132,71,218,198,240,66,178,113,245,163,130,26,99,88,164,57],[13,176,100,52,124,199,92,205,205,64,205,206,234,192,223,212,52,62,4,125,66,180,95,186,186,45,221,234,93,137,184,154],[171,143,39,115,213,51,49,210,35,24,166,252,109,137,53,172,116,79,86,119,114,189,180,17,4,242,30,215,121,132,211,69],[172,3,32,212,180,160,241,92,232,159,233,60,49,12,121,120,78,225,126,36,53,237,173,20,239,194,100,155,86,25,143,194],[151,21,152,79,177,241,248,42,203,198,91,160,115,21,197,53,38,253,227,131,174,9,182,174,47,25,187,226,48,64,96,17],[204,238,60,55,177,191,253,82,192,99,96,229,221,141,26,39,100,247,8,105,18,140,139,88,146,16,66,203,96,247,237,196],[54,163,11,70,216,207,202,129,168,162,131,150,101,155,98,233,115,166,129,162,16,182,168,244,22,140,252,151,53,5,153,186],[69,119,208,31,68,113,86,5,36,211,33,169,189,220,182,233,167,160,30,10,226,104,4,110,231,218,193,141,152,117,181,8],[221,134,221,7,34,183,101,239,113,43,42,21,217,158,163,248,96,135,143,113,122,181,155,26,218,28,183,247,33,41,34,41],[197,191,154,81,180,162,25,212,10,220,10,142,174,209,46,150,150,112,115,104,121,245,174,199,159,101,9,1,31,93,18,152]],{from: accounts[7]});
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+789,{from:accounts[7]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[173,151,213,150,36,173,93,212,153,229,84,75,206,87,123,63,106,128,223,95,39,233,199,75,253,94,46,42,61,117,198,13],[83,48,132,57,52,174,20,150,13,211,88,162,239,77,243,36,61,217,194,184,24,74,25,166,185,134,151,157,74,188,199,15],[113,91,204,175,193,3,244,181,168,11,113,115,230,115,242,64,84,254,233,84,77,93,1,213,181,55,225,161,138,121,180,196],[170,164,47,210,120,209,124,17,12,101,113,58,91,75,183,160,76,132,48,16,206,5,62,107,165,47,104,1,222,114,190,128],[23,116,50,20,28,134,252,78,145,131,37,142,254,97,150,186,238,6,114,31,240,126,122,89,114,9,171,198,137,77,205,39],[211,87,155,200,203,155,187,233,19,180,117,61,109,161,126,29,48,243,201,196,28,189,255,63,211,228,161,252,228,230,255,194],[210,167,11,106,119,101,119,150,14,147,86,196,92,50,250,55,195,20,113,26,54,13,185,81,177,80,89,126,246,77,80,129],[100,4,99,68,28,136,104,139,131,51,32,143,90,197,14,178,48,122,172,190,124,27,89,147,211,70,176,135,117,146,97,211],[70,110,200,4,97,5,19,139,65,250,194,152,225,34,185,17,104,163,230,124,66,193,79,158,48,42,183,37,57,186,150,161],[19,2,93,221,159,246,166,53,153,48,171,167,180,105,127,131,130,165,121,133,246,26,96,253,199,238,201,71,60,193,255,180],[17,180,200,185,103,40,222,152,183,66,104,205,30,61,75,187,101,144,245,62,155,227,199,85,244,55,169,197,242,124,106,7],[222,130,102,229,252,118,118,223,116,145,229,94,182,131,191,194,66,247,32,135,133,237,104,171,63,58,89,20,224,12,94,72],[207,30,174,251,70,123,69,177,164,84,223,49,197,64,182,137,194,161,81,210,201,109,211,203,220,116,113,15,122,1,242,217],[168,207,65,234,177,242,121,244,231,148,70,166,192,233,173,26,44,87,215,246,155,23,7,0,94,178,104,223,95,158,154,20],[220,78,164,51,177,234,76,93,125,240,211,74,169,77,237,245,167,88,92,101,218,138,107,61,249,8,148,163,212,152,61,31],[61,214,153,175,0,225,197,18,126,29,84,41,15,147,104,68,205,187,1,40,18,183,196,47,146,103,12,74,250,93,178,136],[127,18,91,58,156,246,22,177,236,108,51,162,195,117,65,108,18,85,69,144,247,78,106,4,9,86,115,149,180,99,152,101],[166,21,105,125,84,169,142,79,152,139,74,250,49,243,15,166,26,57,66,244,32,171,61,66,66,220,68,150,179,82,169,174],[167,110,133,40,156,44,248,235,3,117,139,76,20,107,208,7,70,213,154,26,165,213,50,15,49,223,38,155,2,241,218,63],[15,66,137,221,223,48,249,201,123,234,96,125,26,13,204,252,13,50,192,166,21,206,15,207,120,189,232,77,115,114,221,16],[32,44,127,213,117,215,3,12,233,4,66,156,12,85,148,132,8,99,199,249,197,252,42,197,136,134,22,30,91,66,101,165],[72,32,177,146,40,51,197,195,185,244,201,223,43,101,182,172,44,136,213,41,127,15,124,61,158,190,101,131,206,213,249,253],[130,179,218,30,254,119,253,14,146,70,81,102,26,248,14,5,28,139,90,243,64,74,183,226,8,155,48,143,152,72,80,19],[163,248,113,163,176,199,35,72,77,18,29,106,65,108,49,233,58,116,223,214,226,139,150,201,175,25,205,72,214,19,21,23],[193,217,202,17,142,158,186,248,250,195,19,240,99,219,55,36,60,11,184,214,151,68,61,227,18,79,50,130,42,24,252,96],[123,154,117,6,178,133,7,199,121,58,253,122,235,164,43,77,202,29,128,117,128,46,155,127,48,35,3,152,170,247,200,74],[147,170,200,214,180,218,134,127,114,255,53,12,0,221,115,184,198,243,82,49,201,221,141,164,70,250,159,221,170,173,195,203],[197,81,53,241,201,201,118,169,65,200,36,147,252,33,109,193,121,184,198,124,251,253,80,151,93,48,72,220,1,182,9,228],[86,126,142,5,170,64,222,6,144,252,129,127,25,87,88,199,242,92,35,225,147,82,133,64,26,131,201,190,166,192,32,163],[255,236,116,251,224,109,121,253,57,40,14,114,112,214,163,2,48,87,161,26,46,133,246,117,32,56,224,211,193,79,199,114],[86,171,90,47,196,239,222,33,215,146,16,212,87,146,73,193,5,6,181,110,230,172,201,208,117,28,46,211,218,110,102,252],[141,61,75,27,149,80,224,97,4,108,123,253,147,235,15,177,190,19,48,245,60,179,121,31,246,27,128,206,136,116,154,111],[59,95,187,132,124,147,21,35,75,8,158,108,254,37,61,188,59,142,13,86,3,80,234,190,93,48,198,81,42,243,220,50],[235,140,6,0,104,148,240,76,208,21,23,66,27,9,89,243,120,54,48,9,208,178,111,93,91,167,48,138,84,29,161,231],[190,19,115,165,134,114,163,77,16,75,65,146,197,10,133,108,209,153,156,212,113,4,89,85,245,165,151,226,210,163,149,129],[152,122,163,153,81,72,246,203,220,74,73,149,156,131,241,4,3,88,6,218,40,98,97,117,152,221,219,17,88,235,128,66],[70,67,129,75,159,249,39,226,5,85,14,224,238,240,118,161,106,192,61,240,18,105,197,162,95,176,223,0,145,92,208,131],[204,221,63,148,113,152,215,123,40,147,51,86,220,96,81,196,31,61,109,26,31,141,92,233,95,199,192,234,84,233,28,69],[203,15,190,47,112,252,23,176,68,248,54,172,128,217,171,244,162,21,50,92,135,6,109,203,101,20,7,244,208,61,17,168],[170,193,194,54,78,50,241,61,162,45,17,46,248,38,4,170,137,72,211,230,79,246,21,242,227,145,110,185,191,58,205,151],[153,42,20,114,198,119,223,166,226,47,106,30,166,24,32,113,73,88,214,201,40,80,111,7,136,78,226,87,158,86,196,102],[67,172,108,238,98,239,133,181,167,83,30,200,239,12,50,151,133,116,50,220,183,74,115,228,240,110,248,172,201,223,174,47],[58,162,117,55,159,2,241,110,148,67,64,0,50,92,111,171,230,61,201,65,4,14,76,54,235,181,157,96,79,71,151,121],[239,183,25,224,142,41,31,146,112,125,77,249,53,113,0,200,135,156,176,122,242,46,199,205,165,197,183,82,52,202,69,17],[79,134,179,66,75,183,116,76,165,56,39,207,196,241,217,167,2,58,103,33,171,235,15,225,229,161,180,89,247,62,246,245],[170,28,54,165,47,211,131,245,20,84,67,9,76,96,122,235,80,88,47,236,101,68,165,202,27,6,13,111,115,129,229,199],[151,29,5,201,197,57,134,228,61,152,181,211,95,80,52,115,220,60,116,157,147,223,205,160,240,82,18,73,133,48,190,250],[226,66,180,252,213,221,89,222,173,6,216,199,203,88,136,203,213,216,243,220,57,150,103,219,106,191,251,68,173,95,93,209],[42,211,103,146,14,37,70,24,115,28,45,46,191,83,136,19,136,166,238,79,27,7,4,92,44,175,197,241,214,0,50,129],[14,213,99,160,1,28,117,114,73,83,40,96,106,44,100,88,150,148,136,110,144,122,142,38,180,24,141,172,191,116,194,67],[211,23,55,173,100,28,96,238,187,130,202,81,76,16,168,21,89,78,93,168,79,133,194,224,26,52,112,11,34,148,87,170],[238,237,227,48,210,248,3,101,202,182,169,216,107,172,219,5,226,241,246,174,201,46,116,133,186,147,250,89,39,127,138,169],[103,196,7,196,195,146,101,189,109,100,106,254,116,74,203,231,163,54,141,187,188,155,87,253,44,215,164,127,171,215,152,135],[14,147,52,199,221,161,118,52,79,75,40,120,168,33,59,89,18,114,124,84,229,120,140,59,142,81,184,87,57,35,7,119],[134,153,154,148,203,93,151,141,14,105,43,11,242,91,204,124,156,36,143,138,227,23,196,90,71,160,37,84,230,117,40,186],[40,176,180,190,137,242,112,166,184,93,222,124,182,47,183,191,205,92,216,232,233,48,196,131,8,129,34,227,161,25,145,214],[203,75,244,110,117,199,174,241,1,74,214,157,248,161,43,63,252,206,236,197,24,42,74,119,219,12,240,49,234,230,111,61],[42,147,156,6,153,148,13,95,35,202,213,124,233,248,125,125,31,222,66,155,151,237,58,90,110,81,36,238,136,0,226,223],[34,130,168,192,133,223,144,212,173,245,116,158,133,220,109,242,79,132,125,170,18,146,199,130,66,33,164,101,239,24,247,243],[68,73,99,128,54,8,26,171,18,13,111,173,232,237,243,182,128,244,29,135,236,15,174,122,55,114,244,25,94,43,116,142],[120,18,221,50,135,143,30,244,77,64,115,4,100,12,114,209,239,67,195,44,131,119,78,90,162,206,146,31,76,80,69,215],[159,104,144,200,188,100,191,121,103,192,224,14,46,66,171,42,59,36,88,245,55,147,171,243,100,42,187,8,148,162,208,244],[49,210,208,235,212,83,134,37,253,60,32,245,13,79,192,220,92,179,170,88,177,47,128,159,137,204,40,132,81,115,30,200],[205,71,245,21,13,13,201,102,224,48,52,235,235,133,194,93,101,162,123,249,19,61,115,73,110,249,245,71,126,156,61,231],[122,231,89,131,241,38,191,216,216,20,103,36,239,63,40,67,79,135,77,139,29,125,82,13,15,142,158,165,254,55,194,120],[70,181,23,87,157,32,199,164,103,246,239,31,255,52,111,130,90,93,225,193,107,166,237,251,46,250,190,38,82,32,89,119]], [[71,79,55,201,28,214,1,45,100,111,191,18,178,229,218,141,99,184,92,19,9,203,158,141,69,46,74,12,117,178,35,48],[1,106,174,148,31,186,106,214,134,56,96,98,140,228,187,44,24,171,99,181,208,126,104,221,228,183,201,154,238,11,214,7],[215,164,115,46,227,140,33,102,108,93,210,206,89,206,97,151,65,106,102,128,244,207,246,177,37,97,111,6,151,238,162,88],[77,4,155,162,6,237,20,138,225,31,232,153,98,29,47,51,213,229,201,141,169,156,138,49,164,101,132,25,206,106,156,24],[222,220,22,168,10,15,209,250,140,240,247,28,157,75,171,206,11,223,83,55,93,92,9,249,203,63,27,239,59,220,136,137],[177,104,244,38,68,152,129,129,211,82,159,132,146,251,201,160,114,174,182,202,33,11,152,110,222,147,53,142,82,164,147,221],[227,195,85,100,143,14,249,196,100,203,47,80,163,36,85,231,196,81,103,118,30,93,66,222,238,33,183,157,221,37,68,136],[253,193,173,204,94,40,227,184,168,187,203,253,82,4,191,218,174,94,240,182,76,47,227,53,94,187,117,170,29,29,31,152],[181,139,110,48,250,197,230,51,145,4,231,88,46,142,19,216,117,138,75,19,251,23,229,48,108,136,166,197,226,238,227,117],[246,141,137,245,137,148,139,69,216,17,43,217,54,64,165,174,51,137,48,4,38,14,29,64,73,5,147,136,58,224,206,186],[149,62,244,88,145,101,237,9,175,178,230,183,1,251,74,5,109,33,47,35,121,110,56,230,210,154,208,230,101,105,147,65],[80,117,112,201,64,94,47,56,117,33,7,91,119,213,74,96,167,37,207,153,25,248,29,198,98,166,56,117,20,14,130,239],[135,69,117,65,220,139,208,248,21,120,180,52,24,220,216,39,231,190,98,189,5,151,237,112,99,106,123,10,181,19,196,155],[245,217,61,162,174,147,217,28,207,77,219,232,236,217,175,226,205,64,59,236,4,23,53,91,189,112,205,56,196,255,48,7],[79,236,177,107,109,208,246,98,136,245,237,18,193,83,47,244,173,252,77,167,217,170,41,207,68,59,73,230,157,199,225,182],[2,153,122,192,202,253,153,46,107,39,187,41,251,3,222,8,79,12,212,180,10,133,133,107,1,154,74,186,18,163,55,219],[220,83,255,191,40,188,23,184,146,132,26,98,47,243,212,192,87,133,234,53,173,96,90,251,251,32,210,36,84,41,46,227],[79,146,18,145,205,244,173,213,141,243,31,73,214,192,16,9,60,229,99,110,46,162,45,173,53,110,93,87,74,28,11,191],[255,187,209,184,155,37,165,217,44,103,126,196,58,2,207,55,168,219,71,135,26,120,166,232,226,154,242,52,37,153,52,167],[235,54,67,8,176,77,174,39,90,216,130,40,181,44,131,75,90,130,128,48,96,62,226,150,108,163,153,205,168,250,196,238],[50,64,98,27,17,245,96,199,106,217,87,114,145,94,90,42,161,247,49,252,179,111,2,33,32,90,180,192,44,13,155,201],[234,133,188,63,136,169,50,29,193,237,58,169,106,38,193,115,157,240,142,38,184,77,44,243,235,164,214,103,76,82,225,217],[211,253,248,72,200,56,90,162,139,123,73,62,34,64,140,69,11,157,225,51,20,5,185,3,180,103,133,8,98,150,135,98],[190,95,201,31,156,30,182,200,123,231,16,214,146,122,184,96,137,131,19,133,168,231,125,83,247,249,42,100,17,46,123,33],[60,195,202,130,146,76,215,232,11,120,254,27,35,15,163,173,158,200,254,21,195,29,163,34,49,161,10,200,96,104,167,56],[43,7,175,12,9,233,33,194,130,221,238,105,28,22,222,178,47,29,238,93,138,173,21,217,73,226,174,86,31,214,212,195],[27,98,6,111,84,165,159,124,221,186,39,249,6,54,37,86,249,101,69,91,105,134,246,70,91,218,98,252,18,119,158,225],[96,61,156,19,20,251,129,235,147,141,88,128,72,228,180,93,30,219,31,16,104,139,178,41,5,66,179,244,14,136,223,168],[159,92,157,116,67,123,100,147,52,135,251,207,26,108,92,232,87,18,71,239,195,141,205,11,208,93,85,229,75,53,238,218],[251,69,182,255,199,112,29,215,43,185,99,137,196,196,154,121,234,169,122,171,8,78,181,122,190,218,1,100,46,195,161,90],[99,220,58,185,24,18,149,234,99,236,59,231,147,14,141,65,125,255,235,254,214,1,211,215,191,150,217,244,188,186,104,197],[157,131,149,116,42,210,120,176,155,59,125,221,183,1,13,18,39,230,57,141,125,211,86,253,214,127,186,125,196,139,246,23],[182,43,220,132,144,86,208,234,204,152,52,16,204,48,225,0,69,60,223,126,142,25,74,50,254,49,102,151,75,166,61,13],[14,10,184,216,145,235,30,188,62,117,228,183,183,57,16,213,191,188,134,175,169,164,17,104,248,216,185,5,41,149,56,38],[255,92,77,5,71,253,34,228,77,169,228,64,117,15,239,20,177,83,114,24,111,39,159,19,161,89,110,56,183,137,94,168],[15,123,128,130,148,138,9,210,33,114,192,132,193,248,119,212,214,249,82,98,53,175,41,60,50,157,173,127,104,205,88,174],[179,27,93,189,57,154,116,17,230,151,87,69,226,248,144,247,175,228,172,155,106,94,153,137,2,205,212,229,128,246,152,43],[12,204,117,20,197,88,154,7,20,145,8,77,113,211,108,219,17,199,19,151,227,152,114,206,26,180,117,163,124,155,171,51],[219,14,236,180,14,161,79,122,175,234,45,186,16,219,230,128,19,9,217,80,128,24,139,17,75,244,39,238,82,207,159,2],[101,52,91,40,134,71,23,70,152,25,212,7,249,132,83,206,180,247,146,229,154,171,85,37,25,68,207,131,14,245,166,166],[246,223,110,108,214,85,181,101,240,143,232,132,28,224,175,97,80,225,208,112,56,178,37,171,113,167,195,204,43,63,2,32],[66,111,85,224,56,122,196,175,196,236,161,222,204,159,57,130,76,59,62,130,185,109,59,104,205,70,166,206,55,81,95,195],[157,31,18,212,10,112,174,15,65,109,160,82,75,27,103,167,204,44,103,107,179,250,103,32,148,113,245,160,255,160,208,102],[47,122,71,205,140,209,185,154,239,17,31,194,55,159,127,162,123,178,237,216,147,163,189,162,142,140,218,40,129,204,159,14],[230,83,154,117,21,82,95,75,215,245,158,250,95,139,31,23,192,54,16,167,21,235,138,22,91,241,142,140,94,187,147,71],[22,33,238,68,31,153,75,68,65,229,183,30,37,18,106,56,159,72,80,126,242,232,246,82,246,100,2,164,134,165,164,116],[146,103,166,224,198,151,134,70,57,242,181,234,171,92,56,56,129,249,225,244,210,217,131,229,141,255,221,103,114,164,18,64],[195,166,172,67,213,84,9,51,228,244,131,21,41,181,170,57,160,156,79,20,128,220,103,241,116,208,162,133,88,19,137,5],[122,245,62,159,38,125,196,26,208,131,196,54,107,19,89,170,203,154,177,13,219,177,191,143,211,130,104,36,174,206,190,34],[28,238,223,83,73,83,149,29,141,253,23,130,191,157,11,226,128,226,127,76,41,112,134,99,86,197,154,119,124,85,200,17],[105,152,104,2,204,250,117,78,183,2,174,200,94,230,49,163,244,217,98,119,136,161,234,241,147,230,90,153,116,17,109,169],[72,248,188,109,196,222,44,243,63,239,9,216,59,248,243,11,212,93,9,150,12,143,54,72,121,126,63,184,126,125,133,153],[252,108,54,109,29,129,203,84,144,160,26,62,206,42,119,52,70,214,240,19,232,158,208,31,215,87,47,117,94,253,230,223],[31,253,17,71,155,138,64,164,16,1,82,28,147,117,226,26,20,153,195,222,157,162,129,21,85,17,33,13,120,48,59,108],[26,154,93,217,251,219,19,6,129,66,169,213,153,181,119,34,8,82,217,21,215,230,29,137,255,49,210,176,152,35,179,135],[233,125,41,114,15,5,90,35,92,247,118,29,243,93,211,1,207,131,113,227,189,17,17,197,50,244,72,156,249,145,129,196],[123,45,179,27,232,129,45,43,226,194,245,90,103,63,16,48,132,71,218,198,240,66,178,113,245,163,130,26,99,88,164,57],[13,176,100,52,124,199,92,205,205,64,205,206,234,192,223,212,52,62,4,125,66,180,95,186,186,45,221,234,93,137,184,154],[171,143,39,115,213,51,49,210,35,24,166,252,109,137,53,172,116,79,86,119,114,189,180,17,4,242,30,215,121,132,211,69],[172,3,32,212,180,160,241,92,232,159,233,60,49,12,121,120,78,225,126,36,53,237,173,20,239,194,100,155,86,25,143,194],[151,21,152,79,177,241,248,42,203,198,91,160,115,21,197,53,38,253,227,131,174,9,182,174,47,25,187,226,48,64,96,17],[204,238,60,55,177,191,253,82,192,99,96,229,221,141,26,39,100,247,8,105,18,140,139,88,146,16,66,203,96,247,237,196],[54,163,11,70,216,207,202,129,168,162,131,150,101,155,98,233,115,166,129,162,16,182,168,244,22,140,252,151,53,5,153,186],[69,119,208,31,68,113,86,5,36,211,33,169,189,220,182,233,167,160,30,10,226,104,4,110,231,218,193,141,152,117,181,8],[221,134,221,7,34,183,101,239,113,43,42,21,217,158,163,248,96,135,143,113,122,181,155,26,218,28,183,247,33,41,34,41],[197,191,154,81,180,162,25,212,10,220,10,142,174,209,46,150,150,112,115,104,121,245,174,199,159,101,9,1,31,93,18,152]],{from: accounts[9]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length == _usersVote.length', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+789,{from:accounts[7]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([[196,222,240,103,240,196,47,74,169,79,109,157,227,177,170,238,121,155,202,49,83,34,8,235,115,230,102,125,221,29,140,241],[112,88,72,14,71,188,60,197,254,226,246,115,17,12,253,139,51,86,189,73,170,235,51,8,13,34,134,31,222,23,217,215],[245,118,27,32,211,165,151,142,17,27,201,245,202,25,115,149,206,185,87,237,44,181,201,253,190,186,70,147,33,226,76,171],[220,218,58,177,59,213,114,238,108,203,116,103,74,127,234,117,181,65,219,145,236,31,59,98,41,193,134,151,116,184,222,23],[234,224,7,19,208,81,86,239,13,118,82,205,36,188,4,113,6,183,241,227,183,191,218,238,191,67,91,43,31,220,215,238],[224,66,34,197,85,235,131,172,94,125,54,235,109,91,73,109,27,106,119,156,191,168,171,227,209,236,65,69,75,186,247,124],[44,195,134,43,79,227,184,44,13,146,20,127,76,169,245,137,49,84,156,219,186,4,180,151,98,79,193,123,26,154,243,162],[115,161,246,117,101,240,160,200,106,46,69,152,16,194,66,153,60,78,3,113,29,193,115,18,143,33,186,143,57,253,163,54],[167,245,208,121,124,76,242,154,18,152,205,229,133,213,19,56,43,79,33,21,68,156,135,221,148,73,135,87,232,246,146,229],[237,208,53,78,94,142,219,69,46,38,60,75,246,16,141,198,183,74,193,77,158,137,217,235,216,168,229,203,210,19,10,173],[178,201,241,216,130,99,19,128,90,177,130,40,118,229,141,204,52,44,168,214,89,89,202,101,222,204,187,164,118,18,85,215],[194,242,9,210,105,174,243,109,64,64,132,193,190,118,152,6,63,174,8,214,123,46,37,42,188,240,100,254,122,94,128,180],[124,75,230,168,24,239,91,234,0,57,224,30,136,37,86,53,74,126,172,208,112,181,234,71,28,213,0,176,214,39,223,191],[222,237,89,43,203,253,23,11,104,35,143,140,81,121,11,148,158,200,216,88,158,200,123,88,156,254,19,146,96,210,187,184],[133,16,120,106,224,64,179,231,176,12,94,207,204,66,168,22,34,185,68,207,152,149,15,106,246,105,146,101,252,5,67,152],[138,105,243,105,253,19,63,233,30,226,50,87,1,2,98,153,29,101,11,16,47,206,124,131,95,173,30,151,33,16,81,89],[218,254,16,190,49,81,54,114,23,1,241,93,118,232,149,115,146,144,195,64,2,107,192,223,91,214,124,130,250,161,115,124],[93,91,107,8,176,138,253,106,101,103,223,48,169,230,181,249,65,195,8,184,196,23,41,70,98,241,237,221,50,160,177,151],[238,122,104,3,38,25,202,166,214,219,202,87,142,125,253,70,1,220,18,224,175,235,164,187,96,150,44,204,99,254,119,4],[222,10,49,124,72,162,3,245,21,73,107,118,76,249,32,217,142,71,174,234,252,78,196,151,140,197,234,136,186,6,9,31],[210,246,131,105,132,220,186,86,127,117,88,83,173,70,19,148,12,145,119,96,18,10,60,91,103,47,121,100,202,6,9,174],[208,92,62,224,147,113,124,122,101,90,177,217,108,145,199,147,40,55,178,22,62,134,164,148,20,252,157,60,41,102,95,39],[42,146,141,184,94,61,160,31,195,176,220,97,184,187,190,29,126,155,16,186,209,175,14,11,170,20,7,159,137,238,215,68],[126,103,189,202,250,190,26,149,108,64,252,124,217,13,26,199,187,199,191,153,38,232,240,237,89,10,74,155,145,102,169,127],[253,185,15,44,115,234,161,104,32,24,114,238,116,194,66,119,190,247,135,3,208,127,25,100,95,79,46,84,56,30,97,201],[178,172,212,157,136,25,36,28,199,154,38,86,150,150,248,2,136,13,123,183,172,50,134,146,239,104,206,98,111,90,32,241],[124,43,49,37,104,7,54,33,209,244,111,85,150,11,86,56,103,69,159,195,240,214,234,0,242,245,204,23,3,193,124,61],[138,248,158,70,245,203,212,161,44,23,143,155,182,81,102,200,25,6,214,223,225,28,178,112,244,224,113,182,131,18,154,21],[107,64,26,24,58,189,102,190,220,135,59,211,11,158,31,116,252,62,216,56,128,203,210,148,177,109,89,40,142,206,239,121],[216,137,150,128,105,196,77,148,110,140,211,109,231,14,25,83,28,168,190,120,17,71,16,179,0,42,245,88,19,189,65,240],[163,236,40,56,187,190,200,177,113,81,120,199,42,169,80,129,171,58,231,222,238,24,112,23,187,46,55,8,58,140,190,159],[241,202,130,90,197,21,199,194,61,156,139,199,116,74,194,100,60,250,116,29,234,247,192,161,30,133,38,72,202,144,65,69],[106,246,46,29,100,1,26,193,75,105,176,230,74,11,193,92,223,167,102,50,81,37,183,159,85,90,77,90,191,200,150,126],[181,215,65,3,154,171,173,71,171,1,190,120,208,68,217,209,86,112,150,227,224,233,26,245,27,127,208,179,13,31,114,112],[1,71,193,66,57,193,100,222,35,176,111,188,148,145,36,10,181,127,212,248,224,5,130,113,95,100,151,126,84,236,10,97],[140,187,84,24,239,93,107,62,2,19,188,113,199,199,70,196,20,68,43,15,244,119,22,88,180,93,208,61,48,100,18,49],[236,225,167,228,70,242,224,239,72,215,163,196,213,131,185,223,31,235,182,165,101,220,10,158,110,210,229,11,15,165,33,1],[112,164,59,229,36,129,180,95,249,144,90,27,149,216,28,33,100,44,196,248,120,52,26,243,108,189,74,67,61,91,217,6],[83,223,76,48,154,241,111,35,44,6,105,213,35,183,123,58,187,27,109,104,14,76,80,236,47,119,139,191,175,2,204,163],[164,14,119,73,110,218,215,3,96,0,27,250,88,100,125,178,121,234,106,222,17,66,206,242,205,143,237,128,95,252,37,68],[71,81,69,127,15,154,215,37,205,235,173,63,129,80,188,139,228,236,49,96,54,164,183,12,226,9,111,255,86,99,101,83],[180,124,67,50,66,31,125,73,140,54,252,180,202,169,11,82,44,64,153,126,19,107,156,126,199,52,201,119,210,85,80,22],[73,83,143,90,203,205,0,153,3,162,234,226,24,46,249,219,239,19,137,18,48,134,28,242,60,72,84,149,153,129,213,40],[103,212,29,123,120,70,152,255,60,72,15,66,113,138,177,191,99,211,213,175,177,77,157,59,13,216,16,124,67,113,243,187],[167,255,76,16,4,234,148,177,80,110,215,131,4,215,233,64,107,132,100,93,193,191,72,185,37,110,138,202,103,84,29,67],[89,82,252,118,143,129,229,38,96,197,159,95,46,63,226,193,63,246,155,125,118,12,202,141,1,220,219,179,136,79,10,86],[189,134,138,217,24,226,241,220,177,157,78,210,254,70,217,98,160,69,36,13,102,241,180,72,137,102,74,29,70,168,0,228],[121,239,244,60,190,8,154,167,232,78,235,233,234,184,108,151,13,221,227,73,32,96,63,192,246,66,15,222,179,182,202,14],[119,190,195,184,245,53,222,242,254,175,13,66,136,244,138,36,196,151,42,143,221,4,34,74,168,119,51,1,137,181,61,69],[94,32,244,211,37,222,64,241,220,178,141,77,71,137,151,26,100,104,129,187,134,247,26,175,13,225,165,105,127,210,135,172],[178,205,87,8,210,93,32,57,252,202,101,185,186,217,187,247,179,207,195,102,144,45,4,136,20,78,152,191,236,159,10,43],[60,243,128,253,67,108,45,197,24,169,17,6,190,66,138,253,199,205,250,82,0,230,51,241,113,26,130,3,185,56,198,119],[222,249,35,177,165,172,138,186,103,11,208,184,122,9,5,3,199,191,19,96,49,135,189,159,194,254,139,112,209,252,178,23],[127,183,228,201,156,3,109,90,132,111,70,170,39,83,46,248,237,198,228,113,231,236,222,95,35,134,48,147,53,50,94,171],[185,100,48,147,253,205,45,153,252,64,81,110,224,37,25,114,71,217,252,185,185,75,252,26,179,111,225,7,155,131,248,68],[93,233,198,113,210,193,73,6,149,124,13,116,12,93,147,217,209,93,127,135,81,141,102,208,73,218,171,216,244,178,82,235],[177,68,83,169,132,221,101,136,227,89,78,135,83,56,145,126,39,210,100,181,221,38,142,11,212,167,127,34,135,232,119,97],[203,122,54,210,18,244,237,130,86,76,74,198,160,53,67,124,126,227,237,105,42,9,55,25,201,135,207,74,156,154,138,156],[216,98,8,130,92,103,150,65,220,182,174,164,239,192,242,105,144,54,175,244,198,8,212,88,80,187,175,16,132,10,31,192],[146,36,202,171,110,193,1,35,35,184,143,160,78,16,16,166,101,90,12,83,9,107,145,213,9,111,212,2,41,62,27,220],[102,254,243,84,178,192,106,156,222,181,238,186,225,19,30,123,253,141,131,120,88,79,50,140,144,137,145,77,119,70,31,140],[231,43,250,146,77,47,222,127,17,182,232,34,218,230,4,244,149,245,86,33,127,3,155,95,216,10,231,73,66,85,221,187],[121,99,133,99,193,95,45,202,133,171,222,134,135,195,217,51,252,212,25,155,78,151,108,157,103,74,23,176,8,5,142,73],[114,37,198,83,81,116,17,177,214,231,190,69,247,239,10,15,1,151,62,213,10,245,165,91,52,56,19,133,193,196,254,145],[222,225,34,141,162,240,60,215,96,52,197,19,40,196,10,87,69,117,148,18,191,66,126,119,11,150,201,91,33,14,118,129],[182,250,54,224,6,85,167,55,199,159,86,16,97,31,244,98,255,18,8,144,18,158,162,51,239,68,18,50,53,194,78,2],[118,155,143,192,246,8,54,231,251,107,148,107,32,130,69,77,86,190,203,204,173,247,34,134,154,236,83,106,187,200,143,107]], [[71,79,55,201,28,214,1,45,100,111,191,18,178,229,218,141,99,184,92,19,9,203,158,141,69,46,74,12,117,178,35,48],[1,106,174,148,31,186,106,214,134,56,96,98,140,228,187,44,24,171,99,181,208,126,104,221,228,183,201,154,238,11,214,7],[215,164,115,46,227,140,33,102,108,93,210,206,89,206,97,151,65,106,102,128,244,207,246,177,37,97,111,6,151,238,162,88],[77,4,155,162,6,237,20,138,225,31,232,153,98,29,47,51,213,229,201,141,169,156,138,49,164,101,132,25,206,106,156,24],[222,220,22,168,10,15,209,250,140,240,247,28,157,75,171,206,11,223,83,55,93,92,9,249,203,63,27,239,59,220,136,137],[177,104,244,38,68,152,129,129,211,82,159,132,146,251,201,160,114,174,182,202,33,11,152,110,222,147,53,142,82,164,147,221],[227,195,85,100,143,14,249,196,100,203,47,80,163,36,85,231,196,81,103,118,30,93,66,222,238,33,183,157,221,37,68,136],[253,193,173,204,94,40,227,184,168,187,203,253,82,4,191,218,174,94,240,182,76,47,227,53,94,187,117,170,29,29,31,152],[181,139,110,48,250,197,230,51,145,4,231,88,46,142,19,216,117,138,75,19,251,23,229,48,108,136,166,197,226,238,227,117],[246,141,137,245,137,148,139,69,216,17,43,217,54,64,165,174,51,137,48,4,38,14,29,64,73,5,147,136,58,224,206,186],[149,62,244,88,145,101,237,9,175,178,230,183,1,251,74,5,109,33,47,35,121,110,56,230,210,154,208,230,101,105,147,65],[80,117,112,201,64,94,47,56,117,33,7,91,119,213,74,96,167,37,207,153,25,248,29,198,98,166,56,117,20,14,130,239],[135,69,117,65,220,139,208,248,21,120,180,52,24,220,216,39,231,190,98,189,5,151,237,112,99,106,123,10,181,19,196,155],[245,217,61,162,174,147,217,28,207,77,219,232,236,217,175,226,205,64,59,236,4,23,53,91,189,112,205,56,196,255,48,7],[79,236,177,107,109,208,246,98,136,245,237,18,193,83,47,244,173,252,77,167,217,170,41,207,68,59,73,230,157,199,225,182],[2,153,122,192,202,253,153,46,107,39,187,41,251,3,222,8,79,12,212,180,10,133,133,107,1,154,74,186,18,163,55,219],[220,83,255,191,40,188,23,184,146,132,26,98,47,243,212,192,87,133,234,53,173,96,90,251,251,32,210,36,84,41,46,227],[79,146,18,145,205,244,173,213,141,243,31,73,214,192,16,9,60,229,99,110,46,162,45,173,53,110,93,87,74,28,11,191],[255,187,209,184,155,37,165,217,44,103,126,196,58,2,207,55,168,219,71,135,26,120,166,232,226,154,242,52,37,153,52,167],[235,54,67,8,176,77,174,39,90,216,130,40,181,44,131,75,90,130,128,48,96,62,226,150,108,163,153,205,168,250,196,238],[50,64,98,27,17,245,96,199,106,217,87,114,145,94,90,42,161,247,49,252,179,111,2,33,32,90,180,192,44,13,155,201],[234,133,188,63,136,169,50,29,193,237,58,169,106,38,193,115,157,240,142,38,184,77,44,243,235,164,214,103,76,82,225,217],[211,253,248,72,200,56,90,162,139,123,73,62,34,64,140,69,11,157,225,51,20,5,185,3,180,103,133,8,98,150,135,98],[190,95,201,31,156,30,182,200,123,231,16,214,146,122,184,96,137,131,19,133,168,231,125,83,247,249,42,100,17,46,123,33],[60,195,202,130,146,76,215,232,11,120,254,27,35,15,163,173,158,200,254,21,195,29,163,34,49,161,10,200,96,104,167,56],[43,7,175,12,9,233,33,194,130,221,238,105,28,22,222,178,47,29,238,93,138,173,21,217,73,226,174,86,31,214,212,195],[27,98,6,111,84,165,159,124,221,186,39,249,6,54,37,86,249,101,69,91,105,134,246,70,91,218,98,252,18,119,158,225],[96,61,156,19,20,251,129,235,147,141,88,128,72,228,180,93,30,219,31,16,104,139,178,41,5,66,179,244,14,136,223,168],[159,92,157,116,67,123,100,147,52,135,251,207,26,108,92,232,87,18,71,239,195,141,205,11,208,93,85,229,75,53,238,218],[251,69,182,255,199,112,29,215,43,185,99,137,196,196,154,121,234,169,122,171,8,78,181,122,190,218,1,100,46,195,161,90],[99,220,58,185,24,18,149,234,99,236,59,231,147,14,141,65,125,255,235,254,214,1,211,215,191,150,217,244,188,186,104,197],[157,131,149,116,42,210,120,176,155,59,125,221,183,1,13,18,39,230,57,141,125,211,86,253,214,127,186,125,196,139,246,23],[182,43,220,132,144,86,208,234,204,152,52,16,204,48,225,0,69,60,223,126,142,25,74,50,254,49,102,151,75,166,61,13],[14,10,184,216,145,235,30,188,62,117,228,183,183,57,16,213,191,188,134,175,169,164,17,104,248,216,185,5,41,149,56,38],[255,92,77,5,71,253,34,228,77,169,228,64,117,15,239,20,177,83,114,24,111,39,159,19,161,89,110,56,183,137,94,168],[15,123,128,130,148,138,9,210,33,114,192,132,193,248,119,212,214,249,82,98,53,175,41,60,50,157,173,127,104,205,88,174],[179,27,93,189,57,154,116,17,230,151,87,69,226,248,144,247,175,228,172,155,106,94,153,137,2,205,212,229,128,246,152,43],[12,204,117,20,197,88,154,7,20,145,8,77,113,211,108,219,17,199,19,151,227,152,114,206,26,180,117,163,124,155,171,51],[219,14,236,180,14,161,79,122,175,234,45,186,16,219,230,128,19,9,217,80,128,24,139,17,75,244,39,238,82,207,159,2],[101,52,91,40,134,71,23,70,152,25,212,7,249,132,83,206,180,247,146,229,154,171,85,37,25,68,207,131,14,245,166,166],[246,223,110,108,214,85,181,101,240,143,232,132,28,224,175,97,80,225,208,112,56,178,37,171,113,167,195,204,43,63,2,32],[66,111,85,224,56,122,196,175,196,236,161,222,204,159,57,130,76,59,62,130,185,109,59,104,205,70,166,206,55,81,95,195],[157,31,18,212,10,112,174,15,65,109,160,82,75,27,103,167,204,44,103,107,179,250,103,32,148,113,245,160,255,160,208,102],[47,122,71,205,140,209,185,154,239,17,31,194,55,159,127,162,123,178,237,216,147,163,189,162,142,140,218,40,129,204,159,14],[230,83,154,117,21,82,95,75,215,245,158,250,95,139,31,23,192,54,16,167,21,235,138,22,91,241,142,140,94,187,147,71],[22,33,238,68,31,153,75,68,65,229,183,30,37,18,106,56,159,72,80,126,242,232,246,82,246,100,2,164,134,165,164,116],[146,103,166,224,198,151,134,70,57,242,181,234,171,92,56,56,129,249,225,244,210,217,131,229,141,255,221,103,114,164,18,64],[195,166,172,67,213,84,9,51,228,244,131,21,41,181,170,57,160,156,79,20,128,220,103,241,116,208,162,133,88,19,137,5],[122,245,62,159,38,125,196,26,208,131,196,54,107,19,89,170,203,154,177,13,219,177,191,143,211,130,104,36,174,206,190,34],[28,238,223,83,73,83,149,29,141,253,23,130,191,157,11,226,128,226,127,76,41,112,134,99,86,197,154,119,124,85,200,17],[105,152,104,2,204,250,117,78,183,2,174,200,94,230,49,163,244,217,98,119,136,161,234,241,147,230,90,153,116,17,109,169],[72,248,188,109,196,222,44,243,63,239,9,216,59,248,243,11,212,93,9,150,12,143,54,72,121,126,63,184,126,125,133,153],[252,108,54,109,29,129,203,84,144,160,26,62,206,42,119,52,70,214,240,19,232,158,208,31,215,87,47,117,94,253,230,223],[31,253,17,71,155,138,64,164,16,1,82,28,147,117,226,26,20,153,195,222,157,162,129,21,85,17,33,13,120,48,59,108],[26,154,93,217,251,219,19,6,129,66,169,213,153,181,119,34,8,82,217,21,215,230,29,137,255,49,210,176,152,35,179,135],[233,125,41,114,15,5,90,35,92,247,118,29,243,93,211,1,207,131,113,227,189,17,17,197,50,244,72,156,249,145,129,196],[123,45,179,27,232,129,45,43,226,194,245,90,103,63,16,48,132,71,218,198,240,66,178,113,245,163,130,26,99,88,164,57],[13,176,100,52,124,199,92,205,205,64,205,206,234,192,223,212,52,62,4,125,66,180,95,186,186,45,221,234,93,137,184,154],[171,143,39,115,213,51,49,210,35,24,166,252,109,137,53,172,116,79,86,119,114,189,180,17,4,242,30,215,121,132,211,69],[172,3,32,212,180,160,241,92,232,159,233,60,49,12,121,120,78,225,126,36,53,237,173,20,239,194,100,155,86,25,143,194],[151,21,152,79,177,241,248,42,203,198,91,160,115,21,197,53,38,253,227,131,174,9,182,174,47,25,187,226,48,64,96,17],[204,238,60,55,177,191,253,82,192,99,96,229,221,141,26,39,100,247,8,105,18,140,139,88,146,16,66,203,96,247,237,196],[54,163,11,70,216,207,202,129,168,162,131,150,101,155,98,233,115,166,129,162,16,182,168,244,22,140,252,151,53,5,153,186],[69,119,208,31,68,113,86,5,36,211,33,169,189,220,182,233,167,160,30,10,226,104,4,110,231,218,193,141,152,117,181,8],[221,134,221,7,34,183,101,239,113,43,42,21,217,158,163,248,96,135,143,113,122,181,155,26,218,28,183,247,33,41,34,41],[197,191,154,81,180,162,25,212,10,220,10,142,174,209,46,150,150,112,115,104,121,245,174,199,159,101,9,1,31,93,18,152]],{from: accounts[7]}),'revert');
  });
  it('Should fail submitUserVotes(bytes32[],bytes32[]) when NOT comply with: _usersSaltHash.length != 0', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractPaymentTokenMock.address,accounts[2],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+789,{from:accounts[7]});
    let result = await truffleAssert.fails(localOnChainVoting.submitUserVotes([], [[71,79,55,201,28,214,1,45,100,111,191,18,178,229,218,141,99,184,92,19,9,203,158,141,69,46,74,12,117,178,35,48],[1,106,174,148,31,186,106,214,134,56,96,98,140,228,187,44,24,171,99,181,208,126,104,221,228,183,201,154,238,11,214,7],[215,164,115,46,227,140,33,102,108,93,210,206,89,206,97,151,65,106,102,128,244,207,246,177,37,97,111,6,151,238,162,88],[77,4,155,162,6,237,20,138,225,31,232,153,98,29,47,51,213,229,201,141,169,156,138,49,164,101,132,25,206,106,156,24],[222,220,22,168,10,15,209,250,140,240,247,28,157,75,171,206,11,223,83,55,93,92,9,249,203,63,27,239,59,220,136,137],[177,104,244,38,68,152,129,129,211,82,159,132,146,251,201,160,114,174,182,202,33,11,152,110,222,147,53,142,82,164,147,221],[227,195,85,100,143,14,249,196,100,203,47,80,163,36,85,231,196,81,103,118,30,93,66,222,238,33,183,157,221,37,68,136],[253,193,173,204,94,40,227,184,168,187,203,253,82,4,191,218,174,94,240,182,76,47,227,53,94,187,117,170,29,29,31,152],[181,139,110,48,250,197,230,51,145,4,231,88,46,142,19,216,117,138,75,19,251,23,229,48,108,136,166,197,226,238,227,117],[246,141,137,245,137,148,139,69,216,17,43,217,54,64,165,174,51,137,48,4,38,14,29,64,73,5,147,136,58,224,206,186],[149,62,244,88,145,101,237,9,175,178,230,183,1,251,74,5,109,33,47,35,121,110,56,230,210,154,208,230,101,105,147,65],[80,117,112,201,64,94,47,56,117,33,7,91,119,213,74,96,167,37,207,153,25,248,29,198,98,166,56,117,20,14,130,239],[135,69,117,65,220,139,208,248,21,120,180,52,24,220,216,39,231,190,98,189,5,151,237,112,99,106,123,10,181,19,196,155],[245,217,61,162,174,147,217,28,207,77,219,232,236,217,175,226,205,64,59,236,4,23,53,91,189,112,205,56,196,255,48,7],[79,236,177,107,109,208,246,98,136,245,237,18,193,83,47,244,173,252,77,167,217,170,41,207,68,59,73,230,157,199,225,182],[2,153,122,192,202,253,153,46,107,39,187,41,251,3,222,8,79,12,212,180,10,133,133,107,1,154,74,186,18,163,55,219],[220,83,255,191,40,188,23,184,146,132,26,98,47,243,212,192,87,133,234,53,173,96,90,251,251,32,210,36,84,41,46,227],[79,146,18,145,205,244,173,213,141,243,31,73,214,192,16,9,60,229,99,110,46,162,45,173,53,110,93,87,74,28,11,191],[255,187,209,184,155,37,165,217,44,103,126,196,58,2,207,55,168,219,71,135,26,120,166,232,226,154,242,52,37,153,52,167],[235,54,67,8,176,77,174,39,90,216,130,40,181,44,131,75,90,130,128,48,96,62,226,150,108,163,153,205,168,250,196,238],[50,64,98,27,17,245,96,199,106,217,87,114,145,94,90,42,161,247,49,252,179,111,2,33,32,90,180,192,44,13,155,201],[234,133,188,63,136,169,50,29,193,237,58,169,106,38,193,115,157,240,142,38,184,77,44,243,235,164,214,103,76,82,225,217],[211,253,248,72,200,56,90,162,139,123,73,62,34,64,140,69,11,157,225,51,20,5,185,3,180,103,133,8,98,150,135,98],[190,95,201,31,156,30,182,200,123,231,16,214,146,122,184,96,137,131,19,133,168,231,125,83,247,249,42,100,17,46,123,33],[60,195,202,130,146,76,215,232,11,120,254,27,35,15,163,173,158,200,254,21,195,29,163,34,49,161,10,200,96,104,167,56],[43,7,175,12,9,233,33,194,130,221,238,105,28,22,222,178,47,29,238,93,138,173,21,217,73,226,174,86,31,214,212,195],[27,98,6,111,84,165,159,124,221,186,39,249,6,54,37,86,249,101,69,91,105,134,246,70,91,218,98,252,18,119,158,225],[96,61,156,19,20,251,129,235,147,141,88,128,72,228,180,93,30,219,31,16,104,139,178,41,5,66,179,244,14,136,223,168],[159,92,157,116,67,123,100,147,52,135,251,207,26,108,92,232,87,18,71,239,195,141,205,11,208,93,85,229,75,53,238,218],[251,69,182,255,199,112,29,215,43,185,99,137,196,196,154,121,234,169,122,171,8,78,181,122,190,218,1,100,46,195,161,90],[99,220,58,185,24,18,149,234,99,236,59,231,147,14,141,65,125,255,235,254,214,1,211,215,191,150,217,244,188,186,104,197],[157,131,149,116,42,210,120,176,155,59,125,221,183,1,13,18,39,230,57,141,125,211,86,253,214,127,186,125,196,139,246,23],[182,43,220,132,144,86,208,234,204,152,52,16,204,48,225,0,69,60,223,126,142,25,74,50,254,49,102,151,75,166,61,13],[14,10,184,216,145,235,30,188,62,117,228,183,183,57,16,213,191,188,134,175,169,164,17,104,248,216,185,5,41,149,56,38],[255,92,77,5,71,253,34,228,77,169,228,64,117,15,239,20,177,83,114,24,111,39,159,19,161,89,110,56,183,137,94,168],[15,123,128,130,148,138,9,210,33,114,192,132,193,248,119,212,214,249,82,98,53,175,41,60,50,157,173,127,104,205,88,174],[179,27,93,189,57,154,116,17,230,151,87,69,226,248,144,247,175,228,172,155,106,94,153,137,2,205,212,229,128,246,152,43],[12,204,117,20,197,88,154,7,20,145,8,77,113,211,108,219,17,199,19,151,227,152,114,206,26,180,117,163,124,155,171,51],[219,14,236,180,14,161,79,122,175,234,45,186,16,219,230,128,19,9,217,80,128,24,139,17,75,244,39,238,82,207,159,2],[101,52,91,40,134,71,23,70,152,25,212,7,249,132,83,206,180,247,146,229,154,171,85,37,25,68,207,131,14,245,166,166],[246,223,110,108,214,85,181,101,240,143,232,132,28,224,175,97,80,225,208,112,56,178,37,171,113,167,195,204,43,63,2,32],[66,111,85,224,56,122,196,175,196,236,161,222,204,159,57,130,76,59,62,130,185,109,59,104,205,70,166,206,55,81,95,195],[157,31,18,212,10,112,174,15,65,109,160,82,75,27,103,167,204,44,103,107,179,250,103,32,148,113,245,160,255,160,208,102],[47,122,71,205,140,209,185,154,239,17,31,194,55,159,127,162,123,178,237,216,147,163,189,162,142,140,218,40,129,204,159,14],[230,83,154,117,21,82,95,75,215,245,158,250,95,139,31,23,192,54,16,167,21,235,138,22,91,241,142,140,94,187,147,71],[22,33,238,68,31,153,75,68,65,229,183,30,37,18,106,56,159,72,80,126,242,232,246,82,246,100,2,164,134,165,164,116],[146,103,166,224,198,151,134,70,57,242,181,234,171,92,56,56,129,249,225,244,210,217,131,229,141,255,221,103,114,164,18,64],[195,166,172,67,213,84,9,51,228,244,131,21,41,181,170,57,160,156,79,20,128,220,103,241,116,208,162,133,88,19,137,5],[122,245,62,159,38,125,196,26,208,131,196,54,107,19,89,170,203,154,177,13,219,177,191,143,211,130,104,36,174,206,190,34],[28,238,223,83,73,83,149,29,141,253,23,130,191,157,11,226,128,226,127,76,41,112,134,99,86,197,154,119,124,85,200,17],[105,152,104,2,204,250,117,78,183,2,174,200,94,230,49,163,244,217,98,119,136,161,234,241,147,230,90,153,116,17,109,169],[72,248,188,109,196,222,44,243,63,239,9,216,59,248,243,11,212,93,9,150,12,143,54,72,121,126,63,184,126,125,133,153],[252,108,54,109,29,129,203,84,144,160,26,62,206,42,119,52,70,214,240,19,232,158,208,31,215,87,47,117,94,253,230,223],[31,253,17,71,155,138,64,164,16,1,82,28,147,117,226,26,20,153,195,222,157,162,129,21,85,17,33,13,120,48,59,108],[26,154,93,217,251,219,19,6,129,66,169,213,153,181,119,34,8,82,217,21,215,230,29,137,255,49,210,176,152,35,179,135],[233,125,41,114,15,5,90,35,92,247,118,29,243,93,211,1,207,131,113,227,189,17,17,197,50,244,72,156,249,145,129,196],[123,45,179,27,232,129,45,43,226,194,245,90,103,63,16,48,132,71,218,198,240,66,178,113,245,163,130,26,99,88,164,57],[13,176,100,52,124,199,92,205,205,64,205,206,234,192,223,212,52,62,4,125,66,180,95,186,186,45,221,234,93,137,184,154],[171,143,39,115,213,51,49,210,35,24,166,252,109,137,53,172,116,79,86,119,114,189,180,17,4,242,30,215,121,132,211,69],[172,3,32,212,180,160,241,92,232,159,233,60,49,12,121,120,78,225,126,36,53,237,173,20,239,194,100,155,86,25,143,194],[151,21,152,79,177,241,248,42,203,198,91,160,115,21,197,53,38,253,227,131,174,9,182,174,47,25,187,226,48,64,96,17],[204,238,60,55,177,191,253,82,192,99,96,229,221,141,26,39,100,247,8,105,18,140,139,88,146,16,66,203,96,247,237,196],[54,163,11,70,216,207,202,129,168,162,131,150,101,155,98,233,115,166,129,162,16,182,168,244,22,140,252,151,53,5,153,186],[69,119,208,31,68,113,86,5,36,211,33,169,189,220,182,233,167,160,30,10,226,104,4,110,231,218,193,141,152,117,181,8],[221,134,221,7,34,183,101,239,113,43,42,21,217,158,163,248,96,135,143,113,122,181,155,26,218,28,183,247,33,41,34,41],[197,191,154,81,180,162,25,212,10,220,10,142,174,209,46,150,150,112,115,104,121,245,174,199,159,101,9,1,31,93,18,152]],{from: accounts[7]}),'revert');
  });
  it('Should execute finalizeVote(string) WHEN msg.sender==_owner,(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp>=endTime,submissionsCount==votesCount', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableTokenMock.address,accounts[4],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+670,{from:accounts[7]});
    let result = await localOnChainVoting.finalizeVote("\x19Ethereum Signed Message:\n32",{from: accounts[7]});
  });
  it('Should fail finalizeVote(string) when NOT comply with: msg.sender == _owner', async () => {
    let localOnChainVoting = await OnChainVoting.new(contractRedeemableTokenMock.address,accounts[4],(await web3.eth.getBlock(await web3.eth.getBlockNumber())).timestamp+670,{from:accounts[7]});
    let result = await truffleAssert.fails(localOnChainVoting.finalizeVote("\x19Ethereum Signed Message:\n32",{from: accounts[9]}),'revert');
  });
});
