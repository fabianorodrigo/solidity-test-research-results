solidity-coverage
qui 12 nov 2020 12:59:39 -03
Truffle v5.0.6 (core: 5.0.6)
Solidity - 0.5.4 (solc-js)
Node v10.15.3
Generating coverage environment
Running: truffle compile --network coverage 
(this can take a few seconds)...

Compiling your contracts...
===========================
> Compiling ./contracts/AtlantisCrowdsale.sol
> Compiling ./contracts/AtlantisToken.sol
> Compiling ./contracts/Migrations.sol
> Compiling ./contracts/MinLimitCrowdsale.sol
> Compiling ./contracts/proxy4tests/MinLimitCrowdsale.sol
> Compiling openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol
> Compiling openzeppelin-solidity/contracts/crowdsale/validation/CappedCrowdsale.sol
> Compiling openzeppelin-solidity/contracts/crowdsale/validation/TimedCrowdsale.sol
> Compiling openzeppelin-solidity/contracts/math/SafeMath.sol
> Compiling openzeppelin-solidity/contracts/ownership/Ownable.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/ERC20.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/IERC20.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/SafeERC20.sol
> Compiling openzeppelin-solidity/contracts/utils/ReentrancyGuard.sol

    > compilation warnings encountered:

/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/crowdsale/coverageEnv/contracts/proxy4tests/MinLimitCrowdsale.sol:1:1: Warning: Source file does not specify required compiler version! Consider adding "pragma solidity ^0.5.4;"
import "../MinLimitCrowdsale.sol";
^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol:138:5: Warning: Function state mutability can be restricted to pure
    function _preValidatePurchase(address beneficiary, uint256 weiAmount) internal view {
    ^ (Relevant source part starts here and spans across multiple lines).

> Artifacts written to /home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/crowdsale/coverageEnv/build/contracts
> Compiled successfully using:
   - solc: 0.5.4+commit.9549d8ff.Emscripten.clang

Instrumenting  ./coverageEnv/contracts/AtlantisCrowdsale.sol
Instrumenting  ./coverageEnv/contracts/AtlantisToken.sol
Skipping instrumentation of  ./coverageEnv/contracts/Migrations.sol
Instrumenting  ./coverageEnv/contracts/MinLimitCrowdsale.sol
Instrumenting  ./coverageEnv/contracts/proxy4tests/MinLimitCrowdsale.sol
Running: truffle compile --network coverage 
(this can take a few seconds)...

Compiling your contracts...
===========================
> Compiling ./contracts/AtlantisCrowdsale.sol
> Compiling ./contracts/AtlantisToken.sol
> Compiling ./contracts/Migrations.sol
> Compiling ./contracts/MinLimitCrowdsale.sol
> Compiling ./contracts/proxy4tests/MinLimitCrowdsale.sol
> Compiling openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol
> Compiling openzeppelin-solidity/contracts/crowdsale/validation/CappedCrowdsale.sol
> Compiling openzeppelin-solidity/contracts/crowdsale/validation/TimedCrowdsale.sol
> Compiling openzeppelin-solidity/contracts/math/SafeMath.sol
> Compiling openzeppelin-solidity/contracts/ownership/Ownable.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/ERC20.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/IERC20.sol
> Compiling openzeppelin-solidity/contracts/token/ERC20/SafeERC20.sol
> Compiling openzeppelin-solidity/contracts/utils/ReentrancyGuard.sol

    > compilation warnings encountered:

/home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/crowdsale/coverageEnv/contracts/proxy4tests/MinLimitCrowdsale.sol:1:1: Warning: Source file does not specify required compiler version! Consider adding "pragma solidity ^0.5.4;"
import "../MinLimitCrowdsale.sol";
^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/ownership/Ownable.sol:25:5: Warning: Function state mutability can be restricted to view
    function owner() public      returns (address) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/ownership/Ownable.sol:40:5: Warning: Function state mutability can be restricted to view
    function isOwner() public      returns (bool) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/math/SafeMath.sol:11:5: Warning: Function state mutability can be restricted to pure
    function mul(uint256 a, uint256 b) internal      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/math/SafeMath.sol:28:5: Warning: Function state mutability can be restricted to pure
    function div(uint256 a, uint256 b) internal      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/math/SafeMath.sol:40:5: Warning: Function state mutability can be restricted to pure
    function sub(uint256 a, uint256 b) internal      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/math/SafeMath.sol:50:5: Warning: Function state mutability can be restricted to pure
    function add(uint256 a, uint256 b) internal      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/math/SafeMath.sol:61:5: Warning: Function state mutability can be restricted to pure
    function mod(uint256 a, uint256 b) internal      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol:79:5: Warning: Function state mutability can be restricted to view
    function token() public      returns (IERC20) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol:86:5: Warning: Function state mutability can be restricted to view
    function wallet() public      returns (address payable) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol:93:5: Warning: Function state mutability can be restricted to view
    function rate() public      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol:100:5: Warning: Function state mutability can be restricted to view
    function weiRaised() public      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/Crowdsale.sol:138:5: Warning: Function state mutability can be restricted to pure
    function _preValidatePurchase(address beneficiary, uint256 weiAmount) internal      {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/validation/TimedCrowdsale.sol:41:5: Warning: Function state mutability can be restricted to view
    function openingTime() public      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/validation/TimedCrowdsale.sol:48:5: Warning: Function state mutability can be restricted to view
    function closingTime() public      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/validation/TimedCrowdsale.sol:55:5: Warning: Function state mutability can be restricted to view
    function isOpen() public      returns (bool) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/validation/TimedCrowdsale.sol:64:5: Warning: Function state mutability can be restricted to view
    function hasClosed() public      returns (bool) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/crowdsale/validation/CappedCrowdsale.sol:27:5: Warning: Function state mutability can be restricted to view
    function cap() public      returns (uint256) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol:25:5: Warning: Function state mutability can be restricted to view
    function name() public      returns (string memory) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol:32:5: Warning: Function state mutability can be restricted to view
    function symbol() public      returns (string memory) {
    ^ (Relevant source part starts here and spans across multiple lines).
,openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol:39:5: Warning: Function state mutability can be restricted to view
    function decimals() public      returns (uint8) {
    ^ (Relevant source part starts here and spans across multiple lines).

> Artifacts written to /home/fabianorodrigo/Projetos/bitbucket/solidity-test/workdir/crowdsale/coverageEnv/build/contracts
> Compiled successfully using:
   - solc: 0.5.4+commit.9549d8ff.Emscripten.clang

Launched testrpc on port 8555
Running: truffle test --network coverage 
(this can take a few seconds)...
Using network 'coverage'.


Compiling your contracts...
===========================
> Everything is up to date, there is nothing to compile.


[0m[0m
[0m  Contract: AtlantisCrowdsale[0m
  [31m  1) Should execute offchainSale(address,uint256) WHEN msg.sender==_owner[0m

    Events emitted during test:
    ---------------------------

    Transfer(from: <indexed> 0x0000000000000000000000000000000000000000 (address), to: <indexed> 0xB9dcBf8A52Edc0C8DD9983fCc1d97b1F5d975Ed7 (address), value: 500000000000000000000000000 (uint256))
    OwnershipTransferred(previousOwner: <indexed> 0x0000000000000000000000000000000000000000 (address), newOwner: <indexed> 0xDf08F82De32B8d460adbE8D72043E3a7e25A3B39 (address))

    ---------------------------
  [32m  âœ“[0m[90m Should fail offchainSale(address,uint256) when NOT comply with: msg.sender == _owner[0m[33m (48ms)[0m
  [32m  âœ“[0m[90m Should execute minLimit()[0m

[0m  Contract: contractProxyMinLimitCrowdsale[0m
  [32m  âœ“[0m[90m Should execute test_preValidatePurchase(address,uint256) WHEN beneficiary!=0x0000000000000000000000000000000000000000,weiAmount!=0,weiAmount>=_minLimit[0m
  [32m  âœ“[0m[90m Should fail test_preValidatePurchase(address,uint256) when NOT comply with: beneficiary != 0x0000000000000000000000000000000000000000[0m
  [32m  âœ“[0m[90m Should fail test_preValidatePurchase(address,uint256) when NOT comply with: weiAmount != 0[0m
  [32m  âœ“[0m[90m Should fail test_preValidatePurchase(address,uint256) when NOT comply with: weiAmount >= _minLimit[0m


[92m [0m[32m 6 passing[0m[90m (4s)[0m
[31m  1 failing[0m

[0m  1) Contract: AtlantisCrowdsale
       Should execute offchainSale(address,uint256) WHEN msg.sender==_owner:
[0m[31m     Error: Returned error: VM Exception while processing transaction: revert[0m[90m
      at Object.ErrorResponse (/home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/web3-core-requestmanager/~/web3-core-helpers/src/errors.js:29:1)
      at /home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/web3-core-requestmanager/src/index.js:140:1
      at /home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/packages/truffle-provider/wrapper.js:112:1
      at XMLHttpRequest.request.onreadystatechange (/home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/web3-providers-http/src/index.js:96:1)
      at XMLHttpRequestEventTarget.dispatchEvent (/home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/xhr2-cookies/dist/xml-http-request-event-target.js:34:1)
      at XMLHttpRequest._setReadyState (/home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/xhr2-cookies/dist/xml-http-request.js:208:1)
      at XMLHttpRequest._onHttpResponseEnd (/home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/xhr2-cookies/dist/xml-http-request.js:318:1)
      at IncomingMessage.<anonymous> (/home/fabianorodrigo/.nvm/versions/node/v10.15.3/pnpm-global/4/node_modules/.pnpm/truffle@5.0.27/node_modules/truffle/build/webpack:/~/xhr2-cookies/dist/xml-http-request.js:289:47)
      at endReadableNT (_stream_readable.js:1125:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)
[0m


------------------------|----------|----------|----------|----------|----------------|
File                    |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
------------------------|----------|----------|----------|----------|----------------|
 contracts/             |      100 |      100 |      100 |      100 |                |
  AtlantisCrowdsale.sol |      100 |      100 |      100 |      100 |                |
  AtlantisToken.sol     |      100 |      100 |      100 |      100 |                |
  MinLimitCrowdsale.sol |      100 |      100 |      100 |      100 |                |
 contracts/proxy4tests/ |      100 |      100 |      100 |      100 |                |
  MinLimitCrowdsale.sol |      100 |      100 |      100 |      100 |                |
------------------------|----------|----------|----------|----------|----------------|
All files               |      100 |      100 |      100 |      100 |                |
------------------------|----------|----------|----------|----------|----------------|

Istanbul coverage reports generated
Cleaning up...
Shutting down testrpc-sc (pid 71839)
Some truffle tests failed while running coverage
