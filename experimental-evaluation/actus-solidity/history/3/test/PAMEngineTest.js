const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 2,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [197,232,168,209,196,96,105,174,67,111,60,51,162,247,49,135,217,217,135,223,230,166,165,251,66,14,48,70,53,2,189,210],"legalEntityIdCounterparty": [110,166,4,167,165,179,14,238,197,46,219,252,210,117,51,48,158,74,119,228,215,48,244,4,11,81,210,168,103,158,227,203],"dayCountConvention": 4,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 61,"statusDate": 48,"initialExchangeDate": 0,"maturityDate": 256,"terminationDate": 4,"purchaseDate": 160,"capitalizationEndDate": 1461000,"cycleAnchorDateOfInterestPayment": 120,"cycleAnchorDateOfRateReset": 40,"cycleAnchorDateOfScalingIndex": 3,"cycleAnchorDateOfFee": 4,"notionalPrincipal": 32076,"nominalInterestRate": 100,"feeAccrued": 23,"accruedInterest": 4,"rateMultiplier": 99,"rateSpread": 31,"feeRate": 2446,"nextResetRate": 120,"penaltyRate": 257,"premiumDiscountAtIED": 15,"priceAtPurchaseDate": 360,"cycleOfInterestPayment": {"i": 401,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 95,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 254,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 0,"p": 5,"s": 1,"isSet": false},"lifeCap": 120,"lifeFloor": 146096,"periodCap": 68569,"periodFloor": 257},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 17,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [87,61,219,27,21,146,13,214,73,206,25,32,254,137,128,83,113,158,33,120,203,3,167,73,201,183,169,121,196,136,42,168],"legalEntityIdCounterparty": [103,168,137,109,35,55,121,184,202,193,94,102,37,53,22,255,100,216,169,122,233,139,218,122,23,194,115,85,216,115,189,236],"dayCountConvention": 1,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 141,"statusDate": 61,"initialExchangeDate": 9999,"maturityDate": 949,"terminationDate": 119,"purchaseDate": 18,"capitalizationEndDate": 2440587,"cycleAnchorDateOfInterestPayment": 50,"cycleAnchorDateOfRateReset": 5,"cycleAnchorDateOfScalingIndex": 100,"cycleAnchorDateOfFee": 257,"notionalPrincipal": 254,"nominalInterestRate": 367,"feeAccrued": 59,"accruedInterest": 2447,"rateMultiplier": 10000,"rateSpread": 68568,"feeRate": 130,"nextResetRate": 0,"penaltyRate": 3999,"premiumDiscountAtIED": 899,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 89,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 131,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 32074,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 17,"p": 3,"s": 0,"isSet": false},"lifeCap": 949,"lifeFloor": 1460,"periodCap": 950,"periodFloor": 68568}, {"lastEventTime": 86401,"contractStatus": 2,"timeFromLastEvent": 50,"nominalValue": 151,"nominalAccrued": 2440589,"feeAccrued": 1461000,"nominalRate": 150,"interestScalingMultiplier": 5,"nominalScalingMultiplier": 159,"contractRoleSign": 7}, 89,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 15,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [163,111,7,114,251,56,49,199,68,218,196,85,203,238,245,62,182,224,14,44,33,0,194,47,201,114,113,91,216,70,135,188],"legalEntityIdCounterparty": [81,212,75,54,35,19,208,248,178,99,226,14,119,198,59,118,50,158,209,182,94,152,33,184,107,134,153,128,186,145,92,139],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 368,"statusDate": 68568,"initialExchangeDate": 161,"maturityDate": 90,"terminationDate": 2447,"purchaseDate": 139,"capitalizationEndDate": 1532892062,"cycleAnchorDateOfInterestPayment": 61,"cycleAnchorDateOfRateReset": 69,"cycleAnchorDateOfScalingIndex": 23,"cycleAnchorDateOfFee": 1461000,"notionalPrincipal": 1462,"nominalInterestRate": 3999,"feeAccrued": 68570,"accruedInterest": 81,"rateMultiplier": 97,"rateSpread": 367,"feeRate": 51,"nextResetRate": 6,"penaltyRate": 1532892063,"premiumDiscountAtIED": 68570,"priceAtPurchaseDate": 90,"cycleOfInterestPayment": {"i": 50,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 149,"p": 5,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 368,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 140,"p": 2,"s": 0,"isSet": false},"lifeCap": 61,"lifeFloor": 1532892064,"periodCap": 39,"periodFloor": 89}, {"lastEventTime": 97,"contractStatus": 1,"timeFromLastEvent": 86400,"nominalValue": 360,"nominalAccrued": 69,"feeAccrued": 1461,"nominalRate": 146097,"interestScalingMultiplier": 39,"nominalScalingMultiplier": 96,"contractRoleSign": 6}, {"eventTime": 40,"eventTimeWithEpochOffset": 49,"scheduleTime": 254,"eventType": 6,"currency": accounts[7],"pofType": 5,"stfType": 11}, 111,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [147,5,3,17,239,75,60,215,95,146,228,183,71,157,6,101,166,206,188,68,185,145,15,42,75,75,238,40,149,243,49,246],"legalEntityIdCounterparty": [245,12,109,209,20,26,144,102,41,54,224,80,4,254,185,18,137,247,195,231,79,74,95,142,245,220,230,219,184,163,178,94],"dayCountConvention": 0,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 97,"statusDate": 7,"initialExchangeDate": 1461,"maturityDate": 161,"terminationDate": 66,"purchaseDate": 160,"capitalizationEndDate": 1461001,"cycleAnchorDateOfInterestPayment": 90,"cycleAnchorDateOfRateReset": 901,"cycleAnchorDateOfScalingIndex": 146097,"cycleAnchorDateOfFee": 12,"notionalPrincipal": 401,"nominalInterestRate": 4001,"feeAccrued": 64,"accruedInterest": 1336,"rateMultiplier": 68569,"rateSpread": 2440588,"feeRate": 1,"nextResetRate": 30,"penaltyRate": 13,"premiumDiscountAtIED": 141,"priceAtPurchaseDate": 3,"cycleOfInterestPayment": {"i": 1970,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 2440587,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 28,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 0,"p": 0,"s": 0,"isSet": true},"lifeCap": 86399,"lifeFloor": 368,"periodCap": 1460,"periodFloor": 65}, 8, 9999,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [35,78,153,199,253,94,251,23,164,83,138,180,62,218,131,66,114,89,71,82,142,42,228,147,194,240,51,69,89,199,181,106],"legalEntityIdCounterparty": [163,247,217,187,14,100,204,199,154,105,87,40,117,50,27,42,8,91,87,3,95,25,164,206,66,15,228,223,44,168,205,20],"dayCountConvention": 2,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 86400,"statusDate": 28,"initialExchangeDate": 80,"maturityDate": 2448,"terminationDate": 146097,"purchaseDate": 151,"capitalizationEndDate": 139,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 111,"cycleAnchorDateOfScalingIndex": 99,"cycleAnchorDateOfFee": 2014223716,"notionalPrincipal": 255,"nominalInterestRate": 32,"feeAccrued": 951,"accruedInterest": 23,"rateMultiplier": 257,"rateSpread": 119,"feeRate": 51,"nextResetRate": 1532892062,"penaltyRate": 2,"premiumDiscountAtIED": 100,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 1461001,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 9,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 19,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 4799,"p": 5,"s": 1,"isSet": true},"lifeCap": 4900,"lifeFloor": 30,"periodCap": 50,"periodFloor": 32076}, 1461, 8,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [5,223,140,205,183,206,179,173,127,129,178,117,201,241,139,92,7,206,232,201,144,97,24,249,175,69,34,193,177,164,76,229],"legalEntityIdCounterparty": [51,130,61,148,44,88,145,11,228,178,196,136,242,0,70,42,203,203,244,221,205,92,231,80,101,143,146,33,84,69,239,38],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 1,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 2014223715,"statusDate": 24,"initialExchangeDate": 1462,"maturityDate": 2440588,"terminationDate": 360,"purchaseDate": 16,"capitalizationEndDate": 4901,"cycleAnchorDateOfInterestPayment": 69,"cycleAnchorDateOfRateReset": 4799,"cycleAnchorDateOfScalingIndex": 16,"cycleAnchorDateOfFee": 2448,"notionalPrincipal": 69,"nominalInterestRate": 119,"feeAccrued": 30,"accruedInterest": 160,"rateMultiplier": 69,"rateSpread": 79,"feeRate": 61,"nextResetRate": 1338,"penaltyRate": 86401,"premiumDiscountAtIED": 10001,"priceAtPurchaseDate": 8,"cycleOfInterestPayment": {"i": 64,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2014223715,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 399,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 68570,"p": 1,"s": 0,"isSet": false},"lifeCap": 159,"lifeFloor": 1337,"periodCap": 32076,"periodFloor": 1462}, 900, 27,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [247,83,182,121,22,236,190,114,72,118,102,222,46,113,171,86,83,58,124,46,161,213,191,16,102,64,255,93,225,125,84,78],"legalEntityIdCounterparty": [189,192,203,22,91,116,231,39,210,99,79,113,190,118,67,206,198,112,173,217,46,37,51,106,116,177,21,201,129,74,228,62],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 15,"statusDate": 2014223715,"initialExchangeDate": 65,"maturityDate": 1,"terminationDate": 2447,"purchaseDate": 50,"capitalizationEndDate": 400,"cycleAnchorDateOfInterestPayment": 90,"cycleAnchorDateOfRateReset": 9,"cycleAnchorDateOfScalingIndex": 70,"cycleAnchorDateOfFee": 1970,"notionalPrincipal": 14,"nominalInterestRate": 141,"feeAccrued": 901,"accruedInterest": 400,"rateMultiplier": 4899,"rateSpread": 146098,"feeRate": -1,"nextResetRate": 79,"penaltyRate": 146098,"premiumDiscountAtIED": 19,"priceAtPurchaseDate": 400,"cycleOfInterestPayment": {"i": 2446,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 141,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 146096,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 4801,"p": 0,"s": 0,"isSet": true},"lifeCap": 140,"lifeFloor": 4,"periodCap": 399,"periodFloor": 131}, 49, 4799,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [46,162,95,84,5,139,91,85,53,234,109,142,7,1,22,255,96,95,225,246,73,163,41,59,44,219,26,237,83,121,110,117],"legalEntityIdCounterparty": [166,252,92,52,98,188,102,129,56,168,138,204,26,223,2,124,181,244,69,197,151,19,116,183,33,163,66,249,102,120,168,203],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 95,"statusDate": 360,"initialExchangeDate": 4001,"maturityDate": 3,"terminationDate": 21,"purchaseDate": 0,"capitalizationEndDate": 368,"cycleAnchorDateOfInterestPayment": 4800,"cycleAnchorDateOfRateReset": 2014223715,"cycleAnchorDateOfScalingIndex": 4801,"cycleAnchorDateOfFee": 8,"notionalPrincipal": 2014223714,"nominalInterestRate": 139,"feeAccrued": 68568,"accruedInterest": 109,"rateMultiplier": 257,"rateSpread": 1461,"feeRate": 80,"nextResetRate": 27,"penaltyRate": 40,"premiumDiscountAtIED": 1336,"priceAtPurchaseDate": 399,"cycleOfInterestPayment": {"i": 900,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1532892063,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 367,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 27,"p": 1,"s": 0,"isSet": true},"lifeCap": 2440589,"lifeFloor": 141,"periodCap": 27,"periodFloor": 1337}, 69, 1461001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [52,124,68,15,104,223,174,187,247,56,204,244,212,145,209,212,149,75,90,193,215,244,102,87,113,87,198,149,53,167,35,130],"legalEntityIdCounterparty": [19,29,149,69,147,177,55,96,137,197,88,4,157,8,12,198,176,86,26,124,127,54,69,52,204,235,219,218,226,13,211,190],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 49,"statusDate": 69,"initialExchangeDate": 32,"maturityDate": 61,"terminationDate": 131,"purchaseDate": 0,"capitalizationEndDate": 99,"cycleAnchorDateOfInterestPayment": 4001,"cycleAnchorDateOfRateReset": 141,"cycleAnchorDateOfScalingIndex": 41,"cycleAnchorDateOfFee": 121,"notionalPrincipal": 150,"nominalInterestRate": 109,"feeAccrued": 28,"accruedInterest": 366,"rateMultiplier": 364,"rateSpread": 1461,"feeRate": 14,"nextResetRate": 4799,"penaltyRate": 1532892062,"premiumDiscountAtIED": 91,"priceAtPurchaseDate": 366,"cycleOfInterestPayment": {"i": 59,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 28,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 97,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 1461,"p": 2,"s": 0,"isSet": false},"lifeCap": 86400,"lifeFloor": 119,"periodCap": 13,"periodFloor": 161}, 32074, 130,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [87,252,202,6,172,7,38,154,39,37,176,20,110,245,119,123,134,53,234,198,68,8,157,76,113,65,8,119,55,246,20,247],"legalEntityIdCounterparty": [174,234,14,245,31,88,5,255,60,58,250,228,55,101,181,98,114,141,169,73,126,96,147,59,70,18,243,151,210,252,87,45],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 161,"statusDate": 4901,"initialExchangeDate": 2447,"maturityDate": 86400,"terminationDate": 366,"purchaseDate": 254,"capitalizationEndDate": 2446,"cycleAnchorDateOfInterestPayment": 1461,"cycleAnchorDateOfRateReset": 360,"cycleAnchorDateOfScalingIndex": 60,"cycleAnchorDateOfFee": 61,"notionalPrincipal": 8,"nominalInterestRate": 1461000,"feeAccrued": 68568,"accruedInterest": 10001,"rateMultiplier": 32074,"rateSpread": 10,"feeRate": 4800,"nextResetRate": 1461000,"penaltyRate": 4799,"premiumDiscountAtIED": 51,"priceAtPurchaseDate": 18,"cycleOfInterestPayment": {"i": 90,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 27,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 2447,"p": 3,"s": 1,"isSet": false},"lifeCap": 23,"lifeFloor": 160,"periodCap": 257,"periodFloor": 31}, 40, 4001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [218,252,5,197,229,46,190,238,57,61,33,219,103,237,49,81,141,211,122,127,204,67,180,136,66,244,65,25,33,84,148,64],"legalEntityIdCounterparty": [252,137,94,2,152,91,132,217,137,44,87,40,111,78,28,68,133,177,52,237,59,80,246,51,240,8,254,213,232,151,94,98],"dayCountConvention": 5,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 4801,"statusDate": 9,"initialExchangeDate": 0,"maturityDate": 96,"terminationDate": 10,"purchaseDate": 5,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 130,"cycleAnchorDateOfScalingIndex": 2447,"cycleAnchorDateOfFee": 111,"notionalPrincipal": 121,"nominalInterestRate": 68570,"feeAccrued": 131,"accruedInterest": 27,"rateMultiplier": 40,"rateSpread": 24,"feeRate": 254,"nextResetRate": 130,"penaltyRate": 4900,"premiumDiscountAtIED": 3999,"priceAtPurchaseDate": 86399,"cycleOfInterestPayment": {"i": 360,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 4799,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 159,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 3,"p": 0,"s": 1,"isSet": true},"lifeCap": 131,"lifeFloor": 21,"periodCap": 360,"periodFloor": 5}, 146096, 365,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [126,129,86,6,216,76,131,186,156,184,78,104,227,159,167,112,4,243,223,30,126,224,96,187,151,212,197,78,38,51,63,217],"legalEntityIdCounterparty": [109,115,92,204,30,251,98,138,76,94,5,219,164,206,143,147,184,95,100,60,205,192,231,67,203,75,197,102,199,219,223,25],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 1,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 139,"statusDate": 129,"initialExchangeDate": 899,"maturityDate": 86400,"terminationDate": 97,"purchaseDate": 68568,"capitalizationEndDate": 1,"cycleAnchorDateOfInterestPayment": 256,"cycleAnchorDateOfRateReset": 364,"cycleAnchorDateOfScalingIndex": 17,"cycleAnchorDateOfFee": 18,"notionalPrincipal": 359,"nominalInterestRate": 65,"feeAccrued": 41,"accruedInterest": 19,"rateMultiplier": 25,"rateSpread": 11,"feeRate": 1532892062,"nextResetRate": 50,"penaltyRate": 109,"premiumDiscountAtIED": 12,"priceAtPurchaseDate": 364,"cycleOfInterestPayment": {"i": 59,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 901,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 10001,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 366,"p": 4,"s": 0,"isSet": true},"lifeCap": 254,"lifeFloor": 89,"periodCap": 4899,"periodFloor": 86401}, 254, 900,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [237,184,141,67,114,2,167,163,70,214,116,64,183,84,182,239,123,111,188,36,157,17,176,228,167,7,26,89,111,85,36,133],"legalEntityIdCounterparty": [145,38,97,19,251,163,163,13,32,117,16,50,128,141,194,10,163,23,89,9,147,141,32,110,35,31,22,166,100,91,134,196],"dayCountConvention": 4,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 131,"statusDate": 17,"initialExchangeDate": 399,"maturityDate": 3,"terminationDate": 32,"purchaseDate": 49,"capitalizationEndDate": 399,"cycleAnchorDateOfInterestPayment": 4900,"cycleAnchorDateOfRateReset": 23,"cycleAnchorDateOfScalingIndex": 120,"cycleAnchorDateOfFee": 151,"notionalPrincipal": 366,"nominalInterestRate": 50,"feeAccrued": 4900,"accruedInterest": 16,"rateMultiplier": 109,"rateSpread": 1532892063,"feeRate": -1,"nextResetRate": 26,"penaltyRate": 80,"premiumDiscountAtIED": 2440589,"priceAtPurchaseDate": 32,"cycleOfInterestPayment": {"i": 254,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 29,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 80,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 2014223716,"p": 1,"s": 0,"isSet": true},"lifeCap": 1971,"lifeFloor": 2014223714,"periodCap": 100,"periodFloor": 951}, 2440587, 79,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [203,241,46,252,157,97,4,126,8,198,41,175,148,167,2,150,205,34,152,174,110,235,142,242,44,148,165,170,156,144,8,57],"legalEntityIdCounterparty": [87,117,235,199,100,125,118,148,217,145,8,130,40,89,192,18,132,94,4,242,128,35,103,123,123,14,173,213,155,223,230,118],"dayCountConvention": 0,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 30,"statusDate": 4799,"initialExchangeDate": 11,"maturityDate": 901,"terminationDate": 12,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 255,"cycleAnchorDateOfRateReset": 4800,"cycleAnchorDateOfScalingIndex": 28,"cycleAnchorDateOfFee": 110,"notionalPrincipal": 31,"nominalInterestRate": 0,"feeAccrued": 101,"accruedInterest": 119,"rateMultiplier": 161,"rateSpread": 4900,"feeRate": 1338,"nextResetRate": 0,"penaltyRate": 1461001,"premiumDiscountAtIED": 41,"priceAtPurchaseDate": 359,"cycleOfInterestPayment": {"i": 7,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 28,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 146097,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 899,"p": 5,"s": 1,"isSet": false},"lifeCap": 0,"lifeFloor": 64,"periodCap": 4900,"periodFloor": 2440587}, 399, 79,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [187,46,8,181,226,78,115,43,247,140,1,231,66,147,1,135,50,110,106,30,69,75,238,252,129,34,89,233,251,199,134,72],"legalEntityIdCounterparty": [140,95,165,120,106,214,124,206,154,130,252,158,8,0,146,187,23,189,212,249,204,73,232,213,151,234,4,239,188,121,36,130],"dayCountConvention": 1,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 111,"statusDate": 4800,"initialExchangeDate": 4901,"maturityDate": 951,"terminationDate": 27,"purchaseDate": 901,"capitalizationEndDate": 32076,"cycleAnchorDateOfInterestPayment": 1460,"cycleAnchorDateOfRateReset": 28,"cycleAnchorDateOfScalingIndex": 81,"cycleAnchorDateOfFee": 1461001,"notionalPrincipal": 0,"nominalInterestRate": 2014223715,"feeAccrued": 4801,"accruedInterest": 41,"rateMultiplier": 7,"rateSpread": 71,"feeRate": 91,"nextResetRate": 5,"penaltyRate": 40,"premiumDiscountAtIED": 109,"priceAtPurchaseDate": 101,"cycleOfInterestPayment": {"i": 6,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 21,"p": 4,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 69,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 9999,"p": 5,"s": 1,"isSet": true},"lifeCap": 10001,"lifeFloor": 25,"periodCap": 399,"periodFloor": 23}, 1461001, 146098,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [234,74,182,62,177,164,27,35,7,120,192,180,236,148,31,151,193,215,173,203,106,240,78,47,83,228,207,19,227,169,96,204],"legalEntityIdCounterparty": [251,89,3,156,18,61,205,53,198,217,2,249,253,130,88,170,198,13,216,155,230,253,122,60,9,140,190,90,177,253,135,68],"dayCountConvention": 2,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 1,"statusDate": 6,"initialExchangeDate": 15,"maturityDate": 256,"terminationDate": 151,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 399,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 4900,"cycleAnchorDateOfFee": 15,"notionalPrincipal": 364,"nominalInterestRate": 0,"feeAccrued": 109,"accruedInterest": 4800,"rateMultiplier": 366,"rateSpread": 146098,"feeRate": 95,"nextResetRate": 71,"penaltyRate": 15,"premiumDiscountAtIED": 2447,"priceAtPurchaseDate": 13,"cycleOfInterestPayment": {"i": 10001,"p": 3,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1532892063,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 2,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 97,"p": 5,"s": 1,"isSet": true},"lifeCap": 401,"lifeFloor": 1971,"periodCap": 1461002,"periodFloor": 2}, 0, 64,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [146,163,197,77,43,188,143,112,8,104,67,101,250,124,189,62,76,197,204,186,190,245,18,139,144,83,115,249,129,155,160,32],"legalEntityIdCounterparty": [72,220,92,16,36,189,37,32,69,100,172,23,177,87,179,253,226,58,106,243,180,140,186,57,55,111,87,13,125,19,83,59],"dayCountConvention": 0,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 399,"statusDate": 139,"initialExchangeDate": 131,"maturityDate": 3999,"terminationDate": 86400,"purchaseDate": 49,"capitalizationEndDate": 4900,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 401,"cycleAnchorDateOfScalingIndex": 10001,"cycleAnchorDateOfFee": 121,"notionalPrincipal": 79,"nominalInterestRate": 60,"feeAccrued": 4799,"accruedInterest": 150,"rateMultiplier": 2014223716,"rateSpread": 1337,"feeRate": 4000,"nextResetRate": 16,"penaltyRate": 2014223716,"premiumDiscountAtIED": 19,"priceAtPurchaseDate": 81,"cycleOfInterestPayment": {"i": 255,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 1462,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 12,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 19,"p": 1,"s": 0,"isSet": false},"lifeCap": 399,"lifeFloor": 69,"periodCap": 1969,"periodFloor": 71}, 1462, 899,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [176,244,47,144,230,170,117,145,214,120,253,215,54,119,212,16,18,143,215,14,109,19,121,33,239,130,57,221,81,240,41,234],"legalEntityIdCounterparty": [40,144,205,114,95,123,132,250,90,72,16,231,71,197,215,70,84,220,20,101,213,30,73,185,31,161,242,14,163,127,40,6],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 71,"statusDate": 90,"initialExchangeDate": 359,"maturityDate": 3,"terminationDate": 61,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1532892062,"cycleAnchorDateOfRateReset": 6,"cycleAnchorDateOfScalingIndex": 101,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 0,"nominalInterestRate": 0,"feeAccrued": 131,"accruedInterest": 17,"rateMultiplier": 1971,"rateSpread": 2014223715,"feeRate": 2014223714,"nextResetRate": 401,"penaltyRate": 366,"premiumDiscountAtIED": 399,"priceAtPurchaseDate": 4000,"cycleOfInterestPayment": {"i": 2440589,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 17,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 7,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 50,"p": 1,"s": 0,"isSet": false},"lifeCap": 109,"lifeFloor": 161,"periodCap": 23,"periodFloor": 95}, 951, 23,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [99,64,174,198,75,172,97,147,19,204,2,85,154,234,84,220,161,187,192,87,177,203,173,245,245,189,173,231,186,21,147,210],"legalEntityIdCounterparty": [103,112,15,155,50,232,173,81,7,174,28,196,151,150,193,176,217,241,190,8,0,13,237,18,14,110,72,206,156,109,202,240],"dayCountConvention": 2,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 360,"statusDate": 10001,"initialExchangeDate": 2446,"maturityDate": 3999,"terminationDate": 9,"purchaseDate": 3,"capitalizationEndDate": 101,"cycleAnchorDateOfInterestPayment": 17,"cycleAnchorDateOfRateReset": 139,"cycleAnchorDateOfScalingIndex": 359,"cycleAnchorDateOfFee": 59,"notionalPrincipal": 8,"nominalInterestRate": 359,"feeAccrued": 86400,"accruedInterest": 4001,"rateMultiplier": 1532892063,"rateSpread": 366,"feeRate": 255,"nextResetRate": 61,"penaltyRate": 2440589,"premiumDiscountAtIED": 361,"priceAtPurchaseDate": 80,"cycleOfInterestPayment": {"i": 1461002,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 61,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 901,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 1338,"p": 0,"s": 1,"isSet": true},"lifeCap": 2448,"lifeFloor": 49,"periodCap": 48,"periodFloor": 121}, 0, 61,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [105,9,98,150,5,96,116,244,32,34,17,52,14,196,57,242,169,145,188,74,23,172,161,33,19,162,23,167,87,78,9,31],"legalEntityIdCounterparty": [188,221,242,200,195,104,98,129,103,6,46,89,23,77,92,24,173,137,44,54,16,222,170,96,165,212,128,92,56,103,72,232],"dayCountConvention": 2,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 3,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 60,"statusDate": 19,"initialExchangeDate": 48,"maturityDate": 2440589,"terminationDate": 10,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 23,"cycleAnchorDateOfRateReset": 1971,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 18,"notionalPrincipal": 4900,"nominalInterestRate": 0,"feeAccrued": 2440587,"accruedInterest": 368,"rateMultiplier": 8,"rateSpread": 69,"feeRate": 367,"nextResetRate": 70,"penaltyRate": 95,"premiumDiscountAtIED": 51,"priceAtPurchaseDate": 110,"cycleOfInterestPayment": {"i": 161,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 368,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 900,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 95,"p": 0,"s": 1,"isSet": false},"lifeCap": 2446,"lifeFloor": 64,"periodCap": 401,"periodFloor": 68569}, 25, 1336,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [81,68,144,249,163,247,152,31,40,1,78,53,134,120,179,253,79,10,47,2,226,158,214,251,50,158,87,223,24,74,109,86],"legalEntityIdCounterparty": [47,45,205,157,112,176,240,0,69,183,244,222,218,236,113,82,84,47,91,101,96,242,77,215,175,179,223,114,188,102,139,26],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 2,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 131,"statusDate": 131,"initialExchangeDate": 51,"maturityDate": 364,"terminationDate": 368,"purchaseDate": 2440587,"capitalizationEndDate": 25,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 4800,"cycleAnchorDateOfScalingIndex": 110,"cycleAnchorDateOfFee": 2446,"notionalPrincipal": 141,"nominalInterestRate": 1338,"feeAccrued": 3999,"accruedInterest": 32074,"rateMultiplier": 949,"rateSpread": 146098,"feeRate": 399,"nextResetRate": 1461,"penaltyRate": 100,"premiumDiscountAtIED": 86399,"priceAtPurchaseDate": 66,"cycleOfInterestPayment": {"i": 900,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 70,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 79,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 365,"p": 2,"s": 1,"isSet": false},"lifeCap": 130,"lifeFloor": 1,"periodCap": 91,"periodFloor": 366}, 900, 2447,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [57,75,222,46,111,235,55,51,109,218,220,150,245,192,249,255,184,178,62,169,23,219,240,216,40,203,241,8,34,199,196,25],"legalEntityIdCounterparty": [151,230,39,160,97,170,123,223,112,177,255,239,101,253,104,94,197,27,1,207,221,220,213,193,156,199,62,59,74,28,218,218],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 4799,"statusDate": 400,"initialExchangeDate": 26,"maturityDate": 256,"terminationDate": 89,"purchaseDate": 129,"capitalizationEndDate": 1337,"cycleAnchorDateOfInterestPayment": 2014223715,"cycleAnchorDateOfRateReset": 4,"cycleAnchorDateOfScalingIndex": 254,"cycleAnchorDateOfFee": 32076,"notionalPrincipal": 48,"nominalInterestRate": 10000,"feeAccrued": 23,"accruedInterest": 24,"rateMultiplier": 4001,"rateSpread": 900,"feeRate": 80,"nextResetRate": 1338,"penaltyRate": 64,"premiumDiscountAtIED": 99,"priceAtPurchaseDate": 9,"cycleOfInterestPayment": {"i": 399,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 150,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 68570,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 4001,"p": 1,"s": 1,"isSet": true},"lifeCap": 1970,"lifeFloor": 365,"periodCap": 1461,"periodFloor": 19}, 27, 1460,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [237,57,162,196,75,20,119,153,82,98,153,221,185,179,210,143,229,248,36,110,107,255,241,159,136,129,112,151,146,156,162,104],"legalEntityIdCounterparty": [1,122,45,0,60,9,206,17,251,108,55,204,7,44,70,103,18,9,34,213,214,146,154,199,162,96,212,12,30,51,90,140],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 1336,"statusDate": 121,"initialExchangeDate": 30,"maturityDate": 65,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 951,"cycleAnchorDateOfRateReset": 900,"cycleAnchorDateOfScalingIndex": 19,"cycleAnchorDateOfFee": 951,"notionalPrincipal": 23,"nominalInterestRate": 0,"feeAccrued": 80,"accruedInterest": 2446,"rateMultiplier": 3,"rateSpread": 2440589,"feeRate": 10,"nextResetRate": 951,"penaltyRate": 359,"premiumDiscountAtIED": 2446,"priceAtPurchaseDate": 6,"cycleOfInterestPayment": {"i": 32,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 63,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 366,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 2440589,"p": 2,"s": 0,"isSet": true},"lifeCap": 368,"lifeFloor": 4801,"periodCap": 8,"periodFloor": 2}, 159, 2014223716,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [137,92,193,160,138,233,243,50,232,67,73,168,225,215,145,176,122,219,19,223,210,34,49,207,115,197,47,78,134,125,203,30],"legalEntityIdCounterparty": [97,66,181,219,166,239,11,11,247,122,226,46,184,20,13,77,152,146,171,183,226,88,80,120,39,39,229,178,34,64,130,80],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 254,"statusDate": 0,"initialExchangeDate": 59,"maturityDate": 141,"terminationDate": 2440588,"purchaseDate": 151,"capitalizationEndDate": 4900,"cycleAnchorDateOfInterestPayment": 160,"cycleAnchorDateOfRateReset": 2440589,"cycleAnchorDateOfScalingIndex": 21,"cycleAnchorDateOfFee": 80,"notionalPrincipal": 4000,"nominalInterestRate": 17,"feeAccrued": 950,"accruedInterest": 70,"rateMultiplier": 32,"rateSpread": 400,"feeRate": 900,"nextResetRate": 51,"penaltyRate": 4799,"premiumDiscountAtIED": 2,"priceAtPurchaseDate": 130,"cycleOfInterestPayment": {"i": 61,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2448,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2447,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 139,"p": 1,"s": 1,"isSet": false},"lifeCap": 10,"lifeFloor": 2014223714,"periodCap": 6,"periodFloor": 48}, 68568, 2448,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [141,92,239,246,28,114,144,126,45,185,121,171,29,162,208,13,183,75,136,174,39,104,129,44,233,39,85,106,65,238,175,17],"legalEntityIdCounterparty": [57,39,96,148,83,37,241,158,204,236,64,178,100,53,149,146,4,90,28,1,114,19,190,3,140,141,173,234,56,16,207,156],"dayCountConvention": 5,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 951,"statusDate": 19,"initialExchangeDate": 1532892063,"maturityDate": 2448,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 949,"cycleAnchorDateOfRateReset": 16,"cycleAnchorDateOfScalingIndex": 24,"cycleAnchorDateOfFee": 950,"notionalPrincipal": 10000,"nominalInterestRate": 0,"feeAccrued": 4900,"accruedInterest": 399,"rateMultiplier": 11,"rateSpread": 2447,"feeRate": 100,"nextResetRate": 68570,"penaltyRate": 14,"premiumDiscountAtIED": 159,"priceAtPurchaseDate": 140,"cycleOfInterestPayment": {"i": 95,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 41,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 359,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 4900,"p": 3,"s": 1,"isSet": false},"lifeCap": 6,"lifeFloor": 91,"periodCap": 4001,"periodFloor": 66}, 6, 50,{from: accounts[0]});
  });
});
