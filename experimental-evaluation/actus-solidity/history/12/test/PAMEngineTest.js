const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 14,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [42,36,75,181,236,235,228,203,100,223,23,138,91,149,173,231,149,226,115,124,233,187,198,212,188,230,6,249,1,61,173,127],"legalEntityIdCounterparty": [81,38,117,151,48,253,60,159,112,123,59,200,206,186,129,177,246,162,196,53,80,127,14,116,107,54,15,210,80,56,6,151],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 8,"statusDate": 139,"initialExchangeDate": 950,"maturityDate": 4901,"terminationDate": 151,"purchaseDate": 146097,"capitalizationEndDate": 2440589,"cycleAnchorDateOfInterestPayment": 2446,"cycleAnchorDateOfRateReset": 89,"cycleAnchorDateOfScalingIndex": 20,"cycleAnchorDateOfFee": 14,"notionalPrincipal": 81,"nominalInterestRate": 101,"feeAccrued": 4799,"accruedInterest": 110,"rateMultiplier": 68568,"rateSpread": 40,"feeRate": 949,"nextResetRate": 41,"penaltyRate": 19,"premiumDiscountAtIED": 255,"priceAtPurchaseDate": 139,"cycleOfInterestPayment": {"i": 1462,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 69,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 59,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 1970,"p": 5,"s": 0,"isSet": true},"lifeCap": 366,"lifeFloor": 9999,"periodCap": 95,"periodFloor": 31},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 5,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [29,119,178,57,109,233,210,158,35,161,239,60,18,4,202,8,253,216,194,227,21,103,156,201,245,224,0,215,199,228,225,169],"legalEntityIdCounterparty": [98,149,152,155,95,188,166,63,17,128,132,57,1,216,31,155,122,133,253,7,100,113,202,196,157,225,203,7,185,56,87,62],"dayCountConvention": 4,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 60,"statusDate": 111,"initialExchangeDate": 65,"maturityDate": 1461,"terminationDate": 65,"purchaseDate": 1461000,"capitalizationEndDate": 81,"cycleAnchorDateOfInterestPayment": 15,"cycleAnchorDateOfRateReset": 4799,"cycleAnchorDateOfScalingIndex": 65,"cycleAnchorDateOfFee": 120,"notionalPrincipal": 16,"nominalInterestRate": 951,"feeAccrued": 3999,"accruedInterest": 97,"rateMultiplier": 359,"rateSpread": 16,"feeRate": 1461001,"nextResetRate": 150,"penaltyRate": 79,"premiumDiscountAtIED": 149,"priceAtPurchaseDate": 49,"cycleOfInterestPayment": {"i": 66,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 70,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 13,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 32076,"p": 2,"s": 1,"isSet": true},"lifeCap": 1970,"lifeFloor": 159,"periodCap": 400,"periodFloor": 4800}, {"lastEventTime": 6,"contractStatus": 2,"timeFromLastEvent": 64,"nominalValue": 86401,"nominalAccrued": 11,"feeAccrued": 10001,"nominalRate": 1,"interestScalingMultiplier": 30,"nominalScalingMultiplier": 2,"contractRoleSign": 2}, 4900,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 17,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [46,22,155,32,181,139,16,82,220,10,250,11,19,154,122,64,149,170,169,199,192,116,211,161,21,10,194,65,52,233,36,5],"legalEntityIdCounterparty": [155,98,169,90,47,78,129,132,44,153,83,84,214,123,244,120,171,78,73,55,252,149,141,19,70,227,124,166,58,254,205,4],"dayCountConvention": 3,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 91,"statusDate": 15,"initialExchangeDate": 1336,"maturityDate": 20,"terminationDate": 2440588,"purchaseDate": 141,"capitalizationEndDate": 111,"cycleAnchorDateOfInterestPayment": 160,"cycleAnchorDateOfRateReset": 9,"cycleAnchorDateOfScalingIndex": 256,"cycleAnchorDateOfFee": 2448,"notionalPrincipal": 2,"nominalInterestRate": 140,"feeAccrued": 4001,"accruedInterest": 4901,"rateMultiplier": 401,"rateSpread": 2447,"feeRate": 364,"nextResetRate": 2014223715,"penaltyRate": 4899,"premiumDiscountAtIED": 254,"priceAtPurchaseDate": 367,"cycleOfInterestPayment": {"i": 16,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 12,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 97,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 1336,"p": 1,"s": 1,"isSet": false},"lifeCap": 4901,"lifeFloor": 32,"periodCap": 48,"periodFloor": 13}, {"lastEventTime": 66,"contractStatus": 2,"timeFromLastEvent": 1,"nominalValue": 2,"nominalAccrued": 26,"feeAccrued": 368,"nominalRate": 257,"interestScalingMultiplier": 949,"nominalScalingMultiplier": 7,"contractRoleSign": 1}, {"eventTime": 64,"eventTimeWithEpochOffset": 2446,"scheduleTime": 1,"eventType": 7,"currency": accounts[9],"pofType": 7,"stfType": 12}, 2448,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [194,93,203,222,160,192,187,21,152,167,205,160,237,2,18,207,168,252,175,217,148,163,136,244,33,193,202,166,255,237,127,233],"legalEntityIdCounterparty": [128,67,17,150,98,120,215,91,42,171,88,203,255,44,141,43,189,49,217,144,246,251,143,101,119,101,63,47,145,37,153,154],"dayCountConvention": 1,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 1532892062,"statusDate": 1,"initialExchangeDate": 89,"maturityDate": 51,"terminationDate": 146098,"purchaseDate": 1969,"capitalizationEndDate": 81,"cycleAnchorDateOfInterestPayment": 24,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 2447,"notionalPrincipal": 1461000,"nominalInterestRate": 119,"feeAccrued": 1532892064,"accruedInterest": 4899,"rateMultiplier": 81,"rateSpread": 4801,"feeRate": 146097,"nextResetRate": 254,"penaltyRate": 1532892062,"premiumDiscountAtIED": 3999,"priceAtPurchaseDate": 367,"cycleOfInterestPayment": {"i": 40,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 111,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 63,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 4799,"p": 5,"s": 0,"isSet": false},"lifeCap": 899,"lifeFloor": 2014223716,"periodCap": 26,"periodFloor": 950}, 146096, 1532892064,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [191,248,54,179,44,8,13,72,83,99,125,252,122,67,68,4,205,220,144,236,108,139,88,36,130,192,111,202,21,220,133,146],"legalEntityIdCounterparty": [42,155,216,104,7,34,165,134,222,180,22,11,185,143,95,97,104,182,241,113,6,205,124,160,185,63,64,163,223,135,231,71],"dayCountConvention": 4,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 63,"statusDate": 63,"initialExchangeDate": 146097,"maturityDate": 2448,"terminationDate": 1971,"purchaseDate": 26,"capitalizationEndDate": 1532892064,"cycleAnchorDateOfInterestPayment": 40,"cycleAnchorDateOfRateReset": 91,"cycleAnchorDateOfScalingIndex": 81,"cycleAnchorDateOfFee": 1969,"notionalPrincipal": 2,"nominalInterestRate": 79,"feeAccrued": 90,"accruedInterest": 41,"rateMultiplier": 146097,"rateSpread": 86400,"feeRate": 255,"nextResetRate": 1,"penaltyRate": 71,"premiumDiscountAtIED": 16,"priceAtPurchaseDate": 2440588,"cycleOfInterestPayment": {"i": 68569,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 4000,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 31,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 4799,"p": 3,"s": 1,"isSet": true},"lifeCap": 4800,"lifeFloor": 90,"periodCap": 10001,"periodFloor": 1337}, 25, 60,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [239,9,11,164,61,105,155,109,38,158,51,25,184,245,219,150,103,214,58,85,112,150,41,255,191,6,140,127,132,29,54,8],"legalEntityIdCounterparty": [7,113,86,106,54,43,69,114,108,86,142,221,163,78,57,176,234,82,158,241,200,199,58,160,22,22,253,253,164,130,153,213],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 19,"statusDate": 3999,"initialExchangeDate": 131,"maturityDate": 3999,"terminationDate": 86401,"purchaseDate": 254,"capitalizationEndDate": 95,"cycleAnchorDateOfInterestPayment": 359,"cycleAnchorDateOfRateReset": 12,"cycleAnchorDateOfScalingIndex": 10000,"cycleAnchorDateOfFee": 32,"notionalPrincipal": 70,"nominalInterestRate": 141,"feeAccrued": 1337,"accruedInterest": 51,"rateMultiplier": 1970,"rateSpread": 81,"feeRate": 130,"nextResetRate": 111,"penaltyRate": 109,"premiumDiscountAtIED": 10001,"priceAtPurchaseDate": 8,"cycleOfInterestPayment": {"i": 1462,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 18,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 901,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 109,"p": 3,"s": 1,"isSet": false},"lifeCap": 3999,"lifeFloor": 6,"periodCap": 86399,"periodFloor": 4801}, 61, 140,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [117,97,241,233,28,236,136,44,226,56,145,121,129,45,13,241,172,47,84,123,103,70,216,72,146,127,188,102,224,120,97,119],"legalEntityIdCounterparty": [4,57,184,157,178,180,43,0,136,124,84,76,232,6,192,80,150,113,100,122,142,101,141,54,55,4,50,140,5,27,137,113],"dayCountConvention": 4,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 900,"statusDate": 366,"initialExchangeDate": 99,"maturityDate": 1461,"terminationDate": 159,"purchaseDate": 368,"capitalizationEndDate": 109,"cycleAnchorDateOfInterestPayment": 32,"cycleAnchorDateOfRateReset": 4001,"cycleAnchorDateOfScalingIndex": 18,"cycleAnchorDateOfFee": 254,"notionalPrincipal": 10001,"nominalInterestRate": 10001,"feeAccrued": 81,"accruedInterest": 1,"rateMultiplier": 51,"rateSpread": 111,"feeRate": 69,"nextResetRate": 17,"penaltyRate": 26,"premiumDiscountAtIED": 1460,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 2,"p": 5,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1532892063,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 149,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 96,"p": 0,"s": 0,"isSet": false},"lifeCap": 86401,"lifeFloor": 68570,"periodCap": 1336,"periodFloor": 7}, 19, 2446,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [226,107,85,205,60,164,116,255,207,31,37,177,187,245,183,80,10,137,157,87,167,185,137,225,230,222,91,211,93,90,14,108],"legalEntityIdCounterparty": [242,62,127,25,242,120,53,212,251,194,177,95,161,200,138,124,162,48,222,54,255,216,212,147,33,147,165,118,0,165,60,61],"dayCountConvention": 3,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 68568,"statusDate": 150,"initialExchangeDate": 141,"maturityDate": 121,"terminationDate": 26,"purchaseDate": 0,"capitalizationEndDate": 81,"cycleAnchorDateOfInterestPayment": 1338,"cycleAnchorDateOfRateReset": 1,"cycleAnchorDateOfScalingIndex": 900,"cycleAnchorDateOfFee": 365,"notionalPrincipal": 28,"nominalInterestRate": 1,"feeAccrued": 91,"accruedInterest": 111,"rateMultiplier": 27,"rateSpread": 4,"feeRate": 0,"nextResetRate": 2440589,"penaltyRate": 100,"premiumDiscountAtIED": 30,"priceAtPurchaseDate": 40,"cycleOfInterestPayment": {"i": 121,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 111,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 160,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 1460,"p": 2,"s": 1,"isSet": true},"lifeCap": 399,"lifeFloor": 97,"periodCap": 95,"periodFloor": 0}, 1532892063, 20,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 4,"legalEntityIdRecordCreator": [145,90,59,18,215,31,253,171,208,139,30,103,90,32,131,20,214,38,135,143,156,95,252,95,242,182,251,219,245,76,74,71],"legalEntityIdCounterparty": [21,161,79,78,81,186,200,199,201,182,123,27,219,58,159,53,224,123,56,81,79,188,190,119,59,248,142,42,95,17,159,143],"dayCountConvention": 0,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 4,"statusDate": 89,"initialExchangeDate": 9999,"maturityDate": 899,"terminationDate": 65,"purchaseDate": 160,"capitalizationEndDate": 60,"cycleAnchorDateOfInterestPayment": 2447,"cycleAnchorDateOfRateReset": 80,"cycleAnchorDateOfScalingIndex": 360,"cycleAnchorDateOfFee": 366,"notionalPrincipal": 4000,"nominalInterestRate": 130,"feeAccrued": 79,"accruedInterest": 27,"rateMultiplier": 109,"rateSpread": 10,"feeRate": 0,"nextResetRate": 71,"penaltyRate": 4800,"premiumDiscountAtIED": 4001,"priceAtPurchaseDate": 111,"cycleOfInterestPayment": {"i": 32075,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 146098,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 63,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 367,"p": 1,"s": 0,"isSet": false},"lifeCap": 364,"lifeFloor": 32,"periodCap": 149,"periodFloor": 1532892064}, 15, 111,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [44,100,56,215,3,99,86,40,173,128,21,246,139,210,205,252,208,16,156,215,48,24,208,182,218,248,201,229,188,72,130,224],"legalEntityIdCounterparty": [89,161,214,119,57,81,82,44,15,198,85,203,17,39,221,10,151,126,138,178,164,117,183,156,128,143,39,103,35,129,66,161],"dayCountConvention": 4,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 18,"statusDate": 146098,"initialExchangeDate": 4799,"maturityDate": 4799,"terminationDate": 65,"purchaseDate": 400,"capitalizationEndDate": 1971,"cycleAnchorDateOfInterestPayment": 146096,"cycleAnchorDateOfRateReset": 130,"cycleAnchorDateOfScalingIndex": 10001,"cycleAnchorDateOfFee": 3999,"notionalPrincipal": 101,"nominalInterestRate": 254,"feeAccrued": 1461001,"accruedInterest": 4001,"rateMultiplier": 151,"rateSpread": 97,"feeRate": 28,"nextResetRate": 14,"penaltyRate": 30,"premiumDiscountAtIED": 365,"priceAtPurchaseDate": 28,"cycleOfInterestPayment": {"i": 40,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 96,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 0,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 111,"p": 0,"s": 0,"isSet": true},"lifeCap": 23,"lifeFloor": 120,"periodCap": 899,"periodFloor": 14}, 68568, 13,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [102,26,197,239,114,218,69,104,144,95,235,220,92,27,61,3,168,225,132,109,232,22,68,242,186,134,155,156,57,233,204,196],"legalEntityIdCounterparty": [172,201,117,50,129,151,197,203,0,27,130,72,101,173,42,14,53,235,102,46,231,32,6,183,182,83,116,164,27,254,116,67],"dayCountConvention": 3,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 65,"statusDate": 5,"initialExchangeDate": 32074,"maturityDate": 70,"terminationDate": 1461002,"purchaseDate": 11,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 360,"cycleAnchorDateOfRateReset": 32076,"cycleAnchorDateOfScalingIndex": 10001,"cycleAnchorDateOfFee": 39,"notionalPrincipal": 951,"nominalInterestRate": 151,"feeAccrued": 7,"accruedInterest": 40,"rateMultiplier": 32075,"rateSpread": 4799,"feeRate": 2440588,"nextResetRate": 25,"penaltyRate": 365,"premiumDiscountAtIED": 1462,"priceAtPurchaseDate": 68570,"cycleOfInterestPayment": {"i": 4799,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 5,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 129,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 17,"p": 1,"s": 1,"isSet": false},"lifeCap": 91,"lifeFloor": 130,"periodCap": 2014223714,"periodFloor": 146097}, 30, 49,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [91,207,139,109,31,126,169,152,41,9,109,43,79,152,145,209,182,126,105,73,112,252,255,105,144,26,135,179,84,72,228,96],"legalEntityIdCounterparty": [240,129,70,221,234,12,70,58,89,234,242,80,245,226,156,130,65,103,152,124,175,230,253,143,228,60,103,35,226,10,184,227],"dayCountConvention": 5,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 25,"statusDate": 10001,"initialExchangeDate": 89,"maturityDate": 10001,"terminationDate": 2,"purchaseDate": 899,"capitalizationEndDate": 48,"cycleAnchorDateOfInterestPayment": 6,"cycleAnchorDateOfRateReset": 13,"cycleAnchorDateOfScalingIndex": 81,"cycleAnchorDateOfFee": 366,"notionalPrincipal": 15,"nominalInterestRate": 28,"feeAccrued": 25,"accruedInterest": 10,"rateMultiplier": 400,"rateSpread": 146096,"feeRate": 30,"nextResetRate": 950,"penaltyRate": 366,"premiumDiscountAtIED": 25,"priceAtPurchaseDate": 111,"cycleOfInterestPayment": {"i": 1532892062,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 10,"p": 5,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2014223716,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 100,"p": 1,"s": 0,"isSet": false},"lifeCap": 10001,"lifeFloor": 86399,"periodCap": 150,"periodFloor": 9}, 1461002, 5,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [4,236,103,204,238,59,11,66,91,208,78,110,140,36,90,66,98,134,84,254,170,97,255,40,165,141,108,24,103,132,251,45],"legalEntityIdCounterparty": [207,75,70,2,228,92,154,231,210,138,168,85,145,132,9,66,95,224,64,126,123,5,15,190,119,25,28,146,34,243,57,41],"dayCountConvention": 6,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 1461,"statusDate": 95,"initialExchangeDate": 2446,"maturityDate": 10001,"terminationDate": 141,"purchaseDate": 28,"capitalizationEndDate": 64,"cycleAnchorDateOfInterestPayment": 949,"cycleAnchorDateOfRateReset": 90,"cycleAnchorDateOfScalingIndex": 254,"cycleAnchorDateOfFee": 10001,"notionalPrincipal": 6,"nominalInterestRate": 254,"feeAccrued": 90,"accruedInterest": 2014223714,"rateMultiplier": 14,"rateSpread": 2446,"feeRate": 1,"nextResetRate": 368,"penaltyRate": 4899,"premiumDiscountAtIED": 5,"priceAtPurchaseDate": 66,"cycleOfInterestPayment": {"i": 368,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 60,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2447,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 150,"p": 2,"s": 1,"isSet": false},"lifeCap": 2,"lifeFloor": 27,"periodCap": 99,"periodFloor": 1336}, 2440587, 366,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [58,241,146,229,86,175,10,199,197,172,186,75,13,169,154,55,172,224,173,8,197,33,153,203,218,208,122,233,132,35,162,19],"legalEntityIdCounterparty": [174,206,180,110,40,167,220,218,159,19,202,67,154,37,88,172,246,151,94,249,155,12,68,27,23,63,81,235,231,59,166,174],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 5,"statusDate": 120,"initialExchangeDate": 71,"maturityDate": 11,"terminationDate": 68568,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 31,"cycleAnchorDateOfRateReset": 27,"cycleAnchorDateOfScalingIndex": 119,"cycleAnchorDateOfFee": 2440588,"notionalPrincipal": 91,"nominalInterestRate": 0,"feeAccrued": 109,"accruedInterest": 30,"rateMultiplier": 1338,"rateSpread": 19,"feeRate": 366,"nextResetRate": 146097,"penaltyRate": 366,"premiumDiscountAtIED": 10000,"priceAtPurchaseDate": 1336,"cycleOfInterestPayment": {"i": 899,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 49,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 32074,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 1969,"p": 2,"s": 1,"isSet": false},"lifeCap": 146098,"lifeFloor": 1,"periodCap": 4899,"periodFloor": 121}, 68570, 4901,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [79,113,152,119,221,29,207,197,94,95,252,147,197,248,186,30,75,225,206,150,107,49,87,19,225,227,87,168,42,55,203,191],"legalEntityIdCounterparty": [148,119,127,178,220,105,146,210,47,129,253,212,47,31,8,241,135,38,32,89,87,64,101,229,109,60,146,189,69,101,196,240],"dayCountConvention": 4,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 367,"statusDate": 130,"initialExchangeDate": 131,"maturityDate": 131,"terminationDate": 101,"purchaseDate": 31,"capitalizationEndDate": 68568,"cycleAnchorDateOfInterestPayment": 2,"cycleAnchorDateOfRateReset": 24,"cycleAnchorDateOfScalingIndex": 23,"cycleAnchorDateOfFee": 1532892063,"notionalPrincipal": 32074,"nominalInterestRate": 1532892062,"feeAccrued": 26,"accruedInterest": 91,"rateMultiplier": 111,"rateSpread": 97,"feeRate": 367,"nextResetRate": 901,"penaltyRate": 6,"premiumDiscountAtIED": 4899,"priceAtPurchaseDate": 1969,"cycleOfInterestPayment": {"i": 16,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 61,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 4800,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 23,"p": 0,"s": 0,"isSet": false},"lifeCap": 20,"lifeFloor": 65,"periodCap": 130,"periodFloor": 4799}, 91, 360,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [190,236,77,8,221,29,155,204,120,127,111,207,98,3,250,114,69,141,75,179,173,51,68,235,95,146,105,127,226,168,195,182],"legalEntityIdCounterparty": [142,106,29,29,2,42,232,46,254,242,184,230,148,47,113,75,164,181,53,58,61,86,81,73,21,209,148,87,165,14,163,164],"dayCountConvention": 5,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 4,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 1461001,"statusDate": 64,"initialExchangeDate": 2014223714,"maturityDate": 2014223714,"terminationDate": 1461000,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 41,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 11,"cycleAnchorDateOfFee": 2,"notionalPrincipal": 16,"nominalInterestRate": 0,"feeAccrued": 13,"accruedInterest": 90,"rateMultiplier": 60,"rateSpread": 21,"feeRate": 1971,"nextResetRate": 32,"penaltyRate": 3,"premiumDiscountAtIED": 63,"priceAtPurchaseDate": 1,"cycleOfInterestPayment": {"i": 21,"p": 0,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 95,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 121,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 49,"p": 2,"s": 1,"isSet": false},"lifeCap": 1337,"lifeFloor": 1971,"periodCap": 25,"periodFloor": 28}, 4800, 63,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [152,227,2,133,152,68,49,204,205,234,177,132,0,185,61,131,26,144,253,250,108,174,193,146,177,18,25,178,23,29,68,216],"legalEntityIdCounterparty": [109,76,181,155,222,149,105,5,182,164,202,87,201,94,140,35,247,78,18,19,239,38,182,152,224,210,3,92,124,94,172,252],"dayCountConvention": 6,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 255,"statusDate": 27,"initialExchangeDate": 120,"maturityDate": 110,"terminationDate": 4799,"purchaseDate": 30,"capitalizationEndDate": 96,"cycleAnchorDateOfInterestPayment": 1532892062,"cycleAnchorDateOfRateReset": 90,"cycleAnchorDateOfScalingIndex": 89,"cycleAnchorDateOfFee": 130,"notionalPrincipal": 160,"nominalInterestRate": 15,"feeAccrued": 109,"accruedInterest": 2014223715,"rateMultiplier": 1969,"rateSpread": 254,"feeRate": 1532892062,"nextResetRate": 64,"penaltyRate": 2440587,"premiumDiscountAtIED": 29,"priceAtPurchaseDate": 27,"cycleOfInterestPayment": {"i": 5,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 18,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 32,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 2014223715,"p": 0,"s": 0,"isSet": true},"lifeCap": 899,"lifeFloor": 2440588,"periodCap": 1969,"periodFloor": 368}, 151, 4901,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 6,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [237,221,199,244,240,238,188,39,39,127,94,170,223,201,218,77,85,33,145,157,145,140,144,199,236,163,111,128,70,255,139,50],"legalEntityIdCounterparty": [57,143,8,146,33,117,133,40,87,141,60,28,56,12,224,255,196,100,29,74,67,185,15,43,255,159,122,106,50,140,252,158],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 256,"statusDate": 2446,"initialExchangeDate": 256,"maturityDate": 367,"terminationDate": 121,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 63,"cycleAnchorDateOfRateReset": 2014223716,"cycleAnchorDateOfScalingIndex": 3999,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 32076,"nominalInterestRate": 0,"feeAccrued": 140,"accruedInterest": 9999,"rateMultiplier": 2,"rateSpread": 368,"feeRate": 1461000,"nextResetRate": 1337,"penaltyRate": 5,"premiumDiscountAtIED": 254,"priceAtPurchaseDate": 28,"cycleOfInterestPayment": {"i": 65,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 111,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 63,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 367,"p": 4,"s": 1,"isSet": false},"lifeCap": 899,"lifeFloor": 15,"periodCap": 29,"periodFloor": 23}, 1338, 86401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [195,159,131,155,177,32,203,110,172,193,98,216,98,114,210,95,219,214,113,0,63,86,14,18,21,200,206,249,255,252,47,194],"legalEntityIdCounterparty": [48,45,21,72,246,163,95,175,160,124,29,212,66,246,85,74,66,29,88,93,72,114,135,141,90,193,147,182,233,46,235,34],"dayCountConvention": 3,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 12,"statusDate": 2448,"initialExchangeDate": 9999,"maturityDate": 71,"terminationDate": 121,"purchaseDate": 149,"capitalizationEndDate": 61,"cycleAnchorDateOfInterestPayment": 3,"cycleAnchorDateOfRateReset": 6,"cycleAnchorDateOfScalingIndex": 71,"cycleAnchorDateOfFee": 2440588,"notionalPrincipal": 79,"nominalInterestRate": 25,"feeAccrued": 18,"accruedInterest": 86399,"rateMultiplier": 159,"rateSpread": 50,"feeRate": 5,"nextResetRate": 2014223714,"penaltyRate": 2014223714,"premiumDiscountAtIED": 1532892064,"priceAtPurchaseDate": 4799,"cycleOfInterestPayment": {"i": 5,"p": 3,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 254,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 2014223715,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 899,"p": 0,"s": 1,"isSet": true},"lifeCap": 51,"lifeFloor": 68569,"periodCap": 28,"periodFloor": 400}, 29, 0,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [120,83,58,232,167,175,74,207,249,1,75,39,41,175,114,130,252,202,87,219,107,60,132,209,0,158,249,44,253,38,191,223],"legalEntityIdCounterparty": [43,78,125,35,71,146,115,67,194,146,52,243,17,115,232,97,109,138,66,174,253,103,60,76,12,42,155,0,75,70,82,52],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 161,"statusDate": 950,"initialExchangeDate": 146098,"maturityDate": 9,"terminationDate": 1,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 27,"cycleAnchorDateOfRateReset": 364,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 120,"notionalPrincipal": 255,"nominalInterestRate": 0,"feeAccrued": 254,"accruedInterest": 1,"rateMultiplier": 3999,"rateSpread": 4000,"feeRate": 68570,"nextResetRate": 100,"penaltyRate": 1532892062,"premiumDiscountAtIED": 2,"priceAtPurchaseDate": 101,"cycleOfInterestPayment": {"i": 0,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 111,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 1970,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 10001,"p": 3,"s": 0,"isSet": false},"lifeCap": 4000,"lifeFloor": 1336,"periodCap": 3,"periodFloor": 10001}, 10001, 161,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [246,62,114,67,220,63,162,153,162,79,146,171,0,0,233,208,38,87,158,225,184,2,194,219,74,246,217,165,60,28,53,97],"legalEntityIdCounterparty": [23,207,135,137,74,159,188,89,249,157,128,243,59,68,108,48,73,63,68,176,228,221,244,144,169,202,180,88,107,56,161,5],"dayCountConvention": 4,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 23,"statusDate": 949,"initialExchangeDate": 2,"maturityDate": 81,"terminationDate": 1461000,"purchaseDate": 31,"capitalizationEndDate": 4001,"cycleAnchorDateOfInterestPayment": 254,"cycleAnchorDateOfRateReset": 40,"cycleAnchorDateOfScalingIndex": 161,"cycleAnchorDateOfFee": 146098,"notionalPrincipal": 365,"nominalInterestRate": 18,"feeAccrued": 99,"accruedInterest": 2440587,"rateMultiplier": 1460,"rateSpread": 99,"feeRate": 2,"nextResetRate": 4900,"penaltyRate": 41,"premiumDiscountAtIED": 21,"priceAtPurchaseDate": 2440587,"cycleOfInterestPayment": {"i": 4001,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 59,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 30,"p": 2,"s": 0,"isSet": true},"cycleOfFee": {"i": 2,"p": 1,"s": 0,"isSet": false},"lifeCap": 2014223715,"lifeFloor": 4801,"periodCap": 10,"periodFloor": 14}, 400, 48,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [59,93,189,158,75,132,40,89,145,221,208,157,60,41,166,248,72,10,249,166,45,250,105,92,219,68,100,67,236,3,217,249],"legalEntityIdCounterparty": [29,144,6,224,36,252,204,18,45,175,175,221,245,193,12,54,37,52,253,93,81,240,209,222,48,204,251,39,170,197,231,67],"dayCountConvention": 6,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 2440588,"statusDate": 13,"initialExchangeDate": 4901,"maturityDate": 2440588,"terminationDate": 109,"purchaseDate": 31,"capitalizationEndDate": 361,"cycleAnchorDateOfInterestPayment": 366,"cycleAnchorDateOfRateReset": 111,"cycleAnchorDateOfScalingIndex": 79,"cycleAnchorDateOfFee": 4800,"notionalPrincipal": 97,"nominalInterestRate": 95,"feeAccrued": 11,"accruedInterest": 30,"rateMultiplier": 95,"rateSpread": 951,"feeRate": 140,"nextResetRate": 109,"penaltyRate": 1337,"premiumDiscountAtIED": 68568,"priceAtPurchaseDate": 5,"cycleOfInterestPayment": {"i": 4799,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 48,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 2440587,"p": 4,"s": 1,"isSet": false},"cycleOfFee": {"i": 131,"p": 0,"s": 0,"isSet": false},"lifeCap": 161,"lifeFloor": 27,"periodCap": 150,"periodFloor": 81}, 101, 254,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [179,8,56,192,82,95,98,240,77,122,132,147,61,170,37,130,252,136,192,150,55,93,174,209,37,11,98,111,208,29,55,212],"legalEntityIdCounterparty": [176,253,62,158,142,77,18,197,47,210,50,90,124,163,99,136,90,19,81,31,9,168,85,231,187,202,185,103,36,18,31,88],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 1971,"statusDate": 86400,"initialExchangeDate": 90,"maturityDate": 19,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 1461000,"cycleAnchorDateOfRateReset": 68568,"cycleAnchorDateOfScalingIndex": 257,"cycleAnchorDateOfFee": 2440588,"notionalPrincipal": 97,"nominalInterestRate": 0,"feeAccrued": 2014223715,"accruedInterest": 13,"rateMultiplier": 95,"rateSpread": 366,"feeRate": 1460,"nextResetRate": 79,"penaltyRate": 79,"premiumDiscountAtIED": 366,"priceAtPurchaseDate": 39,"cycleOfInterestPayment": {"i": 1461002,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 146098,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 32076,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 361,"p": 2,"s": 0,"isSet": true},"lifeCap": 366,"lifeFloor": 120,"periodCap": 257,"periodFloor": 160}, 48, 2440587,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [31,127,31,81,72,77,254,34,8,12,167,136,221,69,88,149,26,20,10,96,223,16,154,245,140,106,157,128,23,38,46,61],"legalEntityIdCounterparty": [32,145,83,134,126,178,101,17,144,127,150,47,47,162,104,109,13,255,6,157,167,155,64,50,38,20,98,121,56,1,0,166],"dayCountConvention": 0,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 23,"statusDate": 119,"initialExchangeDate": 401,"maturityDate": 86400,"terminationDate": 366,"purchaseDate": 139,"capitalizationEndDate": 3999,"cycleAnchorDateOfInterestPayment": 68568,"cycleAnchorDateOfRateReset": 1970,"cycleAnchorDateOfScalingIndex": 86400,"cycleAnchorDateOfFee": 15,"notionalPrincipal": 25,"nominalInterestRate": 2448,"feeAccrued": 146098,"accruedInterest": 91,"rateMultiplier": 401,"rateSpread": 16,"feeRate": 2440588,"nextResetRate": 61,"penaltyRate": 1336,"premiumDiscountAtIED": 2440589,"priceAtPurchaseDate": 1461002,"cycleOfInterestPayment": {"i": 366,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 4001,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 256,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 86399,"p": 0,"s": 1,"isSet": false},"lifeCap": 139,"lifeFloor": 146098,"periodCap": 950,"periodFloor": 139}, 367, 51,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [27,226,123,175,243,129,114,82,100,226,114,73,155,79,112,44,182,226,225,95,182,217,8,187,170,125,24,122,217,127,42,244],"legalEntityIdCounterparty": [45,236,109,119,227,77,21,111,18,1,70,187,109,207,24,55,109,186,15,206,127,114,87,70,131,163,208,129,210,110,198,163],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[2],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 6,"statusDate": 146097,"initialExchangeDate": 366,"maturityDate": 364,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 68569,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 48,"cycleAnchorDateOfFee": 18,"notionalPrincipal": 1336,"nominalInterestRate": 0,"feeAccrued": 1,"accruedInterest": 1532892064,"rateMultiplier": 2,"rateSpread": 4001,"feeRate": 28,"nextResetRate": 949,"penaltyRate": 1461,"premiumDiscountAtIED": 90,"priceAtPurchaseDate": 0,"cycleOfInterestPayment": {"i": 68570,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 2014223714,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 146097,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 86400,"p": 2,"s": 0,"isSet": true},"lifeCap": 32075,"lifeFloor": 361,"periodCap": 1338,"periodFloor": 21}, 1970, 4800,{from: accounts[0]});
  });
});
