const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 10,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [124,69,84,208,226,83,32,33,57,214,252,44,146,29,206,162,215,121,177,243,63,137,26,79,155,107,20,193,62,138,69,3],"legalEntityIdCounterparty": [215,217,15,30,163,140,44,163,196,146,242,70,161,127,240,8,47,107,145,236,106,242,173,6,104,157,252,225,181,204,0,232],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 399,"statusDate": 20,"initialExchangeDate": 254,"maturityDate": 63,"terminationDate": 1461,"purchaseDate": 141,"capitalizationEndDate": 30,"cycleAnchorDateOfInterestPayment": 160,"cycleAnchorDateOfRateReset": 899,"cycleAnchorDateOfScalingIndex": 949,"cycleAnchorDateOfFee": 2440587,"notionalPrincipal": 109,"nominalInterestRate": 79,"feeAccrued": 254,"accruedInterest": 69,"rateMultiplier": 8,"rateSpread": 8,"feeRate": 71,"nextResetRate": 150,"penaltyRate": 32074,"premiumDiscountAtIED": 91,"priceAtPurchaseDate": 27,"cycleOfInterestPayment": {"i": 9,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 951,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 949,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 257,"p": 2,"s": 0,"isSet": false},"lifeCap": 900,"lifeFloor": 60,"periodCap": 1461000,"periodFloor": 139},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 11,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [87,43,178,216,108,194,71,92,71,71,2,54,151,217,115,201,1,152,219,40,63,81,185,198,91,175,177,190,215,50,56,79],"legalEntityIdCounterparty": [117,61,199,42,0,155,116,227,238,14,80,172,127,220,4,218,126,180,218,12,116,113,35,186,251,35,81,249,26,35,72,114],"dayCountConvention": 1,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 1,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 68570,"statusDate": 68570,"initialExchangeDate": 120,"maturityDate": 950,"terminationDate": 68568,"purchaseDate": 32074,"capitalizationEndDate": 3999,"cycleAnchorDateOfInterestPayment": 2440589,"cycleAnchorDateOfRateReset": 365,"cycleAnchorDateOfScalingIndex": 40,"cycleAnchorDateOfFee": 367,"notionalPrincipal": 3999,"nominalInterestRate": 1461,"feeAccrued": 40,"accruedInterest": 1532892063,"rateMultiplier": 25,"rateSpread": 68568,"feeRate": 2014223714,"nextResetRate": 146098,"penaltyRate": 60,"premiumDiscountAtIED": 48,"priceAtPurchaseDate": 68570,"cycleOfInterestPayment": {"i": 23,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 10,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 368,"p": 3,"s": 0,"isSet": true},"cycleOfFee": {"i": 21,"p": 5,"s": 1,"isSet": true},"lifeCap": 64,"lifeFloor": 364,"periodCap": 51,"periodFloor": 1336}, {"lastEventTime": 400,"contractStatus": 2,"timeFromLastEvent": 80,"nominalValue": 110,"nominalAccrued": 65,"feeAccrued": 899,"nominalRate": 23,"interestScalingMultiplier": 15,"nominalScalingMultiplier": 32075,"contractRoleSign": 1}, 11,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 2,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [188,201,178,15,216,103,164,214,153,201,60,41,156,215,77,161,164,101,153,105,16,9,46,102,139,14,71,213,29,75,71,221],"legalEntityIdCounterparty": [27,98,130,31,75,108,3,61,119,212,15,18,134,187,174,173,190,136,185,108,181,132,10,162,89,24,94,231,122,10,35,171],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 101,"statusDate": 1336,"initialExchangeDate": 30,"maturityDate": 5,"terminationDate": 4899,"purchaseDate": 256,"capitalizationEndDate": 79,"cycleAnchorDateOfInterestPayment": 39,"cycleAnchorDateOfRateReset": 119,"cycleAnchorDateOfScalingIndex": 121,"cycleAnchorDateOfFee": 59,"notionalPrincipal": 146097,"nominalInterestRate": 146097,"feeAccrued": 96,"accruedInterest": 0,"rateMultiplier": 29,"rateSpread": 91,"feeRate": 39,"nextResetRate": 29,"penaltyRate": 32076,"premiumDiscountAtIED": 6,"priceAtPurchaseDate": 31,"cycleOfInterestPayment": {"i": 68569,"p": 2,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 30,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 100,"p": 5,"s": 1,"isSet": false},"cycleOfFee": {"i": 146097,"p": 1,"s": 0,"isSet": false},"lifeCap": 119,"lifeFloor": 1971,"periodCap": 2447,"periodFloor": 11}, {"lastEventTime": 139,"contractStatus": 2,"timeFromLastEvent": 25,"nominalValue": 25,"nominalAccrued": 2446,"feeAccrued": -1,"nominalRate": 14,"interestScalingMultiplier": 16,"nominalScalingMultiplier": 1532892064,"contractRoleSign": 2}, {"eventTime": 131,"eventTimeWithEpochOffset": 159,"scheduleTime": 141,"eventType": 0,"currency": accounts[4],"pofType": 1,"stfType": 13}, 1461,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [223,198,5,57,248,16,128,222,195,181,163,71,53,187,238,93,162,206,59,171,127,117,250,30,12,32,219,62,65,197,59,37],"legalEntityIdCounterparty": [78,126,83,225,149,211,47,122,229,234,17,19,49,101,210,164,106,180,102,37,127,117,218,55,204,210,247,143,239,251,9,245],"dayCountConvention": 5,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 86401,"statusDate": 4,"initialExchangeDate": 70,"maturityDate": 60,"terminationDate": 3,"purchaseDate": 4799,"capitalizationEndDate": 119,"cycleAnchorDateOfInterestPayment": 15,"cycleAnchorDateOfRateReset": 1336,"cycleAnchorDateOfScalingIndex": 120,"cycleAnchorDateOfFee": 1461000,"notionalPrincipal": 2,"nominalInterestRate": 899,"feeAccrued": 2014223715,"accruedInterest": 949,"rateMultiplier": 90,"rateSpread": 50,"feeRate": 109,"nextResetRate": 11,"penaltyRate": 146097,"premiumDiscountAtIED": 91,"priceAtPurchaseDate": 1336,"cycleOfInterestPayment": {"i": 2440589,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 110,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 1460,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 1461000,"p": 4,"s": 0,"isSet": false},"lifeCap": 95,"lifeFloor": 68569,"periodCap": 2014223714,"periodFloor": 86401}, 32074, 361,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 2,"legalEntityIdRecordCreator": [152,236,4,178,122,221,166,181,142,32,59,251,7,176,128,192,212,129,207,238,247,90,119,21,110,206,58,76,162,42,152,234],"legalEntityIdCounterparty": [238,93,73,200,173,239,224,228,62,163,114,120,132,160,118,37,253,74,69,241,102,95,146,241,189,119,41,255,24,33,89,8],"dayCountConvention": 1,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 70,"statusDate": 71,"initialExchangeDate": 256,"maturityDate": 17,"terminationDate": 131,"purchaseDate": 90,"capitalizationEndDate": 51,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 21,"cycleAnchorDateOfScalingIndex": 25,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 26,"nominalInterestRate": 21,"feeAccrued": 61,"accruedInterest": 65,"rateMultiplier": 1971,"rateSpread": 32075,"feeRate": 19,"nextResetRate": 1336,"penaltyRate": 1460,"premiumDiscountAtIED": 2446,"priceAtPurchaseDate": 160,"cycleOfInterestPayment": {"i": 9,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 109,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 69,"p": 2,"s": 1,"isSet": false},"cycleOfFee": {"i": 63,"p": 5,"s": 0,"isSet": true},"lifeCap": 2014223715,"lifeFloor": 24,"periodCap": 10001,"periodFloor": 255}, 1462, 86401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [0,196,116,25,12,9,37,7,255,142,238,250,81,214,5,99,236,13,38,180,84,250,34,1,194,217,18,53,163,123,192,185],"legalEntityIdCounterparty": [235,49,204,141,52,75,191,117,129,213,161,145,107,135,255,54,225,175,143,216,246,216,78,179,216,185,197,93,210,108,148,181],"dayCountConvention": 1,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 2,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 4001,"statusDate": 100,"initialExchangeDate": 254,"maturityDate": 10000,"terminationDate": 26,"purchaseDate": 11,"capitalizationEndDate": 7,"cycleAnchorDateOfInterestPayment": 4899,"cycleAnchorDateOfRateReset": 399,"cycleAnchorDateOfScalingIndex": 4000,"cycleAnchorDateOfFee": 26,"notionalPrincipal": 364,"nominalInterestRate": 2446,"feeAccrued": 19,"accruedInterest": 254,"rateMultiplier": 64,"rateSpread": 63,"feeRate": 2014223714,"nextResetRate": 365,"penaltyRate": 8,"premiumDiscountAtIED": 26,"priceAtPurchaseDate": 50,"cycleOfInterestPayment": {"i": 19,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2446,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 161,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 10,"p": 2,"s": 1,"isSet": true},"lifeCap": 25,"lifeFloor": 15,"periodCap": 20,"periodFloor": 68568}, 86401, 86401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 0,"contractRole": 9,"legalEntityIdRecordCreator": [42,106,241,100,47,198,14,69,216,188,102,129,85,218,141,134,47,238,254,213,69,71,195,180,187,135,18,41,9,129,115,24],"legalEntityIdCounterparty": [235,191,6,144,205,222,39,34,23,207,250,155,36,110,170,208,215,148,175,58,210,124,122,156,27,203,120,192,154,206,215,181],"dayCountConvention": 1,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 119,"statusDate": 96,"initialExchangeDate": 10000,"maturityDate": 901,"terminationDate": 91,"purchaseDate": 32076,"capitalizationEndDate": 360,"cycleAnchorDateOfInterestPayment": 2014223715,"cycleAnchorDateOfRateReset": 1461002,"cycleAnchorDateOfScalingIndex": 39,"cycleAnchorDateOfFee": 161,"notionalPrincipal": 1338,"nominalInterestRate": 26,"feeAccrued": 146096,"accruedInterest": 1460,"rateMultiplier": 10001,"rateSpread": 66,"feeRate": 96,"nextResetRate": 28,"penaltyRate": 19,"premiumDiscountAtIED": 1461002,"priceAtPurchaseDate": 254,"cycleOfInterestPayment": {"i": 401,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 101,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 40,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 130,"p": 0,"s": 0,"isSet": true},"lifeCap": 159,"lifeFloor": 39,"periodCap": 5,"periodFloor": 96}, 3999, 1462,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [202,162,87,105,114,242,215,168,83,205,112,153,17,135,171,134,59,209,232,115,55,213,237,110,243,140,182,48,157,210,63,190],"legalEntityIdCounterparty": [186,173,225,44,142,25,185,88,148,227,59,96,172,219,53,132,188,109,176,14,231,230,164,80,82,37,45,8,147,255,8,73],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 60,"statusDate": 2440589,"initialExchangeDate": 400,"maturityDate": 39,"terminationDate": 901,"purchaseDate": 0,"capitalizationEndDate": 24,"cycleAnchorDateOfInterestPayment": 150,"cycleAnchorDateOfRateReset": 8,"cycleAnchorDateOfScalingIndex": 27,"cycleAnchorDateOfFee": 2440589,"notionalPrincipal": 146097,"nominalInterestRate": 2446,"feeAccrued": 1461002,"accruedInterest": 30,"rateMultiplier": 30,"rateSpread": 4900,"feeRate": 130,"nextResetRate": 361,"penaltyRate": 70,"premiumDiscountAtIED": 0,"priceAtPurchaseDate": 1336,"cycleOfInterestPayment": {"i": 68569,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1461002,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 2014223716,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 121,"p": 0,"s": 0,"isSet": false},"lifeCap": 4000,"lifeFloor": 65,"periodCap": 3,"periodFloor": 4800}, 146097, 4900,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [35,55,130,213,149,48,126,255,76,170,17,120,74,240,27,92,20,50,203,175,53,174,237,14,221,27,203,131,236,107,243,197],"legalEntityIdCounterparty": [69,160,73,254,218,130,72,45,16,71,68,74,2,216,118,3,64,194,175,158,28,69,75,181,94,80,193,178,209,203,94,216],"dayCountConvention": 6,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 6,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 21,"statusDate": 256,"initialExchangeDate": 949,"maturityDate": 23,"terminationDate": 1532892064,"purchaseDate": 2440587,"capitalizationEndDate": 161,"cycleAnchorDateOfInterestPayment": 25,"cycleAnchorDateOfRateReset": 10000,"cycleAnchorDateOfScalingIndex": 366,"cycleAnchorDateOfFee": 2440587,"notionalPrincipal": 1532892064,"nominalInterestRate": 254,"feeAccrued": 16,"accruedInterest": 14,"rateMultiplier": 32,"rateSpread": 7,"feeRate": 1336,"nextResetRate": 951,"penaltyRate": 366,"premiumDiscountAtIED": 1461,"priceAtPurchaseDate": 91,"cycleOfInterestPayment": {"i": 27,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 401,"p": 2,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 100,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 1532892062,"p": 5,"s": 1,"isSet": false},"lifeCap": 7,"lifeFloor": 109,"periodCap": 365,"periodFloor": 254}, 32076, 367,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [73,221,24,120,140,170,115,133,164,175,107,206,178,113,194,34,143,26,178,171,164,163,115,53,137,165,221,194,102,56,164,112],"legalEntityIdCounterparty": [211,28,13,150,66,56,250,114,127,195,124,126,125,179,252,171,12,242,186,239,193,102,173,62,72,134,77,66,17,124,10,77],"dayCountConvention": 2,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 29,"statusDate": 1532892063,"initialExchangeDate": 101,"maturityDate": 149,"terminationDate": 12,"purchaseDate": 95,"capitalizationEndDate": 40,"cycleAnchorDateOfInterestPayment": 50,"cycleAnchorDateOfRateReset": 111,"cycleAnchorDateOfScalingIndex": 1337,"cycleAnchorDateOfFee": 4900,"notionalPrincipal": 121,"nominalInterestRate": 2440589,"feeAccrued": 68569,"accruedInterest": 19,"rateMultiplier": 131,"rateSpread": 119,"feeRate": 59,"nextResetRate": 7,"penaltyRate": 1,"premiumDiscountAtIED": 111,"priceAtPurchaseDate": 949,"cycleOfInterestPayment": {"i": 49,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 368,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 81,"p": 0,"s": 1,"isSet": true},"cycleOfFee": {"i": 1337,"p": 5,"s": 0,"isSet": false},"lifeCap": 23,"lifeFloor": 89,"periodCap": 1461000,"periodFloor": 68569}, 95, 1461001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [182,59,22,25,46,81,211,112,240,152,204,188,57,42,251,121,44,154,72,219,35,102,245,178,37,0,184,146,215,147,21,39],"legalEntityIdCounterparty": [255,25,43,164,199,36,179,39,122,121,58,223,184,54,173,81,148,143,40,45,159,207,98,32,32,184,120,19,242,253,115,174],"dayCountConvention": 5,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 4901,"statusDate": 2014223714,"initialExchangeDate": 15,"maturityDate": 254,"terminationDate": 4799,"purchaseDate": 90,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 4,"cycleAnchorDateOfRateReset": 1336,"cycleAnchorDateOfScalingIndex": 23,"cycleAnchorDateOfFee": 899,"notionalPrincipal": 86401,"nominalInterestRate": 5,"feeAccrued": 1462,"accruedInterest": 48,"rateMultiplier": 27,"rateSpread": 20,"feeRate": 2014223715,"nextResetRate": 160,"penaltyRate": 160,"premiumDiscountAtIED": 21,"priceAtPurchaseDate": 899,"cycleOfInterestPayment": {"i": 11,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 3999,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 13,"p": 4,"s": 0,"isSet": false},"cycleOfFee": {"i": 24,"p": 2,"s": 1,"isSet": true},"lifeCap": 2446,"lifeFloor": 15,"periodCap": 97,"periodFloor": 1338}, 14, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [185,50,41,185,36,8,163,183,36,156,19,44,225,21,209,238,242,41,99,125,78,103,22,171,61,59,199,21,88,154,184,174],"legalEntityIdCounterparty": [124,102,168,177,203,14,214,176,4,66,44,145,219,30,125,123,20,167,41,47,142,99,247,177,51,134,123,36,206,14,193,78],"dayCountConvention": 2,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 365,"statusDate": 8,"initialExchangeDate": 90,"maturityDate": 159,"terminationDate": 257,"purchaseDate": 16,"capitalizationEndDate": 2440589,"cycleAnchorDateOfInterestPayment": 146097,"cycleAnchorDateOfRateReset": 24,"cycleAnchorDateOfScalingIndex": 1971,"cycleAnchorDateOfFee": 65,"notionalPrincipal": 25,"nominalInterestRate": 32,"feeAccrued": 32,"accruedInterest": 159,"rateMultiplier": 3,"rateSpread": 26,"feeRate": 131,"nextResetRate": 17,"penaltyRate": 32074,"premiumDiscountAtIED": 2440587,"priceAtPurchaseDate": 32076,"cycleOfInterestPayment": {"i": 90,"p": 4,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 16,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 141,"p": 0,"s": 0,"isSet": true},"cycleOfFee": {"i": 257,"p": 1,"s": 0,"isSet": true},"lifeCap": 1336,"lifeFloor": 149,"periodCap": 139,"periodFloor": 71}, 39, 2014223715,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 2,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [114,89,220,94,170,58,207,193,106,190,45,7,146,45,188,37,74,93,75,16,47,230,200,252,85,8,186,152,2,219,64,44],"legalEntityIdCounterparty": [88,241,45,157,111,164,250,251,170,170,69,56,133,89,229,110,26,64,72,122,68,242,119,128,178,214,244,199,4,93,42,250],"dayCountConvention": 2,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 1532892063,"statusDate": 59,"initialExchangeDate": 4000,"maturityDate": 1460,"terminationDate": 3999,"purchaseDate": 111,"capitalizationEndDate": 89,"cycleAnchorDateOfInterestPayment": 70,"cycleAnchorDateOfRateReset": 1337,"cycleAnchorDateOfScalingIndex": 28,"cycleAnchorDateOfFee": 70,"notionalPrincipal": 30,"nominalInterestRate": 146096,"feeAccrued": 1462,"accruedInterest": 13,"rateMultiplier": 360,"rateSpread": 4,"feeRate": 71,"nextResetRate": 159,"penaltyRate": 1969,"premiumDiscountAtIED": 66,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 27,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 10,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 27,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 39,"p": 4,"s": 0,"isSet": true},"lifeCap": 6,"lifeFloor": 50,"periodCap": 48,"periodFloor": 111}, 4001, 2014223716,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 9,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [149,46,142,139,105,228,80,143,253,69,96,183,133,63,9,197,147,206,171,176,107,50,246,249,134,142,215,65,19,68,39,28],"legalEntityIdCounterparty": [92,50,255,194,79,232,101,189,76,236,48,194,82,136,212,53,157,146,250,3,77,218,45,42,163,135,114,145,107,245,57,16],"dayCountConvention": 5,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 5,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 30,"statusDate": 86401,"initialExchangeDate": 366,"maturityDate": 951,"terminationDate": 1462,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 364,"cycleAnchorDateOfRateReset": 4,"cycleAnchorDateOfScalingIndex": 111,"cycleAnchorDateOfFee": 61,"notionalPrincipal": 1462,"nominalInterestRate": 0,"feeAccrued": 16,"accruedInterest": 256,"rateMultiplier": 6,"rateSpread": 160,"feeRate": 10001,"nextResetRate": 69,"penaltyRate": 71,"premiumDiscountAtIED": 256,"priceAtPurchaseDate": 30,"cycleOfInterestPayment": {"i": 146098,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 21,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1969,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 399,"p": 2,"s": 1,"isSet": false},"lifeCap": 59,"lifeFloor": 21,"periodCap": 86401,"periodFloor": 79}, 1532892063, 31,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [50,27,106,158,94,69,0,61,231,211,159,133,254,88,21,216,195,231,211,250,119,182,16,24,131,145,238,111,48,242,231,237],"legalEntityIdCounterparty": [230,16,38,158,73,112,7,49,111,219,110,235,156,187,114,6,120,148,33,131,75,4,151,63,82,236,37,196,183,43,252,80],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[9],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 1970,"statusDate": 1461,"initialExchangeDate": 8,"maturityDate": 111,"terminationDate": 31,"purchaseDate": 86400,"capitalizationEndDate": 2014223715,"cycleAnchorDateOfInterestPayment": 364,"cycleAnchorDateOfRateReset": 41,"cycleAnchorDateOfScalingIndex": 7,"cycleAnchorDateOfFee": 6,"notionalPrincipal": 15,"nominalInterestRate": 32,"feeAccrued": 95,"accruedInterest": 140,"rateMultiplier": 1,"rateSpread": 25,"feeRate": 4800,"nextResetRate": 401,"penaltyRate": 119,"premiumDiscountAtIED": 25,"priceAtPurchaseDate": 150,"cycleOfInterestPayment": {"i": 2014223715,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 2448,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 1460,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 899,"p": 4,"s": 0,"isSet": true},"lifeCap": 130,"lifeFloor": 364,"periodCap": 368,"periodFloor": 8}, 359, 950,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 3,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [83,149,194,15,48,30,45,79,217,93,25,178,123,143,106,61,202,13,210,167,83,137,58,33,86,85,249,153,42,10,149,115],"legalEntityIdCounterparty": [246,86,157,166,10,242,141,222,163,221,155,30,180,254,60,11,170,189,141,232,244,119,17,167,95,76,126,20,149,139,128,178],"dayCountConvention": 0,"businessDayConvention": 1,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 4000,"statusDate": 950,"initialExchangeDate": 146096,"maturityDate": 1969,"terminationDate": 4000,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 119,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 131,"cycleAnchorDateOfFee": 48,"notionalPrincipal": 69,"nominalInterestRate": 0,"feeAccrued": 1460,"accruedInterest": 129,"rateMultiplier": 5,"rateSpread": 1532892064,"feeRate": 146096,"nextResetRate": 21,"penaltyRate": 64,"premiumDiscountAtIED": 364,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 900,"p": 2,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 256,"p": 5,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 6,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 146097,"p": 1,"s": 0,"isSet": false},"lifeCap": 69,"lifeFloor": 51,"periodCap": 95,"periodFloor": 1461002}, 1461, 41,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [147,158,92,8,79,169,170,187,161,155,54,251,19,222,95,177,168,200,171,176,21,18,190,84,200,222,38,184,176,230,70,182],"legalEntityIdCounterparty": [109,31,53,47,29,122,193,207,196,42,128,129,146,246,163,99,19,3,68,79,23,199,3,231,245,136,113,155,17,45,86,178],"dayCountConvention": 0,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 21,"statusDate": 2014223714,"initialExchangeDate": 1337,"maturityDate": 32076,"terminationDate": 11,"purchaseDate": 10000,"capitalizationEndDate": 61,"cycleAnchorDateOfInterestPayment": 12,"cycleAnchorDateOfRateReset": 59,"cycleAnchorDateOfScalingIndex": 2448,"cycleAnchorDateOfFee": 161,"notionalPrincipal": 29,"nominalInterestRate": 146096,"feeAccrued": 59,"accruedInterest": 14,"rateMultiplier": 110,"rateSpread": 89,"feeRate": 26,"nextResetRate": 146097,"penaltyRate": 49,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 63,"cycleOfInterestPayment": {"i": 1336,"p": 1,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 1460,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 24,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 1532892062,"p": 4,"s": 1,"isSet": false},"lifeCap": 1460,"lifeFloor": 1,"periodCap": 59,"periodFloor": 146096}, 18, 4,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [185,91,82,30,213,22,28,226,184,115,133,41,8,193,17,111,116,94,76,230,172,28,149,200,7,119,128,207,228,200,93,83],"legalEntityIdCounterparty": [114,252,21,109,183,227,48,38,197,235,94,6,51,173,244,57,239,79,155,147,9,73,187,125,72,38,136,67,5,124,200,136],"dayCountConvention": 2,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 0,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 49,"statusDate": 3,"initialExchangeDate": 2440589,"maturityDate": 8,"terminationDate": 61,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 28,"cycleAnchorDateOfRateReset": 130,"cycleAnchorDateOfScalingIndex": 4000,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 1462,"nominalInterestRate": 0,"feeAccrued": 4000,"accruedInterest": 400,"rateMultiplier": 1460,"rateSpread": 6,"feeRate": 254,"nextResetRate": 2440589,"penaltyRate": 97,"premiumDiscountAtIED": 146098,"priceAtPurchaseDate": 146097,"cycleOfInterestPayment": {"i": 61,"p": 5,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 14,"p": 2,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 1460,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 28,"p": 0,"s": 0,"isSet": false},"lifeCap": 1461000,"lifeFloor": 89,"periodCap": 101,"periodFloor": 1970}, 9999, 61,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [180,235,146,245,165,103,147,30,39,138,193,221,115,25,199,232,129,244,109,17,78,71,239,156,27,30,145,148,53,178,18,118],"legalEntityIdCounterparty": [180,212,67,161,181,167,50,76,142,145,42,49,200,206,40,249,155,235,188,100,109,218,219,41,60,123,61,101,14,20,240,74],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 6,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 368,"statusDate": 1461000,"initialExchangeDate": 361,"maturityDate": 32,"terminationDate": 399,"purchaseDate": 32076,"capitalizationEndDate": 4799,"cycleAnchorDateOfInterestPayment": 18,"cycleAnchorDateOfRateReset": 1462,"cycleAnchorDateOfScalingIndex": 161,"cycleAnchorDateOfFee": 61,"notionalPrincipal": 141,"nominalInterestRate": 141,"feeAccrued": 63,"accruedInterest": 39,"rateMultiplier": 365,"rateSpread": 26,"feeRate": 951,"nextResetRate": 146096,"penaltyRate": 20,"premiumDiscountAtIED": 1460,"priceAtPurchaseDate": 110,"cycleOfInterestPayment": {"i": 32,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 90,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 1461002,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 2014223716,"p": 2,"s": 1,"isSet": false},"lifeCap": 949,"lifeFloor": 11,"periodCap": 3,"periodFloor": 10}, 14, 68570,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 1,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [119,83,209,43,251,184,32,239,52,48,216,114,60,222,154,118,35,61,103,229,107,228,73,120,126,241,31,3,0,238,207,118],"legalEntityIdCounterparty": [38,229,101,195,23,189,184,189,193,189,75,9,23,17,4,110,174,141,253,240,10,141,43,91,45,15,35,71,177,118,97,45],"dayCountConvention": 1,"businessDayConvention": 7,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 26,"statusDate": 63,"initialExchangeDate": 79,"maturityDate": 31,"terminationDate": 4801,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 131,"cycleAnchorDateOfRateReset": 1532892063,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 9999,"notionalPrincipal": 131,"nominalInterestRate": 0,"feeAccrued": 361,"accruedInterest": 14,"rateMultiplier": 900,"rateSpread": 161,"feeRate": 96,"nextResetRate": 89,"penaltyRate": 96,"premiumDiscountAtIED": 101,"priceAtPurchaseDate": 4001,"cycleOfInterestPayment": {"i": 71,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2447,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 86401,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 61,"p": 3,"s": 0,"isSet": true},"lifeCap": 364,"lifeFloor": 9999,"periodCap": 146098,"periodFloor": 2014223714}, 32075, 27,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [31,136,82,62,189,46,43,175,171,13,62,145,251,146,167,139,163,2,247,71,24,108,147,109,67,105,233,142,47,251,138,157],"legalEntityIdCounterparty": [44,176,145,71,224,69,42,116,80,138,14,51,157,102,16,38,226,96,155,93,144,90,89,233,53,240,154,66,173,139,109,80],"dayCountConvention": 2,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[0],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 63,"statusDate": 9,"initialExchangeDate": 8,"maturityDate": 26,"terminationDate": 131,"purchaseDate": 1461,"capitalizationEndDate": 61,"cycleAnchorDateOfInterestPayment": 1336,"cycleAnchorDateOfRateReset": 17,"cycleAnchorDateOfScalingIndex": 10001,"cycleAnchorDateOfFee": 32076,"notionalPrincipal": 360,"nominalInterestRate": 1337,"feeAccrued": 16,"accruedInterest": 2014223714,"rateMultiplier": 81,"rateSpread": 31,"feeRate": 110,"nextResetRate": 3,"penaltyRate": 61,"premiumDiscountAtIED": 4801,"priceAtPurchaseDate": 9,"cycleOfInterestPayment": {"i": 2446,"p": 3,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 359,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 146096,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 69,"p": 0,"s": 0,"isSet": true},"lifeCap": 255,"lifeFloor": 130,"periodCap": 91,"periodFloor": 9}, 400, 1461001,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 0,"calendar": 0,"contractRole": 5,"legalEntityIdRecordCreator": [245,119,223,85,117,152,126,108,72,41,8,254,147,224,251,226,253,254,114,172,47,36,113,156,26,254,89,46,58,101,180,1],"legalEntityIdCounterparty": [158,91,241,244,55,183,50,61,237,61,181,195,71,209,101,136,201,254,218,81,199,119,177,222,127,16,229,136,140,146,12,2],"dayCountConvention": 5,"businessDayConvention": 0,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 1338,"statusDate": 1,"initialExchangeDate": 68569,"maturityDate": 2440588,"terminationDate": 2440589,"purchaseDate": 86399,"capitalizationEndDate": 89,"cycleAnchorDateOfInterestPayment": 1462,"cycleAnchorDateOfRateReset": 86401,"cycleAnchorDateOfScalingIndex": 366,"cycleAnchorDateOfFee": 40,"notionalPrincipal": 17,"nominalInterestRate": 16,"feeAccrued": 366,"accruedInterest": 1,"rateMultiplier": 1,"rateSpread": 15,"feeRate": 66,"nextResetRate": 6,"penaltyRate": 69,"premiumDiscountAtIED": 79,"priceAtPurchaseDate": 1532892064,"cycleOfInterestPayment": {"i": 949,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 10000,"p": 3,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 150,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 25,"p": 2,"s": 0,"isSet": true},"lifeCap": 101,"lifeFloor": 101,"periodCap": 121,"periodFloor": 1460}, 13, 146096,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [85,241,201,38,207,35,233,24,26,231,70,177,29,124,255,43,4,146,71,187,254,189,235,77,160,86,216,249,142,150,80,104],"legalEntityIdCounterparty": [210,148,73,77,210,66,239,24,236,156,78,17,120,149,165,59,32,110,240,139,230,7,35,30,89,84,47,182,103,93,70,241],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[8],"scalingEffect": 4,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 365,"statusDate": 151,"initialExchangeDate": 2448,"maturityDate": 111,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 5,"cycleAnchorDateOfRateReset": 2446,"cycleAnchorDateOfScalingIndex": 256,"cycleAnchorDateOfFee": 13,"notionalPrincipal": 59,"nominalInterestRate": 0,"feeAccrued": 68568,"accruedInterest": 130,"rateMultiplier": 59,"rateSpread": 1460,"feeRate": 10001,"nextResetRate": 1461000,"penaltyRate": 1462,"premiumDiscountAtIED": 68568,"priceAtPurchaseDate": 100,"cycleOfInterestPayment": {"i": 110,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 32,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 10001,"p": 3,"s": 1,"isSet": true},"cycleOfFee": {"i": 2447,"p": 2,"s": 1,"isSet": true},"lifeCap": 119,"lifeFloor": 15,"periodCap": 64,"periodFloor": 40}, 19, 146096,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 5,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [35,83,201,247,83,15,38,103,177,93,54,196,68,6,56,76,128,242,27,176,27,251,144,226,122,73,73,181,182,133,81,187],"legalEntityIdCounterparty": [55,56,10,8,116,116,122,104,187,136,92,95,194,126,112,34,235,200,106,161,137,150,201,126,247,173,15,48,123,115,41,178],"dayCountConvention": 2,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[4],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 360,"statusDate": 368,"initialExchangeDate": 1461001,"maturityDate": 79,"terminationDate": 14,"purchaseDate": 2014223716,"capitalizationEndDate": 64,"cycleAnchorDateOfInterestPayment": 1460,"cycleAnchorDateOfRateReset": 149,"cycleAnchorDateOfScalingIndex": 15,"cycleAnchorDateOfFee": 86399,"notionalPrincipal": 68568,"nominalInterestRate": 39,"feeAccrued": 27,"accruedInterest": 19,"rateMultiplier": 361,"rateSpread": 109,"feeRate": 368,"nextResetRate": 141,"penaltyRate": 146098,"premiumDiscountAtIED": 63,"priceAtPurchaseDate": 1461,"cycleOfInterestPayment": {"i": 1461000,"p": 1,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1,"p": 0,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 32076,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 4799,"p": 1,"s": 1,"isSet": false},"lifeCap": 1461002,"lifeFloor": 71,"periodCap": 48,"periodFloor": 900}, 160, 32,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [161,29,35,62,121,67,114,247,115,106,168,141,33,181,232,130,145,125,94,13,24,30,169,65,183,34,47,228,52,248,216,227],"legalEntityIdCounterparty": [150,132,22,232,225,160,226,73,125,66,193,128,165,138,247,8,67,178,113,71,92,146,194,214,130,98,68,125,26,157,151,109],"dayCountConvention": 4,"businessDayConvention": 6,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 949,"statusDate": 16,"initialExchangeDate": 119,"maturityDate": 119,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 151,"cycleAnchorDateOfRateReset": 14,"cycleAnchorDateOfScalingIndex": 1461002,"cycleAnchorDateOfFee": 146096,"notionalPrincipal": 4,"nominalInterestRate": 0,"feeAccrued": 1969,"accruedInterest": 139,"rateMultiplier": 901,"rateSpread": 360,"feeRate": 95,"nextResetRate": 146098,"penaltyRate": 4799,"premiumDiscountAtIED": 2014223716,"priceAtPurchaseDate": 3999,"cycleOfInterestPayment": {"i": 97,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 110,"p": 1,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 360,"p": 4,"s": 0,"isSet": false},"cycleOfFee": {"i": 1338,"p": 5,"s": 1,"isSet": true},"lifeCap": 27,"lifeFloor": 159,"periodCap": 1336,"periodFloor": 96}, 10, 129,{from: accounts[0]});
  });
});
