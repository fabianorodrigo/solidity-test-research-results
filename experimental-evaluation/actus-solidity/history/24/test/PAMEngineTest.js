const truffleAssert = require('truffle-assertions');
const BusinessDayConvention = artifacts.require("BusinessDayConvention");
const ContractDefaultConvention = artifacts.require("ContractDefaultConvention");
const ContractRoleConvention = artifacts.require("ContractRoleConvention");
const DayCountConvention = artifacts.require("DayCountConvention");
const EndOfMonthConvention = artifacts.require("EndOfMonthConvention");
const Core = artifacts.require("Core");
const FloatMath = artifacts.require("FloatMath");
const Schedule = artifacts.require("Schedule");
const Utils = artifacts.require("Utils");
const PAMEngine = artifacts.require("PAMEngine");
const BokkyPooBahsDateTimeLibrary = artifacts.require("BokkyPooBahsDateTimeLibrary");
const SignedSafeMath = artifacts.require("openzeppelin-solidity/contracts/drafts/SignedSafeMath.sol");
const SafeMath = artifacts.require("openzeppelin-solidity/contracts/math/SafeMath.sol");
const ProxyBokkyPooBahsDateTimeLibrary = artifacts.require("ProxyBokkyPooBahsDateTimeLibrary");
const ProxyFloatMath = artifacts.require("ProxyFloatMath");
const ProxyContractRoleConvention = artifacts.require("ProxyContractRoleConvention");
const ProxyDayCountConvention = artifacts.require("ProxyDayCountConvention");
const ProxyEndOfMonthConvention = artifacts.require("ProxyEndOfMonthConvention");
const ProxyContractDefaultConvention = artifacts.require("ProxyContractDefaultConvention");
const ProxyBusinessDayConvention = artifacts.require("ProxyBusinessDayConvention");
const ProxySchedule = artifacts.require("ProxySchedule");
const ProxyUtils = artifacts.require("ProxyUtils");

contract("PAMEngine",(accounts)=>{
  let trace = false;
  let contractSafeMath = null;
  let contractSignedSafeMath = null;
  let contractFloatMath = null;
  let contractBokkyPooBahsDateTimeLibrary = null;
  let contractEndOfMonthConvention = null;
  let contractCore = null;
  let contractContractDefaultConvention = null;
  let contractSchedule = null;
  let contractUtils = null;
  let contractPAMEngine = null;
  let contractDayCountConvention = null;
  let contractContractRoleConvention = null;
  let contractBusinessDayConvention = null;
  beforeEach(async () => {
    contractSafeMath = await SafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SafeMath.new({from: accounts[0]}');
    contractSignedSafeMath = await SignedSafeMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: SignedSafeMath.new({from: accounts[0]}');
    contractFloatMath = await FloatMath.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: FloatMath.new({from: accounts[0]}');
    contractBokkyPooBahsDateTimeLibrary = await BokkyPooBahsDateTimeLibrary.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BokkyPooBahsDateTimeLibrary.new({from: accounts[0]}');
    EndOfMonthConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractEndOfMonthConvention = await EndOfMonthConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: EndOfMonthConvention.new({from: accounts[0]}');
    contractCore = await Core.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Core.new({from: accounts[0]}');
    contractContractDefaultConvention = await ContractDefaultConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractDefaultConvention.new({from: accounts[0]}');
    Schedule.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractSchedule = await Schedule.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Schedule.new({from: accounts[0]}');
    Utils.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractUtils = await Utils.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: Utils.new({from: accounts[0]}');
    PAMEngine.link("SafeMath",contractSafeMath.address);
     PAMEngine.link("SignedSafeMath",contractSignedSafeMath.address);
     PAMEngine.link("FloatMath",contractFloatMath.address);
    contractPAMEngine = await PAMEngine.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: PAMEngine.new({from: accounts[0]}');
    DayCountConvention.link("SafeMath",contractSafeMath.address);
     DayCountConvention.link("SignedSafeMath",contractSignedSafeMath.address);
     DayCountConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
     DayCountConvention.link("FloatMath",contractFloatMath.address);
    contractDayCountConvention = await DayCountConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: DayCountConvention.new({from: accounts[0]}');
    contractContractRoleConvention = await ContractRoleConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: ContractRoleConvention.new({from: accounts[0]}');
    BusinessDayConvention.link("BokkyPooBahsDateTimeLibrary",contractBokkyPooBahsDateTimeLibrary.address);
    contractBusinessDayConvention = await BusinessDayConvention.new({from: accounts[0]});
    if(trace) console.log('SUCESSO: BusinessDayConvention.new({from: accounts[0]}');
  });
  
  it('Should execute computeInitialState(Definitions.ContractTerms)', async () => {
    let result = await contractPAMEngine.computeInitialState({"contractType": 2,"calendar": 0,"contractRole": 7,"legalEntityIdRecordCreator": [247,4,15,211,7,140,23,126,34,245,93,68,57,203,177,254,35,95,85,116,178,34,91,143,234,56,110,86,16,183,52,17],"legalEntityIdCounterparty": [27,226,185,75,168,62,116,33,86,167,144,75,41,190,43,104,252,28,231,25,99,51,19,59,161,221,198,211,82,18,64,27],"dayCountConvention": 5,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 2448,"statusDate": 4001,"initialExchangeDate": 99,"maturityDate": 4000,"terminationDate": 129,"purchaseDate": 32075,"capitalizationEndDate": 150,"cycleAnchorDateOfInterestPayment": 97,"cycleAnchorDateOfRateReset": 63,"cycleAnchorDateOfScalingIndex": 950,"cycleAnchorDateOfFee": 899,"notionalPrincipal": 2440589,"nominalInterestRate": 4801,"feeAccrued": 4000,"accruedInterest": 3,"rateMultiplier": 4901,"rateSpread": 7,"feeRate": 361,"nextResetRate": 4001,"penaltyRate": 1971,"premiumDiscountAtIED": 100,"priceAtPurchaseDate": 368,"cycleOfInterestPayment": {"i": 1336,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 51,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 146096,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 31,"p": 4,"s": 1,"isSet": false},"lifeCap": 1971,"lifeFloor": 39,"periodCap": 257,"periodFloor": 18},{from: accounts[0]});
  });
  it('Should execute computeNextState(Definitions.ContractTerms,Definitions.ContractState,uint256)', async () => {
    let result = await contractPAMEngine.computeNextState({"contractType": 8,"calendar": 0,"contractRole": 1,"legalEntityIdRecordCreator": [89,206,255,242,133,126,169,157,242,23,99,152,145,244,63,178,185,189,141,116,250,78,103,78,208,112,127,219,191,194,7,192],"legalEntityIdCounterparty": [74,193,42,29,179,173,203,1,14,219,6,103,50,92,36,20,26,164,155,85,27,54,111,144,73,20,60,71,49,153,176,15],"dayCountConvention": 2,"businessDayConvention": 3,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 3,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 10000,"statusDate": 86399,"initialExchangeDate": 96,"maturityDate": 4900,"terminationDate": 96,"purchaseDate": 10000,"capitalizationEndDate": 2014223715,"cycleAnchorDateOfInterestPayment": 949,"cycleAnchorDateOfRateReset": 1532892064,"cycleAnchorDateOfScalingIndex": 69,"cycleAnchorDateOfFee": 63,"notionalPrincipal": 80,"nominalInterestRate": 96,"feeAccrued": 149,"accruedInterest": 30,"rateMultiplier": 130,"rateSpread": 161,"feeRate": 365,"nextResetRate": 99,"penaltyRate": 28,"premiumDiscountAtIED": 86399,"priceAtPurchaseDate": 9,"cycleOfInterestPayment": {"i": 60,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 4000,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 110,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 109,"p": 0,"s": 0,"isSet": true},"lifeCap": 30,"lifeFloor": 6,"periodCap": 950,"periodFloor": 86401}, {"lastEventTime": 129,"contractStatus": 2,"timeFromLastEvent": 61,"nominalValue": 951,"nominalAccrued": 899,"feeAccrued": 1969,"nominalRate": 899,"interestScalingMultiplier": 1532892062,"nominalScalingMultiplier": 26,"contractRoleSign": 6}, 2447,{from: accounts[0]});
  });
  it('Should execute computeNextStateForProtoEvent(Definitions.ContractTerms,Definitions.ContractState,Definitions.ProtoEvent,uint256)', async () => {
    let result = await contractPAMEngine.computeNextStateForProtoEvent({"contractType": 2,"calendar": 1,"contractRole": 8,"legalEntityIdRecordCreator": [206,172,239,64,251,229,20,72,148,243,80,67,122,240,80,126,2,87,255,71,245,238,127,197,202,241,119,253,220,3,72,7],"legalEntityIdCounterparty": [121,161,196,156,185,75,203,109,152,60,235,0,222,62,198,143,144,67,41,156,151,98,15,184,119,79,163,199,198,197,41,162],"dayCountConvention": 0,"businessDayConvention": 8,"endOfMonthConvention": 0,"currency": accounts[6],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 949,"statusDate": 19,"initialExchangeDate": 70,"maturityDate": 2014223716,"terminationDate": 9999,"purchaseDate": 26,"capitalizationEndDate": 950,"cycleAnchorDateOfInterestPayment": 2446,"cycleAnchorDateOfRateReset": 368,"cycleAnchorDateOfScalingIndex": 1461,"cycleAnchorDateOfFee": 949,"notionalPrincipal": 254,"nominalInterestRate": 10,"feeAccrued": 14,"accruedInterest": 1461,"rateMultiplier": 90,"rateSpread": 8,"feeRate": 111,"nextResetRate": 2447,"penaltyRate": 130,"premiumDiscountAtIED": 86401,"priceAtPurchaseDate": 2448,"cycleOfInterestPayment": {"i": 1461000,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 13,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 32076,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 119,"p": 1,"s": 0,"isSet": false},"lifeCap": 17,"lifeFloor": 5,"periodCap": 120,"periodFloor": 60}, {"lastEventTime": 1461001,"contractStatus": 1,"timeFromLastEvent": 4000,"nominalValue": 111,"nominalAccrued": 4,"feeAccrued": 399,"nominalRate": 100,"interestScalingMultiplier": 59,"nominalScalingMultiplier": 140,"contractRoleSign": 8}, {"eventTime": 2447,"eventTimeWithEpochOffset": 51,"scheduleTime": 1969,"eventType": 17,"currency": accounts[9],"pofType": 19,"stfType": 3}, 950,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 1,"contractRole": 9,"legalEntityIdRecordCreator": [153,95,230,240,232,111,184,152,38,51,72,172,58,70,101,47,72,218,184,227,228,56,4,85,100,76,28,86,72,134,214,76],"legalEntityIdCounterparty": [55,222,148,155,95,223,243,78,137,14,254,229,33,128,218,96,200,167,231,172,155,100,65,64,39,166,46,141,214,39,162,25],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 111,"statusDate": 95,"initialExchangeDate": 4899,"maturityDate": 10,"terminationDate": 40,"purchaseDate": 109,"capitalizationEndDate": 160,"cycleAnchorDateOfInterestPayment": 10000,"cycleAnchorDateOfRateReset": 32075,"cycleAnchorDateOfScalingIndex": 150,"cycleAnchorDateOfFee": 1462,"notionalPrincipal": 951,"nominalInterestRate": 400,"feeAccrued": 86400,"accruedInterest": 4,"rateMultiplier": 17,"rateSpread": 361,"feeRate": 14,"nextResetRate": 1336,"penaltyRate": 27,"premiumDiscountAtIED": 950,"priceAtPurchaseDate": 6,"cycleOfInterestPayment": {"i": 27,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 31,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 6,"p": 1,"s": 0,"isSet": false},"cycleOfFee": {"i": 161,"p": 1,"s": 1,"isSet": true},"lifeCap": 101,"lifeFloor": 4799,"periodCap": 141,"periodFloor": 364}, 71, 131,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [83,185,55,29,74,245,32,206,124,104,2,44,141,42,227,82,95,56,212,176,52,17,199,233,36,226,230,124,129,88,147,105],"legalEntityIdCounterparty": [89,182,46,37,19,83,179,79,63,62,197,9,76,204,216,87,126,231,106,141,28,184,196,135,119,38,231,156,175,97,16,39],"dayCountConvention": 6,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[7],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 120,"statusDate": 27,"initialExchangeDate": 97,"maturityDate": 100,"terminationDate": 2014223715,"purchaseDate": 2014223716,"capitalizationEndDate": 65,"cycleAnchorDateOfInterestPayment": 900,"cycleAnchorDateOfRateReset": 160,"cycleAnchorDateOfScalingIndex": 10000,"cycleAnchorDateOfFee": 1969,"notionalPrincipal": 69,"nominalInterestRate": 4800,"feeAccrued": 121,"accruedInterest": 1532892064,"rateMultiplier": 4,"rateSpread": 1,"feeRate": 41,"nextResetRate": 146096,"penaltyRate": 146098,"premiumDiscountAtIED": 149,"priceAtPurchaseDate": 29,"cycleOfInterestPayment": {"i": 70,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 4,"p": 0,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4799,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 1461001,"p": 0,"s": 0,"isSet": true},"lifeCap": 950,"lifeFloor": 29,"periodCap": 2440588,"periodFloor": 146096}, 26, 14,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [63,5,225,80,22,58,242,3,27,68,9,140,59,175,184,68,97,98,115,104,182,120,200,245,66,171,48,97,170,51,100,80],"legalEntityIdCounterparty": [119,252,38,243,95,205,22,134,105,116,2,118,64,6,80,7,158,71,228,28,179,155,44,254,46,221,17,116,139,219,224,147],"dayCountConvention": 0,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[4],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 4,"statusDate": 1460,"initialExchangeDate": 1336,"maturityDate": 140,"terminationDate": 366,"purchaseDate": 4001,"capitalizationEndDate": 130,"cycleAnchorDateOfInterestPayment": 1461002,"cycleAnchorDateOfRateReset": 131,"cycleAnchorDateOfScalingIndex": 4900,"cycleAnchorDateOfFee": 1462,"notionalPrincipal": 950,"nominalInterestRate": 1461,"feeAccrued": 1532892062,"accruedInterest": 26,"rateMultiplier": 110,"rateSpread": 1971,"feeRate": 11,"nextResetRate": 24,"penaltyRate": 900,"premiumDiscountAtIED": 109,"priceAtPurchaseDate": 39,"cycleOfInterestPayment": {"i": 131,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 6,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 16,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 121,"p": 2,"s": 0,"isSet": true},"lifeCap": 2448,"lifeFloor": 146096,"periodCap": 3999,"periodFloor": 159}, 68570, 256,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [108,235,54,193,25,196,91,255,60,152,4,227,251,199,145,117,251,135,202,198,243,211,50,115,151,178,90,161,130,141,12,177],"legalEntityIdCounterparty": [45,254,237,150,94,195,206,140,169,145,72,169,123,207,200,203,10,93,61,124,16,45,32,31,21,210,89,244,234,136,238,119],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 3,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 1462,"statusDate": 97,"initialExchangeDate": 91,"maturityDate": 40,"terminationDate": 51,"purchaseDate": 14,"capitalizationEndDate": 365,"cycleAnchorDateOfInterestPayment": 2440587,"cycleAnchorDateOfRateReset": 30,"cycleAnchorDateOfScalingIndex": 13,"cycleAnchorDateOfFee": 900,"notionalPrincipal": 32076,"nominalInterestRate": 39,"feeAccrued": 2446,"accruedInterest": 146097,"rateMultiplier": 40,"rateSpread": 951,"feeRate": 400,"nextResetRate": 1969,"penaltyRate": 2440589,"premiumDiscountAtIED": 80,"priceAtPurchaseDate": 159,"cycleOfInterestPayment": {"i": 10001,"p": 4,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 368,"p": 0,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 1336,"p": 0,"s": 0,"isSet": false},"cycleOfFee": {"i": 120,"p": 1,"s": 1,"isSet": true},"lifeCap": 2014223715,"lifeFloor": 2440588,"periodCap": 18,"periodFloor": 2014223716}, 120, 2447,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.purchaseDate==0,FunctionCall!=true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 0,"contractRole": 8,"legalEntityIdRecordCreator": [23,191,152,121,104,57,50,124,166,111,7,115,141,178,89,101,55,25,255,36,139,114,119,123,39,132,139,155,48,73,69,243],"legalEntityIdCounterparty": [83,230,181,91,35,50,80,248,16,182,238,163,46,62,240,61,21,178,57,180,157,73,113,7,89,253,105,120,76,39,49,113],"dayCountConvention": 2,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[3],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 1,"contractDealDate": 2447,"statusDate": 8,"initialExchangeDate": 141,"maturityDate": 31,"terminationDate": 141,"purchaseDate": 0,"capitalizationEndDate": 4000,"cycleAnchorDateOfInterestPayment": 1532892064,"cycleAnchorDateOfRateReset": 367,"cycleAnchorDateOfScalingIndex": 10000,"cycleAnchorDateOfFee": 97,"notionalPrincipal": 1462,"nominalInterestRate": 29,"feeAccrued": 21,"accruedInterest": 32074,"rateMultiplier": 68569,"rateSpread": 17,"feeRate": 6,"nextResetRate": 13,"penaltyRate": 23,"premiumDiscountAtIED": 129,"priceAtPurchaseDate": 4900,"cycleOfInterestPayment": {"i": 1336,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 1461000,"p": 2,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 8,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 359,"p": 1,"s": 1,"isSet": false},"lifeCap": 18,"lifeFloor": 23,"periodCap": 256,"periodFloor": 1}, 15, 81,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [52,87,213,250,197,112,178,42,13,137,245,34,4,7,119,219,117,129,217,81,160,205,181,66,152,78,172,91,226,255,197,168],"legalEntityIdCounterparty": [253,62,205,215,153,55,241,20,172,13,195,157,181,91,185,70,23,140,100,53,186,39,11,25,162,236,14,183,1,24,101,220],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 160,"statusDate": 2447,"initialExchangeDate": 100,"maturityDate": 40,"terminationDate": 2446,"purchaseDate": 71,"capitalizationEndDate": 1460,"cycleAnchorDateOfInterestPayment": 146097,"cycleAnchorDateOfRateReset": 9,"cycleAnchorDateOfScalingIndex": 50,"cycleAnchorDateOfFee": 399,"notionalPrincipal": 31,"nominalInterestRate": 151,"feeAccrued": 68570,"accruedInterest": 50,"rateMultiplier": 257,"rateSpread": 79,"feeRate": 17,"nextResetRate": 2440587,"penaltyRate": 8,"premiumDiscountAtIED": 1337,"priceAtPurchaseDate": 4001,"cycleOfInterestPayment": {"i": 3,"p": 0,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 139,"p": 3,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 950,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 9,"p": 1,"s": 1,"isSet": true},"lifeCap": 2447,"lifeFloor": 2440589,"periodCap": 18,"periodFloor": 80}, 26, 14,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 4,"legalEntityIdRecordCreator": [8,177,217,10,224,13,75,252,16,23,134,153,196,60,19,154,231,110,68,112,214,227,192,109,149,39,206,94,234,199,212,201],"legalEntityIdCounterparty": [107,241,77,20,2,153,231,40,109,23,226,160,224,199,40,154,27,188,123,85,180,210,23,104,17,186,236,126,64,232,176,161],"dayCountConvention": 5,"businessDayConvention": 4,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 0,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 256,"statusDate": 97,"initialExchangeDate": 0,"maturityDate": 1532892064,"terminationDate": 4900,"purchaseDate": 399,"capitalizationEndDate": 1532892064,"cycleAnchorDateOfInterestPayment": 27,"cycleAnchorDateOfRateReset": 28,"cycleAnchorDateOfScalingIndex": 86401,"cycleAnchorDateOfFee": 32075,"notionalPrincipal": 6,"nominalInterestRate": 149,"feeAccrued": 13,"accruedInterest": 28,"rateMultiplier": 4900,"rateSpread": 32074,"feeRate": 2440587,"nextResetRate": 146097,"penaltyRate": 367,"premiumDiscountAtIED": 40,"priceAtPurchaseDate": 950,"cycleOfInterestPayment": {"i": 13,"p": 2,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 129,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 899,"p": 0,"s": 1,"isSet": false},"cycleOfFee": {"i": 256,"p": 2,"s": 1,"isSet": false},"lifeCap": 2440588,"lifeFloor": 254,"periodCap": 6,"periodFloor": 91}, 61, 4799,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 4,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [218,6,234,151,10,141,92,31,68,217,221,167,76,4,196,31,158,182,72,27,198,170,193,16,252,84,231,32,179,249,152,201],"legalEntityIdCounterparty": [194,124,82,236,76,66,174,33,119,145,21,124,23,208,201,63,226,171,15,79,150,202,24,217,154,12,5,234,240,24,98,74],"dayCountConvention": 1,"businessDayConvention": 8,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 13,"statusDate": 2014223715,"initialExchangeDate": 49,"maturityDate": 161,"terminationDate": 140,"purchaseDate": 360,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 2,"cycleAnchorDateOfRateReset": 101,"cycleAnchorDateOfScalingIndex": 140,"cycleAnchorDateOfFee": 151,"notionalPrincipal": 4900,"nominalInterestRate": 361,"feeAccrued": 400,"accruedInterest": 61,"rateMultiplier": 1,"rateSpread": 2014223714,"feeRate": 2440587,"nextResetRate": 8,"penaltyRate": 65,"premiumDiscountAtIED": 949,"priceAtPurchaseDate": 1460,"cycleOfInterestPayment": {"i": 18,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 12,"p": 0,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 2447,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 32074,"p": 1,"s": 0,"isSet": false},"lifeCap": 4899,"lifeFloor": 1971,"periodCap": 16,"periodFloor": 1}, 81, 20,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 17,"calendar": 1,"contractRole": 0,"legalEntityIdRecordCreator": [252,191,97,174,5,232,201,223,4,0,38,122,79,47,89,148,38,210,198,1,58,231,190,8,93,248,145,87,6,110,145,125],"legalEntityIdCounterparty": [100,243,105,140,44,45,7,46,237,172,83,204,3,210,178,23,59,208,87,19,48,34,72,94,208,189,206,110,215,219,165,248],"dayCountConvention": 6,"businessDayConvention": 2,"endOfMonthConvention": 1,"currency": accounts[3],"scalingEffect": 3,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 400,"statusDate": 120,"initialExchangeDate": 1532892063,"maturityDate": 64,"terminationDate": 68570,"purchaseDate": 1336,"capitalizationEndDate": 25,"cycleAnchorDateOfInterestPayment": 86401,"cycleAnchorDateOfRateReset": 255,"cycleAnchorDateOfScalingIndex": 119,"cycleAnchorDateOfFee": 951,"notionalPrincipal": 91,"nominalInterestRate": 68570,"feeAccrued": 367,"accruedInterest": 39,"rateMultiplier": 360,"rateSpread": 139,"feeRate": 1532892064,"nextResetRate": 1970,"penaltyRate": 1338,"premiumDiscountAtIED": 150,"priceAtPurchaseDate": 63,"cycleOfInterestPayment": {"i": 401,"p": 4,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 1969,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 110,"p": 4,"s": 1,"isSet": true},"cycleOfFee": {"i": 2,"p": 1,"s": 1,"isSet": true},"lifeCap": 10,"lifeFloor": 950,"periodCap": 951,"periodFloor": 26}, 4901, 1,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.capitalizationEndDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 11,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [255,154,141,57,31,41,83,171,152,217,59,203,182,169,148,42,4,193,49,70,225,144,29,101,110,127,185,190,195,117,134,208],"legalEntityIdCounterparty": [96,59,114,123,10,34,198,236,130,98,24,150,4,119,222,93,182,183,125,10,49,137,230,48,59,194,218,41,4,2,74,210],"dayCountConvention": 4,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[2],"scalingEffect": 4,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 81,"statusDate": 255,"initialExchangeDate": 254,"maturityDate": 28,"terminationDate": 951,"purchaseDate": 6,"capitalizationEndDate": 26,"cycleAnchorDateOfInterestPayment": 32076,"cycleAnchorDateOfRateReset": 131,"cycleAnchorDateOfScalingIndex": 146097,"cycleAnchorDateOfFee": 3,"notionalPrincipal": 1532892063,"nominalInterestRate": 399,"feeAccrued": 8,"accruedInterest": 10000,"rateMultiplier": 30,"rateSpread": 901,"feeRate": 1969,"nextResetRate": 130,"penaltyRate": 97,"premiumDiscountAtIED": 50,"priceAtPurchaseDate": 1461001,"cycleOfInterestPayment": {"i": 32,"p": 1,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 111,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 65,"p": 5,"s": 0,"isSet": true},"cycleOfFee": {"i": 7,"p": 3,"s": 0,"isSet": true},"lifeCap": 400,"lifeFloor": 1971,"periodCap": 86399,"periodFloor": 1461}, 2447, 2014223715,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.capitalizationEndDate==0,contractTerms.nominalInterestRate==0,FunctionCall!=true,contractTerms.purchaseDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 16,"calendar": 0,"contractRole": 3,"legalEntityIdRecordCreator": [245,135,237,159,148,172,13,110,223,201,182,85,41,165,68,211,210,9,191,215,215,195,95,12,47,12,190,8,122,166,79,1],"legalEntityIdCounterparty": [12,238,89,169,19,81,166,183,244,244,164,169,217,183,111,68,30,88,156,89,150,180,77,242,174,223,35,240,154,73,47,117],"dayCountConvention": 3,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 120,"statusDate": 1460,"initialExchangeDate": 2014223716,"maturityDate": 65,"terminationDate": 7,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 150,"cycleAnchorDateOfRateReset": 254,"cycleAnchorDateOfScalingIndex": 120,"cycleAnchorDateOfFee": 11,"notionalPrincipal": 18,"nominalInterestRate": 0,"feeAccrued": 29,"accruedInterest": 2014223715,"rateMultiplier": 86401,"rateSpread": 80,"feeRate": 89,"nextResetRate": 1971,"penaltyRate": 9,"premiumDiscountAtIED": 950,"priceAtPurchaseDate": 949,"cycleOfInterestPayment": {"i": 89,"p": 1,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 121,"p": 3,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 2014223715,"p": 3,"s": 0,"isSet": false},"cycleOfFee": {"i": 1532892062,"p": 0,"s": 0,"isSet": false},"lifeCap": 141,"lifeFloor": 10000,"periodCap": 50,"periodFloor": 40}, 60, 7,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 0,"legalEntityIdRecordCreator": [177,225,244,169,85,120,211,195,131,109,229,27,8,82,77,227,221,5,117,51,229,29,44,134,194,220,173,61,129,2,82,203],"legalEntityIdCounterparty": [78,133,232,175,31,9,127,152,209,148,82,150,60,50,206,14,167,127,231,93,236,13,142,59,53,213,117,145,52,188,36,255],"dayCountConvention": 4,"businessDayConvention": 0,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 7,"penaltyType": 2,"feeBasis": 0,"contractDealDate": 81,"statusDate": 68570,"initialExchangeDate": 1,"maturityDate": 27,"terminationDate": 29,"purchaseDate": 51,"capitalizationEndDate": 2440587,"cycleAnchorDateOfInterestPayment": 6,"cycleAnchorDateOfRateReset": 10,"cycleAnchorDateOfScalingIndex": 399,"cycleAnchorDateOfFee": 32076,"notionalPrincipal": 32074,"nominalInterestRate": 368,"feeAccrued": 2,"accruedInterest": 120,"rateMultiplier": 100,"rateSpread": 4900,"feeRate": 48,"nextResetRate": 86401,"penaltyRate": 40,"premiumDiscountAtIED": 14,"priceAtPurchaseDate": 68569,"cycleOfInterestPayment": {"i": 8,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2440587,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 51,"p": 4,"s": 1,"isSet": true},"cycleOfFee": {"i": 10,"p": 1,"s": 1,"isSet": false},"lifeCap": 14,"lifeFloor": 86401,"periodCap": 2446,"periodFloor": 129}, 2440588, 89,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfRateReset==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 1,"legalEntityIdRecordCreator": [25,132,105,188,39,253,232,109,24,38,108,67,165,65,57,89,242,33,198,250,2,41,105,145,254,212,74,221,148,65,161,96],"legalEntityIdCounterparty": [112,119,115,13,66,31,231,131,132,224,9,105,67,97,67,80,195,89,203,140,233,153,56,71,127,255,82,245,246,157,227,97],"dayCountConvention": 0,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[5],"scalingEffect": 2,"penaltyType": 2,"feeBasis": 1,"contractDealDate": 151,"statusDate": 1969,"initialExchangeDate": 23,"maturityDate": 159,"terminationDate": 6,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 149,"cycleAnchorDateOfRateReset": 0,"cycleAnchorDateOfScalingIndex": 64,"cycleAnchorDateOfFee": 1338,"notionalPrincipal": 359,"nominalInterestRate": 0,"feeAccrued": 16,"accruedInterest": 69,"rateMultiplier": 32076,"rateSpread": 68570,"feeRate": 2014223716,"nextResetRate": 366,"penaltyRate": 5,"premiumDiscountAtIED": 20,"priceAtPurchaseDate": 86400,"cycleOfInterestPayment": {"i": 50,"p": 3,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 10,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 401,"p": 2,"s": 0,"isSet": false},"cycleOfFee": {"i": 29,"p": 0,"s": 1,"isSet": true},"lifeCap": 86399,"lifeFloor": 99,"periodCap": 1461000,"periodFloor": 146096}, 61, 3999,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 10,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [253,189,217,82,215,79,33,50,71,123,52,123,214,61,4,38,217,171,87,107,229,164,137,21,0,245,252,137,68,106,141,217],"legalEntityIdCounterparty": [182,144,142,53,186,230,64,110,161,220,169,219,103,68,17,204,242,89,164,157,239,154,200,203,208,139,113,229,219,141,78,116],"dayCountConvention": 4,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 5,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 100,"statusDate": 140,"initialExchangeDate": 4901,"maturityDate": 79,"terminationDate": 257,"purchaseDate": 2447,"capitalizationEndDate": 51,"cycleAnchorDateOfInterestPayment": 121,"cycleAnchorDateOfRateReset": 119,"cycleAnchorDateOfScalingIndex": 32074,"cycleAnchorDateOfFee": 31,"notionalPrincipal": 1,"nominalInterestRate": 950,"feeAccrued": 1336,"accruedInterest": 86401,"rateMultiplier": 364,"rateSpread": 90,"feeRate": 40,"nextResetRate": 32075,"penaltyRate": 8,"premiumDiscountAtIED": 1461000,"priceAtPurchaseDate": 16,"cycleOfInterestPayment": {"i": 2446,"p": 0,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 27,"p": 3,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 7,"p": 4,"s": 0,"isSet": true},"cycleOfFee": {"i": 5,"p": 3,"s": 1,"isSet": false},"lifeCap": 4800,"lifeFloor": 12,"periodCap": 12,"periodFloor": 160}, 29, 1970,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfFee==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 1,"contractRole": 5,"legalEntityIdRecordCreator": [249,133,103,101,183,85,227,146,109,123,60,42,94,146,95,208,0,51,231,194,57,135,11,36,10,239,252,169,189,180,46,48],"legalEntityIdCounterparty": [145,79,90,198,106,236,170,75,30,147,230,225,239,17,238,134,184,65,199,154,64,196,170,176,7,159,66,100,85,238,110,177],"dayCountConvention": 3,"businessDayConvention": 1,"endOfMonthConvention": 1,"currency": accounts[0],"scalingEffect": 7,"penaltyType": 1,"feeBasis": 0,"contractDealDate": 130,"statusDate": 50,"initialExchangeDate": 1461001,"maturityDate": 8,"terminationDate": 27,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 4900,"cycleAnchorDateOfRateReset": 100,"cycleAnchorDateOfScalingIndex": 399,"cycleAnchorDateOfFee": 0,"notionalPrincipal": 2014223715,"nominalInterestRate": 0,"feeAccrued": 40,"accruedInterest": 1462,"rateMultiplier": 1969,"rateSpread": 255,"feeRate": 9999,"nextResetRate": 0,"penaltyRate": 24,"premiumDiscountAtIED": 949,"priceAtPurchaseDate": 1461002,"cycleOfInterestPayment": {"i": 140,"p": 5,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 109,"p": 4,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 90,"p": 1,"s": 1,"isSet": false},"cycleOfFee": {"i": 254,"p": 1,"s": 0,"isSet": false},"lifeCap": 899,"lifeFloor": 10,"periodCap": 119,"periodFloor": 366}, 1461002, 50,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 1,"contractRole": 7,"legalEntityIdRecordCreator": [77,110,14,128,190,126,120,198,40,243,230,200,59,195,230,14,158,185,148,78,229,68,179,83,204,0,22,208,212,222,123,37],"legalEntityIdCounterparty": [43,85,154,37,126,34,93,37,241,179,140,49,67,186,226,192,138,126,178,53,132,101,211,158,152,206,236,125,130,74,18,200],"dayCountConvention": 1,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[1],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 101,"statusDate": 4900,"initialExchangeDate": 950,"maturityDate": 89,"terminationDate": 86399,"purchaseDate": 2446,"capitalizationEndDate": 950,"cycleAnchorDateOfInterestPayment": 141,"cycleAnchorDateOfRateReset": 8,"cycleAnchorDateOfScalingIndex": 2448,"cycleAnchorDateOfFee": 17,"notionalPrincipal": 51,"nominalInterestRate": 361,"feeAccrued": 159,"accruedInterest": 111,"rateMultiplier": -1,"rateSpread": 146098,"feeRate": 2447,"nextResetRate": 4001,"penaltyRate": 66,"premiumDiscountAtIED": 32076,"priceAtPurchaseDate": 17,"cycleOfInterestPayment": {"i": 68570,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 2440587,"p": 1,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 110,"p": 5,"s": 0,"isSet": false},"cycleOfFee": {"i": 32075,"p": 2,"s": 0,"isSet": true},"lifeCap": 11,"lifeFloor": 71,"periodCap": 66,"periodFloor": 80}, 65, 257,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.cycleAnchorDateOfScalingIndex==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 13,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [249,219,37,162,42,202,216,194,205,135,109,94,231,131,114,191,134,244,11,133,161,21,125,77,151,234,7,54,61,206,84,54],"legalEntityIdCounterparty": [226,27,161,255,74,27,90,142,66,152,82,44,167,158,37,236,121,216,81,28,165,78,160,81,20,86,186,55,161,146,140,111],"dayCountConvention": 0,"businessDayConvention": 4,"endOfMonthConvention": 1,"currency": accounts[7],"scalingEffect": 7,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 1532892062,"statusDate": 101,"initialExchangeDate": 120,"maturityDate": 60,"terminationDate": 30,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 361,"cycleAnchorDateOfRateReset": 1532892063,"cycleAnchorDateOfScalingIndex": 0,"cycleAnchorDateOfFee": 1336,"notionalPrincipal": 2,"nominalInterestRate": 0,"feeAccrued": 68569,"accruedInterest": 12,"rateMultiplier": 32075,"rateSpread": 32,"feeRate": 1,"nextResetRate": 4900,"penaltyRate": 11,"premiumDiscountAtIED": 951,"priceAtPurchaseDate": 4001,"cycleOfInterestPayment": {"i": 399,"p": 5,"s": 0,"isSet": true},"cycleOfRateReset": {"i": 51,"p": 4,"s": 1,"isSet": false},"cycleOfScalingIndex": {"i": 4800,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 1336,"p": 5,"s": 0,"isSet": true},"lifeCap": 30,"lifeFloor": 255,"periodCap": 99,"periodFloor": 28}, 950, 86401,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 8,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [142,31,38,237,40,84,155,173,118,251,184,50,58,20,116,83,54,241,145,111,128,151,206,103,25,122,224,27,38,192,12,158],"legalEntityIdCounterparty": [242,58,29,58,142,32,254,42,70,103,36,19,120,200,74,44,164,74,86,118,82,227,0,187,228,168,251,27,167,243,45,136],"dayCountConvention": 6,"businessDayConvention": 3,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 0,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 6,"statusDate": 20,"initialExchangeDate": 255,"maturityDate": 361,"terminationDate": 80,"purchaseDate": 17,"capitalizationEndDate": 2014223716,"cycleAnchorDateOfInterestPayment": 365,"cycleAnchorDateOfRateReset": 951,"cycleAnchorDateOfScalingIndex": 146098,"cycleAnchorDateOfFee": 81,"notionalPrincipal": 146097,"nominalInterestRate": 21,"feeAccrued": 140,"accruedInterest": 68569,"rateMultiplier": 101,"rateSpread": 6,"feeRate": 256,"nextResetRate": 68568,"penaltyRate": 4,"premiumDiscountAtIED": 80,"priceAtPurchaseDate": 365,"cycleOfInterestPayment": {"i": 140,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 2440588,"p": 1,"s": 1,"isSet": true},"cycleOfScalingIndex": {"i": 4801,"p": 5,"s": 1,"isSet": true},"cycleOfFee": {"i": 2447,"p": 2,"s": 0,"isSet": false},"lifeCap": 80,"lifeFloor": 48,"periodCap": 2440588,"periodFloor": 2014223716}, 10001, 25,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.terminationDate!=0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 14,"calendar": 1,"contractRole": 6,"legalEntityIdRecordCreator": [249,122,28,172,74,129,171,64,207,132,253,200,212,67,74,238,171,168,111,10,240,131,89,34,179,79,89,220,209,53,42,3],"legalEntityIdCounterparty": [95,248,88,122,100,254,208,234,22,157,143,42,237,52,255,83,141,182,233,105,174,82,44,167,26,27,162,190,207,67,70,105],"dayCountConvention": 5,"businessDayConvention": 6,"endOfMonthConvention": 1,"currency": accounts[6],"scalingEffect": 2,"penaltyType": 3,"feeBasis": 0,"contractDealDate": 28,"statusDate": 86399,"initialExchangeDate": 96,"maturityDate": 95,"terminationDate": 66,"purchaseDate": 150,"capitalizationEndDate": 1338,"cycleAnchorDateOfInterestPayment": 101,"cycleAnchorDateOfRateReset": 51,"cycleAnchorDateOfScalingIndex": 1461002,"cycleAnchorDateOfFee": 2447,"notionalPrincipal": 31,"nominalInterestRate": 2440587,"feeAccrued": 1969,"accruedInterest": 2,"rateMultiplier": 70,"rateSpread": 1969,"feeRate": 901,"nextResetRate": 0,"penaltyRate": 140,"premiumDiscountAtIED": 18,"priceAtPurchaseDate": 2440587,"cycleOfInterestPayment": {"i": 130,"p": 0,"s": 1,"isSet": false},"cycleOfRateReset": {"i": 1461001,"p": 4,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 90,"p": 3,"s": 1,"isSet": false},"cycleOfFee": {"i": 68570,"p": 0,"s": 0,"isSet": true},"lifeCap": 101,"lifeFloor": 40,"periodCap": 901,"periodFloor": 9}, 254, 32074,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN contractTerms.terminationDate==0,FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 12,"calendar": 1,"contractRole": 3,"legalEntityIdRecordCreator": [226,79,32,2,255,208,132,251,51,127,21,175,247,4,86,70,100,237,187,204,91,184,53,56,23,7,99,133,216,68,119,186],"legalEntityIdCounterparty": [80,209,63,47,255,144,87,213,26,108,183,57,157,59,184,217,189,233,236,49,229,218,29,54,54,36,14,76,94,145,20,148],"dayCountConvention": 2,"businessDayConvention": 2,"endOfMonthConvention": 0,"currency": accounts[5],"scalingEffect": 0,"penaltyType": 1,"feeBasis": 1,"contractDealDate": 949,"statusDate": 40,"initialExchangeDate": 10001,"maturityDate": 2440588,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 11,"cycleAnchorDateOfRateReset": 63,"cycleAnchorDateOfScalingIndex": 28,"cycleAnchorDateOfFee": 146096,"notionalPrincipal": 1,"nominalInterestRate": 0,"feeAccrued": 68568,"accruedInterest": 254,"rateMultiplier": 26,"rateSpread": 101,"feeRate": 4901,"nextResetRate": 2014223715,"penaltyRate": 13,"premiumDiscountAtIED": 1336,"priceAtPurchaseDate": 32075,"cycleOfInterestPayment": {"i": 5,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 59,"p": 5,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 361,"p": 1,"s": 1,"isSet": true},"cycleOfFee": {"i": 69,"p": 2,"s": 0,"isSet": true},"lifeCap": 10,"lifeFloor": 120,"periodCap": 31,"periodFloor": 0}, 950, 97,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall==true', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 15,"calendar": 0,"contractRole": 6,"legalEntityIdRecordCreator": [242,71,159,185,83,106,167,63,163,42,37,83,72,110,111,209,172,142,243,104,48,232,113,18,38,67,25,148,136,64,217,174],"legalEntityIdCounterparty": [81,219,39,95,229,249,8,239,117,104,241,129,83,54,81,2,35,200,155,240,100,206,146,249,80,202,32,83,84,92,174,231],"dayCountConvention": 6,"businessDayConvention": 7,"endOfMonthConvention": 1,"currency": accounts[9],"scalingEffect": 7,"penaltyType": 0,"feeBasis": 0,"contractDealDate": 68570,"statusDate": 257,"initialExchangeDate": 111,"maturityDate": 1,"terminationDate": 2,"purchaseDate": 40,"capitalizationEndDate": 149,"cycleAnchorDateOfInterestPayment": 2014223715,"cycleAnchorDateOfRateReset": 1460,"cycleAnchorDateOfScalingIndex": 901,"cycleAnchorDateOfFee": 66,"notionalPrincipal": 39,"nominalInterestRate": 3,"feeAccrued": 10000,"accruedInterest": 2440588,"rateMultiplier": 32076,"rateSpread": 68569,"feeRate": 899,"nextResetRate": 9,"penaltyRate": 6,"premiumDiscountAtIED": 99,"priceAtPurchaseDate": 254,"cycleOfInterestPayment": {"i": 69,"p": 4,"s": 0,"isSet": false},"cycleOfRateReset": {"i": 364,"p": 1,"s": 0,"isSet": false},"cycleOfScalingIndex": {"i": 255,"p": 4,"s": 0,"isSet": false},"cycleOfFee": {"i": 18,"p": 0,"s": 0,"isSet": true},"lifeCap": 1336,"lifeFloor": 2447,"periodCap": 17,"periodFloor": 368}, 2447, 2440588,{from: accounts[0]});
  });
  it('Should execute computeProtoEventScheduleSegment(Definitions.ContractTerms,uint256,uint256) WHEN FunctionCall!=true,contractTerms.purchaseDate==0,contractTerms.nominalInterestRate==0,contractTerms.capitalizationEndDate==0,contractTerms.terminationDate==0', async () => {
    let result = await contractPAMEngine.computeProtoEventScheduleSegment({"contractType": 7,"calendar": 0,"contractRole": 2,"legalEntityIdRecordCreator": [72,52,36,2,168,96,41,5,189,184,9,191,149,130,83,238,44,229,26,141,125,44,155,151,133,235,213,92,176,41,205,226],"legalEntityIdCounterparty": [202,137,62,186,154,223,223,229,66,50,151,248,135,46,255,75,120,175,160,92,230,252,89,219,172,69,104,29,222,177,78,63],"dayCountConvention": 3,"businessDayConvention": 5,"endOfMonthConvention": 0,"currency": accounts[8],"scalingEffect": 1,"penaltyType": 3,"feeBasis": 1,"contractDealDate": 23,"statusDate": 68569,"initialExchangeDate": 4000,"maturityDate": 141,"terminationDate": 0,"purchaseDate": 0,"capitalizationEndDate": 0,"cycleAnchorDateOfInterestPayment": 2014223716,"cycleAnchorDateOfRateReset": 51,"cycleAnchorDateOfScalingIndex": 109,"cycleAnchorDateOfFee": 71,"notionalPrincipal": 1532892063,"nominalInterestRate": 0,"feeAccrued": 2446,"accruedInterest": 1461000,"rateMultiplier": 2440588,"rateSpread": 65,"feeRate": 400,"nextResetRate": 96,"penaltyRate": 96,"premiumDiscountAtIED": 951,"priceAtPurchaseDate": 364,"cycleOfInterestPayment": {"i": 950,"p": 2,"s": 1,"isSet": true},"cycleOfRateReset": {"i": 2447,"p": 2,"s": 0,"isSet": true},"cycleOfScalingIndex": {"i": 2447,"p": 2,"s": 1,"isSet": true},"cycleOfFee": {"i": 86400,"p": 1,"s": 0,"isSet": false},"lifeCap": 1,"lifeFloor": 1338,"periodCap": 120,"periodFloor": 1461000}, 4900, 255,{from: accounts[0]});
  });
});
